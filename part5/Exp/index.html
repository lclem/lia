<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arithmetic and Boolean expressions 🚧 | Logic in Agda</title><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Arithmetic and Boolean expressions 🚧" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<meta property="og:description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<link rel="canonical" href="/lia/part5/Exp/" />
<meta property="og:url" content="/lia/part5/Exp/" />
<meta property="og:site_name" content="Logic in Agda" />
<script type="application/ld+json">
{"url":"/lia/part5/Exp/","@type":"WebPage","description":"Propositional and fist-order logic developed with the proof assistant Agda.","headline":"Arithmetic and Boolean expressions 🚧","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/lia/assets/main.css">

  <!-- <link rel="stylesheet" href="/lia/assets/custom.css"> --><!-- Mathjax Support -->
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.js"></script>

<script type="text/x-thebe-config">
  {
    bootstrap: true,
    requestKernel: true,
    runAllCells: false,
    selector: "[data-executable]",
    predefinedOutput: false,
    codeMirrorConfig: {
        //theme: "idea",
        language: "agda",
        readOnly: false,
        lineNumbers: true,
        keyMap: "default",
//        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
    },
    kernelOptions: {
        name: "agda",
        kernelName: "agda",
        path: "src/",
        loadFromStore: true,
        persistent: false,
        // notebook server configuration; not needed with binder
        serverSettings: {
              baseUrl: "http://127.0.0.1:8888",
              token: "test-secret",
            },
    },
    binderOptions: {
      repo: "lclem/lia", // need to put here the actual github repo (if it is a fork)
      ref: "main",
      binderUrl: "https://mybinder.org",
      repoProvider: "github",
      savedSession: {
        enabled: true,
        maxAge: 86400, // the max age in seconds to consider re-using a session
        storagePrefix: "thebe-binder-lia-"
      },
    },
  }
</script>

<!-- <script type="text/javascript" src="https://unpkg.com/thebelab@latest"></script> -->

<!-- our own version of the thebe library: -->
<script type="text/javascript" src="/lia/thebe/lib/index.js"></script>

<!-- highlighting for Agda -->
<script src="/lia/codemirror-agda/lib/index.js"></script>

</head>
<body><header class="site-header" id="site-header">

    <div class="wrapper">

        <a class="site-title" href="/lia/">Logic in Agda</a>

        <nav class="site-nav">
            <!-- <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span> -->

            <div class="trigger">
                <a class="page-link" href="/lia/part0/index/">Part 0</a>
                <a class="page-link" href="/lia/part1/index/">Part 1</a>
                <a class="page-link" href="/lia/part2/index/">Part 2</a>
                <a class="page-link" href="/lia/part3/index/">Part 3</a>
                <a class="page-link" href="/lia/part4/index/">Part 4</a>
                <a class="page-link" href="/lia/part5/index/">Part 5</a>

                <span class="kernel-status">
                    <button class="kernel-status-button" onclick="kernel_status_clicked()" title="kernel status"></button>
                    <span id="kernel-messages" class="kernel-messages"></span>
                </span>

                <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;">
                    <!-- display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; -->
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                    <div>
                        <label for="username" style="color: white;">User:</label>
                        <input type="text" placeholder="github username" id="username" name="username">
                        <label for="password" style="color: white;">Password:</label>
                        <input type="password" placeholder="password" id="password" name="password">
                    </div>
                    <div>
                        <label for="loadFromStore" style="color: white;">Load code from browser store:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="loadFromStore" name="loadFromStore">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="baseUrl" style="color: white;">Base URL:</label>
                        <input type="text" placeholder="baseUrl" id="baseUrl" name="baseUrl" value="http://127.0.0.1:8888">
                        <label for="token" style="color: white;">Token:</label>
                        <input type="text" placeholder="token" id="token" name="token" value="test-secret">
                    </div>
                    <div>
                        <label for="useBinder" style="color: white;">Use binder:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="useBinder" name="useBinder">
                            <span class="slider round"></span>
                        </label>
                        <label for="savedSession" style="color: white;">Reuse session:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="savedSession" name="savedSession">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="repository" style="color: white;">Github repo:</label>
                        <input type="text" placeholder="repository" id="repository" name="repository" value="">

                        <label for="ref" style="color: white;">Branch:</label>
                        <input type="text" placeholder="ref" id="ref" name="ref" value="main">

                        <label for="binderUrl" style="color: white;">Binder URL:</label>                        
                        <input type="text" placeholder="binderUrl" id="binderUrl" name="binderUrl" value="https://mybinder.org">
                    </div>
                </div>

                <span class="control-container" id="control-container">
                    <svg class="progress-ring" id="progress-ring" width="30" height="30" title="exercise progress" onclick="kernel_status_clicked()">
                        <circle
                            id="progress-circle"
                            class="progress-ring__circle"
                            stroke="black"
                            stroke-width="2.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                        <circle
                            stroke="lightgray"
                            stroke-width="0.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                    </svg>
                    <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;"></div>
                    <span class="progress-text" id="progress-text" onclick="kernel_status_clicked()"> 0/0 </span>

                    <span id="controls" class="controls">
                        <svg version="1.1" id="run-all" class="run-all" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="15" height="15" viewBox="0 0 163.861 163.861" style="enable-background:new 0 0 163.861 163.861;"
                            xml:space="preserve">
                            <g>
                                <path d="M34.857,3.613C20.084-4.861,8.107,2.081,8.107,19.106v125.637c0,17.042,11.977,23.975,26.75,15.509L144.67,97.275
                                    c14.778-8.477,14.778-22.211,0-30.686L34.857,3.613z"/>
                            </g>
                        </svg>
                    </span>
                </span>
            </div>

            <style>
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 40px;
                    height: 20px;
                }

                /* Hide default HTML checkbox */
                .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }

                /* The slider */
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 2px;
                    /* right: 4px; */
                    bottom: 2px;
                    top: 2px;
                    background-color: white;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                input:checked + .slider {
                    background-color: #2196F3;
                }

                input:focus + .slider {
                    box-shadow: 0 0 1px #2196F3;
                }

                input:checked + .slider:before {
                    -webkit-transform: translateX(18px);
                    -ms-transform: translateX(18px);
                    transform: translateX(18px);
                }

                /* Rounded sliders */
                .slider.round {
                    border-radius: 30px;
                }

                .slider.round:before {
                border-radius: 50%;
                }

                .sidebar input[type=text] {
                    padding: 6px;
                    margin-top: 8px;
                    /* font-size: 17px; */
                    border: none;
                    /* width: 150px; */
                }

                .sidebar {
                    /* height: 100%; */
                    width: 0;
                    position: fixed;
                    z-index: 1000;
                    top: 0;
                    right: 20px;
                    background-color: rgba(17, 17, 17, 0.637);
                    /* overflow-x: hidden; */
                    transition: 0.5s;
                    padding-top: 60px;
                    display: none;
                    margin-top: 60px;
                }

                .sidebar .closebtn {
                    position: absolute;
                    color: white;
                    top: 0;
                    right: 10px;
                    font-size: 24px;
                    margin-left: 20px;
                }

                .progress-ring, .run-all {
                    vertical-align: middle;
                }

                .control-container {
                    transition: all .2s ease-in-out;
                }

                .controls {
                    display: none;
                    opacity: 0;
                    margin-right: 10px;
                    transition: all .5s ease-in-out;
                }

                .run-all:hover {
                    filter: brightness(135%);
                }

                .progress-ring__circle {
                    transition: 0.35s stroke-dashoffset;
                    transform: rotate(-90deg);
                    transform-origin: 50% 50%;
                    visibility: hidden;
                }

                .progress-text {
                    position: relative;
                    top: 0;
                    left: -25px;
                    font-size: 8px;
                    vertical-align: middle;
                    align-self: center;
                }

                .progress-text:hover, .progress-ring:hover, .progress-ring__circle:hover, .run-all {
                    cursor: pointer;
                }
            </style>

            <script>

                //  var storedUsername = localStorage.getItem("username");
                //  localStorage.setItem("username", storedUsername.value);
            
                function doStore(input, key) {

                    if(input.type == "checkbox") {
                        var checked = localStorage.getItem(key);

                        if (checked == "yes") {
                            localStorage.setItem(key, "no");
                        }
                        else {
                            localStorage.setItem(key, "yes");
                        }

                        console.info("checked: ", localStorage.getItem(key));
                    }
                    else {
                        console.info("value: ", input.value);
                        localStorage.setItem(key, input.value);
                    }
                }

                function persistInput(input) {
                    var key = "input-" + input.id;
                    var storedValue = localStorage.getItem(key);
                
                    console.info("Persisting input: ", input);
                
                    // if there is a stored value, use it
                    if (storedValue) {

                        if(input.type != "password") {
                            console.info("restoring value ", storedValue, " for ", input);
                        }

                        if(input.type == "checkbox") {
                            if(storedValue=="yes") {
                                input.setAttribute("checked", "");
                            }
                            else {
                                input.removeAttribute("checked");
                            }
                        }
                        else {
                            input.value = storedValue;
                        }
                    }
                    // if there is no stored value, store the current value
                    else {
                        doStore(input, key);
                    }

                    input.addEventListener('input', function () {
                        console.info("input changed: key = ", key, "; value = ", input);
                        doStore(input, key);
                    });
                    }
                
                    persistInput(document.getElementById("username"));
                    persistInput(document.getElementById("password"));

                    persistInput(document.getElementById("loadFromStore"));

                    persistInput(document.getElementById("baseUrl"));
                    persistInput(document.getElementById("token"));

                    persistInput(document.getElementById("useBinder"));
                    persistInput(document.getElementById("savedSession"));
                    persistInput(document.getElementById("repository"));
                    persistInput(document.getElementById("ref"));
                    persistInput(document.getElementById("binderUrl"));

                    // init
                    document.getElementById("connection_options").style.display = "none";

                    function kernel_status_clicked() {
                
                        console.info("Clicked kernel status");

                        document.getElementById("kernel-messages").style.display = "none";

                        document.getElementById("connection_options").style.width = "750px";
                        document.getElementById("connection_options").style.display = "block";
                        //document.getElementById("header").style.marginLeft = "250px";

                    }

                    function closeNav() {

                        document.getElementById("kernel-messages").style.display = "inline";

                        document.getElementById("connection_options").style.width = "0";
                        document.getElementById("connection_options").style.display = "none";
                        //document.getElementById("header").style.marginLeft= "0";
                    }

                var prevScrollpos = window.pageYOffset;
                var header = document.getElementById("site-header");
                var boxShadow = header.style.boxShadow;

                window.onscroll = function() {
                    var currentScrollPos = window.pageYOffset;
                    // detect scroll down
                    if (prevScrollpos > currentScrollPos) {
                        header.style.top = "0";
                        header.style.boxShadow = boxShadow;
                        prevScrollpos = currentScrollPos;
                    } else if (prevScrollpos <= currentScrollPos) {
                        header.style.top = "-55px";
                        header.style.boxShadow = "none"
                        prevScrollpos = currentScrollPos;
                    }
                }

            let control_container = document.getElementById("control-container");
            let controls = document.getElementById("controls");

            control_container.addEventListener("mouseenter", function(event) {
                controls.style.display = "inline";
//                controls.style.visibility = "visible";
                controls.style.opacity = 1;
                console.info("mouseenter");
            }, false);

            control_container.addEventListener("mouseleave", function(event) {
                // controls.style.visibility = "hidden";
                // controls.style.display = "none";
                controls.style.opacity = 0;
                console.info("mouseleave");
            }, false);

            </script>
            
        </nav>

    </div>

</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

    <header class="post-header">
        <h1 class="post-title">Arithmetic and Boolean expressions 🚧</h1>
    </header>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

  
    <div class="post-content">
        <h2>Contents</h2>    
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#arithmetic-expressions">Arithmetic expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#variables">Variables</a></li>
<li class="toc-entry toc-h2"><a href="#syntax-of-expressions">Syntax of expressions</a></li>
<li class="toc-entry toc-h2"><a href="#environments">Environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#boolean-expressions">Boolean expressions</a></li>
<li class="toc-entry toc-h1"><a href="#denotational-semantics">Denotational semantics</a></li>
<li class="toc-entry toc-h1"><a href="#free-variables">Free variables</a></li>
<li class="toc-entry toc-h1"><a href="#substitution">Substitution</a></li>
<li class="toc-entry toc-h1"><a href="#contextual-equivalence-and-full-abstraction">Contextual equivalence and full abstraction</a></li>
<li class="toc-entry toc-h1"><a href="#small-steps-operational-semantics">Small-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#global-environment">Global environment</a></li>
<li class="toc-entry toc-h2"><a href="#local-environments">Local environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#big-steps-operational-semantics">Big-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#evaluator-interpreter">Evaluator (interpreter)</a></li>
<li class="toc-entry toc-h2"><a href="#evaluation-is-deterministic">Evaluation is deterministic</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-the-semantics">Agreement of the semantics</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-numbers">Binary numbers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#lsd">LSD</a></li>
<li class="toc-entry toc-h2"><a href="#msd">MSD</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-lsd-and-msd">Agreement of LSD and MSD</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-expressions">Binary expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#syntax">Syntax</a></li>
<li class="toc-entry toc-h2"><a href="#denotational-semantics-1">Denotational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#small-steps-operational-semantics-1">Small-steps operational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#agreement">Agreement</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-first-proof">Strong normalisation (first proof)</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-second-proof">Strong normalisation (second proof)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#references">References</a></li>
<li class="toc-entry toc-h1"><a href="#solutions">Solutions</a></li>
</ul><pre class="Agda"><a id="60" class="Symbol">{-#</a> <a id="64" class="Keyword">OPTIONS</a> <a id="72" class="Pragma">--allow-unsolved-metas</a> <a id="95" class="Symbol">#-}</a>
<a id="99" class="Keyword">module</a> <a id="106" href="/lia/part5/Exp/" class="Module">part5.Exp</a> <a id="116" class="Keyword">where</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="/lia/part0/index/" class="Module">part0.index</a> <a id="146" class="Keyword">hiding</a> <a id="153" class="Symbol">(</a><a id="154" href="/lia/part0/Naturals/#6974" class="Datatype">AExp</a><a id="158" class="Symbol">;</a> <a id="160" href="/lia/part0/Naturals/#7085" class="Function Operator">A⟦_⟧</a><a id="164" class="Symbol">;</a> <a id="166" href="/lia/part0/List/#23605" class="Function Operator">_≈_</a><a id="169" class="Symbol">)</a> <a id="171" class="Keyword">renaming</a> <a id="180" class="Symbol">(</a><a id="181" href="/lia/part0/Naturals/#266" class="Primitive Operator">_+_</a> <a id="185" class="Symbol">to</a> <a id="Nat._+_"></a><a id="188" href="/lia/part5/Exp/#188" class="Primitive Operator">_+ℕ_</a><a id="192" class="Symbol">;</a> <a id="194" href="/lia/part0/Naturals/#288" class="Primitive Operator">_*_</a> <a id="198" class="Symbol">to</a> <a id="Nat._*_"></a><a id="201" href="/lia/part5/Exp/#201" class="Primitive Operator">_·ℕ_</a><a id="205" class="Symbol">;</a> <a id="207" href="/lia/part0/Naturals/#798" class="Datatype Operator">_≤_</a> <a id="211" class="Symbol">to</a> <a id="_≤_"></a><a id="214" href="/lia/part5/Exp/#214" class="Datatype Operator">_≤ℕ_</a><a id="218" class="Symbol">)</a> <a id="220" class="Keyword">public</a></pre>

<h1 id="arithmetic-expressions">
<a class="anchor" href="#arithmetic-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arithmetic expressions</h1>

<p>We develop an eager denotational and operational semantics for a simple
language of arithmetic expressions, and we prove that they agree.</p>

<h2 id="variables">
<a class="anchor" href="#variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variables</h2>

<p>We represent <em>variable names</em> as natural Number. Any countable domain
with decidable equality (such as strings) would work here</p>

<pre class="Agda"><a id="VarName"></a><a id="544" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="552" class="Symbol">=</a> <a id="554" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="x₀"></a><a id="557" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="560" class="Symbol">:</a> <a id="562" href="/lia/part5/Exp/#544" class="Function">VarName</a>
<a id="570" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="573" class="Symbol">=</a> <a id="575" class="Number">0</a>

<a id="578" class="Keyword">private</a> <a id="586" class="Keyword">variable</a> <a id="595" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="597" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="599" href="/lia/part5/Exp/#599" class="Generalizable">z</a> <a id="601" class="Symbol">:</a> <a id="603" href="/lia/part5/Exp/#544" class="Function">VarName</a></pre>

<h2 id="syntax-of-expressions">
<a class="anchor" href="#syntax-of-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax of expressions</h2>

<p>We define a minimalistic language of arithmetic expressions comprising
variables and a let assignment construct.</p>

<pre class="Agda"><a id="760" class="Keyword">data</a> <a id="AExp"></a><a id="765" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="770" class="Symbol">:</a> <a id="772" class="PrimitiveType">Set</a> <a id="776" class="Keyword">where</a>
  <a id="AExp.Num"></a><a id="784" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="788" class="Symbol">:</a> <a id="790" class="Symbol">(</a><a id="791" href="/lia/part5/Exp/#791" class="Bound">n</a> <a id="793" class="Symbol">:</a> <a id="795" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="796" class="Symbol">)</a> <a id="798" class="Symbol">→</a> <a id="800" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
  <a id="AExp.Var"></a><a id="807" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="811" class="Symbol">:</a> <a id="813" class="Symbol">(</a><a id="814" href="/lia/part5/Exp/#814" class="Bound">x</a> <a id="816" class="Symbol">:</a> <a id="818" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="825" class="Symbol">)</a> <a id="827" class="Symbol">→</a> <a id="829" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
  <a id="AExp.Add"></a><a id="836" href="/lia/part5/Exp/#836" class="InductiveConstructor">Add</a> <a id="840" class="Symbol">:</a> <a id="842" class="Symbol">(</a><a id="843" href="/lia/part5/Exp/#843" class="Bound">e</a> <a id="845" href="/lia/part5/Exp/#845" class="Bound">f</a> <a id="847" class="Symbol">:</a> <a id="849" href="/lia/part5/Exp/#765" class="Datatype">AExp</a><a id="853" class="Symbol">)</a> <a id="855" class="Symbol">→</a> <a id="857" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
  <a id="AExp.Mul"></a><a id="864" href="/lia/part5/Exp/#864" class="InductiveConstructor">Mul</a> <a id="868" class="Symbol">:</a> <a id="870" class="Symbol">(</a><a id="871" href="/lia/part5/Exp/#871" class="Bound">e</a> <a id="873" href="/lia/part5/Exp/#873" class="Bound">f</a> <a id="875" class="Symbol">:</a> <a id="877" href="/lia/part5/Exp/#765" class="Datatype">AExp</a><a id="881" class="Symbol">)</a> <a id="883" class="Symbol">→</a> <a id="885" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
  <a id="AExp.Let"></a><a id="892" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="896" class="Symbol">:</a> <a id="898" class="Symbol">(</a><a id="899" href="/lia/part5/Exp/#899" class="Bound">x</a> <a id="901" class="Symbol">:</a> <a id="903" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="910" class="Symbol">)</a> <a id="912" class="Symbol">(</a><a id="913" href="/lia/part5/Exp/#913" class="Bound">e</a> <a id="915" href="/lia/part5/Exp/#915" class="Bound">f</a> <a id="917" class="Symbol">:</a> <a id="919" href="/lia/part5/Exp/#765" class="Datatype">AExp</a><a id="923" class="Symbol">)</a> <a id="925" class="Symbol">→</a> <a id="927" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>

<a id="933" class="Keyword">private</a>
  <a id="943" class="Keyword">variable</a>
    <a id="956" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="958" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="961" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="963" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="966" href="/lia/part5/Exp/#966" class="Generalizable">g</a> <a id="968" class="Symbol">:</a> <a id="970" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
    <a id="979" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="981" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="983" class="Symbol">:</a> <a id="985" href="/lia/part0/Naturals/#301" class="Function">ℕ</a></pre>

<p>For example, the following expression adds one to a variable (called
10). This is pure syntax so far, no calculation is being performed.</p>

<pre class="Agda"><a id="add-one"></a><a id="1134" href="/lia/part5/Exp/#1134" class="Function">add-one</a> <a id="1142" class="Symbol">:</a> <a id="1144" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
<a id="1149" href="/lia/part5/Exp/#1134" class="Function">add-one</a> <a id="1157" class="Symbol">=</a> <a id="1159" href="/lia/part5/Exp/#836" class="InductiveConstructor">Add</a> <a id="1163" class="Symbol">(</a><a id="1164" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="1168" class="Number">10</a><a id="1170" class="Symbol">)</a> <a id="1172" class="Symbol">(</a><a id="1173" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="1177" class="Number">1</a><a id="1178" class="Symbol">)</a></pre>
<pre class="Agda"><a id="1189" class="Keyword">pattern</a> <a id="$_"></a><a id="1197" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$_</a> <a id="1200" href="/lia/part5/Exp/#1208" class="Bound">n</a> <a id="1202" class="Symbol">=</a> <a id="1204" class="InductiveConstructor">Num</a> <a id="1208" href="/lia/part5/Exp/#1208" class="Bound">n</a>
<a id="1210" class="Keyword">pattern</a> <a id="`_"></a><a id="1218" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`_</a> <a id="1221" href="/lia/part5/Exp/#1229" class="Bound">x</a> <a id="1223" class="Symbol">=</a> <a id="1225" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="1229" href="/lia/part5/Exp/#1229" class="Bound">x</a>
<a id="1231" class="Keyword">pattern</a> <a id="_+_"></a><a id="1239" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">_+_</a> <a id="1243" href="/lia/part5/Exp/#1253" class="Bound">x</a> <a id="1245" href="/lia/part5/Exp/#1255" class="Bound">y</a> <a id="1247" class="Symbol">=</a> <a id="1249" href="/lia/part5/Exp/#836" class="InductiveConstructor">Add</a> <a id="1253" href="/lia/part5/Exp/#1253" class="Bound">x</a> <a id="1255" href="/lia/part5/Exp/#1255" class="Bound">y</a>
<a id="1257" class="Keyword">pattern</a> <a id="_·_"></a><a id="1265" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">_·_</a> <a id="1269" href="/lia/part5/Exp/#1279" class="Bound">x</a> <a id="1271" href="/lia/part5/Exp/#1281" class="Bound">y</a> <a id="1273" class="Symbol">=</a> <a id="1275" href="/lia/part5/Exp/#864" class="InductiveConstructor">Mul</a> <a id="1279" href="/lia/part5/Exp/#1279" class="Bound">x</a> <a id="1281" href="/lia/part5/Exp/#1281" class="Bound">y</a>

<a id="1284" class="Keyword">infix</a> <a id="1290" class="Number">50</a> <a id="1293" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$_</a> <a id="1296" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`_</a>
<a id="1299" class="Keyword">infixr</a> <a id="1306" class="Number">30</a> <a id="1309" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">_·_</a>
<a id="1313" class="Keyword">infixl</a> <a id="1320" class="Number">25</a> <a id="1323" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">_+_</a></pre>
<pre class="Agda"><a id="add-one′"></a><a id="1336" href="/lia/part5/Exp/#1336" class="Function">add-one′</a> <a id="1345" class="Symbol">:</a> <a id="1347" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>
<a id="1352" href="/lia/part5/Exp/#1336" class="Function">add-one′</a> <a id="1361" class="Symbol">=</a> <a id="1363" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="1365" class="Number">10</a> <a id="1368" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="1370" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="1372" class="Number">1</a></pre>

<h2 id="environments">
<a class="anchor" href="#environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environments</h2>

<p>In order to represent the value of free variables, we use environments.</p>

<pre class="Agda"><a id="Env"></a><a id="1473" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="1477" class="Symbol">=</a> <a id="1479" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="1487" class="Symbol">→</a> <a id="1489" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="1492" class="Keyword">private</a> <a id="1500" class="Keyword">variable</a> <a id="1509" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="1511" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a> <a id="1514" class="Symbol">:</a> <a id="1516" href="/lia/part5/Exp/#1473" class="Function">Env</a></pre>

<p>The following environment assigns value <code class="language-plaintext highlighter-rouge">200</code> to the variable named
<code class="language-plaintext highlighter-rouge">10</code>, and value <code class="language-plaintext highlighter-rouge">40</code> to every other variable.</p>

<pre class="Agda"><a id="ϱ0"></a><a id="1644" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="1647" class="Symbol">:</a> <a id="1649" href="/lia/part5/Exp/#1473" class="Function">Env</a>
<a id="1653" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="1656" class="Number">10</a> <a id="1659" class="Symbol">=</a> <a id="1661" class="Number">200</a>
<a id="1665" href="/lia/part5/Exp/#1644" class="CatchallClause Function">ϱ0</a><a id="1667" class="CatchallClause"> </a><a id="1668" class="CatchallClause Symbol">_</a> <a id="1670" class="Symbol">=</a> <a id="1672" class="Number">40</a></pre>

<h1 id="boolean-expressions">
<a class="anchor" href="#boolean-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Boolean expressions</h1>

<p>On top of arithmetic expressions we can build a simple language of
Boolean expressions. An element in <code class="language-plaintext highlighter-rouge">BExp</code> is a boolean combination of
atomic expressions of the form <code class="language-plaintext highlighter-rouge">Leq e f</code>, where <code class="language-plaintext highlighter-rouge">e</code> and <code class="language-plaintext highlighter-rouge">f</code> are
arithmetic expressions.</p>

<pre class="Agda"><a id="1933" class="Keyword">data</a> <a id="BExp"></a><a id="1938" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="1943" class="Symbol">:</a> <a id="1945" class="PrimitiveType">Set</a> <a id="1949" class="Keyword">where</a>
  <a id="BExp.tt"></a><a id="1957" href="/lia/part5/Exp/#1957" class="InductiveConstructor">tt</a> <a id="1960" class="Symbol">:</a> <a id="1962" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>
  <a id="BExp.ff"></a><a id="1969" href="/lia/part5/Exp/#1969" class="InductiveConstructor">ff</a> <a id="1972" class="Symbol">:</a> <a id="1974" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>
  <a id="BExp.Not"></a><a id="1981" href="/lia/part5/Exp/#1981" class="InductiveConstructor">Not</a> <a id="1985" class="Symbol">:</a> <a id="1987" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="1992" class="Symbol">→</a> <a id="1994" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>
  <a id="BExp.Or"></a><a id="2001" href="/lia/part5/Exp/#2001" class="InductiveConstructor">Or</a> <a id="2004" class="Symbol">:</a> <a id="2006" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="2011" class="Symbol">→</a> <a id="2013" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="2018" class="Symbol">→</a> <a id="2020" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>
  <a id="BExp.And"></a><a id="2027" href="/lia/part5/Exp/#2027" class="InductiveConstructor">And</a> <a id="2031" class="Symbol">:</a> <a id="2033" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="2038" class="Symbol">→</a> <a id="2040" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="2045" class="Symbol">→</a> <a id="2047" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>
  <a id="BExp.Leq"></a><a id="2054" href="/lia/part5/Exp/#2054" class="InductiveConstructor">Leq</a> <a id="2058" class="Symbol">:</a> <a id="2060" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="2065" class="Symbol">→</a> <a id="2067" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="2072" class="Symbol">→</a> <a id="2074" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a>

<a id="2080" class="Keyword">pattern</a> <a id="_∨_"></a><a id="2088" href="/lia/part5/Exp/#2088" class="InductiveConstructor Operator">_∨_</a> <a id="2092" href="/lia/part5/Exp/#2103" class="Bound">b₀</a> <a id="2095" href="/lia/part5/Exp/#2106" class="Bound">b₁</a> <a id="2098" class="Symbol">=</a> <a id="2100" href="/lia/part5/Exp/#2001" class="InductiveConstructor">Or</a> <a id="2103" href="/lia/part5/Exp/#2103" class="Bound">b₀</a> <a id="2106" href="/lia/part5/Exp/#2106" class="Bound">b₁</a>
<a id="2109" class="Keyword">pattern</a> <a id="_∧_"></a><a id="2117" href="/lia/part5/Exp/#2117" class="InductiveConstructor Operator">_∧_</a> <a id="2121" href="/lia/part5/Exp/#2133" class="Bound">b₀</a> <a id="2124" href="/lia/part5/Exp/#2136" class="Bound">b₁</a> <a id="2127" class="Symbol">=</a> <a id="2129" href="/lia/part5/Exp/#2027" class="InductiveConstructor">And</a> <a id="2133" href="/lia/part5/Exp/#2133" class="Bound">b₀</a> <a id="2136" href="/lia/part5/Exp/#2136" class="Bound">b₁</a>
<a id="2139" class="Keyword">pattern</a> <a id="¬_"></a><a id="2147" href="/lia/part5/Exp/#2147" class="InductiveConstructor Operator">¬_</a> <a id="2150" href="/lia/part5/Exp/#2158" class="Bound">b</a> <a id="2152" class="Symbol">=</a> <a id="2154" href="/lia/part5/Exp/#1981" class="InductiveConstructor">Not</a> <a id="2158" href="/lia/part5/Exp/#2158" class="Bound">b</a>
<a id="2160" class="Keyword">pattern</a> <a id="_≤_"></a><a id="2168" href="/lia/part5/Exp/#2168" class="InductiveConstructor Operator">_≤_</a> <a id="2172" href="/lia/part5/Exp/#2182" class="Bound">e</a> <a id="2174" href="/lia/part5/Exp/#2184" class="Bound">f</a> <a id="2176" class="Symbol">=</a> <a id="2178" href="/lia/part5/Exp/#2054" class="InductiveConstructor">Leq</a> <a id="2182" href="/lia/part5/Exp/#2182" class="Bound">e</a> <a id="2184" href="/lia/part5/Exp/#2184" class="Bound">f</a></pre>

<h1 id="denotational-semantics">
<a class="anchor" href="#denotational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h1>

<pre class="Agda"><a id="2221" class="Keyword">infix</a> <a id="2227" class="Number">15</a> <a id="2230" href="/lia/part5/Exp/#2249" class="Function Operator">⟦_⟧_</a> <a id="2235" href="/lia/part5/Exp/#2410" class="Function Operator">A⟦_⟧_</a>
<a id="2241" class="Keyword">private</a> <a id="⟦_⟧_"></a><a id="2249" href="/lia/part5/Exp/#2249" class="Function Operator">⟦_⟧_</a> <a id="2254" class="Symbol">:</a> <a id="2256" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="2261" class="Symbol">→</a> <a id="2263" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="2267" class="Symbol">→</a> <a id="2269" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="2271" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2273" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="2275" href="/lia/part5/Exp/#2275" class="Bound">n</a> <a id="2277" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2279" href="/lia/part5/Exp/#2279" class="Bound">ϱ</a> <a id="2281" class="Symbol">=</a> <a id="2283" href="/lia/part5/Exp/#2275" class="Bound">n</a>
<a id="2285" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2287" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="2289" href="/lia/part5/Exp/#2289" class="Bound">x</a> <a id="2291" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2293" href="/lia/part5/Exp/#2293" class="Bound">ϱ</a> <a id="2295" class="Symbol">=</a> <a id="2297" href="/lia/part5/Exp/#2293" class="Bound">ϱ</a> <a id="2299" href="/lia/part5/Exp/#2289" class="Bound">x</a>
<a id="2301" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2303" href="/lia/part5/Exp/#2303" class="Bound">e</a> <a id="2305" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="2307" href="/lia/part5/Exp/#2307" class="Bound">f</a> <a id="2309" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2311" href="/lia/part5/Exp/#2311" class="Bound">ϱ</a> <a id="2313" class="Symbol">=</a> <a id="2315" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2317" href="/lia/part5/Exp/#2303" class="Bound">e</a> <a id="2319" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2321" href="/lia/part5/Exp/#2311" class="Bound">ϱ</a> <a id="2323" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="2326" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2328" href="/lia/part5/Exp/#2307" class="Bound">f</a> <a id="2330" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2332" href="/lia/part5/Exp/#2311" class="Bound">ϱ</a>
<a id="2334" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2336" href="/lia/part5/Exp/#2336" class="Bound">e</a> <a id="2338" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="2340" href="/lia/part5/Exp/#2340" class="Bound">f</a> <a id="2342" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2344" href="/lia/part5/Exp/#2344" class="Bound">ϱ</a> <a id="2346" class="Symbol">=</a> <a id="2348" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2350" href="/lia/part5/Exp/#2336" class="Bound">e</a> <a id="2352" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2354" href="/lia/part5/Exp/#2344" class="Bound">ϱ</a> <a id="2356" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="2359" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2361" href="/lia/part5/Exp/#2340" class="Bound">f</a> <a id="2363" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2365" href="/lia/part5/Exp/#2344" class="Bound">ϱ</a>
<a id="2367" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2369" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="2373" href="/lia/part5/Exp/#2373" class="Bound">x</a> <a id="2375" href="/lia/part5/Exp/#2375" class="Bound">e</a> <a id="2377" href="/lia/part5/Exp/#2377" class="Bound">f</a> <a id="2379" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2381" href="/lia/part5/Exp/#2381" class="Bound">ϱ</a> <a id="2383" class="Symbol">=</a> <a id="2385" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2387" href="/lia/part5/Exp/#2377" class="Bound">f</a> <a id="2389" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2391" href="/lia/part5/Exp/#2381" class="Bound">ϱ</a> <a id="2393" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="2395" href="/lia/part5/Exp/#2373" class="Bound">x</a> <a id="2397" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="2399" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2401" href="/lia/part5/Exp/#2375" class="Bound">e</a> <a id="2403" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2405" href="/lia/part5/Exp/#2381" class="Bound">ϱ</a> <a id="2407" href="/lia/part0/Functions/#568" class="Function Operator">]</a>

<a id="A⟦_⟧_"></a><a id="2410" href="/lia/part5/Exp/#2410" class="Function Operator">A⟦_⟧_</a> <a id="2416" class="Symbol">=</a> <a id="2418" href="/lia/part5/Exp/#2249" class="Function Operator">⟦_⟧_</a></pre>

<p>With our denotational semantics for expressions we can check (by
computation) the value of concrete expressions.</p>

<pre class="Agda"><a id="2546" href="/lia/part5/Exp/#2546" class="Function">_</a> <a id="2548" class="Symbol">:</a> <a id="2550" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="2552" href="/lia/part5/Exp/#1134" class="Function">add-one</a> <a id="2560" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="2562" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="2565" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2567" class="Number">201</a>
<a id="2571" class="Symbol">_</a> <a id="2573" class="Symbol">=</a> <a id="2575" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<div class="exercisebox">

  <dl>
    <dt><span id="exercise:exercise-BExp-semantics" class="pandoc-numbering-text exercise"><strong>Exercise 1</strong></span></dt>
    <dd>Write the denotational semantics of Boolean expressions.</dd>
  </dl>

  <pre class="Agda"><a id="2701" class="Keyword">infix</a> <a id="2707" class="Number">101</a> <a id="2711" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦_⟧_</a>
<a id="B⟦_⟧_"></a><a id="2717" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦_⟧_</a> <a id="2723" class="Symbol">:</a> <a id="2725" href="/lia/part5/Exp/#1938" class="Datatype">BExp</a> <a id="2730" class="Symbol">→</a> <a id="2732" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="2736" class="Symbol">→</a> <a id="2738" href="/lia/part0/Booleans/#259" class="Datatype">𝔹</a></pre>
  <pre data-executable="true" data-language="agda" id="part5.Exp.BExp-semantics">

module part5.Exp.BExp-semantics where
open import TypeOf
open part5.Exp as Exp


B⟦_⟧_ : typeOf B⟦_⟧_-orig
-- BEGIN SOLUTION
B⟦_⟧_ = ?</pre>

  <p><em>Hint:</em> In the <code class="language-plaintext highlighter-rouge">Leq</code> case you will need <code class="language-plaintext highlighter-rouge">_≤?_</code>. <span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

  <!--
::::::: {.solutionlink}
[solution](#exercise-BExp-semantics-solution)
:::::::
-->

</div>

<h1 id="free-variables">
<a class="anchor" href="#free-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Free variables</h1>

<pre class="Agda"><a id="fv"></a><a id="3174" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3177" class="Symbol">:</a> <a id="3179" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="3184" class="Symbol">→</a> <a id="3186" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3194" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="3196" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3199" class="Symbol">(</a><a id="3200" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="3202" href="/lia/part5/Exp/#3202" class="Bound">n</a><a id="3203" class="Symbol">)</a> <a id="3205" class="Symbol">=</a> <a id="3207" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="3209" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3212" class="Symbol">(</a><a id="3213" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="3215" href="/lia/part5/Exp/#3215" class="Bound">x</a><a id="3216" class="Symbol">)</a> <a id="3218" class="Symbol">=</a> <a id="3220" href="/lia/part0/List/#1792" class="Function">[</a> <a id="3222" href="/lia/part5/Exp/#3215" class="Bound">x</a> <a id="3224" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="3226" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3229" class="Symbol">(</a><a id="3230" href="/lia/part5/Exp/#3230" class="Bound">e</a> <a id="3232" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="3234" href="/lia/part5/Exp/#3234" class="Bound">f</a><a id="3235" class="Symbol">)</a> <a id="3237" class="Symbol">=</a> <a id="3239" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3242" href="/lia/part5/Exp/#3230" class="Bound">e</a> <a id="3244" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3247" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3250" href="/lia/part5/Exp/#3234" class="Bound">f</a>
<a id="3252" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3255" class="Symbol">(</a><a id="3256" href="/lia/part5/Exp/#3256" class="Bound">e</a> <a id="3258" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="3260" href="/lia/part5/Exp/#3260" class="Bound">f</a><a id="3261" class="Symbol">)</a> <a id="3263" class="Symbol">=</a> <a id="3265" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3268" href="/lia/part5/Exp/#3256" class="Bound">e</a> <a id="3270" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3273" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3276" href="/lia/part5/Exp/#3260" class="Bound">f</a>
<a id="3278" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3281" class="Symbol">(</a><a id="3282" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="3286" href="/lia/part5/Exp/#3286" class="Bound">x</a> <a id="3288" href="/lia/part5/Exp/#3288" class="Bound">e</a> <a id="3290" href="/lia/part5/Exp/#3290" class="Bound">f</a><a id="3291" class="Symbol">)</a> <a id="3293" class="Symbol">=</a> <a id="3295" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3298" href="/lia/part5/Exp/#3288" class="Bound">e</a> <a id="3300" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3303" href="/lia/part0/List/#4927" class="Function">remove</a> <a id="3310" href="/lia/part5/Exp/#3286" class="Bound">x</a> <a id="3312" class="Symbol">(</a><a id="3313" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3316" href="/lia/part5/Exp/#3290" class="Bound">f</a><a id="3317" class="Symbol">)</a>

<a id="closed"></a><a id="3320" href="/lia/part5/Exp/#3320" class="Function">closed</a> <a id="3327" class="Symbol">:</a> <a id="3329" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="3334" class="Symbol">→</a> <a id="3336" class="PrimitiveType">Set</a>
<a id="3340" href="/lia/part5/Exp/#3320" class="Function">closed</a> <a id="3347" href="/lia/part5/Exp/#3347" class="Bound">e</a> <a id="3349" class="Symbol">=</a> <a id="3351" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3354" href="/lia/part5/Exp/#3347" class="Bound">e</a> <a id="3356" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3358" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>

<a id="fv-lemma"></a><a id="3361" href="/lia/part5/Exp/#3361" class="Function">fv-lemma</a> <a id="3370" class="Symbol">:</a> <a id="3372" class="Symbol">∀</a> <a id="3374" href="/lia/part5/Exp/#3374" class="Bound">ϱ₀</a> <a id="3377" href="/lia/part5/Exp/#3377" class="Bound">ϱ₁</a> <a id="3380" href="/lia/part5/Exp/#3380" class="Bound">e</a> <a id="3382" class="Symbol">→</a> <a id="3384" href="/lia/part0/List/#19150" class="Function">Agree</a> <a id="3390" href="/lia/part5/Exp/#3374" class="Bound">ϱ₀</a> <a id="3393" href="/lia/part5/Exp/#3377" class="Bound">ϱ₁</a> <a id="3396" class="Symbol">(</a><a id="3397" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3400" href="/lia/part5/Exp/#3380" class="Bound">e</a><a id="3401" class="Symbol">)</a> <a id="3403" class="Symbol">→</a> <a id="3405" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="3407" href="/lia/part5/Exp/#3380" class="Bound">e</a> <a id="3409" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="3411" href="/lia/part5/Exp/#3374" class="Bound">ϱ₀</a> <a id="3414" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3416" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="3418" href="/lia/part5/Exp/#3380" class="Bound">e</a> <a id="3420" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="3422" href="/lia/part5/Exp/#3377" class="Bound">ϱ₁</a>
<a id="3425" href="/lia/part5/Exp/#3361" class="Function">fv-lemma</a> <a id="3434" class="Symbol">=</a> <a id="3436" class="Symbol">{!   !}</a>

<a id="3445" class="Comment">-- all named variables occurring in the expression</a>
<a id="vars"></a><a id="3496" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3501" class="Symbol">:</a> <a id="3503" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="3508" class="Symbol">→</a> <a id="3510" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3518" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="3520" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3525" class="Symbol">(</a><a id="3526" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="3528" href="/lia/part5/Exp/#3528" class="Bound">n</a><a id="3529" class="Symbol">)</a> <a id="3531" class="Symbol">=</a> <a id="3533" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="3535" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3540" class="Symbol">(</a><a id="3541" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="3543" href="/lia/part5/Exp/#3543" class="Bound">x</a><a id="3544" class="Symbol">)</a> <a id="3546" class="Symbol">=</a> <a id="3548" href="/lia/part0/List/#1792" class="Function">[</a> <a id="3550" href="/lia/part5/Exp/#3543" class="Bound">x</a> <a id="3552" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="3554" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3559" class="Symbol">(</a><a id="3560" href="/lia/part5/Exp/#3560" class="Bound">e</a> <a id="3562" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="3564" href="/lia/part5/Exp/#3564" class="Bound">f</a><a id="3565" class="Symbol">)</a> <a id="3567" class="Symbol">=</a> <a id="3569" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3572" href="/lia/part5/Exp/#3560" class="Bound">e</a> <a id="3574" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3577" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3580" href="/lia/part5/Exp/#3564" class="Bound">f</a>
<a id="3582" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3587" class="Symbol">(</a><a id="3588" href="/lia/part5/Exp/#3588" class="Bound">e</a> <a id="3590" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="3592" href="/lia/part5/Exp/#3592" class="Bound">f</a><a id="3593" class="Symbol">)</a> <a id="3595" class="Symbol">=</a> <a id="3597" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3600" href="/lia/part5/Exp/#3588" class="Bound">e</a> <a id="3602" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3605" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3608" href="/lia/part5/Exp/#3592" class="Bound">f</a>
<a id="3610" href="/lia/part5/Exp/#3496" class="Function">vars</a> <a id="3615" class="Symbol">(</a><a id="3616" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="3620" href="/lia/part5/Exp/#3620" class="Bound">x</a> <a id="3622" href="/lia/part5/Exp/#3622" class="Bound">e</a> <a id="3624" href="/lia/part5/Exp/#3624" class="Bound">f</a><a id="3625" class="Symbol">)</a> <a id="3627" class="Symbol">=</a> <a id="3629" href="/lia/part0/List/#1792" class="Function">[</a> <a id="3631" href="/lia/part5/Exp/#3620" class="Bound">x</a> <a id="3633" href="/lia/part0/List/#2043" class="Function Operator">]</a> <a id="3635" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3638" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3641" href="/lia/part5/Exp/#3622" class="Bound">e</a> <a id="3643" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="3646" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="3649" href="/lia/part5/Exp/#3624" class="Bound">f</a></pre>

<h1 id="substitution">
<a class="anchor" href="#substitution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substitution</h1>

<p>We say that two arithmetic expression are <em>contextually equivalent</em> if
they provide the same result whenever they are plugged in the same
context.</p>

<pre class="Agda"><a id="3824" class="Keyword">infix</a> <a id="3830" class="Number">101</a> <a id="3834" href="/lia/part5/Exp/#3842" class="Function Operator">_A[_↦_]</a>
<a id="_A[_↦_]"></a><a id="3842" href="/lia/part5/Exp/#3842" class="Function Operator">_A[_↦_]</a> <a id="3850" class="Symbol">:</a> <a id="3852" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="3857" class="Symbol">→</a> <a id="3859" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3867" class="Symbol">→</a> <a id="3869" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="3874" class="Symbol">→</a> <a id="3876" href="/lia/part5/Exp/#765" class="Datatype">AExp</a>

<a id="3882" class="Symbol">(</a><a id="3883" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="3885" href="/lia/part5/Exp/#3885" class="Bound">n</a><a id="3886" class="Symbol">)</a> <a id="3888" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="3891" href="/lia/part5/Exp/#3891" class="Bound">x</a> <a id="3893" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="3895" href="/lia/part5/Exp/#3895" class="Bound">g</a> <a id="3897" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="3899" class="Symbol">=</a> <a id="3901" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="3903" href="/lia/part5/Exp/#3885" class="Bound">n</a>

<a id="3906" class="Symbol">(</a><a id="3907" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="3909" href="/lia/part5/Exp/#3909" class="Bound">y</a><a id="3910" class="Symbol">)</a> <a id="3912" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="3915" href="/lia/part5/Exp/#3915" class="Bound">x</a> <a id="3917" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="3919" href="/lia/part5/Exp/#3919" class="Bound">g</a> <a id="3921" href="/lia/part5/Exp/#3842" class="Function Operator">]</a>
  <a id="3925" class="Keyword">with</a> <a id="3930" href="/lia/part5/Exp/#3915" class="Bound">x</a> <a id="3932" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="3935" href="/lia/part5/Exp/#3909" class="Bound">y</a>
<a id="3937" class="Symbol">...</a> <a id="3941" class="Symbol">|</a> <a id="3943" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="3947" class="Symbol">_</a> <a id="3949" class="Symbol">=</a> <a id="3951" class="Bound">g</a>
<a id="3953" class="Symbol">...</a> <a id="3957" class="Symbol">|</a> <a id="3959" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="3962" class="Symbol">_</a> <a id="3964" class="Symbol">=</a> <a id="3966" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="3968" class="Bound">y</a>

<a id="3971" class="Symbol">(</a><a id="3972" href="/lia/part5/Exp/#3972" class="Bound">e</a> <a id="3974" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="3976" href="/lia/part5/Exp/#3976" class="Bound">f</a><a id="3977" class="Symbol">)</a> <a id="3979" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="3982" href="/lia/part5/Exp/#3982" class="Bound">x</a> <a id="3984" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="3986" href="/lia/part5/Exp/#3986" class="Bound">g</a> <a id="3988" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="3990" class="Symbol">=</a> <a id="3992" href="/lia/part5/Exp/#3972" class="Bound">e</a> <a id="3994" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="3997" href="/lia/part5/Exp/#3982" class="Bound">x</a> <a id="3999" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4001" href="/lia/part5/Exp/#3986" class="Bound">g</a> <a id="4003" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="4005" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="4007" href="/lia/part5/Exp/#3976" class="Bound">f</a> <a id="4009" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4012" href="/lia/part5/Exp/#3982" class="Bound">x</a> <a id="4014" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4016" href="/lia/part5/Exp/#3986" class="Bound">g</a> <a id="4018" href="/lia/part5/Exp/#3842" class="Function Operator">]</a>
<a id="4020" class="Symbol">(</a><a id="4021" href="/lia/part5/Exp/#4021" class="Bound">e</a> <a id="4023" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="4025" href="/lia/part5/Exp/#4025" class="Bound">f</a><a id="4026" class="Symbol">)</a> <a id="4028" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4031" href="/lia/part5/Exp/#4031" class="Bound">x</a> <a id="4033" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4035" href="/lia/part5/Exp/#4035" class="Bound">g</a> <a id="4037" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="4039" class="Symbol">=</a> <a id="4041" href="/lia/part5/Exp/#4021" class="Bound">e</a> <a id="4043" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4046" href="/lia/part5/Exp/#4031" class="Bound">x</a> <a id="4048" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4050" href="/lia/part5/Exp/#4035" class="Bound">g</a> <a id="4052" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="4054" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="4056" href="/lia/part5/Exp/#4025" class="Bound">f</a> <a id="4058" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4061" href="/lia/part5/Exp/#4031" class="Bound">x</a> <a id="4063" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4065" href="/lia/part5/Exp/#4035" class="Bound">g</a> <a id="4067" href="/lia/part5/Exp/#3842" class="Function Operator">]</a>

<a id="4070" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="4074" href="/lia/part5/Exp/#4074" class="Bound">y</a> <a id="4076" href="/lia/part5/Exp/#4076" class="Bound">e</a> <a id="4078" href="/lia/part5/Exp/#4078" class="Bound">f</a> <a id="4080" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4083" href="/lia/part5/Exp/#4083" class="Bound">x</a> <a id="4085" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4087" href="/lia/part5/Exp/#4087" class="Bound">g</a> <a id="4089" href="/lia/part5/Exp/#3842" class="Function Operator">]</a>
  <a id="4093" class="Keyword">with</a> <a id="4098" href="/lia/part5/Exp/#4076" class="Bound">e</a> <a id="4100" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4103" href="/lia/part5/Exp/#4083" class="Bound">x</a> <a id="4105" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4107" href="/lia/part5/Exp/#4087" class="Bound">g</a> <a id="4109" href="/lia/part5/Exp/#3842" class="Function Operator">]</a>
<a id="4111" class="Symbol">...</a> <a id="4115" class="Symbol">|</a> <a id="4117" href="/lia/part5/Exp/#4117" class="Bound">e′</a>
  <a id="4122" class="Keyword">with</a> <a id="4127" class="Bound">x</a> <a id="4129" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="4132" class="Bound">y</a>
<a id="4134" class="Symbol">...</a> <a id="4138" class="Symbol">|</a> <a id="4140" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="4144" class="Symbol">_</a> <a id="4146" class="Symbol">=</a> <a id="4148" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="4152" class="Bound">y</a> <a id="4154" class="Bound">e′</a> <a id="4157" class="Bound">f</a>
<a id="4159" class="Symbol">...</a> <a id="4163" class="Symbol">|</a> <a id="4165" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="4168" class="Symbol">_</a> <a id="4170" class="Symbol">=</a> <a id="4172" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="4176" class="Bound">y</a> <a id="4178" class="Bound">e′</a> <a id="4181" class="Symbol">(</a><a id="4182" class="Bound">f</a> <a id="4184" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4187" class="Bound">x</a> <a id="4189" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4191" class="Bound">g</a> <a id="4193" href="/lia/part5/Exp/#3842" class="Function Operator">]</a><a id="4194" class="Symbol">)</a> <a id="4196" class="Comment">-- in general this is incorrect since free variables in g may get captured</a></pre>

<p>Substitution facts:</p>

<pre class="Agda"><a id="subs-Let-1"></a><a id="4301" href="/lia/part5/Exp/#4301" class="Function">subs-Let-1</a> <a id="4312" class="Symbol">:</a> <a id="4314" class="Symbol">∀</a> <a id="4316" href="/lia/part5/Exp/#4316" class="Bound">x</a> <a id="4318" href="/lia/part5/Exp/#4318" class="Bound">e</a> <a id="4320" class="Symbol">→</a> <a id="4322" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="4326" href="/lia/part5/Exp/#4316" class="Bound">x</a> <a id="4328" href="/lia/part5/Exp/#4318" class="Bound">e</a> <a id="4330" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="4332" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4335" href="/lia/part5/Exp/#4316" class="Bound">x</a> <a id="4337" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4339" href="/lia/part5/Exp/#966" class="Generalizable">g</a> <a id="4341" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="4343" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4345" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="4349" href="/lia/part5/Exp/#4316" class="Bound">x</a> <a id="4351" class="Symbol">(</a><a id="4352" href="/lia/part5/Exp/#4318" class="Bound">e</a> <a id="4354" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="4357" href="/lia/part5/Exp/#4316" class="Bound">x</a> <a id="4359" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="4361" href="/lia/part5/Exp/#966" class="Generalizable">g</a> <a id="4363" href="/lia/part5/Exp/#3842" class="Function Operator">]</a><a id="4364" class="Symbol">)</a> <a id="4366" href="/lia/part5/Exp/#961" class="Generalizable">f</a>
<a id="4368" href="/lia/part5/Exp/#4301" class="Function">subs-Let-1</a> <a id="4379" href="/lia/part5/Exp/#4379" class="Bound">x</a> <a id="4381" href="/lia/part5/Exp/#4381" class="Bound">e</a> <a id="4383" class="Symbol">=</a> <a id="4385" class="Symbol">{!   !}</a></pre>

<p>This is correct only if no free occurrence of <code class="language-plaintext highlighter-rouge">x</code> in <code class="language-plaintext highlighter-rouge">e</code> falls under a
let binding a variable <code class="language-plaintext highlighter-rouge">y</code> which is free in <code class="language-plaintext highlighter-rouge">g</code>. This is captured by
<code class="language-plaintext highlighter-rouge">g AdmissibleFor x In e</code>.</p>

<pre class="Agda"><a id="_NotFreeIn_"></a><a id="4569" href="/lia/part5/Exp/#4569" class="Function Operator">_NotFreeIn_</a> <a id="4581" class="Symbol">:</a> <a id="4583" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="4591" class="Symbol">→</a> <a id="4593" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="4598" class="Symbol">→</a> <a id="4600" class="PrimitiveType">Set</a>
<a id="4604" href="/lia/part5/Exp/#4604" class="Bound">x</a> <a id="4606" href="/lia/part5/Exp/#4569" class="Function Operator">NotFreeIn</a> <a id="4616" href="/lia/part5/Exp/#4616" class="Bound">e</a> <a id="4618" class="Symbol">=</a> <a id="4620" href="/lia/part5/Exp/#4604" class="Bound">x</a> <a id="4622" href="/lia/part0/List/#8983" class="Function Operator">~∈</a> <a id="4625" href="/lia/part5/Exp/#3174" class="Function">fv</a> <a id="4628" href="/lia/part5/Exp/#4616" class="Bound">e</a>

<a id="4631" class="Keyword">infix</a> <a id="4637" class="Number">20</a> <a id="4640" href="/lia/part5/Exp/#4664" class="Datatype Operator">_AdmissibleFor_In_</a>
<a id="4659" class="Keyword">data</a> <a id="_AdmissibleFor_In_"></a><a id="4664" href="/lia/part5/Exp/#4664" class="Datatype Operator">_AdmissibleFor_In_</a> <a id="4683" class="Symbol">(</a><a id="4684" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4686" class="Symbol">:</a> <a id="4688" href="/lia/part5/Exp/#765" class="Datatype">AExp</a><a id="4692" class="Symbol">)</a> <a id="4694" class="Symbol">(</a><a id="4695" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4697" class="Symbol">:</a> <a id="4699" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="4706" class="Symbol">)</a> <a id="4708" class="Symbol">:</a> <a id="4710" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="4715" class="Symbol">→</a> <a id="4717" class="PrimitiveType">Set</a> <a id="4721" class="Keyword">where</a>

  <a id="_AdmissibleFor_In_.Num"></a><a id="4730" href="/lia/part5/Exp/#4730" class="InductiveConstructor">Num</a> <a id="4734" class="Symbol">:</a> <a id="4736" class="Symbol">(</a><a id="4737" href="/lia/part5/Exp/#4737" class="Bound">n</a> <a id="4739" class="Symbol">:</a> <a id="4741" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="4742" class="Symbol">)</a> <a id="4744" class="Symbol">→</a> <a id="4746" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4748" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="4762" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4764" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="4767" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="4769" href="/lia/part5/Exp/#4737" class="Bound">n</a>

  <a id="_AdmissibleFor_In_.Var"></a><a id="4774" href="/lia/part5/Exp/#4774" class="InductiveConstructor">Var</a> <a id="4778" class="Symbol">:</a> <a id="4780" class="Symbol">(</a><a id="4781" href="/lia/part5/Exp/#4781" class="Bound">y</a> <a id="4783" class="Symbol">:</a> <a id="4785" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="4792" class="Symbol">)</a> <a id="4794" class="Symbol">→</a> <a id="4796" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4798" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="4812" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4814" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="4817" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="4819" href="/lia/part5/Exp/#4781" class="Bound">y</a>

  <a id="_AdmissibleFor_In_.Add"></a><a id="4824" href="/lia/part5/Exp/#4824" class="InductiveConstructor">Add</a> <a id="4828" class="Symbol">:</a> <a id="4830" class="Symbol">∀</a> <a id="4832" href="/lia/part5/Exp/#4832" class="Bound">e</a> <a id="4834" href="/lia/part5/Exp/#4834" class="Bound">f</a> <a id="4836" class="Symbol">→</a>
        <a id="4846" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4848" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="4862" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4864" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="4867" href="/lia/part5/Exp/#4832" class="Bound">e</a> <a id="4869" class="Symbol">→</a> 
        <a id="4880" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4882" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="4896" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4898" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="4901" href="/lia/part5/Exp/#4834" class="Bound">f</a> <a id="4903" class="Symbol">→</a> 
        <a id="4914" class="Comment">----------------------------</a>
        <a id="4951" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="4953" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="4967" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="4969" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="4972" class="Symbol">(</a><a id="4973" href="/lia/part5/Exp/#4832" class="Bound">e</a> <a id="4975" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="4977" href="/lia/part5/Exp/#4834" class="Bound">f</a><a id="4978" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Mul"></a><a id="4983" href="/lia/part5/Exp/#4983" class="InductiveConstructor">Mul</a> <a id="4987" class="Symbol">:</a> <a id="4989" class="Symbol">∀</a> <a id="4991" href="/lia/part5/Exp/#4991" class="Bound">e</a> <a id="4993" href="/lia/part5/Exp/#4993" class="Bound">f</a> <a id="4995" class="Symbol">→</a>
        <a id="5005" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5007" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5021" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5023" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5026" href="/lia/part5/Exp/#4991" class="Bound">e</a> <a id="5028" class="Symbol">→</a> 
        <a id="5039" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5041" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5055" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5057" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5060" href="/lia/part5/Exp/#4993" class="Bound">f</a> <a id="5062" class="Symbol">→</a> 
        <a id="5073" class="Comment">----------------------------</a>
        <a id="5110" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5112" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5126" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5128" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5131" class="Symbol">(</a><a id="5132" href="/lia/part5/Exp/#4991" class="Bound">e</a> <a id="5134" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="5136" href="/lia/part5/Exp/#4993" class="Bound">f</a><a id="5137" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-1"></a><a id="5142" href="/lia/part5/Exp/#5142" class="InductiveConstructor">Let-1</a> <a id="5148" class="Symbol">:</a> <a id="5150" class="Symbol">∀</a> <a id="5152" href="/lia/part5/Exp/#5152" class="Bound">e</a> <a id="5154" href="/lia/part5/Exp/#5154" class="Bound">f</a> <a id="5156" class="Symbol">→</a>
          <a id="5168" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5170" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5184" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5186" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5189" href="/lia/part5/Exp/#5152" class="Bound">e</a> <a id="5191" class="Symbol">→</a> 
          <a id="5204" class="Comment">--------------------------------</a>
          <a id="5247" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5249" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5263" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5265" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5268" class="Symbol">(</a><a id="5269" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="5273" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5275" href="/lia/part5/Exp/#5152" class="Bound">e</a> <a id="5277" href="/lia/part5/Exp/#5154" class="Bound">f</a><a id="5278" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-2"></a><a id="5283" href="/lia/part5/Exp/#5283" class="InductiveConstructor">Let-2</a> <a id="5289" class="Symbol">:</a> <a id="5291" class="Symbol">∀</a> <a id="5293" href="/lia/part5/Exp/#5293" class="Bound">e</a> <a id="5295" href="/lia/part5/Exp/#5295" class="Bound">f</a> <a id="5297" class="Symbol">→</a>
          <a id="5309" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5311" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="5313" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="5315" class="Symbol">→</a>
          <a id="5327" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5329" href="/lia/part5/Exp/#4569" class="Function Operator">NotFreeIn</a> <a id="5339" href="/lia/part5/Exp/#5295" class="Bound">f</a> <a id="5341" class="Symbol">→</a>
          <a id="5353" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5355" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5369" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5371" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5374" href="/lia/part5/Exp/#5293" class="Bound">e</a> <a id="5376" class="Symbol">→</a>
          <a id="5388" class="Comment">--------------------------------</a>
          <a id="5431" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5433" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5447" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5449" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5452" class="Symbol">(</a><a id="5453" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="5457" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="5459" href="/lia/part5/Exp/#5293" class="Bound">e</a> <a id="5461" href="/lia/part5/Exp/#5295" class="Bound">f</a><a id="5462" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-3"></a><a id="5467" href="/lia/part5/Exp/#5467" class="InductiveConstructor">Let-3</a> <a id="5473" class="Symbol">:</a> <a id="5475" class="Symbol">∀</a> <a id="5477" href="/lia/part5/Exp/#5477" class="Bound">e</a> <a id="5479" href="/lia/part5/Exp/#5479" class="Bound">f</a> <a id="5481" class="Symbol">→</a>
          <a id="5493" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5495" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="5497" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="5499" class="Symbol">→</a>
          <a id="5511" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="5513" href="/lia/part5/Exp/#4569" class="Function Operator">NotFreeIn</a> <a id="5523" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5525" class="Symbol">→</a>
          <a id="5537" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5539" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5553" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5555" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5558" href="/lia/part5/Exp/#5477" class="Bound">e</a> <a id="5560" class="Symbol">→</a>
          <a id="5572" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5574" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5588" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5590" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5593" href="/lia/part5/Exp/#5479" class="Bound">f</a> <a id="5595" class="Symbol">→</a>
          <a id="5607" class="Comment">--------------------------------</a>
          <a id="5650" href="/lia/part5/Exp/#4684" class="Bound">g</a> <a id="5652" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5666" href="/lia/part5/Exp/#4695" class="Bound">x</a> <a id="5668" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5671" class="Symbol">(</a><a id="5672" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="5676" href="/lia/part5/Exp/#597" class="Generalizable">y</a> <a id="5678" href="/lia/part5/Exp/#5477" class="Bound">e</a> <a id="5680" href="/lia/part5/Exp/#5479" class="Bound">f</a><a id="5681" class="Symbol">)</a>

<a id="subst-lemma"></a><a id="5684" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="5696" class="Symbol">:</a> <a id="5698" class="Symbol">∀</a> <a id="5700" href="/lia/part5/Exp/#5700" class="Bound">g</a> <a id="5702" href="/lia/part5/Exp/#5702" class="Bound">x</a> <a id="5704" href="/lia/part5/Exp/#5704" class="Bound">ϱ</a> <a id="5706" class="Symbol">→</a>
  <a id="5710" href="/lia/part5/Exp/#5700" class="Bound">g</a> <a id="5712" href="/lia/part5/Exp/#4664" class="Datatype Operator">AdmissibleFor</a> <a id="5726" href="/lia/part5/Exp/#5702" class="Bound">x</a> <a id="5728" href="/lia/part5/Exp/#4664" class="Datatype Operator">In</a> <a id="5731" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="5733" class="Symbol">→</a>
  <a id="5737" class="Comment">--------------------------------------------</a>
  <a id="5784" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="5786" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="5788" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="5791" href="/lia/part5/Exp/#5702" class="Bound">x</a> <a id="5793" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="5795" href="/lia/part5/Exp/#5700" class="Bound">g</a> <a id="5797" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="5799" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="5801" href="/lia/part5/Exp/#5704" class="Bound">ϱ</a> <a id="5803" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5805" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="5807" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="5809" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="5811" href="/lia/part5/Exp/#5704" class="Bound">ϱ</a> <a id="5813" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="5815" href="/lia/part5/Exp/#5702" class="Bound">x</a> <a id="5817" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="5819" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="5821" href="/lia/part5/Exp/#5700" class="Bound">g</a> <a id="5823" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="5825" href="/lia/part5/Exp/#5704" class="Bound">ϱ</a> <a id="5827" href="/lia/part0/Functions/#568" class="Function Operator">]</a>

<a id="5830" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="5842" class="Symbol">_</a> <a id="5844" class="Symbol">_</a> <a id="5846" class="Symbol">_</a> <a id="5848" class="Symbol">(</a><a id="5849" href="/lia/part5/Exp/#4730" class="InductiveConstructor">Num</a> <a id="5853" href="/lia/part5/Exp/#5853" class="Bound">n</a><a id="5854" class="Symbol">)</a> <a id="5856" class="Symbol">=</a> <a id="5858" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="5864" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="5876" class="Symbol">_</a> <a id="5878" href="/lia/part5/Exp/#5878" class="Bound">x</a> <a id="5880" class="Symbol">_</a> <a id="5882" class="Symbol">(</a><a id="5883" href="/lia/part5/Exp/#4774" class="InductiveConstructor">Var</a> <a id="5887" href="/lia/part5/Exp/#5887" class="Bound">y</a><a id="5888" class="Symbol">)</a>
  <a id="5892" class="Keyword">with</a> <a id="5897" href="/lia/part5/Exp/#5878" class="Bound">x</a> <a id="5899" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="5902" href="/lia/part5/Exp/#5887" class="Bound">y</a>
<a id="5904" class="Symbol">...</a> <a id="5908" class="Symbol">|</a> <a id="5910" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="5914" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5919" class="Symbol">=</a> <a id="5921" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5926" class="Symbol">...</a> <a id="5930" class="Symbol">|</a> <a id="5932" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="5935" class="Symbol">_</a> <a id="5937" class="Symbol">=</a> <a id="5939" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="5945" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="5957" href="/lia/part5/Exp/#5957" class="Bound">g</a> <a id="5959" href="/lia/part5/Exp/#5959" class="Bound">x</a> <a id="5961" href="/lia/part5/Exp/#5961" class="Bound">ϱ</a> <a id="5963" class="Symbol">(</a><a id="5964" href="/lia/part5/Exp/#4824" class="InductiveConstructor">Add</a> <a id="5968" href="/lia/part5/Exp/#5968" class="Bound">e</a> <a id="5970" href="/lia/part5/Exp/#5970" class="Bound">f</a> <a id="5972" href="/lia/part5/Exp/#5972" class="Bound">adm-e</a> <a id="5978" href="/lia/part5/Exp/#5978" class="Bound">adm-f</a><a id="5983" class="Symbol">)</a>
  <a id="5987" class="Keyword">rewrite</a> <a id="5995" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6007" href="/lia/part5/Exp/#5957" class="Bound">g</a> <a id="6009" href="/lia/part5/Exp/#5959" class="Bound">x</a> <a id="6011" href="/lia/part5/Exp/#5961" class="Bound">ϱ</a> <a id="6013" href="/lia/part5/Exp/#5972" class="Bound">adm-e</a> <a id="6019" class="Symbol">|</a>
          <a id="6031" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6043" href="/lia/part5/Exp/#5957" class="Bound">g</a> <a id="6045" href="/lia/part5/Exp/#5959" class="Bound">x</a> <a id="6047" href="/lia/part5/Exp/#5961" class="Bound">ϱ</a> <a id="6049" href="/lia/part5/Exp/#5978" class="Bound">adm-f</a>
  <a id="6057" class="Symbol">=</a> <a id="6059" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="6065" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6077" href="/lia/part5/Exp/#6077" class="Bound">g</a> <a id="6079" href="/lia/part5/Exp/#6079" class="Bound">x</a> <a id="6081" href="/lia/part5/Exp/#6081" class="Bound">ϱ</a> <a id="6083" class="Symbol">(</a><a id="6084" href="/lia/part5/Exp/#4983" class="InductiveConstructor">Mul</a> <a id="6088" href="/lia/part5/Exp/#6088" class="Bound">e</a> <a id="6090" href="/lia/part5/Exp/#6090" class="Bound">f</a> <a id="6092" href="/lia/part5/Exp/#6092" class="Bound">adm-e</a> <a id="6098" href="/lia/part5/Exp/#6098" class="Bound">adm-f</a><a id="6103" class="Symbol">)</a>
  <a id="6107" class="Keyword">rewrite</a> <a id="6115" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6127" href="/lia/part5/Exp/#6077" class="Bound">g</a> <a id="6129" href="/lia/part5/Exp/#6079" class="Bound">x</a> <a id="6131" href="/lia/part5/Exp/#6081" class="Bound">ϱ</a> <a id="6133" href="/lia/part5/Exp/#6092" class="Bound">adm-e</a> <a id="6139" class="Symbol">|</a>
          <a id="6151" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6163" href="/lia/part5/Exp/#6077" class="Bound">g</a> <a id="6165" href="/lia/part5/Exp/#6079" class="Bound">x</a> <a id="6167" href="/lia/part5/Exp/#6081" class="Bound">ϱ</a> <a id="6169" href="/lia/part5/Exp/#6098" class="Bound">adm-f</a>
  <a id="6177" class="Symbol">=</a> <a id="6179" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="6185" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6197" href="/lia/part5/Exp/#6197" class="Bound">g</a> <a id="6199" href="/lia/part5/Exp/#6199" class="Bound">x</a> <a id="6201" href="/lia/part5/Exp/#6201" class="Bound">ϱ</a> <a id="6203" class="Symbol">(</a><a id="6204" href="/lia/part5/Exp/#5142" class="InductiveConstructor">Let-1</a> <a id="6210" href="/lia/part5/Exp/#6210" class="Bound">e</a> <a id="6212" href="/lia/part5/Exp/#6212" class="Bound">f</a> <a id="6214" href="/lia/part5/Exp/#6214" class="Bound">adm-e</a><a id="6219" class="Symbol">)</a>
  <a id="6223" class="Keyword">with</a> <a id="6228" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6240" href="/lia/part5/Exp/#6197" class="Bound">g</a> <a id="6242" href="/lia/part5/Exp/#6199" class="Bound">x</a> <a id="6244" href="/lia/part5/Exp/#6201" class="Bound">ϱ</a> <a id="6246" href="/lia/part5/Exp/#6214" class="Bound">adm-e</a>
<a id="6252" class="Symbol">...</a> <a id="6256" class="Symbol">|</a> <a id="6258" href="/lia/part5/Exp/#6258" class="Bound">ind</a> <a id="6262" class="Symbol">=</a>
  <a id="6266" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
    <a id="6276" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6278" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="6282" class="Bound">x</a> <a id="6284" class="Bound">e</a> <a id="6286" class="Bound">f</a> <a id="6288" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="6291" class="Bound">x</a> <a id="6293" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="6295" class="Bound">g</a> <a id="6297" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="6299" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6301" class="Bound">ϱ</a>
      <a id="6309" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="6312" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="6317" class="Symbol">(λ</a> <a id="6320" href="/lia/part5/Exp/#6320" class="Bound">C</a> <a id="6322" class="Symbol">→</a> <a id="6324" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6326" href="/lia/part5/Exp/#6320" class="Bound">C</a> <a id="6328" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6330" class="Bound">ϱ</a><a id="6331" class="Symbol">)</a> <a id="6333" class="Symbol">(</a><a id="6334" href="/lia/part5/Exp/#4301" class="Function">subs-Let-1</a> <a id="6345" class="Bound">x</a> <a id="6347" class="Bound">e</a><a id="6348" class="Symbol">)</a> <a id="6350" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="6356" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6358" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="6362" class="Bound">x</a> <a id="6364" class="Symbol">(</a><a id="6365" class="Bound">e</a> <a id="6367" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="6370" class="Bound">x</a> <a id="6372" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="6374" class="Bound">g</a> <a id="6376" href="/lia/part5/Exp/#3842" class="Function Operator">]</a><a id="6377" class="Symbol">)</a> <a id="6379" class="Bound">f</a> <a id="6381" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6383" class="Bound">ϱ</a>
      <a id="6391" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="6399" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6401" class="Bound">f</a> <a id="6403" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6405" class="Bound">ϱ</a> <a id="6407" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6409" class="Bound">x</a> <a id="6411" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6413" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6415" class="Bound">e</a> <a id="6417" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="6420" class="Bound">x</a> <a id="6422" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="6424" class="Bound">g</a> <a id="6426" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="6428" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6430" class="Bound">ϱ</a> <a id="6432" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="6440" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="6443" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="6448" class="Symbol">(λ</a> <a id="6451" href="/lia/part5/Exp/#6451" class="Bound">C</a> <a id="6453" class="Symbol">→</a> <a id="6455" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6457" class="Bound">f</a> <a id="6459" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6461" class="Bound">ϱ</a> <a id="6463" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6465" class="Bound">x</a> <a id="6467" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6469" href="/lia/part5/Exp/#6451" class="Bound">C</a> <a id="6471" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="6472" class="Symbol">)</a> <a id="6474" href="/lia/part5/Exp/#6258" class="Bound">ind</a> <a id="6478" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="6484" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6486" class="Bound">f</a> <a id="6488" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6490" class="Bound">ϱ</a> <a id="6492" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6494" class="Bound">x</a> <a id="6496" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6498" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6500" class="Bound">e</a> <a id="6502" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6504" class="Bound">ϱ</a> <a id="6506" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6508" class="Bound">x</a> <a id="6510" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6512" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6514" class="Bound">g</a> <a id="6516" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6518" class="Bound">ϱ</a> <a id="6520" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="6522" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="6530" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="6533" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="6538" class="Symbol">(λ</a> <a id="6541" href="/lia/part5/Exp/#6541" class="Bound">C</a> <a id="6543" class="Symbol">→</a> <a id="6545" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6547" class="Bound">f</a> <a id="6549" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6551" href="/lia/part5/Exp/#6541" class="Bound">C</a><a id="6552" class="Symbol">)</a> <a id="6554" class="Symbol">(</a><a id="6555" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="6559" class="Symbol">(</a><a id="6560" href="/lia/part0/Functions/#3153" class="Function">doubleupdate</a> <a id="6573" class="Bound">x</a><a id="6574" class="Symbol">))</a> <a id="6577" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="6583" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6585" class="Bound">f</a> <a id="6587" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6589" class="Bound">ϱ</a> <a id="6591" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6593" class="Bound">x</a> <a id="6595" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6597" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6599" class="Bound">g</a> <a id="6601" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6603" class="Bound">ϱ</a> <a id="6605" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="6607" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6609" class="Bound">x</a> <a id="6611" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6613" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6615" class="Bound">e</a> <a id="6617" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6619" class="Bound">ϱ</a> <a id="6621" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6623" class="Bound">x</a> <a id="6625" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6627" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6629" class="Bound">g</a> <a id="6631" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6633" class="Bound">ϱ</a> <a id="6635" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="6637" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="6645" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="6653" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6655" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="6659" class="Bound">x</a> <a id="6661" class="Bound">e</a> <a id="6663" class="Bound">f</a> <a id="6665" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6667" class="Bound">ϱ</a> <a id="6669" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6671" class="Bound">x</a> <a id="6673" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6675" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="6677" class="Bound">g</a> <a id="6679" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="6681" class="Bound">ϱ</a> <a id="6683" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
  <a id="6687" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a>

<a id="6690" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6702" href="/lia/part5/Exp/#6702" class="Bound">g</a> <a id="6704" href="/lia/part5/Exp/#6704" class="Bound">x</a> <a id="6706" href="/lia/part5/Exp/#6706" class="Bound">ϱ</a> <a id="6708" class="Symbol">(</a><a id="6709" href="/lia/part5/Exp/#5283" class="InductiveConstructor">Let-2</a> <a id="6715" href="/lia/part5/Exp/#6715" class="Bound">e</a> <a id="6717" href="/lia/part5/Exp/#6717" class="Bound">f</a> <a id="6719" href="/lia/part5/Exp/#6719" class="Bound">x≢y</a> <a id="6723" href="/lia/part5/Exp/#6723" class="Bound">xNFf</a> <a id="6728" href="/lia/part5/Exp/#6728" class="Bound">adm-e</a><a id="6733" class="Symbol">)</a> <a id="6735" class="Symbol">=</a> <a id="6737" class="Symbol">{!   !}</a>

<a id="6746" href="/lia/part5/Exp/#5684" class="Function">subst-lemma</a> <a id="6758" href="/lia/part5/Exp/#6758" class="Bound">g</a> <a id="6760" href="/lia/part5/Exp/#6760" class="Bound">x</a> <a id="6762" href="/lia/part5/Exp/#6762" class="Bound">ϱ</a> <a id="6764" class="Symbol">(</a><a id="6765" href="/lia/part5/Exp/#5467" class="InductiveConstructor">Let-3</a> <a id="6771" href="/lia/part5/Exp/#6771" class="Bound">e</a> <a id="6773" href="/lia/part5/Exp/#6773" class="Bound">f</a> <a id="6775" href="/lia/part5/Exp/#6775" class="Bound">x≢y</a> <a id="6779" href="/lia/part5/Exp/#6779" class="Bound">yNFg</a> <a id="6784" href="/lia/part5/Exp/#6784" class="Bound">adm-e</a> <a id="6790" href="/lia/part5/Exp/#6790" class="Bound">adm-f</a><a id="6795" class="Symbol">)</a> <a id="6797" class="Symbol">=</a> <a id="6799" class="Symbol">{!   !}</a>

<a id="6808" class="Comment">-- subst-lemma ($ n) = refl</a>

<a id="6837" class="Comment">-- subst-lemma {x} (` y)</a>
<a id="6862" class="Comment">--   with x ≡? y</a>
<a id="6879" class="Comment">-- ... | yes refl = refl</a>
<a id="6904" class="Comment">-- ... | no _ = refl</a>

<a id="6926" class="Comment">-- subst-lemma {x} {g} {ϱ} (e + f)</a>
<a id="6961" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="7002" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="7049" class="Comment">-- subst-lemma {x} {g} {ϱ} (e · f)</a>
<a id="7084" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="7125" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="7172" class="Comment">-- subst-lemma {x} {g} {ϱ} (Let y e f)</a>
<a id="7211" class="Comment">--   with x ≡? y</a>
<a id="7228" class="Comment">-- ... | yes refl = </a>
<a id="7249" class="Comment">--   begin</a>
<a id="7260" class="Comment">--   ⟦ Let x (e A[ x ↦ g ]) f ⟧ ϱ</a>
<a id="7294" class="Comment">--     ≡⟨⟩</a>
<a id="7305" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="7345" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ]) (subst-lemma {x} {g} {ϱ} e) ⟩</a>
<a id="7416" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="7446" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ C) (sym (doubleupdate x)) ⟩</a>
<a id="7502" class="Comment">--   ⟦ f ⟧ ϱ′ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="7533" class="Comment">--     ≡⟨⟩</a>
<a id="7544" class="Comment">--   ⟦ Let x e f ⟧ ϱ′</a>
<a id="7566" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>

<a id="7603" class="Comment">-- ... | no x≢y</a>
<a id="7619" class="Comment">--   with y ∈? fv g</a>
<a id="7639" class="Comment">-- ... | no ¬y∈g =</a>
<a id="7658" class="Comment">--   begin</a>
<a id="7669" class="Comment">--   ⟦ Let y (e A[ x ↦ g ]) (f A[ x ↦ g ]) ⟧ ϱ</a>
<a id="7716" class="Comment">--     ≡⟨⟩</a>
<a id="7727" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="7778" class="Comment">--     ≡⟨ cong (λ C → ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ C ]) (subst-lemma e) ⟩</a>
<a id="7848" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ′′</a>
<a id="7874" class="Comment">--     ≡⟨ subst-lemma f ⟩</a>
<a id="7900" class="Comment">--   ⟦ f ⟧ ϱ′′ [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="7933" class="Comment">--     ≡⟨⟩</a>
<a id="7944" class="Comment">--   ⟦ f ⟧ ϱ [ y ↦ ⟦ e ⟧ ϱ′ ] [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="7992" class="Comment">--     ≡⟨ sym (cong (λ C → ⟦ f ⟧ C) (update-comm _ _ _ _ _  x≢y))⟩</a>
<a id="8059" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ′′ ] [ y ↦ ⟦ e ⟧ ϱ′ ] </a>
<a id="8108" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ] [ y ↦ ⟦ e ⟧ ϱ′ ]) eq ⟩</a>
<a id="8171" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ ] [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="8217" class="Comment">--     ≡⟨⟩</a>
<a id="8228" class="Comment">--   ⟦ f ⟧ ϱ′ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="8259" class="Comment">--     ≡⟨⟩</a>
<a id="8270" class="Comment">--   ⟦ Let y e f ⟧ ϱ′</a>
<a id="8292" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>
<a id="8328" class="Comment">--           ϱ′′ = ϱ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>

<a id="8367" class="Comment">--           ag : Agree ϱ ϱ′′ (fv g)</a>
<a id="8404" class="Comment">--           ag = Agree-update-~∈ ¬y∈g</a>

<a id="8444" class="Comment">--           eq : ⟦ g ⟧ ϱ′′ ≡ ⟦ g ⟧ ϱ</a>
<a id="8482" class="Comment">--           eq = fv-lemma ϱ′′ ϱ g (sym-Agree ag)</a>

<a id="8533" class="Comment">-- ... | yes y∈g = {!   !}</a></pre>

<h1 id="contextual-equivalence-and-full-abstraction">
<a class="anchor" href="#contextual-equivalence-and-full-abstraction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contextual equivalence and full abstraction</h1>

<pre class="Agda"><a id="8616" class="Keyword">private</a> <a id="_≈_"></a><a id="8624" href="/lia/part5/Exp/#8624" class="Function Operator">_≈_</a> <a id="8628" class="Symbol">:</a> <a id="8630" class="Symbol">∀</a> <a id="8632" href="/lia/part5/Exp/#8632" class="Bound">e</a> <a id="8634" href="/lia/part5/Exp/#8634" class="Bound">f</a> <a id="8636" class="Symbol">→</a> <a id="8638" class="PrimitiveType">Set</a>
<a id="8642" href="/lia/part5/Exp/#8642" class="Bound">e</a> <a id="8644" href="/lia/part5/Exp/#8624" class="Function Operator">≈</a> <a id="8646" href="/lia/part5/Exp/#8646" class="Bound">f</a> <a id="8648" class="Symbol">=</a> <a id="8650" class="Symbol">∀</a> <a id="8652" href="/lia/part5/Exp/#8652" class="Bound">c</a> <a id="8654" href="/lia/part5/Exp/#8654" class="Bound">x</a> <a id="8656" href="/lia/part5/Exp/#8656" class="Bound">ϱ</a> <a id="8658" class="Symbol">→</a> <a id="8660" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8662" href="/lia/part5/Exp/#8652" class="Bound">c</a> <a id="8664" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="8667" href="/lia/part5/Exp/#8654" class="Bound">x</a> <a id="8669" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="8671" href="/lia/part5/Exp/#8642" class="Bound">e</a> <a id="8673" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="8675" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8677" href="/lia/part5/Exp/#8656" class="Bound">ϱ</a> <a id="8679" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8681" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8683" href="/lia/part5/Exp/#8652" class="Bound">c</a> <a id="8685" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="8688" href="/lia/part5/Exp/#8654" class="Bound">x</a> <a id="8690" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="8692" href="/lia/part5/Exp/#8646" class="Bound">f</a> <a id="8694" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="8696" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8698" href="/lia/part5/Exp/#8656" class="Bound">ϱ</a></pre>

<p>There is nothing else beside the numerical value an expression has.</p>

<pre class="Agda"><a id="full-abstraction-1"></a><a id="8778" href="/lia/part5/Exp/#8778" class="Function">full-abstraction-1</a> <a id="8797" class="Symbol">:</a> <a id="8799" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="8801" href="/lia/part5/Exp/#8624" class="Function Operator">≈</a> <a id="8803" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="8805" class="Symbol">→</a> <a id="8807" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="8810" href="/lia/part5/Exp/#8810" class="Bound">ϱ</a> <a id="8812" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="8814" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8816" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="8818" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8820" href="/lia/part5/Exp/#8810" class="Bound">ϱ</a> <a id="8822" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8824" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8826" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="8828" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8830" href="/lia/part5/Exp/#8810" class="Bound">ϱ</a>
<a id="8832" href="/lia/part5/Exp/#8778" class="Function">full-abstraction-1</a> <a id="8851" href="/lia/part5/Exp/#8851" class="Bound">e≈f</a> <a id="8855" href="/lia/part5/Exp/#8855" class="Bound">ϱ</a> <a id="8857" class="Symbol">=</a> <a id="8859" href="/lia/part5/Exp/#8851" class="Bound">e≈f</a> <a id="8863" class="Symbol">(</a><a id="8864" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="8866" href="/lia/part5/Exp/#557" class="Function">x₀</a><a id="8868" class="Symbol">)</a> <a id="8870" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="8873" href="/lia/part5/Exp/#8855" class="Bound">ϱ</a>

<a id="full-abstraction-2"></a><a id="8876" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="8895" class="Symbol">:</a> <a id="8897" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="8900" href="/lia/part5/Exp/#8900" class="Bound">ϱ</a> <a id="8902" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="8904" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8906" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="8908" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8910" href="/lia/part5/Exp/#8900" class="Bound">ϱ</a> <a id="8912" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8914" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="8916" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="8918" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="8920" href="/lia/part5/Exp/#8900" class="Bound">ϱ</a> <a id="8922" class="Symbol">→</a> <a id="8924" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="8926" href="/lia/part5/Exp/#8624" class="Function Operator">≈</a> <a id="8928" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

<a id="8931" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="8950" href="/lia/part5/Exp/#8950" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="8958" class="Symbol">(</a><a id="8959" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="8961" href="/lia/part5/Exp/#8961" class="Bound">n</a><a id="8962" class="Symbol">)</a> <a id="8964" href="/lia/part5/Exp/#8964" class="Bound">x</a> <a id="8966" href="/lia/part5/Exp/#8966" class="Bound">ϱ</a> <a id="8968" class="Symbol">=</a> <a id="8970" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8976" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="8995" href="/lia/part5/Exp/#8995" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9003" class="Symbol">(</a><a id="9004" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="9006" href="/lia/part5/Exp/#9006" class="Bound">y</a><a id="9007" class="Symbol">)</a> <a id="9009" href="/lia/part5/Exp/#9009" class="Bound">x</a> <a id="9011" href="/lia/part5/Exp/#9011" class="Bound">ϱ</a>
  <a id="9015" class="Keyword">with</a> <a id="9020" href="/lia/part5/Exp/#9009" class="Bound">x</a> <a id="9022" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="9025" href="/lia/part5/Exp/#9006" class="Bound">y</a>
<a id="9027" class="Symbol">...</a> <a id="9031" class="Symbol">|</a> <a id="9033" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="9037" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="9042" class="Symbol">=</a> <a id="9044" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9052" class="Bound">ϱ</a>
<a id="9054" class="Symbol">...</a> <a id="9058" class="Symbol">|</a> <a id="9060" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="9063" class="Symbol">_</a> <a id="9065" class="Symbol">=</a> <a id="9067" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="9073" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9092" class="Symbol">{</a><a id="9093" href="/lia/part5/Exp/#9093" class="Bound">e</a><a id="9094" class="Symbol">}</a> <a id="9096" class="Symbol">{</a><a id="9097" href="/lia/part5/Exp/#9097" class="Bound">f</a><a id="9098" class="Symbol">}</a> <a id="9100" href="/lia/part5/Exp/#9100" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9108" class="Symbol">(</a><a id="9109" href="/lia/part5/Exp/#9109" class="Bound">c</a> <a id="9111" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="9113" href="/lia/part5/Exp/#9113" class="Bound">d</a><a id="9114" class="Symbol">)</a> <a id="9116" href="/lia/part5/Exp/#9116" class="Bound">x</a> <a id="9118" href="/lia/part5/Exp/#9118" class="Bound">ϱ</a>
  <a id="9122" class="Keyword">rewrite</a> <a id="9130" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9149" class="Symbol">{</a><a id="9150" href="/lia/part5/Exp/#9093" class="Bound">e</a><a id="9151" class="Symbol">}</a> <a id="9153" class="Symbol">{</a><a id="9154" href="/lia/part5/Exp/#9097" class="Bound">f</a><a id="9155" class="Symbol">}</a> <a id="9157" href="/lia/part5/Exp/#9100" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9165" href="/lia/part5/Exp/#9109" class="Bound">c</a> <a id="9167" href="/lia/part5/Exp/#9116" class="Bound">x</a> <a id="9169" href="/lia/part5/Exp/#9118" class="Bound">ϱ</a> <a id="9171" class="Symbol">|</a>
          <a id="9183" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9202" class="Symbol">{</a><a id="9203" href="/lia/part5/Exp/#9093" class="Bound">e</a><a id="9204" class="Symbol">}</a> <a id="9206" class="Symbol">{</a><a id="9207" href="/lia/part5/Exp/#9097" class="Bound">f</a><a id="9208" class="Symbol">}</a> <a id="9210" href="/lia/part5/Exp/#9100" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9218" href="/lia/part5/Exp/#9113" class="Bound">d</a> <a id="9220" href="/lia/part5/Exp/#9116" class="Bound">x</a> <a id="9222" href="/lia/part5/Exp/#9118" class="Bound">ϱ</a> <a id="9224" class="Symbol">=</a> <a id="9226" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="9232" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9251" class="Symbol">{</a><a id="9252" href="/lia/part5/Exp/#9252" class="Bound">e</a><a id="9253" class="Symbol">}</a> <a id="9255" class="Symbol">{</a><a id="9256" href="/lia/part5/Exp/#9256" class="Bound">f</a><a id="9257" class="Symbol">}</a> <a id="9259" href="/lia/part5/Exp/#9259" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9267" class="Symbol">(</a><a id="9268" href="/lia/part5/Exp/#9268" class="Bound">c</a> <a id="9270" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="9272" href="/lia/part5/Exp/#9272" class="Bound">d</a><a id="9273" class="Symbol">)</a> <a id="9275" href="/lia/part5/Exp/#9275" class="Bound">x</a> <a id="9277" href="/lia/part5/Exp/#9277" class="Bound">ϱ</a>
  <a id="9281" class="Keyword">rewrite</a> <a id="9289" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9308" class="Symbol">{</a><a id="9309" href="/lia/part5/Exp/#9252" class="Bound">e</a><a id="9310" class="Symbol">}</a> <a id="9312" class="Symbol">{</a><a id="9313" href="/lia/part5/Exp/#9256" class="Bound">f</a><a id="9314" class="Symbol">}</a> <a id="9316" href="/lia/part5/Exp/#9259" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9324" href="/lia/part5/Exp/#9268" class="Bound">c</a> <a id="9326" href="/lia/part5/Exp/#9275" class="Bound">x</a> <a id="9328" href="/lia/part5/Exp/#9277" class="Bound">ϱ</a> <a id="9330" class="Symbol">|</a>
          <a id="9342" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9361" class="Symbol">{</a><a id="9362" href="/lia/part5/Exp/#9252" class="Bound">e</a><a id="9363" class="Symbol">}</a> <a id="9365" class="Symbol">{</a><a id="9366" href="/lia/part5/Exp/#9256" class="Bound">f</a><a id="9367" class="Symbol">}</a> <a id="9369" href="/lia/part5/Exp/#9259" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9377" href="/lia/part5/Exp/#9272" class="Bound">d</a> <a id="9379" href="/lia/part5/Exp/#9275" class="Bound">x</a> <a id="9381" href="/lia/part5/Exp/#9277" class="Bound">ϱ</a> <a id="9383" class="Symbol">=</a> <a id="9385" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="9391" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9410" class="Symbol">{</a><a id="9411" href="/lia/part5/Exp/#9411" class="Bound">e</a><a id="9412" class="Symbol">}</a> <a id="9414" class="Symbol">{</a><a id="9415" href="/lia/part5/Exp/#9415" class="Bound">f</a><a id="9416" class="Symbol">}</a> <a id="9418" href="/lia/part5/Exp/#9418" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9426" class="Symbol">(</a><a id="9427" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="9431" href="/lia/part5/Exp/#9431" class="Bound">y</a> <a id="9433" href="/lia/part5/Exp/#9433" class="Bound">c</a> <a id="9435" href="/lia/part5/Exp/#9435" class="Bound">d</a><a id="9436" class="Symbol">)</a> <a id="9438" href="/lia/part5/Exp/#9438" class="Bound">x</a> <a id="9440" href="/lia/part5/Exp/#9440" class="Bound">ϱ</a>
  <a id="9444" class="Keyword">with</a> <a id="9449" href="/lia/part5/Exp/#9438" class="Bound">x</a> <a id="9451" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="9454" href="/lia/part5/Exp/#9431" class="Bound">y</a>
<a id="9456" class="Symbol">...</a> <a id="9460" class="Symbol">|</a> <a id="9462" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="9466" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="9473" class="Keyword">rewrite</a> <a id="9481" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9500" class="Symbol">{</a><a id="9501" class="Bound">e</a><a id="9502" class="Symbol">}</a> <a id="9504" class="Symbol">{</a><a id="9505" class="Bound">f</a><a id="9506" class="Symbol">}</a> <a id="9508" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9516" class="Bound">c</a> <a id="9518" class="Bound">y</a> <a id="9520" class="Bound">ϱ</a> <a id="9522" class="Symbol">=</a> <a id="9524" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="9529" class="Symbol">...</a> <a id="9533" class="Symbol">|</a> <a id="9535" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="9538" class="Symbol">_</a>
  <a id="9542" class="Keyword">rewrite</a> <a id="9550" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9569" class="Symbol">{</a><a id="9570" class="Bound">e</a><a id="9571" class="Symbol">}</a> <a id="9573" class="Symbol">{</a><a id="9574" class="Bound">f</a><a id="9575" class="Symbol">}</a> <a id="9577" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9585" class="Bound">c</a> <a id="9587" class="Bound">x</a> <a id="9589" class="Bound">ϱ</a> <a id="9591" class="Symbol">|</a>
          <a id="9603" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a> <a id="9622" class="Symbol">{</a><a id="9623" class="Bound">e</a><a id="9624" class="Symbol">}</a> <a id="9626" class="Symbol">{</a><a id="9627" class="Bound">f</a><a id="9628" class="Symbol">}</a> <a id="9630" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="9638" class="Bound">d</a> <a id="9640" class="Bound">x</a> <a id="9642" class="Symbol">(</a><a id="9643" class="Bound">ϱ</a> <a id="9645" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="9647" class="Bound">y</a> <a id="9649" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="9651" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="9653" class="Bound">c</a> <a id="9655" href="/lia/part5/Exp/#3842" class="Function Operator">A[</a> <a id="9658" class="Bound">x</a> <a id="9660" href="/lia/part5/Exp/#3842" class="Function Operator">↦</a> <a id="9662" class="Bound">f</a> <a id="9664" href="/lia/part5/Exp/#3842" class="Function Operator">]</a> <a id="9666" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="9668" class="Bound">ϱ</a> <a id="9670" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="9671" class="Symbol">)</a> <a id="9673" class="Symbol">=</a> <a id="9675" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="full-abstraction"></a><a id="9681" href="/lia/part5/Exp/#9681" class="Function">full-abstraction</a> <a id="9698" class="Symbol">:</a> <a id="9700" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="9702" href="/lia/part5/Exp/#8624" class="Function Operator">≈</a> <a id="9704" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="9706" href="/lia/part0/Logic/#3145" class="Function Operator">↔</a> <a id="9708" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="9711" href="/lia/part5/Exp/#9711" class="Bound">ϱ</a> <a id="9713" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="9715" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="9717" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="9719" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="9721" href="/lia/part5/Exp/#9711" class="Bound">ϱ</a> <a id="9723" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="9725" href="/lia/part5/Exp/#2410" class="Function Operator">A⟦</a> <a id="9728" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="9730" href="/lia/part5/Exp/#2410" class="Function Operator">⟧</a> <a id="9732" href="/lia/part5/Exp/#9711" class="Bound">ϱ</a>
<a id="9734" href="/lia/part5/Exp/#9681" class="Function">full-abstraction</a> <a id="9751" class="Symbol">=</a> <a id="9753" href="/lia/part5/Exp/#8778" class="Function">full-abstraction-1</a> <a id="9772" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="9774" href="/lia/part5/Exp/#8876" class="Function">full-abstraction-2</a></pre>

<h1 id="small-steps-operational-semantics">
<a class="anchor" href="#small-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h1>

<h2 id="global-environment">
<a class="anchor" href="#global-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global environment</h2>

<p>We use global environments and eager semantics.</p>

<pre class="Agda"><a id="9911" class="Keyword">infix</a> <a id="9917" class="Number">4</a> <a id="9919" href="/lia/part5/Exp/#9930" class="Datatype Operator">_⊢_↝_</a>
<a id="9925" class="Keyword">data</a> <a id="_⊢_↝_"></a><a id="9930" href="/lia/part5/Exp/#9930" class="Datatype Operator">_⊢_↝_</a> <a id="9936" class="Symbol">:</a> <a id="9938" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="9942" class="Symbol">→</a> <a id="9944" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="9949" class="Symbol">→</a> <a id="9951" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="9956" class="Symbol">→</a> <a id="9958" class="PrimitiveType">Set</a> <a id="9962" class="Keyword">where</a>

  <a id="_⊢_↝_.↝-Var"></a><a id="9971" href="/lia/part5/Exp/#9971" class="InductiveConstructor">↝-Var</a> <a id="9977" class="Symbol">:</a> <a id="9979" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="9981" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="9983" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="9985" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="9987" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="9989" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="9991" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="9993" href="/lia/part5/Exp/#595" class="Generalizable">x</a>

  <a id="_⊢_↝_.↝-Add-stop"></a><a id="9998" href="/lia/part5/Exp/#9998" class="InductiveConstructor">↝-Add-stop</a> <a id="10009" class="Symbol">:</a>
    <a id="10015" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10017" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10019" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10021" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="10023" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="10025" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10027" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="10029" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10031" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10033" class="Symbol">(</a><a id="10034" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="10036" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="10039" href="/lia/part5/Exp/#981" class="Generalizable">n</a><a id="10040" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Add-left"></a><a id="10045" href="/lia/part5/Exp/#10045" class="InductiveConstructor">↝-Add-left</a> <a id="10056" class="Symbol">:</a>
    <a id="10062" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10064" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10066" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10068" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10070" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10073" class="Symbol">→</a>
    <a id="10079" class="Comment">------------------</a>
    <a id="10102" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10104" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10106" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10108" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="10110" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10112" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10114" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10117" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="10119" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Add-right"></a><a id="10124" href="/lia/part5/Exp/#10124" class="InductiveConstructor">↝-Add-right</a> <a id="10136" class="Symbol">:</a>
    <a id="10142" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10144" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10146" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10148" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10150" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="10153" class="Symbol">→</a>
    <a id="10159" class="Comment">------------------</a>
    <a id="10182" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10184" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10186" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10188" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="10190" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10192" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10194" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10196" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="10198" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Mul-stop"></a><a id="10204" href="/lia/part5/Exp/#10204" class="InductiveConstructor">↝-Mul-stop</a> <a id="10215" class="Symbol">:</a>
    <a id="10221" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10223" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10225" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10227" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="10229" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="10231" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10233" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="10235" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10237" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10239" class="Symbol">(</a><a id="10240" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="10242" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="10245" href="/lia/part5/Exp/#981" class="Generalizable">n</a><a id="10246" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Mul-left"></a><a id="10251" href="/lia/part5/Exp/#10251" class="InductiveConstructor">↝-Mul-left</a> <a id="10262" class="Symbol">:</a>
    <a id="10268" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10270" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10272" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10274" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10276" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10279" class="Symbol">→</a>
    <a id="10285" class="Comment">------------------</a>
    <a id="10308" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10310" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10312" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10314" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="10316" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10318" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10320" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10323" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="10325" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Mul-right"></a><a id="10330" href="/lia/part5/Exp/#10330" class="InductiveConstructor">↝-Mul-right</a> <a id="10342" class="Symbol">:</a>
    <a id="10348" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10350" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10352" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10354" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10356" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="10359" class="Symbol">→</a>
    <a id="10365" class="Comment">------------------</a>
    <a id="10388" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10390" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10392" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10394" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="10396" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10398" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10400" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10402" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="10404" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-stop"></a><a id="10410" href="/lia/part5/Exp/#10410" class="InductiveConstructor">↝-Let-stop</a> <a id="10421" class="Symbol">:</a>
    <a id="10427" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10429" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10431" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="10435" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10437" class="Symbol">(</a><a id="10438" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10440" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="10441" class="Symbol">)</a> <a id="10443" class="Symbol">(</a><a id="10444" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10446" href="/lia/part5/Exp/#981" class="Generalizable">n</a><a id="10447" class="Symbol">)</a> <a id="10449" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10451" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10453" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

  <a id="_⊢_↝_.↝-Let-1"></a><a id="10458" href="/lia/part5/Exp/#10458" class="InductiveConstructor">↝-Let-1</a> <a id="10466" class="Symbol">:</a>
    <a id="10472" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10474" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="10476" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10478" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="10480" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="10482" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="10484" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10486" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10488" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10490" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="10493" class="Symbol">→</a>
    <a id="10499" class="Comment">----------------------------------</a>
    <a id="10538" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10540" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10542" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="10546" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10548" class="Symbol">(</a><a id="10549" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10551" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="10552" class="Symbol">)</a> <a id="10554" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10556" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10558" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="10562" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10564" class="Symbol">(</a><a id="10565" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="10567" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="10568" class="Symbol">)</a> <a id="10570" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-2"></a><a id="10576" href="/lia/part5/Exp/#10576" class="InductiveConstructor">↝-Let-2</a> <a id="10584" class="Symbol">:</a>
    <a id="10590" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10592" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10594" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10596" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10598" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10601" class="Symbol">→</a>
    <a id="10607" class="Comment">--------------------------</a>
    <a id="10638" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10640" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10642" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="10646" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10648" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10650" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10652" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10654" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="10658" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="10660" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="10663" href="/lia/part5/Exp/#961" class="Generalizable">f</a></pre>

<h3 id="preservation">Preservation</h3>

<pre class="Agda"><a id="preservation"></a><a id="10692" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10705" class="Symbol">:</a>
  <a id="10709" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10711" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="10713" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10715" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="10717" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10719" class="Symbol">→</a>
  <a id="10723" class="Comment">-----------------</a>
  <a id="10743" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="10745" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="10747" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="10749" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="10751" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="10753" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="10755" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="10757" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="10759" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

<a id="10762" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10775" href="/lia/part5/Exp/#9971" class="InductiveConstructor">↝-Var</a> <a id="10781" class="Symbol">=</a> <a id="10783" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="10789" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10802" href="/lia/part5/Exp/#9998" class="InductiveConstructor">↝-Add-stop</a> <a id="10813" class="Symbol">=</a> <a id="10815" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="10820" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10833" class="Symbol">(</a><a id="10834" href="/lia/part5/Exp/#10045" class="InductiveConstructor">↝-Add-left</a> <a id="10845" href="/lia/part5/Exp/#10845" class="Bound">step</a><a id="10849" class="Symbol">)</a> <a id="10851" class="Keyword">rewrite</a> <a id="10859" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10872" href="/lia/part5/Exp/#10845" class="Bound">step</a> <a id="10877" class="Symbol">=</a> <a id="10879" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="10884" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10897" class="Symbol">(</a><a id="10898" href="/lia/part5/Exp/#10124" class="InductiveConstructor">↝-Add-right</a> <a id="10910" href="/lia/part5/Exp/#10910" class="Bound">step</a><a id="10914" class="Symbol">)</a> <a id="10916" class="Keyword">rewrite</a> <a id="10924" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10937" href="/lia/part5/Exp/#10910" class="Bound">step</a> <a id="10942" class="Symbol">=</a> <a id="10944" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="10950" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10963" href="/lia/part5/Exp/#10204" class="InductiveConstructor">↝-Mul-stop</a> <a id="10974" class="Symbol">=</a> <a id="10976" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="10981" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="10994" class="Symbol">(</a><a id="10995" href="/lia/part5/Exp/#10251" class="InductiveConstructor">↝-Mul-left</a> <a id="11006" href="/lia/part5/Exp/#11006" class="Bound">step</a><a id="11010" class="Symbol">)</a> <a id="11012" class="Keyword">rewrite</a> <a id="11020" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11033" href="/lia/part5/Exp/#11006" class="Bound">step</a> <a id="11038" class="Symbol">=</a> <a id="11040" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11045" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11058" class="Symbol">(</a><a id="11059" href="/lia/part5/Exp/#10330" class="InductiveConstructor">↝-Mul-right</a> <a id="11071" href="/lia/part5/Exp/#11071" class="Bound">step</a><a id="11075" class="Symbol">)</a> <a id="11077" class="Keyword">rewrite</a> <a id="11085" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11098" href="/lia/part5/Exp/#11071" class="Bound">step</a> <a id="11103" class="Symbol">=</a> <a id="11105" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11111" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11124" href="/lia/part5/Exp/#10410" class="InductiveConstructor">↝-Let-stop</a> <a id="11135" class="Symbol">=</a> <a id="11137" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11142" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11155" class="Symbol">(</a><a id="11156" href="/lia/part5/Exp/#10458" class="InductiveConstructor">↝-Let-1</a> <a id="11164" href="/lia/part5/Exp/#11164" class="Bound">step</a><a id="11168" class="Symbol">)</a> <a id="11170" class="Keyword">rewrite</a> <a id="11178" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11191" href="/lia/part5/Exp/#11164" class="Bound">step</a> <a id="11196" class="Symbol">=</a> <a id="11198" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11203" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11216" class="Symbol">(</a><a id="11217" href="/lia/part5/Exp/#10576" class="InductiveConstructor">↝-Let-2</a> <a id="11225" href="/lia/part5/Exp/#11225" class="Bound">step</a><a id="11229" class="Symbol">)</a> <a id="11231" class="Keyword">rewrite</a> <a id="11239" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="11252" href="/lia/part5/Exp/#11225" class="Bound">step</a> <a id="11257" class="Symbol">=</a> <a id="11259" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="transitive-closure">Transitive closure</h3>

<p>We define the transitive closure of the small-step operational
semantics.</p>

<pre class="Agda"><a id="11372" class="Keyword">data</a> <a id="_⊢_↝*_"></a><a id="11377" href="/lia/part5/Exp/#11377" class="Datatype Operator">_⊢_↝*_</a> <a id="11384" class="Symbol">:</a> <a id="11386" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="11390" class="Symbol">→</a> <a id="11392" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="11397" class="Symbol">→</a> <a id="11399" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="11404" class="Symbol">→</a> <a id="11406" class="PrimitiveType">Set</a> <a id="11410" class="Keyword">where</a>

    <a id="_⊢_↝*_.stop"></a><a id="11421" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="11426" class="Symbol">:</a> <a id="11428" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11430" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11432" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11434" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11437" href="/lia/part5/Exp/#956" class="Generalizable">e</a>

    <a id="_⊢_↝*_.one"></a><a id="11444" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="11448" class="Symbol">:</a> <a id="11450" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11452" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="11454" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11456" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="11458" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11460" class="Symbol">→</a>
          <a id="11472" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11474" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11476" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11478" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11481" href="/lia/part5/Exp/#966" class="Generalizable">g</a> <a id="11483" class="Symbol">→</a>
          <a id="11495" class="Comment">----------</a>
          <a id="11516" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11518" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11520" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11522" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11525" href="/lia/part5/Exp/#966" class="Generalizable">g</a></pre>

<p>We can indeed show that <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> is transitive with a standard
induction.</p>

<pre class="Agda"><a id="↝*-trans"></a><a id="11611" href="/lia/part5/Exp/#11611" class="Function">↝*-trans</a> <a id="11620" class="Symbol">:</a>
  <a id="11624" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11626" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11628" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11630" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11633" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11635" class="Symbol">→</a>
  <a id="11639" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11641" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11643" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11645" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11648" href="/lia/part5/Exp/#966" class="Generalizable">g</a> <a id="11650" class="Symbol">→</a>
  <a id="11654" class="Comment">----------</a>
  <a id="11667" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11669" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11671" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11673" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11676" href="/lia/part5/Exp/#966" class="Generalizable">g</a>

<a id="11679" href="/lia/part5/Exp/#11611" class="Function">↝*-trans</a> <a id="11688" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="11693" href="/lia/part5/Exp/#11693" class="Bound">δ</a> <a id="11695" class="Symbol">=</a> <a id="11697" href="/lia/part5/Exp/#11693" class="Bound">δ</a>
<a id="11699" href="/lia/part5/Exp/#11611" class="Function">↝*-trans</a> <a id="11708" class="Symbol">(</a><a id="11709" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="11713" href="/lia/part5/Exp/#11713" class="Bound">step</a> <a id="11718" href="/lia/part5/Exp/#11718" class="Bound">δ₁</a><a id="11720" class="Symbol">)</a> <a id="11722" href="/lia/part5/Exp/#11722" class="Bound">δ₂</a> <a id="11725" class="Symbol">=</a> <a id="11727" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="11731" href="/lia/part5/Exp/#11713" class="Bound">step</a> <a id="11736" class="Symbol">(</a><a id="11737" href="/lia/part5/Exp/#11611" class="Function">↝*-trans</a> <a id="11746" href="/lia/part5/Exp/#11718" class="Bound">δ₁</a> <a id="11749" href="/lia/part5/Exp/#11722" class="Bound">δ₂</a><a id="11751" class="Symbol">)</a></pre>

<p>An easy induction based on <a href="#preservation"><code class="language-plaintext highlighter-rouge">preservation</code></a> shows that
the denotational semantics is preserved by the transitive closure of the
small-step operational semantics.</p>

<pre class="Agda"><a id="preservation*"></a><a id="11927" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="11941" class="Symbol">:</a>
  <a id="11945" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11947" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="11949" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11951" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="11954" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11956" class="Symbol">→</a>
  <a id="11960" class="Comment">-----------------</a>
  <a id="11980" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="11982" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="11984" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="11986" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="11988" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11990" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="11992" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="11994" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="11996" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

<a id="11999" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="12013" class="Symbol">{</a><a id="12014" href="/lia/part5/Exp/#12014" class="Bound">ϱ</a><a id="12015" class="Symbol">}</a> <a id="12017" class="Symbol">{</a><a id="12018" href="/lia/part5/Exp/#12018" class="Bound">e</a><a id="12019" class="Symbol">}</a> <a id="12021" class="Symbol">{</a><a id="12022" class="DottedPattern Symbol">.</a><a id="12023" href="/lia/part5/Exp/#12018" class="DottedPattern Bound">e</a><a id="12024" class="Symbol">}</a> <a id="12026" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="12031" class="Symbol">=</a> <a id="12033" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="12038" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="12052" class="Symbol">{</a><a id="12053" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a><a id="12054" class="Symbol">}</a> <a id="12056" class="Symbol">{</a><a id="12057" href="/lia/part5/Exp/#12057" class="Bound">e</a><a id="12058" class="Symbol">}</a> <a id="12060" class="Symbol">{</a><a id="12061" href="/lia/part5/Exp/#12061" class="Bound">g</a><a id="12062" class="Symbol">}</a> <a id="12064" class="Symbol">(</a><a id="12065" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="12069" class="Symbol">{</a><a id="12070" class="Argument">f</a> <a id="12072" class="Symbol">=</a> <a id="12074" href="/lia/part5/Exp/#12074" class="Bound">f</a><a id="12075" class="Symbol">}</a> <a id="12077" href="/lia/part5/Exp/#12077" class="Bound">step</a> <a id="12082" href="/lia/part5/Exp/#12082" class="Bound">der</a><a id="12085" class="Symbol">)</a> <a id="12087" class="Symbol">=</a>
    <a id="12093" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
        <a id="12107" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="12109" href="/lia/part5/Exp/#12057" class="Bound">e</a> <a id="12111" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="12113" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a> <a id="12115" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="12118" href="/lia/part5/Exp/#10692" class="Function">preservation</a> <a id="12131" class="Symbol">{</a><a id="12132" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a><a id="12133" class="Symbol">}</a> <a id="12135" class="Symbol">{</a><a id="12136" href="/lia/part5/Exp/#12057" class="Bound">e</a><a id="12137" class="Symbol">}</a> <a id="12139" class="Symbol">{</a><a id="12140" href="/lia/part5/Exp/#12074" class="Bound">f</a><a id="12141" class="Symbol">}</a> <a id="12143" href="/lia/part5/Exp/#12077" class="Bound">step</a> <a id="12148" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="12158" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="12160" href="/lia/part5/Exp/#12074" class="Bound">f</a> <a id="12162" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="12164" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a> <a id="12166" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="12169" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="12183" class="Symbol">{</a><a id="12184" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a><a id="12185" class="Symbol">}</a> <a id="12187" class="Symbol">{</a><a id="12188" href="/lia/part5/Exp/#12074" class="Bound">f</a><a id="12189" class="Symbol">}</a> <a id="12191" class="Symbol">{</a><a id="12192" href="/lia/part5/Exp/#12061" class="Bound">g</a><a id="12193" class="Symbol">}</a> <a id="12195" href="/lia/part5/Exp/#12082" class="Bound">der</a> <a id="12199" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="12209" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="12211" href="/lia/part5/Exp/#12061" class="Bound">g</a> <a id="12213" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="12215" href="/lia/part5/Exp/#12053" class="Bound">ϱ</a>
    <a id="12221" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a></pre>

<p>This immediately implies that whenever the small-step semantics
terminates producing a number <code class="language-plaintext highlighter-rouge">m</code>, then this is the right result.</p>

<pre class="Agda"><a id="↝*-agree-⟦⟧"></a><a id="12363" href="/lia/part5/Exp/#12363" class="Function">↝*-agree-⟦⟧</a> <a id="12375" class="Symbol">:</a>
  <a id="12379" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="12381" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="12383" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="12385" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="12388" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="12390" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="12392" class="Symbol">→</a>
  <a id="12396" class="Comment">--------------</a>
  <a id="12413" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="12415" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12417" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="12419" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="12421" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="12423" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

<a id="12426" href="/lia/part5/Exp/#12363" class="Function">↝*-agree-⟦⟧</a> <a id="12438" href="/lia/part5/Exp/#12438" class="Bound">der</a> <a id="12442" class="Symbol">=</a> <a id="12444" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="12448" class="Symbol">(</a><a id="12449" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="12463" href="/lia/part5/Exp/#12438" class="Bound">der</a><a id="12466" class="Symbol">)</a></pre>

<h3 id="deterministic-values">Deterministic values</h3>

<p>Notice that small-step semantics is a non-deterministic relation: In
general there may be several ways to reduce an expression (as witnessed
by the rules <code class="language-plaintext highlighter-rouge">↝-Add-left</code> and <code class="language-plaintext highlighter-rouge">↝-Add-right</code> for instance).</p>

<p>However, as an immediate consequence of preservation we have that if two
numerical values are eventually produced, then they necessarily are the
same number.</p>

<pre class="Agda"><a id="↝*-det"></a><a id="12863" href="/lia/part5/Exp/#12863" class="Function">↝*-det</a> <a id="12870" class="Symbol">:</a>
  <a id="12874" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="12876" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="12878" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="12880" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="12883" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="12887" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="12889" class="Symbol">→</a>
  <a id="12893" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="12895" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="12897" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="12899" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="12902" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="12906" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="12908" class="Symbol">→</a>
  <a id="12912" class="Comment">-----------------</a>
  <a id="12932" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="12934" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12936" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

<a id="12939" href="/lia/part5/Exp/#12863" class="Function">↝*-det</a> <a id="12946" href="/lia/part5/Exp/#12946" class="Bound">der1</a> <a id="12951" href="/lia/part5/Exp/#12951" class="Bound">der2</a> <a id="12956" class="Keyword">rewrite</a> <a id="12964" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="12968" class="Symbol">(</a><a id="12969" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="12983" href="/lia/part5/Exp/#12946" class="Bound">der1</a><a id="12987" class="Symbol">)</a> <a id="12989" class="Symbol">|</a> <a id="12991" href="/lia/part5/Exp/#11927" class="Function">preservation*</a> <a id="13005" href="/lia/part5/Exp/#12951" class="Bound">der2</a> <a id="13010" class="Symbol">=</a> <a id="13012" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="congruence">Congruence</h3>

<p>We show that the transitive closure <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> respects subexpressions.</p>

<pre class="Agda"><a id="add-cong-1"></a><a id="13113" href="/lia/part5/Exp/#13113" class="Function">add-cong-1</a> <a id="13124" class="Symbol">:</a>
  <a id="13128" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13130" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13132" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13134" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13137" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13140" class="Symbol">→</a>
  <a id="13144" class="Comment">-------------------</a>
  <a id="13166" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13168" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13170" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13172" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="13174" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13176" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13179" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13182" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="13184" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

<a id="13187" href="/lia/part5/Exp/#13113" class="Function">add-cong-1</a> <a id="13198" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="13203" class="Symbol">=</a> <a id="13205" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="13210" href="/lia/part5/Exp/#13113" class="Function">add-cong-1</a> <a id="13221" class="Symbol">(</a><a id="13222" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13226" href="/lia/part5/Exp/#13226" class="Bound">x</a> <a id="13228" href="/lia/part5/Exp/#13228" class="Bound">d</a><a id="13229" class="Symbol">)</a> <a id="13231" class="Symbol">=</a> <a id="13233" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13237" class="Symbol">(</a><a id="13238" href="/lia/part5/Exp/#10045" class="InductiveConstructor">↝-Add-left</a> <a id="13249" href="/lia/part5/Exp/#13226" class="Bound">x</a><a id="13250" class="Symbol">)</a> <a id="13252" class="Symbol">(</a><a id="13253" href="/lia/part5/Exp/#13113" class="Function">add-cong-1</a> <a id="13264" href="/lia/part5/Exp/#13228" class="Bound">d</a><a id="13265" class="Symbol">)</a>

<a id="add-cong-2"></a><a id="13268" href="/lia/part5/Exp/#13268" class="Function">add-cong-2</a> <a id="13279" class="Symbol">:</a>
  <a id="13283" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13285" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13287" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13289" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13292" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="13295" class="Symbol">→</a>
  <a id="13299" class="Comment">-------------------</a>
  <a id="13321" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13323" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13325" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13327" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="13329" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13331" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13334" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13336" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="13338" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

<a id="13342" href="/lia/part5/Exp/#13268" class="Function">add-cong-2</a> <a id="13353" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="13358" class="Symbol">=</a> <a id="13360" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="13365" href="/lia/part5/Exp/#13268" class="Function">add-cong-2</a> <a id="13376" class="Symbol">(</a><a id="13377" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13381" href="/lia/part5/Exp/#13381" class="Bound">x</a> <a id="13383" href="/lia/part5/Exp/#13383" class="Bound">d</a><a id="13384" class="Symbol">)</a> <a id="13386" class="Symbol">=</a> <a id="13388" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13392" class="Symbol">(</a><a id="13393" href="/lia/part5/Exp/#10124" class="InductiveConstructor">↝-Add-right</a> <a id="13405" href="/lia/part5/Exp/#13381" class="Bound">x</a><a id="13406" class="Symbol">)</a> <a id="13408" class="Symbol">(</a><a id="13409" href="/lia/part5/Exp/#13268" class="Function">add-cong-2</a> <a id="13420" href="/lia/part5/Exp/#13383" class="Bound">d</a><a id="13421" class="Symbol">)</a>

<a id="mul-cong-1"></a><a id="13424" href="/lia/part5/Exp/#13424" class="Function">mul-cong-1</a> <a id="13435" class="Symbol">:</a>
  <a id="13439" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13441" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13443" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13445" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13448" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13451" class="Symbol">→</a>
  <a id="13455" class="Comment">-------------------</a>
  <a id="13477" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13479" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13481" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13483" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="13485" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13487" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13490" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13493" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="13495" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

<a id="13498" href="/lia/part5/Exp/#13424" class="Function">mul-cong-1</a> <a id="13509" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="13514" class="Symbol">=</a> <a id="13516" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="13521" href="/lia/part5/Exp/#13424" class="Function">mul-cong-1</a> <a id="13532" class="Symbol">(</a><a id="13533" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13537" href="/lia/part5/Exp/#13537" class="Bound">x</a> <a id="13539" href="/lia/part5/Exp/#13539" class="Bound">d</a><a id="13540" class="Symbol">)</a> <a id="13542" class="Symbol">=</a> <a id="13544" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13548" class="Symbol">(</a><a id="13549" href="/lia/part5/Exp/#10251" class="InductiveConstructor">↝-Mul-left</a> <a id="13560" href="/lia/part5/Exp/#13537" class="Bound">x</a><a id="13561" class="Symbol">)</a> <a id="13563" class="Symbol">(</a><a id="13564" href="/lia/part5/Exp/#13424" class="Function">mul-cong-1</a> <a id="13575" href="/lia/part5/Exp/#13539" class="Bound">d</a><a id="13576" class="Symbol">)</a>

<a id="mul-cong-2"></a><a id="13579" href="/lia/part5/Exp/#13579" class="Function">mul-cong-2</a> <a id="13590" class="Symbol">:</a>
  <a id="13594" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13596" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13598" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13600" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13603" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="13606" class="Symbol">→</a>
  <a id="13610" class="Comment">-------------------</a>
  <a id="13632" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13634" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13636" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13638" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="13640" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13642" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13645" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13647" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="13649" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

<a id="13653" href="/lia/part5/Exp/#13579" class="Function">mul-cong-2</a> <a id="13664" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="13669" class="Symbol">=</a> <a id="13671" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="13676" href="/lia/part5/Exp/#13579" class="Function">mul-cong-2</a> <a id="13687" class="Symbol">(</a><a id="13688" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13692" href="/lia/part5/Exp/#13692" class="Bound">x</a> <a id="13694" href="/lia/part5/Exp/#13694" class="Bound">d</a><a id="13695" class="Symbol">)</a> <a id="13697" class="Symbol">=</a> <a id="13699" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13703" class="Symbol">(</a><a id="13704" href="/lia/part5/Exp/#10330" class="InductiveConstructor">↝-Mul-right</a> <a id="13716" href="/lia/part5/Exp/#13692" class="Bound">x</a><a id="13717" class="Symbol">)</a> <a id="13719" class="Symbol">(</a><a id="13720" href="/lia/part5/Exp/#13579" class="Function">mul-cong-2</a> <a id="13731" href="/lia/part5/Exp/#13694" class="Bound">d</a><a id="13732" class="Symbol">)</a>

<a id="let-cong-1"></a><a id="13735" href="/lia/part5/Exp/#13735" class="Function">let-cong-1</a> <a id="13746" class="Symbol">:</a>
  <a id="13750" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13752" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13754" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13756" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13759" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13762" class="Symbol">→</a>
  <a id="13766" class="Comment">----------------------------</a>
  <a id="13797" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13799" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13801" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="13805" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="13807" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="13809" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13811" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13814" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="13818" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="13820" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="13823" href="/lia/part5/Exp/#961" class="Generalizable">f</a>

<a id="13826" href="/lia/part5/Exp/#13735" class="Function">let-cong-1</a> <a id="13837" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="13842" class="Symbol">=</a> <a id="13844" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="13849" href="/lia/part5/Exp/#13735" class="Function">let-cong-1</a> <a id="13860" class="Symbol">(</a><a id="13861" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13865" href="/lia/part5/Exp/#13865" class="Bound">x</a> <a id="13867" href="/lia/part5/Exp/#13867" class="Bound">d</a><a id="13868" class="Symbol">)</a> <a id="13870" class="Symbol">=</a> <a id="13872" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="13876" class="Symbol">(</a><a id="13877" href="/lia/part5/Exp/#10576" class="InductiveConstructor">↝-Let-2</a> <a id="13885" href="/lia/part5/Exp/#13865" class="Bound">x</a><a id="13886" class="Symbol">)</a> <a id="13888" class="Symbol">(</a><a id="13889" href="/lia/part5/Exp/#13735" class="Function">let-cong-1</a> <a id="13900" href="/lia/part5/Exp/#13867" class="Bound">d</a><a id="13901" class="Symbol">)</a>

<a id="let-cong-2"></a><a id="13904" href="/lia/part5/Exp/#13904" class="Function">let-cong-2</a> <a id="13915" class="Symbol">:</a>
  <a id="13919" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13921" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="13923" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="13925" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="13927" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="13929" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="13931" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13933" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="13935" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="13938" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="13941" class="Symbol">→</a>
  <a id="13945" class="Comment">-----------------------------------</a>
  <a id="13983" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="13985" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="13987" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="13991" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="13993" class="Symbol">(</a><a id="13994" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="13996" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="13997" class="Symbol">)</a> <a id="13999" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="14001" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14004" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="14008" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="14010" class="Symbol">(</a><a id="14011" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="14013" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="14014" class="Symbol">)</a> <a id="14016" href="/lia/part5/Exp/#963" class="Generalizable">f′</a>

<a id="14020" href="/lia/part5/Exp/#13904" class="Function">let-cong-2</a> <a id="14031" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="14036" class="Symbol">=</a> <a id="14038" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>
<a id="14043" href="/lia/part5/Exp/#13904" class="Function">let-cong-2</a> <a id="14054" class="Symbol">(</a><a id="14055" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="14059" href="/lia/part5/Exp/#14059" class="Bound">x</a> <a id="14061" href="/lia/part5/Exp/#14061" class="Bound">d</a><a id="14062" class="Symbol">)</a> <a id="14064" class="Symbol">=</a> <a id="14066" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="14070" class="Symbol">(</a><a id="14071" href="/lia/part5/Exp/#10458" class="InductiveConstructor">↝-Let-1</a> <a id="14079" href="/lia/part5/Exp/#14059" class="Bound">x</a><a id="14080" class="Symbol">)</a> <a id="14082" class="Symbol">(</a><a id="14083" href="/lia/part5/Exp/#13904" class="Function">let-cong-2</a> <a id="14094" href="/lia/part5/Exp/#14061" class="Bound">d</a><a id="14095" class="Symbol">)</a></pre>

<h3 id="relational-reasoning">Relational reasoning</h3>

<p>We introduce some syntactic sugaring to conveniently write chains of
small steps.</p>

<pre class="Agda"><a id="14215" class="Keyword">infixr</a> <a id="14222" class="Number">2</a> <a id="14224" href="/lia/part5/Exp/#14262" class="Function Operator">_↝*⟨⟩_</a> <a id="14231" href="/lia/part5/Exp/#14329" class="Function Operator">_↝*⟨_⟩_</a> <a id="14239" href="/lia/part5/Exp/#14432" class="Function Operator">_↝⟨_⟩_</a> 
<a id="14247" class="Keyword">infix</a>  <a id="14254" class="Number">3</a> <a id="14256" href="/lia/part5/Exp/#14539" class="Function Operator">_↝*∎</a>

<a id="_↝*⟨⟩_"></a><a id="14262" href="/lia/part5/Exp/#14262" class="Function Operator">_↝*⟨⟩_</a> <a id="14269" class="Symbol">:</a> <a id="14271" class="Symbol">∀</a> <a id="14273" class="Symbol">{</a><a id="14274" href="/lia/part5/Exp/#14274" class="Bound">ϱ</a><a id="14275" class="Symbol">}</a> <a id="14277" href="/lia/part5/Exp/#14277" class="Bound">e</a> <a id="14279" class="Symbol">{</a><a id="14280" href="/lia/part5/Exp/#14280" class="Bound">f</a><a id="14281" class="Symbol">}</a> <a id="14283" class="Symbol">→</a> <a id="14285" href="/lia/part5/Exp/#14274" class="Bound">ϱ</a> <a id="14287" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14289" href="/lia/part5/Exp/#14277" class="Bound">e</a> <a id="14291" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14294" href="/lia/part5/Exp/#14280" class="Bound">f</a> <a id="14296" class="Symbol">→</a> <a id="14298" href="/lia/part5/Exp/#14274" class="Bound">ϱ</a> <a id="14300" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14302" href="/lia/part5/Exp/#14277" class="Bound">e</a> <a id="14304" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14307" href="/lia/part5/Exp/#14280" class="Bound">f</a>
<a id="14309" href="/lia/part5/Exp/#14309" class="Bound">e</a> <a id="14311" href="/lia/part5/Exp/#14262" class="Function Operator">↝*⟨⟩</a> <a id="14316" href="/lia/part5/Exp/#14316" class="Bound">e↝*f</a> <a id="14321" class="Symbol">=</a> <a id="14323" href="/lia/part5/Exp/#14316" class="Bound">e↝*f</a>

<a id="_↝*⟨_⟩_"></a><a id="14329" href="/lia/part5/Exp/#14329" class="Function Operator">_↝*⟨_⟩_</a> <a id="14337" class="Symbol">:</a> <a id="14339" class="Symbol">∀</a> <a id="14341" class="Symbol">{</a><a id="14342" href="/lia/part5/Exp/#14342" class="Bound">ϱ</a><a id="14343" class="Symbol">}</a> <a id="14345" href="/lia/part5/Exp/#14345" class="Bound">e</a> <a id="14347" class="Symbol">{</a><a id="14348" href="/lia/part5/Exp/#14348" class="Bound">f</a> <a id="14350" href="/lia/part5/Exp/#14350" class="Bound">g</a><a id="14351" class="Symbol">}</a> <a id="14353" class="Symbol">→</a> <a id="14355" href="/lia/part5/Exp/#14342" class="Bound">ϱ</a> <a id="14357" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14359" href="/lia/part5/Exp/#14345" class="Bound">e</a> <a id="14361" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14364" href="/lia/part5/Exp/#14348" class="Bound">f</a> <a id="14366" class="Symbol">→</a> <a id="14368" href="/lia/part5/Exp/#14342" class="Bound">ϱ</a> <a id="14370" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14372" href="/lia/part5/Exp/#14348" class="Bound">f</a> <a id="14374" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14377" href="/lia/part5/Exp/#14350" class="Bound">g</a> <a id="14379" class="Symbol">→</a> <a id="14381" href="/lia/part5/Exp/#14342" class="Bound">ϱ</a> <a id="14383" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14385" href="/lia/part5/Exp/#14345" class="Bound">e</a> <a id="14387" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14390" href="/lia/part5/Exp/#14350" class="Bound">g</a>
<a id="14392" href="/lia/part5/Exp/#14392" class="Bound">e</a> <a id="14394" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="14398" href="/lia/part5/Exp/#14398" class="Bound">e↝*f</a> <a id="14403" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a> <a id="14405" href="/lia/part5/Exp/#14405" class="Bound">f↝*g</a> <a id="14410" class="Symbol">=</a> <a id="14412" href="/lia/part5/Exp/#11611" class="Function">↝*-trans</a> <a id="14421" href="/lia/part5/Exp/#14398" class="Bound">e↝*f</a> <a id="14426" href="/lia/part5/Exp/#14405" class="Bound">f↝*g</a>

<a id="_↝⟨_⟩_"></a><a id="14432" href="/lia/part5/Exp/#14432" class="Function Operator">_↝⟨_⟩_</a> <a id="14439" class="Symbol">:</a> <a id="14441" class="Symbol">∀</a> <a id="14443" class="Symbol">{</a><a id="14444" href="/lia/part5/Exp/#14444" class="Bound">ϱ</a><a id="14445" class="Symbol">}</a> <a id="14447" href="/lia/part5/Exp/#14447" class="Bound">e</a> <a id="14449" class="Symbol">{</a><a id="14450" href="/lia/part5/Exp/#14450" class="Bound">f</a> <a id="14452" href="/lia/part5/Exp/#14452" class="Bound">g</a><a id="14453" class="Symbol">}</a> <a id="14455" class="Symbol">→</a> <a id="14457" href="/lia/part5/Exp/#14444" class="Bound">ϱ</a> <a id="14459" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="14461" href="/lia/part5/Exp/#14447" class="Bound">e</a> <a id="14463" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="14465" href="/lia/part5/Exp/#14450" class="Bound">f</a> <a id="14467" class="Symbol">→</a> <a id="14469" href="/lia/part5/Exp/#14444" class="Bound">ϱ</a> <a id="14471" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14473" href="/lia/part5/Exp/#14450" class="Bound">f</a> <a id="14475" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14478" href="/lia/part5/Exp/#14452" class="Bound">g</a> <a id="14480" class="Symbol">→</a> <a id="14482" href="/lia/part5/Exp/#14444" class="Bound">ϱ</a> <a id="14484" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14486" href="/lia/part5/Exp/#14447" class="Bound">e</a> <a id="14488" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14491" href="/lia/part5/Exp/#14452" class="Bound">g</a>
<a id="14493" href="/lia/part5/Exp/#14493" class="Bound">e</a> <a id="14495" href="/lia/part5/Exp/#14432" class="Function Operator">↝⟨</a> <a id="14498" href="/lia/part5/Exp/#14498" class="Bound">e↝f</a> <a id="14502" href="/lia/part5/Exp/#14432" class="Function Operator">⟩</a> <a id="14504" href="/lia/part5/Exp/#14504" class="Bound">f↝*g</a> <a id="14509" class="Symbol">=</a> <a id="14511" href="/lia/part5/Exp/#14493" class="Bound">e</a> <a id="14513" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="14517" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="14521" href="/lia/part5/Exp/#14498" class="Bound">e↝f</a> <a id="14525" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a> <a id="14530" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a> <a id="14532" href="/lia/part5/Exp/#14504" class="Bound">f↝*g</a> 

<a id="_↝*∎"></a><a id="14539" href="/lia/part5/Exp/#14539" class="Function Operator">_↝*∎</a> <a id="14544" class="Symbol">:</a> <a id="14546" class="Symbol">∀</a> <a id="14548" href="/lia/part5/Exp/#14548" class="Bound">e</a> <a id="14550" class="Symbol">→</a> <a id="14552" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="14554" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="14556" href="/lia/part5/Exp/#14548" class="Bound">e</a> <a id="14558" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="14561" href="/lia/part5/Exp/#14548" class="Bound">e</a>
<a id="14563" href="/lia/part5/Exp/#14563" class="Bound">e</a> <a id="14565" href="/lia/part5/Exp/#14539" class="Function Operator">↝*∎</a> <a id="14569" class="Symbol">=</a> <a id="14571" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a></pre>

<h3 id="exercise-termination-weak-normalisation">
<strong>Exercise</strong>: Termination (Weak normalisation)</h3>

<p>So far we have shown that the small-step semantics produces the right
result, <em>if it produces any result at all</em>. In fact, an operational
semantics that never reaches a Numerical value trivially satisfies this
condition.</p>

<p>We prove that the small step operational semantics can always reache
some numerical value after a finite number of steps. In other word, we
prove below that the rewrite is <em>weakly normalising</em>.</p>

<pre class="Agda"><a id="weak-normalisation"></a><a id="15054" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15073" class="Symbol">:</a> <a id="15075" class="Symbol">∀</a> <a id="15077" href="/lia/part5/Exp/#15077" class="Bound">e</a> <a id="15079" class="Symbol">→</a> <a id="15081" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="15083" href="/lia/part5/Exp/#11377" class="Datatype Operator">⊢</a> <a id="15085" href="/lia/part5/Exp/#15077" class="Bound">e</a> <a id="15087" href="/lia/part5/Exp/#11377" class="Datatype Operator">↝*</a> <a id="15090" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15092" class="Symbol">(</a><a id="15093" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15095" href="/lia/part5/Exp/#15077" class="Bound">e</a> <a id="15097" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15099" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a><a id="15100" class="Symbol">)</a>

<a id="15103" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15122" class="Symbol">(</a><a id="15123" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15125" href="/lia/part5/Exp/#15125" class="Bound">n</a><a id="15126" class="Symbol">)</a> <a id="15128" class="Symbol">=</a> <a id="15130" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>

<a id="15136" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15155" class="Symbol">(</a><a id="15156" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="15158" href="/lia/part5/Exp/#15158" class="Bound">x</a><a id="15159" class="Symbol">)</a> <a id="15161" class="Symbol">=</a> <a id="15163" href="/lia/part5/Exp/#11444" class="InductiveConstructor">one</a> <a id="15167" href="/lia/part5/Exp/#9971" class="InductiveConstructor">↝-Var</a> <a id="15173" href="/lia/part5/Exp/#11421" class="InductiveConstructor">stop</a>

<a id="15179" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15198" class="Symbol">{</a><a id="15199" href="/lia/part5/Exp/#15199" class="Bound">ϱ</a><a id="15200" class="Symbol">}</a> <a id="15202" class="Symbol">(</a><a id="15203" href="/lia/part5/Exp/#15203" class="Bound">e</a> <a id="15205" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="15207" href="/lia/part5/Exp/#15207" class="Bound">f</a><a id="15208" class="Symbol">)</a>
  <a id="15212" class="Keyword">with</a> <a id="15217" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15236" href="/lia/part5/Exp/#15203" class="Bound">e</a> <a id="15238" class="Symbol">|</a> <a id="15240" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15259" href="/lia/part5/Exp/#15207" class="Bound">f</a>
<a id="15261" class="Symbol">...</a> <a id="15265" class="Symbol">|</a> <a id="15267" href="/lia/part5/Exp/#15267" class="Bound">de</a> <a id="15270" class="Symbol">|</a> <a id="15272" href="/lia/part5/Exp/#15272" class="Bound">df</a> <a id="15275" class="Symbol">=</a> 
  <a id="15280" class="Bound">e</a> <a id="15282" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="15284" class="Bound">f</a> <a id="15286" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15290" href="/lia/part5/Exp/#13113" class="Function">add-cong-1</a> <a id="15301" href="/lia/part5/Exp/#15267" class="Bound">de</a> <a id="15304" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
  <a id="15308" class="Symbol">(</a><a id="15309" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15311" class="Symbol">(</a><a id="15312" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15314" class="Bound">e</a> <a id="15316" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15318" class="Bound">ϱ</a><a id="15319" class="Symbol">))</a> <a id="15322" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="15324" class="Bound">f</a> <a id="15326" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15330" href="/lia/part5/Exp/#13268" class="Function">add-cong-2</a> <a id="15341" href="/lia/part5/Exp/#15272" class="Bound">df</a> <a id="15344" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
  <a id="15348" class="Symbol">(</a><a id="15349" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15351" class="Symbol">(</a><a id="15352" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15354" class="Bound">e</a> <a id="15356" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15358" class="Bound">ϱ</a><a id="15359" class="Symbol">))</a> <a id="15362" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="15364" class="Symbol">(</a><a id="15365" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15367" class="Symbol">(</a><a id="15368" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15370" class="Bound">f</a> <a id="15372" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15374" class="Bound">ϱ</a><a id="15375" class="Symbol">))</a> <a id="15378" href="/lia/part5/Exp/#14432" class="Function Operator">↝⟨</a> <a id="15381" href="/lia/part5/Exp/#9998" class="InductiveConstructor">↝-Add-stop</a> <a id="15392" href="/lia/part5/Exp/#14432" class="Function Operator">⟩</a>
  <a id="15396" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15398" class="Symbol">(</a><a id="15399" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15401" class="Bound">e</a> <a id="15403" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15405" class="Bound">ϱ</a> <a id="15407" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="15410" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15412" class="Bound">f</a> <a id="15414" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15416" class="Bound">ϱ</a><a id="15417" class="Symbol">)</a>
  <a id="15421" href="/lia/part5/Exp/#14539" class="Function Operator">↝*∎</a>

<a id="15426" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15445" class="Symbol">{</a><a id="15446" href="/lia/part5/Exp/#15446" class="Bound">ϱ</a><a id="15447" class="Symbol">}</a> <a id="15449" class="Symbol">(</a><a id="15450" href="/lia/part5/Exp/#15450" class="Bound">e</a> <a id="15452" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="15454" href="/lia/part5/Exp/#15454" class="Bound">f</a><a id="15455" class="Symbol">)</a>
  <a id="15459" class="Keyword">with</a> <a id="15464" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15483" href="/lia/part5/Exp/#15450" class="Bound">e</a> <a id="15485" class="Symbol">|</a> <a id="15487" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15506" href="/lia/part5/Exp/#15454" class="Bound">f</a>
<a id="15508" class="Symbol">...</a> <a id="15512" class="Symbol">|</a> <a id="15514" href="/lia/part5/Exp/#15514" class="Bound">de</a> <a id="15517" class="Symbol">|</a> <a id="15519" href="/lia/part5/Exp/#15519" class="Bound">df</a> <a id="15522" class="Symbol">=</a> 
  <a id="15527" class="Bound">e</a> <a id="15529" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="15531" class="Bound">f</a> <a id="15533" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15537" href="/lia/part5/Exp/#13424" class="Function">mul-cong-1</a> <a id="15548" href="/lia/part5/Exp/#15514" class="Bound">de</a> <a id="15551" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
  <a id="15555" class="Symbol">(</a><a id="15556" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15558" class="Symbol">(</a><a id="15559" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15561" class="Bound">e</a> <a id="15563" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15565" class="Bound">ϱ</a><a id="15566" class="Symbol">))</a> <a id="15569" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="15571" class="Bound">f</a> <a id="15573" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15577" href="/lia/part5/Exp/#13579" class="Function">mul-cong-2</a> <a id="15588" href="/lia/part5/Exp/#15519" class="Bound">df</a> <a id="15591" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
  <a id="15595" class="Symbol">(</a><a id="15596" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15598" class="Symbol">(</a><a id="15599" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15601" class="Bound">e</a> <a id="15603" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15605" class="Bound">ϱ</a><a id="15606" class="Symbol">))</a> <a id="15609" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="15611" class="Symbol">(</a><a id="15612" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15614" class="Symbol">(</a><a id="15615" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15617" class="Bound">f</a> <a id="15619" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15621" class="Bound">ϱ</a><a id="15622" class="Symbol">))</a> <a id="15625" href="/lia/part5/Exp/#14432" class="Function Operator">↝⟨</a> <a id="15628" href="/lia/part5/Exp/#10204" class="InductiveConstructor">↝-Mul-stop</a> <a id="15639" href="/lia/part5/Exp/#14432" class="Function Operator">⟩</a>
  <a id="15643" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15645" class="Symbol">(</a><a id="15646" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15648" class="Bound">e</a> <a id="15650" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15652" class="Bound">ϱ</a> <a id="15654" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="15657" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15659" class="Bound">f</a> <a id="15661" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15663" class="Bound">ϱ</a><a id="15664" class="Symbol">)</a>
  <a id="15668" href="/lia/part5/Exp/#14539" class="Function Operator">↝*∎</a>

<a id="15673" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15692" class="Symbol">{</a><a id="15693" href="/lia/part5/Exp/#15693" class="Bound">ϱ</a><a id="15694" class="Symbol">}</a> <a id="15696" class="Symbol">(</a><a id="15697" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="15701" href="/lia/part5/Exp/#15701" class="Bound">x</a> <a id="15703" href="/lia/part5/Exp/#15703" class="Bound">e</a> <a id="15705" href="/lia/part5/Exp/#15705" class="Bound">f</a><a id="15706" class="Symbol">)</a>
  <a id="15710" class="Keyword">with</a> <a id="15715" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15734" href="/lia/part5/Exp/#15703" class="Bound">e</a> <a id="15736" class="Symbol">|</a> <a id="15738" href="/lia/part5/Exp/#15054" class="Function">weak-normalisation</a> <a id="15757" href="/lia/part5/Exp/#15705" class="Bound">f</a>
<a id="15759" class="Symbol">...</a> <a id="15763" class="Symbol">|</a> <a id="15765" href="/lia/part5/Exp/#15765" class="Bound">de</a> <a id="15768" class="Symbol">|</a> <a id="15770" href="/lia/part5/Exp/#15770" class="Bound">df</a> <a id="15773" class="Symbol">=</a>
    <a id="15779" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="15783" class="Bound">x</a> <a id="15785" class="Bound">e</a> <a id="15787" class="Bound">f</a> <a id="15789" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15793" href="/lia/part5/Exp/#13735" class="Function">let-cong-1</a> <a id="15804" href="/lia/part5/Exp/#15765" class="Bound">de</a> <a id="15807" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
    <a id="15813" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="15817" class="Bound">x</a> <a id="15819" class="Symbol">(</a><a id="15820" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15822" class="Symbol">(</a><a id="15823" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15825" class="Bound">e</a> <a id="15827" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15829" class="Bound">ϱ</a><a id="15830" class="Symbol">))</a> <a id="15833" class="Bound">f</a> <a id="15835" href="/lia/part5/Exp/#14329" class="Function Operator">↝*⟨</a> <a id="15839" href="/lia/part5/Exp/#13904" class="Function">let-cong-2</a> <a id="15850" href="/lia/part5/Exp/#15770" class="Bound">df</a> <a id="15853" href="/lia/part5/Exp/#14329" class="Function Operator">⟩</a>
    <a id="15859" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="15863" class="Bound">x</a> <a id="15865" class="Symbol">(</a><a id="15866" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15868" class="Symbol">(</a><a id="15869" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15871" class="Bound">e</a> <a id="15873" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15875" class="Bound">ϱ</a><a id="15876" class="Symbol">))</a> <a id="15879" class="Symbol">(</a><a id="15880" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15882" class="Symbol">(</a><a id="15883" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15885" class="Bound">f</a> <a id="15887" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15889" class="Symbol">(</a><a id="15890" class="Bound">ϱ</a> <a id="15892" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="15894" class="Bound">x</a> <a id="15896" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="15898" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15900" class="Bound">e</a> <a id="15902" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15904" class="Bound">ϱ</a> <a id="15906" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="15907" class="Symbol">)))</a>
        <a id="15919" href="/lia/part5/Exp/#14432" class="Function Operator">↝⟨</a> <a id="15922" href="/lia/part5/Exp/#10410" class="InductiveConstructor">↝-Let-stop</a> <a id="15933" href="/lia/part5/Exp/#14432" class="Function Operator">⟩</a>
    <a id="15939" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="15941" class="Symbol">(</a><a id="15942" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15944" class="Bound">f</a> <a id="15946" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15948" class="Symbol">(</a><a id="15949" class="Bound">ϱ</a> <a id="15951" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="15953" class="Bound">x</a> <a id="15955" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="15957" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="15959" class="Bound">e</a> <a id="15961" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="15963" class="Bound">ϱ</a> <a id="15965" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="15966" class="Symbol">))</a>
    <a id="15973" href="/lia/part5/Exp/#14539" class="Function Operator">↝*∎</a></pre>

<h3 id="exercise-strong-normalisation">
<strong>Exercise</strong>: Strong normalisation</h3>

<p>The termination property above is also called <em>weak normalisation</em>,
which means that there exists a finite reduction sequence <code class="language-plaintext highlighter-rouge">e ↝* f</code>
reaching a normal form (i.e. a value) <code class="language-plaintext highlighter-rouge">f ≡ Num m</code>. We show below even
<em>strong normalisation</em>, namely, <em>every</em> reduction sequence starting from
<code class="language-plaintext highlighter-rouge">e</code> is finite.</p>

<p>To this end, we introduce a notion of <em>size</em> of arithmetic expressions.</p>

<pre class="Agda"><a id="size"></a><a id="16393" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16398" class="Symbol">:</a> <a id="16400" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="16405" class="Symbol">→</a> <a id="16407" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="16409" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16414" class="Symbol">(</a><a id="16415" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="16419" href="/lia/part5/Exp/#16419" class="Bound">x</a><a id="16420" class="Symbol">)</a> <a id="16422" class="Symbol">=</a> <a id="16424" class="Number">0</a>
<a id="16426" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16431" class="Symbol">(</a><a id="16432" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="16436" href="/lia/part5/Exp/#16436" class="Bound">x</a><a id="16437" class="Symbol">)</a> <a id="16439" class="Symbol">=</a> <a id="16441" class="Number">1</a>
<a id="16443" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16448" class="Symbol">(</a><a id="16449" href="/lia/part5/Exp/#836" class="InductiveConstructor">Add</a> <a id="16453" href="/lia/part5/Exp/#16453" class="Bound">e</a> <a id="16455" href="/lia/part5/Exp/#16455" class="Bound">f</a><a id="16456" class="Symbol">)</a> <a id="16458" class="Symbol">=</a> <a id="16460" class="Number">1</a> <a id="16462" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16465" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16470" href="/lia/part5/Exp/#16453" class="Bound">e</a> <a id="16472" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16475" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16480" href="/lia/part5/Exp/#16455" class="Bound">f</a>
<a id="16482" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16487" class="Symbol">(</a><a id="16488" href="/lia/part5/Exp/#864" class="InductiveConstructor">Mul</a> <a id="16492" href="/lia/part5/Exp/#16492" class="Bound">e</a> <a id="16494" href="/lia/part5/Exp/#16494" class="Bound">f</a><a id="16495" class="Symbol">)</a> <a id="16497" class="Symbol">=</a> <a id="16499" class="Number">1</a> <a id="16501" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16504" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16509" href="/lia/part5/Exp/#16492" class="Bound">e</a> <a id="16511" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16514" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16519" href="/lia/part5/Exp/#16494" class="Bound">f</a>
<a id="16521" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16526" class="Symbol">(</a><a id="16527" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="16531" href="/lia/part5/Exp/#16531" class="Bound">x</a> <a id="16533" href="/lia/part5/Exp/#16533" class="Bound">e</a> <a id="16535" href="/lia/part5/Exp/#16535" class="Bound">f</a><a id="16536" class="Symbol">)</a> <a id="16538" class="Symbol">=</a> <a id="16540" class="Number">1</a> <a id="16542" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16545" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16550" href="/lia/part5/Exp/#16533" class="Bound">e</a> <a id="16552" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="16555" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16560" href="/lia/part5/Exp/#16535" class="Bound">f</a></pre>

<p>In the lemma below we show that the size of an expression strictly
decreases at each step, which implies strong normalisation.</p>

<pre class="Agda"><a id="size-down"></a><a id="16699" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16709" class="Symbol">:</a>
  <a id="16713" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="16715" href="/lia/part5/Exp/#9930" class="Datatype Operator">⊢</a> <a id="16717" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="16719" href="/lia/part5/Exp/#9930" class="Datatype Operator">↝</a> <a id="16721" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="16723" class="Symbol">→</a>
  <a id="16727" class="Comment">---------------</a>
  <a id="16745" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16750" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="16752" href="/lia/part0/Naturals/#1318" class="Function Operator">&gt;</a> <a id="16754" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16759" href="/lia/part5/Exp/#961" class="Generalizable">f</a>
  
<a id="16764" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16774" href="/lia/part5/Exp/#9971" class="InductiveConstructor">↝-Var</a> <a id="16780" class="Symbol">=</a> <a id="16782" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="16786" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>

<a id="16791" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16801" href="/lia/part5/Exp/#9998" class="InductiveConstructor">↝-Add-stop</a> <a id="16812" class="Symbol">=</a> <a id="16814" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="16818" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="16822" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16832" class="Symbol">(</a><a id="16833" href="/lia/part5/Exp/#10045" class="InductiveConstructor">↝-Add-left</a> <a id="16844" href="/lia/part5/Exp/#16844" class="Bound">δ</a><a id="16845" class="Symbol">)</a> <a id="16847" class="Symbol">=</a> <a id="16849" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="16853" class="Symbol">(</a><a id="16854" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="16863" class="Symbol">(</a><a id="16864" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16874" href="/lia/part5/Exp/#16844" class="Bound">δ</a><a id="16875" class="Symbol">))</a>
<a id="16878" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16888" class="Symbol">{</a><a id="16889" class="Argument">e</a> <a id="16891" class="Symbol">=</a> <a id="16893" href="/lia/part5/Exp/#16893" class="Bound">e</a> <a id="16895" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="16897" class="Symbol">_}</a> <a id="16900" class="Symbol">(</a><a id="16901" href="/lia/part5/Exp/#10124" class="InductiveConstructor">↝-Add-right</a> <a id="16913" href="/lia/part5/Exp/#16913" class="Bound">δ</a><a id="16914" class="Symbol">)</a> <a id="16916" class="Symbol">=</a> <a id="16918" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="16922" class="Symbol">(</a><a id="16923" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="16933" class="Symbol">{</a><a id="16934" class="Argument">n</a> <a id="16936" class="Symbol">=</a> <a id="16938" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="16943" href="/lia/part5/Exp/#16893" class="Bound">e</a><a id="16944" class="Symbol">}</a> <a id="16946" class="Symbol">(</a><a id="16947" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16957" href="/lia/part5/Exp/#16913" class="Bound">δ</a><a id="16958" class="Symbol">))</a>

<a id="16962" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="16972" href="/lia/part5/Exp/#10204" class="InductiveConstructor">↝-Mul-stop</a> <a id="16983" class="Symbol">=</a> <a id="16985" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="16989" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="16993" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17003" class="Symbol">(</a><a id="17004" href="/lia/part5/Exp/#10251" class="InductiveConstructor">↝-Mul-left</a> <a id="17015" href="/lia/part5/Exp/#17015" class="Bound">δ</a><a id="17016" class="Symbol">)</a> <a id="17018" class="Symbol">=</a> <a id="17020" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="17024" class="Symbol">(</a><a id="17025" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="17034" class="Symbol">(</a><a id="17035" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17045" href="/lia/part5/Exp/#17015" class="Bound">δ</a><a id="17046" class="Symbol">))</a>
<a id="17049" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17059" class="Symbol">{</a><a id="17060" class="Argument">e</a> <a id="17062" class="Symbol">=</a> <a id="17064" href="/lia/part5/Exp/#17064" class="Bound">e</a> <a id="17066" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="17068" class="Symbol">_}</a> <a id="17071" class="Symbol">(</a><a id="17072" href="/lia/part5/Exp/#10330" class="InductiveConstructor">↝-Mul-right</a> <a id="17084" href="/lia/part5/Exp/#17084" class="Bound">δ</a><a id="17085" class="Symbol">)</a> <a id="17087" class="Symbol">=</a> <a id="17089" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="17093" class="Symbol">(</a><a id="17094" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="17104" class="Symbol">{</a><a id="17105" class="Argument">n</a> <a id="17107" class="Symbol">=</a> <a id="17109" href="/lia/part5/Exp/#16393" class="Function">size</a> <a id="17114" href="/lia/part5/Exp/#17064" class="Bound">e</a><a id="17115" class="Symbol">}</a> <a id="17117" class="Symbol">(</a><a id="17118" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17128" href="/lia/part5/Exp/#17084" class="Bound">δ</a><a id="17129" class="Symbol">))</a>

<a id="17133" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17143" href="/lia/part5/Exp/#10410" class="InductiveConstructor">↝-Let-stop</a> <a id="17154" class="Symbol">=</a> <a id="17156" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="17160" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="17164" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17174" class="Symbol">(</a><a id="17175" href="/lia/part5/Exp/#10458" class="InductiveConstructor">↝-Let-1</a> <a id="17183" href="/lia/part5/Exp/#17183" class="Bound">δ</a><a id="17184" class="Symbol">)</a> <a id="17186" class="Symbol">=</a> <a id="17188" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="17192" class="Symbol">(</a><a id="17193" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17203" href="/lia/part5/Exp/#17183" class="Bound">δ</a><a id="17204" class="Symbol">)</a>
<a id="17206" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17216" class="Symbol">(</a><a id="17217" href="/lia/part5/Exp/#10576" class="InductiveConstructor">↝-Let-2</a> <a id="17225" href="/lia/part5/Exp/#17225" class="Bound">δ</a><a id="17226" class="Symbol">)</a> <a id="17228" class="Symbol">=</a> <a id="17230" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="17234" class="Symbol">(</a><a id="17235" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="17244" class="Symbol">(</a><a id="17245" href="/lia/part5/Exp/#16699" class="Function">size-down</a> <a id="17255" href="/lia/part5/Exp/#17225" class="Bound">δ</a><a id="17256" class="Symbol">))</a></pre>

<p>In the two “right” cases we need to give some extra hint for one
implicit parameter.</p>

<h2 id="local-environments">
<a class="anchor" href="#local-environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Local environments</h2>

<p>An alternative way to deal with the environment is to use it in a local
way. However this causes troubles. The naive way to write the derivation
rules is incorrect:</p>

<pre class="Agda"><a id="17543" class="Keyword">infix</a> <a id="17549" class="Number">4</a> <a id="17551" href="/lia/part5/Exp/#17564" class="Datatype Operator">_,_↝_,_</a>
<a id="17559" class="Keyword">data</a> <a id="_,_↝_,_"></a><a id="17564" href="/lia/part5/Exp/#17564" class="Datatype Operator">_,_↝_,_</a> <a id="17572" class="Symbol">:</a> <a id="17574" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="17579" class="Symbol">→</a> <a id="17581" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="17585" class="Symbol">→</a> <a id="17587" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="17592" class="Symbol">→</a> <a id="17594" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="17598" class="Symbol">→</a> <a id="17600" class="PrimitiveType">Set</a> <a id="17604" class="Keyword">where</a>

  <a id="_,_↝_,_.↝-Var"></a><a id="17613" href="/lia/part5/Exp/#17613" class="InductiveConstructor">↝-Var</a> <a id="17619" class="Symbol">:</a> <a id="17621" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="17623" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="17625" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17627" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17629" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17631" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17633" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17635" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="17637" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17639" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-stop"></a><a id="17644" href="/lia/part5/Exp/#17644" class="InductiveConstructor">↝-Add-stop</a> <a id="17655" class="Symbol">:</a>
    <a id="17661" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17663" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="17665" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="17667" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17669" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="17671" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17673" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17675" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17677" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17679" class="Symbol">(</a><a id="17680" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="17682" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="17685" href="/lia/part5/Exp/#981" class="Generalizable">n</a><a id="17686" class="Symbol">)</a> <a id="17688" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17690" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-left"></a><a id="17695" href="/lia/part5/Exp/#17695" class="InductiveConstructor">↝-Add-left</a> <a id="17706" class="Symbol">:</a>
    <a id="17712" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="17714" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17716" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17718" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17720" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="17723" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17725" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a> <a id="17728" class="Symbol">→</a>
    <a id="17734" class="Comment">-----------------------</a>
    <a id="17762" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="17764" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="17766" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="17768" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17770" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17772" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17774" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="17777" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="17779" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="17781" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17783" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Add-right"></a><a id="17789" href="/lia/part5/Exp/#17789" class="InductiveConstructor">↝-Add-right</a> <a id="17801" class="Symbol">:</a>
    <a id="17807" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="17809" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17811" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17813" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17815" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="17818" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17820" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a> <a id="17823" class="Symbol">→</a>
    <a id="17829" class="Comment">------------------</a>
    <a id="17852" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="17854" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="17856" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="17858" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17860" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17862" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17864" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="17866" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="17868" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="17871" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17873" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-stop"></a><a id="17879" href="/lia/part5/Exp/#17879" class="InductiveConstructor">↝-Let-stop</a> <a id="17890" class="Symbol">:</a>
    <a id="17896" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="17900" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="17902" class="Symbol">(</a><a id="17903" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17905" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="17906" class="Symbol">)</a> <a id="17908" class="Symbol">(</a><a id="17909" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17911" href="/lia/part5/Exp/#981" class="Generalizable">n</a><a id="17912" class="Symbol">)</a> <a id="17914" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17916" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17918" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17920" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="17922" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="17924" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17926" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Let-1"></a><a id="17931" href="/lia/part5/Exp/#17931" class="InductiveConstructor">↝-Let-1</a> <a id="17939" class="Symbol">:</a>
    <a id="17945" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="17947" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17949" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="17951" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="17953" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="17955" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="17957" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="17959" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="17961" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="17963" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="17966" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="17968" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a> <a id="17971" class="Symbol">→</a>
    <a id="17977" class="Comment">---------------------------------------</a>
    <a id="18021" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18025" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18027" class="Symbol">(</a><a id="18028" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18030" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="18031" class="Symbol">)</a> <a id="18033" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18035" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18037" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18039" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="18041" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18045" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18047" class="Symbol">(</a><a id="18048" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18050" href="/lia/part5/Exp/#979" class="Generalizable">m</a><a id="18051" class="Symbol">)</a> <a id="18053" href="/lia/part5/Exp/#963" class="Generalizable">f′</a> <a id="18056" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18058" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-2"></a><a id="18064" href="/lia/part5/Exp/#18064" class="InductiveConstructor">↝-Let-2</a> <a id="18072" class="Symbol">:</a>
    <a id="18078" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18080" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18082" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18084" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="18086" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="18089" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18091" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a> <a id="18094" class="Symbol">→</a>
    <a id="18100" class="Comment">------------------------------</a>
    <a id="18135" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18139" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18141" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18143" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18145" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18147" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18149" href="/lia/part5/Exp/#17564" class="Datatype Operator">↝</a> <a id="18151" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18155" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18157" href="/lia/part5/Exp/#958" class="Generalizable">e′</a> <a id="18160" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18162" href="/lia/part5/Exp/#17564" class="Datatype Operator">,</a> <a id="18164" href="/lia/part5/Exp/#1511" class="Generalizable">ϱ′</a></pre>

<p>One option would be to add a new construct in the language
<code class="language-plaintext highlighter-rouge">e then x is n</code> to save and restore the previous value of <code class="language-plaintext highlighter-rouge">x</code>.</p>

<h1 id="big-steps-operational-semantics">
<a class="anchor" href="#big-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Big-steps operational semantics</h1>

<pre class="Agda"><a id="18334" class="Keyword">infix</a> <a id="18340" class="Number">4</a> <a id="18342" href="/lia/part5/Exp/#18353" class="Datatype Operator">_,_⇒_</a>
<a id="18348" class="Keyword">data</a> <a id="_,_⇒_"></a><a id="18353" href="/lia/part5/Exp/#18353" class="Datatype Operator">_,_⇒_</a> <a id="18359" class="Symbol">:</a> <a id="18361" href="/lia/part5/Exp/#765" class="Datatype">AExp</a> <a id="18366" class="Symbol">→</a> <a id="18368" href="/lia/part5/Exp/#1473" class="Function">Env</a> <a id="18372" class="Symbol">→</a> <a id="18374" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="18376" class="Symbol">→</a> <a id="18378" class="PrimitiveType">Set</a> <a id="18382" class="Keyword">where</a>

  <a id="_,_⇒_.⇒-Num"></a><a id="18391" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a> <a id="18397" class="Symbol">:</a>
    <a id="18403" class="Comment">-------------</a>
    <a id="18421" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="18425" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="18427" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18429" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18431" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18433" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Var"></a><a id="18438" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a> <a id="18444" class="Symbol">:</a>
    <a id="18450" class="Comment">---------------</a>
    <a id="18470" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="18474" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18476" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18478" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18480" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18482" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18484" href="/lia/part5/Exp/#595" class="Generalizable">x</a>

  <a id="_,_⇒_.⇒-Add"></a><a id="18489" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="18495" class="Symbol">:</a>
    <a id="18501" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18503" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18505" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18507" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18509" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18511" class="Symbol">→</a>
    <a id="18517" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18519" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18521" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18523" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18525" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="18527" class="Symbol">→</a>
    <a id="18533" class="Comment">------------------</a>
    <a id="18556" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18558" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="18560" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18562" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18564" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18566" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18568" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18570" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="18573" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Mul"></a><a id="18578" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="18584" class="Symbol">:</a>
    <a id="18590" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18592" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18594" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18596" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18598" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18600" class="Symbol">→</a>
    <a id="18606" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18608" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18610" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18612" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18614" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="18616" class="Symbol">→</a>
    <a id="18622" class="Comment">------------------</a>
    <a id="18645" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18647" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="18649" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18651" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18653" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18655" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18657" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18659" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="18662" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Let"></a><a id="18667" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="18673" class="Symbol">:</a>
    <a id="18679" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18681" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18683" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18685" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18687" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18689" class="Symbol">→</a>
    <a id="18695" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18697" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18699" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18701" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="18703" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18705" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="18707" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="18709" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="18711" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18713" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="18715" class="Symbol">→</a>
    <a id="18721" class="Comment">---------------------</a>
    <a id="18747" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18751" href="/lia/part5/Exp/#595" class="Generalizable">x</a> <a id="18753" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="18755" href="/lia/part5/Exp/#961" class="Generalizable">f</a> <a id="18757" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18759" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="18761" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18763" href="/lia/part5/Exp/#981" class="Generalizable">n</a></pre>

<p>Example derivation:</p>

<pre class="Agda"><a id="x0"></a><a id="18795" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="18798" class="Symbol">=</a> <a id="18800" class="Number">0</a>
<a id="e0"></a><a id="18802" href="/lia/part5/Exp/#18802" class="Function">e0</a> <a id="18805" class="Symbol">=</a> <a id="18807" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="18811" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="18814" class="Symbol">(</a><a id="18815" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18817" class="Number">2</a> <a id="18819" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="18821" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18823" class="Number">3</a><a id="18824" class="Symbol">)</a> <a id="18826" class="Symbol">(</a><a id="18827" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="18829" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="18832" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="18834" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18836" class="Number">2</a><a id="18837" class="Symbol">)</a> 

<a id="18841" href="/lia/part5/Exp/#18841" class="Function">_</a> <a id="18843" class="Symbol">:</a> <a id="18845" href="/lia/part5/Exp/#18802" class="Function">e0</a> <a id="18848" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18850" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="18853" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18855" class="Number">10</a>
<a id="18858" class="Symbol">_</a> <a id="18860" class="Symbol">=</a> <a id="18862" href="/lia/part0/TList/#253" class="InductiveConstructor">BEGIN</a>
    <a id="18872" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="18877" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18879" class="Number">2</a> <a id="18881" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18883" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="18886" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18888" class="Number">2</a>                               <a id="18920" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="18923" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a>
    <a id="18933" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="18938" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="18940" class="Number">3</a> <a id="18942" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="18944" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="18947" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="18949" class="Number">3</a>                               <a id="18981" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="18984" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a>
    <a id="18994" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="18999" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19001" class="Number">2</a> <a id="19003" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="19005" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19007" class="Number">3</a> <a id="19009" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19011" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19014" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19016" class="Number">5</a>                         <a id="19042" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="19048" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="19054" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="19057" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="19062" class="Number">1</a> <a id="19064" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="19066" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="19076" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="19081" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="19083" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19086" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19088" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19091" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="19093" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19096" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="19098" class="Number">5</a> <a id="19100" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="19102" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19104" class="Number">5</a>                   <a id="19124" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="19127" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a>
    <a id="19137" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="19142" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19144" class="Number">2</a> <a id="19146" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19148" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19151" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="19153" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19156" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="19158" class="Number">5</a> <a id="19160" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="19162" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19164" class="Number">2</a>                    <a id="19185" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="19188" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a>
    <a id="19198" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="19203" class="Symbol">(</a><a id="19204" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="19206" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19209" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="19211" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19213" class="Number">2</a><a id="19214" class="Symbol">)</a> <a id="19216" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19218" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19221" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="19223" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19226" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="19228" class="Number">5</a> <a id="19230" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="19232" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19234" class="Number">10</a>          <a id="19246" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="19252" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="19258" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="19261" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="19266" class="Number">1</a> <a id="19268" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="19270" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="19280" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="19285" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="19289" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19292" class="Symbol">(</a><a id="19293" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19295" class="Number">2</a> <a id="19297" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="19299" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19301" class="Number">3</a><a id="19302" class="Symbol">)</a> <a id="19304" class="Symbol">(</a><a id="19305" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="19307" href="/lia/part5/Exp/#18795" class="Function">x0</a> <a id="19310" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="19312" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19314" class="Number">2</a><a id="19315" class="Symbol">)</a> <a id="19317" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19319" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19322" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19324" class="Number">10</a>  <a id="19328" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="19334" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="19340" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="19343" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="19348" class="Number">3</a> <a id="19350" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="19352" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>
    <a id="19361" href="/lia/part0/TList/#1233" class="Function">END</a></pre>

<h2 id="evaluator-interpreter">
<a class="anchor" href="#evaluator-interpreter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluator (interpreter)</h2>

<p>Luckily we can automatically produce the derivations as in the previous
example.</p>

<pre class="Agda"><a id="eval"></a><a id="19484" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19489" class="Symbol">:</a> <a id="19491" class="Symbol">∀</a> <a id="19493" href="/lia/part5/Exp/#19493" class="Bound">e</a> <a id="19495" href="/lia/part5/Exp/#19495" class="Bound">ϱ</a> <a id="19497" class="Symbol">→</a> <a id="19499" href="/lia/part0/Logic/#461" class="Function">∃[</a> <a id="19502" href="/lia/part5/Exp/#19502" class="Bound">n</a> <a id="19504" href="/lia/part0/Logic/#461" class="Function">]</a> <a id="19506" href="/lia/part5/Exp/#19493" class="Bound">e</a> <a id="19508" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19510" href="/lia/part5/Exp/#19495" class="Bound">ϱ</a> <a id="19512" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19514" href="/lia/part5/Exp/#19502" class="Bound">n</a>

<a id="19517" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19522" class="Symbol">(</a><a id="19523" href="/lia/part5/Exp/#1197" class="InductiveConstructor Operator">$</a> <a id="19525" href="/lia/part5/Exp/#19525" class="Bound">n</a><a id="19526" class="Symbol">)</a> <a id="19528" href="/lia/part5/Exp/#19528" class="Bound">ϱ</a> <a id="19530" class="Symbol">=</a> <a id="19532" href="/lia/part5/Exp/#19525" class="Bound">n</a> <a id="19534" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19536" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a>

<a id="19543" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19548" class="Symbol">(</a><a id="19549" href="/lia/part5/Exp/#1218" class="InductiveConstructor Operator">`</a> <a id="19551" href="/lia/part5/Exp/#19551" class="Bound">x</a><a id="19552" class="Symbol">)</a> <a id="19554" href="/lia/part5/Exp/#19554" class="Bound">ϱ</a> <a id="19556" class="Symbol">=</a> <a id="19558" href="/lia/part5/Exp/#19554" class="Bound">ϱ</a> <a id="19560" href="/lia/part5/Exp/#19551" class="Bound">x</a> <a id="19562" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19564" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a>

<a id="19571" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19576" class="Symbol">(</a><a id="19577" href="/lia/part5/Exp/#19577" class="Bound">e</a> <a id="19579" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="19581" href="/lia/part5/Exp/#19581" class="Bound">f</a><a id="19582" class="Symbol">)</a> <a id="19584" href="/lia/part5/Exp/#19584" class="Bound">ϱ</a>
  <a id="19588" class="Keyword">with</a> <a id="19593" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19598" href="/lia/part5/Exp/#19577" class="Bound">e</a> <a id="19600" href="/lia/part5/Exp/#19584" class="Bound">ϱ</a> <a id="19602" class="Symbol">|</a> <a id="19604" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19609" href="/lia/part5/Exp/#19581" class="Bound">f</a> <a id="19611" href="/lia/part5/Exp/#19584" class="Bound">ϱ</a>
<a id="19613" class="Symbol">...</a> <a id="19617" class="Symbol">|</a> <a id="19619" href="/lia/part5/Exp/#19619" class="Bound">m</a> <a id="19621" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19623" href="/lia/part5/Exp/#19623" class="Bound">δ</a> <a id="19625" class="Symbol">|</a> <a id="19627" href="/lia/part5/Exp/#19627" class="Bound">n</a> <a id="19629" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19631" href="/lia/part5/Exp/#19631" class="Bound">σ</a> <a id="19633" class="Symbol">=</a> <a id="19635" href="/lia/part5/Exp/#19619" class="Bound">m</a> <a id="19637" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19640" href="/lia/part5/Exp/#19627" class="Bound">n</a> <a id="19642" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19644" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="19650" href="/lia/part5/Exp/#19623" class="Bound">δ</a> <a id="19652" href="/lia/part5/Exp/#19631" class="Bound">σ</a>

<a id="19655" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19660" class="Symbol">(</a><a id="19661" href="/lia/part5/Exp/#19661" class="Bound">e</a> <a id="19663" href="/lia/part5/Exp/#1265" class="InductiveConstructor Operator">·</a> <a id="19665" href="/lia/part5/Exp/#19665" class="Bound">f</a><a id="19666" class="Symbol">)</a> <a id="19668" href="/lia/part5/Exp/#19668" class="Bound">ϱ</a>
  <a id="19672" class="Keyword">with</a> <a id="19677" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19682" href="/lia/part5/Exp/#19661" class="Bound">e</a> <a id="19684" href="/lia/part5/Exp/#19668" class="Bound">ϱ</a> <a id="19686" class="Symbol">|</a> <a id="19688" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19693" href="/lia/part5/Exp/#19665" class="Bound">f</a> <a id="19695" href="/lia/part5/Exp/#19668" class="Bound">ϱ</a>
<a id="19697" class="Symbol">...</a> <a id="19701" class="Symbol">|</a> <a id="19703" href="/lia/part5/Exp/#19703" class="Bound">m</a> <a id="19705" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19707" href="/lia/part5/Exp/#19707" class="Bound">δ</a> <a id="19709" class="Symbol">|</a> <a id="19711" href="/lia/part5/Exp/#19711" class="Bound">n</a> <a id="19713" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19715" href="/lia/part5/Exp/#19715" class="Bound">σ</a> <a id="19717" class="Symbol">=</a> <a id="19719" href="/lia/part5/Exp/#19703" class="Bound">m</a> <a id="19721" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="19724" href="/lia/part5/Exp/#19711" class="Bound">n</a> <a id="19726" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19728" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="19734" href="/lia/part5/Exp/#19707" class="Bound">δ</a> <a id="19736" href="/lia/part5/Exp/#19715" class="Bound">σ</a>

<a id="19739" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19744" class="Symbol">(</a><a id="19745" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="19749" href="/lia/part5/Exp/#19749" class="Bound">x</a> <a id="19751" href="/lia/part5/Exp/#19751" class="Bound">e</a> <a id="19753" href="/lia/part5/Exp/#19753" class="Bound">f</a><a id="19754" class="Symbol">)</a> <a id="19756" href="/lia/part5/Exp/#19756" class="Bound">ϱ</a>
  <a id="19760" class="Keyword">with</a> <a id="19765" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19770" href="/lia/part5/Exp/#19751" class="Bound">e</a> <a id="19772" href="/lia/part5/Exp/#19756" class="Bound">ϱ</a>
<a id="19774" class="Symbol">...</a> <a id="19778" class="Symbol">|</a> <a id="19780" href="/lia/part5/Exp/#19780" class="Bound">m</a> <a id="19782" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19784" href="/lia/part5/Exp/#19784" class="Bound">δ</a> 
  <a id="19789" class="Keyword">with</a> <a id="19794" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19799" class="Bound">f</a> <a id="19801" class="Symbol">(</a><a id="19802" class="Bound">ϱ</a> <a id="19804" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="19806" class="Bound">x</a> <a id="19808" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="19810" href="/lia/part5/Exp/#19780" class="Bound">m</a> <a id="19812" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="19813" class="Symbol">)</a>
<a id="19815" class="Symbol">...</a> <a id="19819" class="Symbol">|</a> <a id="19821" href="/lia/part5/Exp/#19821" class="Bound">n</a> <a id="19823" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19825" href="/lia/part5/Exp/#19825" class="Bound">σ</a> <a id="19827" class="Symbol">=</a> <a id="19829" href="/lia/part5/Exp/#19821" class="Bound">n</a> <a id="19831" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="19833" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="19839" class="Bound">δ</a> <a id="19841" href="/lia/part5/Exp/#19825" class="Bound">σ</a></pre>
<pre class="Agda"><a id="19852" href="/lia/part5/Exp/#19852" class="Function">_</a> <a id="19854" class="Symbol">:</a> <a id="19856" href="/lia/part5/Exp/#18802" class="Function">e0</a> <a id="19859" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19861" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a> <a id="19864" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19866" class="Number">10</a>
<a id="19869" class="Symbol">_</a> <a id="19871" class="Symbol">=</a> <a id="19873" href="/lia/part0/Logic/#431" class="Field">dsnd</a> <a id="19878" class="Symbol">(</a><a id="19879" href="/lia/part5/Exp/#19484" class="Function">eval</a> <a id="19884" href="/lia/part5/Exp/#18802" class="Function">e0</a> <a id="19887" href="/lia/part5/Exp/#1644" class="Function">ϱ0</a><a id="19889" class="Symbol">)</a></pre>

<h2 id="evaluation-is-deterministic">
<a class="anchor" href="#evaluation-is-deterministic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation is deterministic</h2>

<pre class="Agda"><a id="⇒-det"></a><a id="19932" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="19938" class="Symbol">:</a>
  <a id="19942" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="19944" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19946" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="19948" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19950" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="19952" class="Symbol">→</a>
  <a id="19956" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="19958" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="19960" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="19962" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="19964" href="/lia/part5/Exp/#981" class="Generalizable">n</a> <a id="19966" class="Symbol">→</a>
  <a id="19970" class="Comment">-----------</a>
  <a id="19984" href="/lia/part5/Exp/#979" class="Generalizable">m</a> <a id="19986" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="19988" href="/lia/part5/Exp/#981" class="Generalizable">n</a>

<a id="19991" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="19997" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a> <a id="20003" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a> <a id="20009" class="Symbol">=</a> <a id="20011" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20016" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20022" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a> <a id="20028" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a> <a id="20034" class="Symbol">=</a> <a id="20036" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20041" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20047" class="Symbol">(</a><a id="20048" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="20054" href="/lia/part5/Exp/#20054" class="Bound">x</a> <a id="20056" href="/lia/part5/Exp/#20056" class="Bound">x₁</a><a id="20058" class="Symbol">)</a> <a id="20060" class="Symbol">(</a><a id="20061" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="20067" href="/lia/part5/Exp/#20067" class="Bound">y</a> <a id="20069" href="/lia/part5/Exp/#20069" class="Bound">y₁</a><a id="20071" class="Symbol">)</a>
    <a id="20077" class="Keyword">with</a> <a id="20082" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20088" href="/lia/part5/Exp/#20054" class="Bound">x</a> <a id="20090" href="/lia/part5/Exp/#20067" class="Bound">y</a> <a id="20092" class="Symbol">|</a> <a id="20094" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20100" href="/lia/part5/Exp/#20056" class="Bound">x₁</a> <a id="20103" href="/lia/part5/Exp/#20069" class="Bound">y₁</a>
<a id="20106" class="Symbol">...</a> <a id="20110" class="Symbol">|</a> <a id="20112" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="20117" class="Symbol">|</a> <a id="20119" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="20124" class="Symbol">=</a> <a id="20126" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20131" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20137" class="Symbol">(</a><a id="20138" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="20144" href="/lia/part5/Exp/#20144" class="Bound">x</a> <a id="20146" href="/lia/part5/Exp/#20146" class="Bound">x₁</a><a id="20148" class="Symbol">)</a> <a id="20150" class="Symbol">(</a><a id="20151" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="20157" href="/lia/part5/Exp/#20157" class="Bound">y</a> <a id="20159" href="/lia/part5/Exp/#20159" class="Bound">y₁</a><a id="20161" class="Symbol">)</a>
    <a id="20167" class="Keyword">with</a> <a id="20172" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20178" href="/lia/part5/Exp/#20144" class="Bound">x</a> <a id="20180" href="/lia/part5/Exp/#20157" class="Bound">y</a> <a id="20182" class="Symbol">|</a> <a id="20184" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20190" href="/lia/part5/Exp/#20146" class="Bound">x₁</a> <a id="20193" href="/lia/part5/Exp/#20159" class="Bound">y₁</a>
<a id="20196" class="Symbol">...</a> <a id="20200" class="Symbol">|</a> <a id="20202" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="20207" class="Symbol">|</a> <a id="20209" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="20214" class="Symbol">=</a> <a id="20216" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20221" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20227" class="Symbol">(</a><a id="20228" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="20234" href="/lia/part5/Exp/#20234" class="Bound">⇒₁-e</a> <a id="20239" href="/lia/part5/Exp/#20239" class="Bound">⇒₁-f</a><a id="20243" class="Symbol">)</a> <a id="20245" class="Symbol">(</a><a id="20246" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="20252" href="/lia/part5/Exp/#20252" class="Bound">⇒₂-e</a> <a id="20257" href="/lia/part5/Exp/#20257" class="Bound">⇒₂-f</a><a id="20261" class="Symbol">)</a>
    <a id="20267" class="Keyword">with</a> <a id="20272" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20278" href="/lia/part5/Exp/#20234" class="Bound">⇒₁-e</a> <a id="20283" href="/lia/part5/Exp/#20252" class="Bound">⇒₂-e</a>
<a id="20288" class="Symbol">...</a> <a id="20292" class="Symbol">|</a> <a id="20294" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="20303" class="Keyword">with</a> <a id="20308" href="/lia/part5/Exp/#19932" class="Function">⇒-det</a> <a id="20314" class="Bound">⇒₁-f</a> <a id="20319" class="Bound">⇒₂-f</a>
<a id="20324" class="Symbol">...</a> <a id="20328" class="Symbol">|</a> <a id="20330" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="20335" class="Symbol">=</a> <a id="20337" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Note that in the <code class="language-plaintext highlighter-rouge">⇒-Let</code> case we cannot perform the two
with-abstractions in parallel because in order to apply the second one
<code class="language-plaintext highlighter-rouge">⇒-det ⇒₁-f ⇒₂-f</code> we need the result of the first one.</p>

<h2 id="agreement-of-the-semantics">
<a class="anchor" href="#agreement-of-the-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of the semantics</h2>

<p>The following lemma shows that the big-steps operational semantics
agrees with the denotational semantics.</p>

<pre class="Agda"><a id="⇒-agree-⟦⟧"></a><a id="20673" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20684" class="Symbol">:</a> <a id="20686" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="20688" href="/lia/part5/Exp/#18353" class="Datatype Operator">,</a> <a id="20690" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a> <a id="20692" href="/lia/part5/Exp/#18353" class="Datatype Operator">⇒</a> <a id="20694" href="/lia/part5/Exp/#2249" class="Function Operator">⟦</a> <a id="20696" href="/lia/part5/Exp/#956" class="Generalizable">e</a> <a id="20698" href="/lia/part5/Exp/#2249" class="Function Operator">⟧</a> <a id="20700" href="/lia/part5/Exp/#1509" class="Generalizable">ϱ</a>
<a id="20702" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20713" class="Symbol">{</a><a id="20714" href="/lia/part5/Exp/#784" class="InductiveConstructor">Num</a> <a id="20718" href="/lia/part5/Exp/#20718" class="Bound">x</a><a id="20719" class="Symbol">}</a> <a id="20721" class="Symbol">=</a> <a id="20723" href="/lia/part5/Exp/#18391" class="InductiveConstructor">⇒-Num</a>
<a id="20729" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20740" class="Symbol">{</a><a id="20741" href="/lia/part5/Exp/#807" class="InductiveConstructor">Var</a> <a id="20745" href="/lia/part5/Exp/#20745" class="Bound">x</a><a id="20746" class="Symbol">}</a> <a id="20748" class="Symbol">=</a> <a id="20750" href="/lia/part5/Exp/#18438" class="InductiveConstructor">⇒-Var</a>
<a id="20756" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20767" class="Symbol">{</a><a id="20768" href="/lia/part5/Exp/#836" class="InductiveConstructor">Add</a> <a id="20772" href="/lia/part5/Exp/#20772" class="Bound">e</a> <a id="20774" href="/lia/part5/Exp/#20774" class="Bound">e₁</a><a id="20776" class="Symbol">}</a> <a id="20778" class="Symbol">=</a> <a id="20780" href="/lia/part5/Exp/#18489" class="InductiveConstructor">⇒-Add</a> <a id="20786" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20797" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> 
<a id="20809" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20820" class="Symbol">{</a><a id="20821" href="/lia/part5/Exp/#864" class="InductiveConstructor">Mul</a> <a id="20825" href="/lia/part5/Exp/#20825" class="Bound">e</a> <a id="20827" href="/lia/part5/Exp/#20827" class="Bound">e₁</a><a id="20829" class="Symbol">}</a> <a id="20831" class="Symbol">=</a> <a id="20833" href="/lia/part5/Exp/#18578" class="InductiveConstructor">⇒-Mul</a> <a id="20839" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20850" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> 
<a id="20862" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20873" class="Symbol">{</a><a id="20874" href="/lia/part5/Exp/#892" class="InductiveConstructor">Let</a> <a id="20878" href="/lia/part5/Exp/#20878" class="Bound">x</a> <a id="20880" href="/lia/part5/Exp/#20880" class="Bound">e</a> <a id="20882" href="/lia/part5/Exp/#20882" class="Bound">f</a><a id="20883" class="Symbol">}</a> <a id="20885" class="Symbol">=</a> <a id="20887" href="/lia/part5/Exp/#18667" class="InductiveConstructor">⇒-Let</a> <a id="20893" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a> <a id="20904" href="/lia/part5/Exp/#20673" class="Function">⇒-agree-⟦⟧</a></pre>

<h1 id="binary-numbers">
<a class="anchor" href="#binary-numbers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary numbers</h1>

<h2 id="lsd">
<a class="anchor" href="#lsd" aria-hidden="true"><span class="octicon octicon-link"></span></a>LSD</h2>

<pre class="Agda"><a id="20950" class="Keyword">data</a> <a id="LSD"></a><a id="20955" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a> <a id="20959" class="Symbol">:</a> <a id="20961" class="PrimitiveType">Set</a> <a id="20965" class="Keyword">where</a>
  <a id="LSD.$"></a><a id="20973" href="/lia/part5/Exp/#20973" class="InductiveConstructor">$</a> <a id="20975" class="Symbol">:</a> <a id="20977" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a>
  <a id="LSD._𝟬"></a><a id="20983" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">_𝟬</a> <a id="20986" class="Symbol">:</a> <a id="20988" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a> <a id="20992" class="Symbol">→</a> <a id="20994" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a>
  <a id="LSD._𝟭"></a><a id="21000" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">_𝟭</a> <a id="21003" class="Symbol">:</a> <a id="21005" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a> <a id="21009" class="Symbol">→</a> <a id="21011" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a></pre>

<p>Semantics according to least significant digit (LSD)</p>

<pre class="Agda"><a id="LSD⟦_⟧"></a><a id="21078" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦_⟧</a> <a id="21085" class="Symbol">:</a> <a id="21087" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a> <a id="21091" class="Symbol">→</a> <a id="21093" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="21095" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21100" href="/lia/part5/Exp/#20973" class="InductiveConstructor">$</a> <a id="21102" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a> <a id="21104" class="Symbol">=</a> <a id="21106" class="Number">0</a>
<a id="21108" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21113" href="/lia/part5/Exp/#21113" class="Bound">x</a> <a id="21115" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">𝟬</a> <a id="21117" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a> <a id="21119" class="Symbol">=</a> <a id="21121" class="Number">2</a> <a id="21123" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="21126" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21131" href="/lia/part5/Exp/#21113" class="Bound">x</a> <a id="21133" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a>
<a id="21135" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21140" href="/lia/part5/Exp/#21140" class="Bound">x</a> <a id="21142" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">𝟭</a> <a id="21144" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a> <a id="21146" class="Symbol">=</a> <a id="21148" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21152" class="Symbol">(</a><a id="21153" class="Number">2</a> <a id="21155" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="21158" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21163" href="/lia/part5/Exp/#21140" class="Bound">x</a> <a id="21165" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a><a id="21166" class="Symbol">)</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="21187" href="/lia/part5/Exp/#21187" class="Function">_</a> <a id="21189" class="Symbol">:</a> <a id="21191" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="21196" href="/lia/part5/Exp/#20973" class="InductiveConstructor">$</a> <a id="21198" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">𝟬</a> <a id="21200" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">𝟭</a> <a id="21202" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">𝟭</a> <a id="21204" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">𝟬</a> <a id="21206" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a> <a id="21208" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="21210" class="Number">6</a>
<a id="21212" class="Symbol">_</a> <a id="21214" class="Symbol">=</a> <a id="21216" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="msd">
<a class="anchor" href="#msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>MSD</h2>

<pre class="Agda"><a id="21238" class="Keyword">data</a> <a id="MSD"></a><a id="21243" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a> <a id="21247" class="Symbol">:</a> <a id="21249" class="PrimitiveType">Set</a> <a id="21253" class="Keyword">where</a>
  <a id="MSD.$"></a><a id="21261" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="21263" class="Symbol">:</a> <a id="21265" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a>
  <a id="MSD.𝟬_"></a><a id="21271" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬_</a> <a id="21274" class="Symbol">:</a> <a id="21276" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a> <a id="21280" class="Symbol">→</a> <a id="21282" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a>
  <a id="MSD.𝟭_"></a><a id="21288" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭_</a> <a id="21291" class="Symbol">:</a> <a id="21293" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a> <a id="21297" class="Symbol">→</a> <a id="21299" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a></pre>

<p>Semantics according to most significant digit (MSD). This won’t work:</p>

<pre class="Agda"><a id="21383" class="Comment">-- MSD⟦_⟧ : MSD → ℕ</a>
<a id="21403" class="Comment">-- MSD⟦ x ⟧ = {!   !}</a></pre>

<p>A possible solution: Additionally remember the number of digits (second
component).</p>

<pre class="Agda"><a id="MSD⟦_⟧"></a><a id="21519" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦_⟧</a> <a id="21526" class="Symbol">:</a> <a id="21528" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a> <a id="21532" class="Symbol">→</a> <a id="21534" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="21536" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="21538" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="21540" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21545" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="21547" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="21549" class="Symbol">=</a> <a id="21551" class="Number">0</a> <a id="21553" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21555" class="Number">0</a>
<a id="21557" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21562" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21564" href="/lia/part5/Exp/#21564" class="Bound">x</a> <a id="21566" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a>
  <a id="21570" class="Keyword">with</a> <a id="21575" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21580" href="/lia/part5/Exp/#21564" class="Bound">x</a> <a id="21582" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a>
<a id="21584" class="Symbol">...</a> <a id="21588" class="Symbol">|</a> <a id="21590" href="/lia/part5/Exp/#21590" class="Bound">n</a> <a id="21592" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21594" href="/lia/part5/Exp/#21594" class="Bound">k</a> <a id="21596" class="Symbol">=</a> <a id="21598" href="/lia/part5/Exp/#21590" class="Bound">n</a> <a id="21600" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21602" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21606" href="/lia/part5/Exp/#21594" class="Bound">k</a>

<a id="21609" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21614" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21616" href="/lia/part5/Exp/#21616" class="Bound">x</a> <a id="21618" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a>
  <a id="21622" class="Keyword">with</a> <a id="21627" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21632" href="/lia/part5/Exp/#21616" class="Bound">x</a> <a id="21634" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a>
<a id="21636" class="Symbol">...</a> <a id="21640" class="Symbol">|</a> <a id="21642" href="/lia/part5/Exp/#21642" class="Bound">n</a> <a id="21644" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21646" href="/lia/part5/Exp/#21646" class="Bound">k</a> <a id="21648" class="Symbol">=</a> <a id="21650" href="/lia/part5/Exp/#21642" class="Bound">n</a> <a id="21652" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="21655" class="Number">2</a> <a id="21657" href="/lia/part0/Naturals/#8563" class="Function Operator">^</a> <a id="21659" href="/lia/part5/Exp/#21646" class="Bound">k</a> <a id="21661" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21663" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21667" href="/lia/part5/Exp/#21646" class="Bound">k</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="21688" href="/lia/part5/Exp/#21688" class="Function">_</a> <a id="21690" class="Symbol">:</a> <a id="21692" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="21697" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21699" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21701" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21703" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21705" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="21707" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="21709" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="21711" class="Number">6</a> <a id="21713" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21715" class="Number">4</a> 
<a id="21718" class="Symbol">_</a> <a id="21720" class="Symbol">=</a> <a id="21722" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="agreement-of-lsd-and-msd">
<a class="anchor" href="#agreement-of-lsd-and-msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of LSD and MSD</h2>

<pre class="Agda"><a id="push-𝟬"></a><a id="21765" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="push-𝟭"></a><a id="21772" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21779" class="Symbol">:</a> <a id="21781" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a> <a id="21785" class="Symbol">→</a> <a id="21787" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a>
<a id="21791" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="21798" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="21800" class="Symbol">=</a> <a id="21802" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21804" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a>
<a id="21806" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="21813" class="Symbol">(</a><a id="21814" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21816" href="/lia/part5/Exp/#21816" class="Bound">x</a><a id="21817" class="Symbol">)</a> <a id="21819" class="Symbol">=</a> <a id="21821" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21823" class="Symbol">(</a><a id="21824" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="21831" href="/lia/part5/Exp/#21816" class="Bound">x</a><a id="21832" class="Symbol">)</a>
<a id="21834" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="21841" class="Symbol">(</a><a id="21842" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21844" href="/lia/part5/Exp/#21844" class="Bound">x</a><a id="21845" class="Symbol">)</a> <a id="21847" class="Symbol">=</a> <a id="21849" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21851" class="Symbol">(</a><a id="21852" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="21859" href="/lia/part5/Exp/#21844" class="Bound">x</a><a id="21860" class="Symbol">)</a>

<a id="21863" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21870" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="21872" class="Symbol">=</a> <a id="21874" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21876" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a>
<a id="21878" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21885" class="Symbol">(</a><a id="21886" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21888" href="/lia/part5/Exp/#21888" class="Bound">x</a><a id="21889" class="Symbol">)</a> <a id="21891" class="Symbol">=</a> <a id="21893" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="21895" class="Symbol">(</a><a id="21896" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21903" href="/lia/part5/Exp/#21888" class="Bound">x</a><a id="21904" class="Symbol">)</a>
<a id="21906" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21913" class="Symbol">(</a><a id="21914" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21916" href="/lia/part5/Exp/#21916" class="Bound">x</a><a id="21917" class="Symbol">)</a> <a id="21919" class="Symbol">=</a> <a id="21921" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="21923" class="Symbol">(</a><a id="21924" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="21931" href="/lia/part5/Exp/#21916" class="Bound">x</a><a id="21932" class="Symbol">)</a>

<a id="21935" class="Comment">-- this type was copied-pasted and abstracted from the goal in push-𝟬-lemma  before the last rewrite</a>
<a id="aux-𝟬"></a><a id="22036" href="/lia/part5/Exp/#22036" class="Function">aux-𝟬</a> <a id="22042" class="Symbol">:</a> <a id="22044" class="Symbol">∀</a> <a id="22046" href="/lia/part5/Exp/#22046" class="Bound">m</a> <a id="22048" href="/lia/part5/Exp/#22048" class="Bound">n</a> <a id="22050" class="Symbol">→</a> <a id="22052" href="/lia/part5/Exp/#22046" class="Bound">m</a> <a id="22054" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22057" class="Symbol">(</a><a id="22058" href="/lia/part5/Exp/#22046" class="Bound">m</a> <a id="22060" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22063" class="Number">0</a><a id="22064" class="Symbol">)</a> <a id="22066" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22069" class="Symbol">(</a><a id="22070" href="/lia/part5/Exp/#22048" class="Bound">n</a> <a id="22072" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22075" class="Symbol">(</a><a id="22076" href="/lia/part5/Exp/#22048" class="Bound">n</a> <a id="22078" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22081" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="22085" class="Symbol">))</a> <a id="22088" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22090" href="/lia/part5/Exp/#22046" class="Bound">m</a> <a id="22092" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22095" href="/lia/part5/Exp/#22048" class="Bound">n</a> <a id="22097" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22100" class="Symbol">(</a><a id="22101" href="/lia/part5/Exp/#22046" class="Bound">m</a> <a id="22103" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22106" href="/lia/part5/Exp/#22048" class="Bound">n</a> <a id="22108" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22111" class="Number">0</a><a id="22112" class="Symbol">)</a>
<a id="22114" href="/lia/part5/Exp/#22036" class="Function">aux-𝟬</a> <a id="22120" class="Symbol">=</a> <a id="22122" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟬-lemma"></a><a id="22131" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22144" class="Symbol">:</a> <a id="22146" class="Symbol">∀</a> <a id="22148" href="/lia/part5/Exp/#22148" class="Bound">x</a> <a id="22150" class="Symbol">→</a> <a id="22152" class="Keyword">let</a> <a id="22156" href="/lia/part5/Exp/#22156" class="Bound">n</a> <a id="22158" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="22160" href="/lia/part5/Exp/#22160" class="Bound">k</a> <a id="22162" class="Symbol">=</a> <a id="22164" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22169" href="/lia/part5/Exp/#22148" class="Bound">x</a> <a id="22171" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="22173" class="Keyword">in</a> <a id="22176" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22181" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="22188" href="/lia/part5/Exp/#22148" class="Bound">x</a> <a id="22190" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="22192" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22194" class="Number">2</a> <a id="22196" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="22199" href="/lia/part5/Exp/#22156" class="Bound">n</a> <a id="22201" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="22203" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22207" href="/lia/part5/Exp/#22160" class="Bound">k</a>
<a id="22209" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22222" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="22224" class="Symbol">=</a> <a id="22226" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22231" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22244" class="Symbol">(</a><a id="22245" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="22247" href="/lia/part5/Exp/#22247" class="Bound">x</a><a id="22248" class="Symbol">)</a> <a id="22250" class="Keyword">rewrite</a> <a id="22258" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22271" href="/lia/part5/Exp/#22247" class="Bound">x</a> <a id="22273" class="Symbol">=</a> <a id="22275" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22280" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22293" class="Symbol">(</a><a id="22294" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="22296" href="/lia/part5/Exp/#22296" class="Bound">x</a><a id="22297" class="Symbol">)</a>
  <a id="22301" class="Keyword">rewrite</a> <a id="22309" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="22322" href="/lia/part5/Exp/#22296" class="Bound">x</a> <a id="22324" class="Symbol">|</a>
          <a id="22336" href="/lia/part5/Exp/#22036" class="Function">aux-𝟬</a> <a id="22342" class="Symbol">(</a><a id="22343" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="22347" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22352" href="/lia/part5/Exp/#22296" class="Bound">x</a> <a id="22354" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a><a id="22355" class="Symbol">)</a> <a id="22357" class="Symbol">(</a><a id="22358" class="Number">2</a> <a id="22360" href="/lia/part0/Naturals/#8563" class="Function Operator">^</a> <a id="22362" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="22366" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22371" href="/lia/part5/Exp/#22296" class="Bound">x</a> <a id="22373" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a><a id="22374" class="Symbol">)</a> <a id="22376" class="Symbol">=</a> <a id="22378" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="aux-𝟭"></a><a id="22384" href="/lia/part5/Exp/#22384" class="Function">aux-𝟭</a> <a id="22390" class="Symbol">:</a> <a id="22392" class="Symbol">∀</a> <a id="22394" href="/lia/part5/Exp/#22394" class="Bound">m</a> <a id="22396" href="/lia/part5/Exp/#22396" class="Bound">n</a> <a id="22398" class="Symbol">→</a> <a id="22400" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22404" class="Symbol">(</a><a id="22405" href="/lia/part5/Exp/#22394" class="Bound">m</a> <a id="22407" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22410" class="Symbol">(</a><a id="22411" href="/lia/part5/Exp/#22394" class="Bound">m</a> <a id="22413" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22416" class="Number">0</a><a id="22417" class="Symbol">)</a> <a id="22419" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22422" class="Symbol">(</a><a id="22423" href="/lia/part5/Exp/#22396" class="Bound">n</a> <a id="22425" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22428" class="Symbol">(</a><a id="22429" href="/lia/part5/Exp/#22396" class="Bound">n</a> <a id="22431" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22434" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="22438" class="Symbol">)))</a> <a id="22442" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22444" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22448" class="Symbol">(</a><a id="22449" href="/lia/part5/Exp/#22394" class="Bound">m</a> <a id="22451" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22454" href="/lia/part5/Exp/#22396" class="Bound">n</a> <a id="22456" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22459" class="Symbol">(</a><a id="22460" href="/lia/part5/Exp/#22394" class="Bound">m</a> <a id="22462" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22465" href="/lia/part5/Exp/#22396" class="Bound">n</a> <a id="22467" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22470" class="Number">0</a><a id="22471" class="Symbol">))</a>
<a id="22474" href="/lia/part5/Exp/#22384" class="Function">aux-𝟭</a> <a id="22480" class="Symbol">=</a> <a id="22482" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟭-lemma"></a><a id="22491" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22504" class="Symbol">:</a> <a id="22506" class="Symbol">∀</a> <a id="22508" href="/lia/part5/Exp/#22508" class="Bound">x</a> <a id="22510" class="Symbol">→</a> <a id="22512" class="Keyword">let</a> <a id="22516" href="/lia/part5/Exp/#22516" class="Bound">n</a> <a id="22518" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="22520" href="/lia/part5/Exp/#22520" class="Bound">k</a> <a id="22522" class="Symbol">=</a> <a id="22524" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22529" href="/lia/part5/Exp/#22508" class="Bound">x</a> <a id="22531" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="22533" class="Keyword">in</a> <a id="22536" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22541" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="22548" href="/lia/part5/Exp/#22508" class="Bound">x</a> <a id="22550" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a> <a id="22552" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22554" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22558" class="Symbol">(</a><a id="22559" class="Number">2</a> <a id="22561" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="22564" href="/lia/part5/Exp/#22516" class="Bound">n</a><a id="22565" class="Symbol">)</a> <a id="22567" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="22569" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22573" href="/lia/part5/Exp/#22520" class="Bound">k</a>
<a id="22575" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22588" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a> <a id="22590" class="Symbol">=</a> <a id="22592" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22597" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22610" class="Symbol">(</a><a id="22611" href="/lia/part5/Exp/#21271" class="InductiveConstructor Operator">𝟬</a> <a id="22613" href="/lia/part5/Exp/#22613" class="Bound">x</a><a id="22614" class="Symbol">)</a> <a id="22616" class="Keyword">rewrite</a> <a id="22624" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22637" href="/lia/part5/Exp/#22613" class="Bound">x</a> <a id="22639" class="Symbol">=</a> <a id="22641" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22646" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22659" class="Symbol">(</a><a id="22660" href="/lia/part5/Exp/#21288" class="InductiveConstructor Operator">𝟭</a> <a id="22662" href="/lia/part5/Exp/#22662" class="Bound">x</a><a id="22663" class="Symbol">)</a>
  <a id="22667" class="Keyword">rewrite</a> <a id="22675" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="22688" href="/lia/part5/Exp/#22662" class="Bound">x</a> <a id="22690" class="Symbol">|</a>
          <a id="22702" href="/lia/part5/Exp/#22384" class="Function">aux-𝟭</a> <a id="22708" class="Symbol">(</a><a id="22709" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="22713" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22718" href="/lia/part5/Exp/#22662" class="Bound">x</a> <a id="22720" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a><a id="22721" class="Symbol">)</a> <a id="22723" class="Symbol">(</a><a id="22724" class="Number">2</a> <a id="22726" href="/lia/part0/Naturals/#8563" class="Function Operator">^</a> <a id="22728" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="22732" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22737" href="/lia/part5/Exp/#22662" class="Bound">x</a> <a id="22739" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a><a id="22740" class="Symbol">)</a> <a id="22742" class="Symbol">=</a> <a id="22744" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="LSD2MSD"></a><a id="22750" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22758" class="Symbol">:</a> <a id="22760" href="/lia/part5/Exp/#20955" class="Datatype">LSD</a> <a id="22764" class="Symbol">→</a> <a id="22766" href="/lia/part5/Exp/#21243" class="Datatype">MSD</a>
<a id="22770" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22778" href="/lia/part5/Exp/#20973" class="InductiveConstructor">$</a> <a id="22780" class="Symbol">=</a> <a id="22782" href="/lia/part5/Exp/#21261" class="InductiveConstructor">$</a>
<a id="22784" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22792" class="Symbol">(</a><a id="22793" href="/lia/part5/Exp/#22793" class="Bound">x</a> <a id="22795" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">𝟬</a><a id="22796" class="Symbol">)</a> <a id="22798" class="Symbol">=</a> <a id="22800" href="/lia/part5/Exp/#21765" class="Function">push-𝟬</a> <a id="22807" class="Symbol">(</a><a id="22808" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22816" href="/lia/part5/Exp/#22793" class="Bound">x</a><a id="22817" class="Symbol">)</a>
<a id="22819" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22827" class="Symbol">(</a><a id="22828" href="/lia/part5/Exp/#22828" class="Bound">x</a> <a id="22830" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">𝟭</a><a id="22831" class="Symbol">)</a> <a id="22833" class="Symbol">=</a> <a id="22835" href="/lia/part5/Exp/#21772" class="Function">push-𝟭</a> <a id="22842" class="Symbol">(</a><a id="22843" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22851" href="/lia/part5/Exp/#22828" class="Bound">x</a><a id="22852" class="Symbol">)</a> 

<a id="LSD-MSD-agree"></a><a id="22856" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="22870" class="Symbol">:</a> <a id="22872" class="Symbol">∀</a> <a id="22874" href="/lia/part5/Exp/#22874" class="Bound">x</a> <a id="22876" class="Symbol">→</a> <a id="22878" href="/lia/part5/Exp/#21078" class="Function Operator">LSD⟦</a> <a id="22883" href="/lia/part5/Exp/#22874" class="Bound">x</a> <a id="22885" href="/lia/part5/Exp/#21078" class="Function Operator">⟧</a> <a id="22887" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22889" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="22893" href="/lia/part5/Exp/#21519" class="Function Operator">MSD⟦</a> <a id="22898" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="22906" href="/lia/part5/Exp/#22874" class="Bound">x</a> <a id="22908" href="/lia/part5/Exp/#21519" class="Function Operator">⟧</a>

<a id="22911" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="22925" href="/lia/part5/Exp/#20973" class="InductiveConstructor">$</a> <a id="22927" class="Symbol">=</a> <a id="22929" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="22935" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="22949" class="Symbol">(</a><a id="22950" href="/lia/part5/Exp/#22950" class="Bound">x</a> <a id="22952" href="/lia/part5/Exp/#20983" class="InductiveConstructor Operator">𝟬</a><a id="22953" class="Symbol">)</a>
  <a id="22957" class="Keyword">with</a> <a id="22962" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="22976" href="/lia/part5/Exp/#22950" class="Bound">x</a>
<a id="22978" class="Symbol">...</a> <a id="22982" class="Symbol">|</a> <a id="22984" href="/lia/part5/Exp/#22984" class="Bound">ind</a>
  <a id="22990" class="Keyword">rewrite</a> <a id="22998" href="/lia/part5/Exp/#22131" class="Function">push-𝟬-lemma</a> <a id="23011" class="Symbol">(</a><a id="23012" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="23020" class="Bound">x</a><a id="23021" class="Symbol">)</a> <a id="23023" class="Symbol">|</a>
          <a id="23035" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="23039" href="/lia/part5/Exp/#22984" class="Bound">ind</a> <a id="23043" class="Symbol">=</a> <a id="23045" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="23051" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="23065" class="Symbol">(</a><a id="23066" href="/lia/part5/Exp/#23066" class="Bound">x</a> <a id="23068" href="/lia/part5/Exp/#21000" class="InductiveConstructor Operator">𝟭</a><a id="23069" class="Symbol">)</a>
  <a id="23073" class="Keyword">with</a> <a id="23078" href="/lia/part5/Exp/#22856" class="Function">LSD-MSD-agree</a> <a id="23092" href="/lia/part5/Exp/#23066" class="Bound">x</a>
<a id="23094" class="Symbol">...</a> <a id="23098" class="Symbol">|</a> <a id="23100" href="/lia/part5/Exp/#23100" class="Bound">ind</a>
  <a id="23106" class="Keyword">rewrite</a> <a id="23114" href="/lia/part5/Exp/#22491" class="Function">push-𝟭-lemma</a> <a id="23127" class="Symbol">(</a><a id="23128" href="/lia/part5/Exp/#22750" class="Function">LSD2MSD</a> <a id="23136" class="Bound">x</a><a id="23137" class="Symbol">)</a> <a id="23139" class="Symbol">|</a>
          <a id="23151" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="23155" href="/lia/part5/Exp/#23100" class="Bound">ind</a> <a id="23159" class="Symbol">=</a> <a id="23161" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="binary-expressions">
<a class="anchor" href="#binary-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary expressions</h1>

<h2 id="syntax">
<a class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>

<pre class="Agda"><a id="23208" class="Keyword">infix</a> <a id="23214" class="Number">30</a> <a id="23217" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">_𝟬</a> <a id="23220" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">_𝟭</a>

<a id="23224" class="Keyword">data</a> <a id="Bin"></a><a id="23229" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23233" class="Symbol">:</a> <a id="23235" class="PrimitiveType">Set</a> <a id="23239" class="Keyword">where</a>
  <a id="Bin.$"></a><a id="23247" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="23249" class="Symbol">:</a> <a id="23251" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a>
  <a id="Bin._𝟬"></a><a id="23257" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">_𝟬</a> <a id="23260" class="Symbol">:</a> <a id="23262" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23266" class="Symbol">→</a> <a id="23268" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a>
  <a id="Bin._𝟭"></a><a id="23274" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">_𝟭</a> <a id="23277" class="Symbol">:</a> <a id="23279" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23283" class="Symbol">→</a> <a id="23285" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a>
  <a id="Bin.Add"></a><a id="23291" href="/lia/part5/Exp/#23291" class="InductiveConstructor">Add</a> <a id="23295" class="Symbol">:</a> <a id="23297" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23301" class="Symbol">→</a> <a id="23303" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23307" class="Symbol">→</a> <a id="23309" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a>

<a id="23314" class="Keyword">pattern</a> <a id="_+_"></a><a id="23322" href="/lia/part5/Exp/#23322" class="InductiveConstructor Operator">_+_</a> <a id="23326" href="/lia/part5/Exp/#23336" class="Bound">x</a> <a id="23328" href="/lia/part5/Exp/#23338" class="Bound">y</a> <a id="23330" class="Symbol">=</a> <a id="23332" class="InductiveConstructor">Add</a> <a id="23336" href="/lia/part5/Exp/#23336" class="Bound">x</a> <a id="23338" href="/lia/part5/Exp/#23338" class="Bound">y</a>

<a id="23341" class="Keyword">private</a>
  <a id="23351" class="Keyword">variable</a>
    <a id="23364" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23366" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23369" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="23371" href="/lia/part5/Exp/#23371" class="Generalizable">b′</a> <a id="23374" class="Symbol">:</a> <a id="23376" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a></pre>

<h2 id="denotational-semantics-1">
<a class="anchor" href="#denotational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h2>

<pre class="Agda"><a id="23416" class="Keyword">private</a> <a id="⟦_⟧"></a><a id="23424" href="/lia/part5/Exp/#23424" class="Function Operator">⟦_⟧</a> <a id="23428" class="Symbol">:</a> <a id="23430" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23434" class="Symbol">→</a> <a id="23436" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="23438" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23440" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="23442" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="23444" class="Symbol">=</a> <a id="23446" class="Number">0</a>
<a id="23448" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23450" href="/lia/part5/Exp/#23450" class="Bound">a</a> <a id="23452" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="23454" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="23456" class="Symbol">=</a> <a id="23458" class="Number">2</a> <a id="23460" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23463" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23465" href="/lia/part5/Exp/#23450" class="Bound">a</a> <a id="23467" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a>
<a id="23469" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23471" href="/lia/part5/Exp/#23471" class="Bound">a</a> <a id="23473" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="23475" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="23477" class="Symbol">=</a> <a id="23479" class="Number">1</a> <a id="23481" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="23484" class="Number">2</a> <a id="23486" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23489" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23491" href="/lia/part5/Exp/#23471" class="Bound">a</a> <a id="23493" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a>
<a id="23495" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23497" href="/lia/part5/Exp/#23497" class="Bound">a</a> <a id="23499" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23501" href="/lia/part5/Exp/#23501" class="Bound">b</a> <a id="23503" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="23505" class="Symbol">=</a> <a id="23507" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23509" href="/lia/part5/Exp/#23497" class="Bound">a</a> <a id="23511" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="23513" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="23516" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="23518" href="/lia/part5/Exp/#23501" class="Bound">b</a> <a id="23520" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a></pre>

<h2 id="small-steps-operational-semantics-1">
<a class="anchor" href="#small-steps-operational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h2>

<pre class="Agda"><a id="23569" class="Keyword">infix</a> <a id="23575" class="Number">4</a> <a id="23577" href="/lia/part5/Exp/#23586" class="Datatype Operator">_↝_</a>
<a id="23581" class="Keyword">data</a> <a id="_↝_"></a><a id="23586" href="/lia/part5/Exp/#23586" class="Datatype Operator">_↝_</a> <a id="23590" class="Symbol">:</a> <a id="23592" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23596" class="Symbol">→</a> <a id="23598" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="23602" class="Symbol">→</a> <a id="23604" class="PrimitiveType">Set</a> <a id="23608" class="Keyword">where</a>

  <a id="_↝_.↝𝟬"></a><a id="23617" href="/lia/part5/Exp/#23617" class="InductiveConstructor">↝𝟬</a> <a id="23620" class="Symbol">:</a> <a id="23622" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23624" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23626" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23629" class="Symbol">→</a>
       <a id="23638" class="Comment">----------</a>
       <a id="23656" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23658" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="23660" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23662" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23665" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝𝟭"></a><a id="23670" href="/lia/part5/Exp/#23670" class="InductiveConstructor">↝𝟭</a> <a id="23673" class="Symbol">:</a> <a id="23675" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23677" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23679" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23682" class="Symbol">→</a>
       <a id="23691" class="Comment">----------</a>
       <a id="23709" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23711" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="23713" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23715" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23718" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝$L"></a><a id="23723" href="/lia/part5/Exp/#23723" class="InductiveConstructor">↝$L</a> <a id="23727" class="Symbol">:</a> <a id="23729" class="Comment">---------</a>
        <a id="23747" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="23749" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23751" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23753" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23755" href="/lia/part5/Exp/#23364" class="Generalizable">a</a>

  <a id="_↝_.↝$R"></a><a id="23760" href="/lia/part5/Exp/#23760" class="InductiveConstructor">↝$R</a> <a id="23764" class="Symbol">:</a> <a id="23766" class="Comment">---------</a>
        <a id="23784" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23786" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23788" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="23790" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23792" href="/lia/part5/Exp/#23364" class="Generalizable">a</a>

  <a id="_↝_.↝+L"></a><a id="23797" href="/lia/part5/Exp/#23797" class="InductiveConstructor">↝+L</a> <a id="23801" class="Symbol">:</a> <a id="23803" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23805" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23807" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23810" class="Symbol">→</a>
        <a id="23820" class="Comment">--------------</a>
        <a id="23843" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23845" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23847" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="23849" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23851" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="23854" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23856" href="/lia/part5/Exp/#23369" class="Generalizable">b</a>

  <a id="_↝_.↝+R"></a><a id="23861" href="/lia/part5/Exp/#23861" class="InductiveConstructor">↝+R</a> <a id="23865" class="Symbol">:</a> <a id="23867" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="23869" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23871" href="/lia/part5/Exp/#23371" class="Generalizable">b′</a> <a id="23874" class="Symbol">→</a>
        <a id="23884" class="Comment">--------------</a>
        <a id="23907" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23909" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23911" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="23913" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23915" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23917" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23919" href="/lia/part5/Exp/#23371" class="Generalizable">b′</a>
        
  <a id="_↝_.↝+𝟬𝟬"></a><a id="23933" href="/lia/part5/Exp/#23933" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="23938" class="Symbol">:</a> <a id="23940" class="Comment">---------------------</a>
         <a id="23971" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23973" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="23975" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23977" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="23979" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="23981" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="23983" class="Symbol">(</a><a id="23984" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="23986" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="23988" href="/lia/part5/Exp/#23369" class="Generalizable">b</a><a id="23989" class="Symbol">)</a> <a id="23991" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝+𝟬𝟭"></a><a id="23996" href="/lia/part5/Exp/#23996" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="24001" class="Symbol">:</a> <a id="24003" class="Comment">---------------------</a>
         <a id="24034" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24036" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="24038" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24040" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="24042" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="24044" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="24046" class="Symbol">(</a><a id="24047" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24049" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24051" href="/lia/part5/Exp/#23369" class="Generalizable">b</a><a id="24052" class="Symbol">)</a> <a id="24054" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟬"></a><a id="24059" href="/lia/part5/Exp/#24059" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="24064" class="Symbol">:</a> <a id="24066" class="Comment">---------------------</a>
         <a id="24097" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24099" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="24101" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24103" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="24105" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="24107" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="24109" class="Symbol">(</a><a id="24110" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24112" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24114" href="/lia/part5/Exp/#23369" class="Generalizable">b</a><a id="24115" class="Symbol">)</a> <a id="24117" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟭"></a><a id="24122" href="/lia/part5/Exp/#24122" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="24127" class="Symbol">:</a> <a id="24129" class="Comment">----------------------------</a>
         <a id="24167" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24169" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="24171" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24173" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="24175" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="24177" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="24179" class="Symbol">(</a><a id="24180" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24182" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24184" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="24186" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="24188" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="24190" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="24191" class="Symbol">)</a> <a id="24193" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a></pre>

<h2 id="agreement">
<a class="anchor" href="#agreement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement</h2>

<pre class="Agda"><a id="agree"></a><a id="24219" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24225" class="Symbol">:</a> <a id="24227" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24229" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="24231" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="24234" class="Symbol">→</a>
        <a id="24244" class="Comment">--------------</a>
        <a id="24267" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24269" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="24271" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24273" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24275" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24277" href="/lia/part5/Exp/#23366" class="Generalizable">a′</a> <a id="24280" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a>

<a id="24283" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24289" class="Symbol">(</a><a id="24290" href="/lia/part5/Exp/#23617" class="InductiveConstructor">↝𝟬</a> <a id="24293" href="/lia/part5/Exp/#24293" class="Bound">e↝e'</a><a id="24297" class="Symbol">)</a> <a id="24299" class="Keyword">rewrite</a> <a id="24307" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24313" href="/lia/part5/Exp/#24293" class="Bound">e↝e'</a> <a id="24318" class="Symbol">=</a> <a id="24320" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24325" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24331" class="Symbol">(</a><a id="24332" href="/lia/part5/Exp/#23670" class="InductiveConstructor">↝𝟭</a> <a id="24335" href="/lia/part5/Exp/#24335" class="Bound">e↝e'</a><a id="24339" class="Symbol">)</a> <a id="24341" class="Keyword">rewrite</a> <a id="24349" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24355" href="/lia/part5/Exp/#24335" class="Bound">e↝e'</a> <a id="24360" class="Symbol">=</a> <a id="24362" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24367" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24373" href="/lia/part5/Exp/#23723" class="InductiveConstructor">↝$L</a> <a id="24377" class="Symbol">=</a> <a id="24379" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24384" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24390" href="/lia/part5/Exp/#23760" class="InductiveConstructor">↝$R</a> <a id="24394" class="Symbol">=</a> <a id="24396" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="24402" class="Symbol">_</a>
<a id="24404" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24410" class="Symbol">(</a><a id="24411" href="/lia/part5/Exp/#23797" class="InductiveConstructor">↝+L</a> <a id="24415" href="/lia/part5/Exp/#24415" class="Bound">e↝e'</a><a id="24419" class="Symbol">)</a> <a id="24421" class="Keyword">rewrite</a> <a id="24429" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24435" href="/lia/part5/Exp/#24415" class="Bound">e↝e'</a> <a id="24440" class="Symbol">=</a> <a id="24442" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24447" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24453" class="Symbol">(</a><a id="24454" href="/lia/part5/Exp/#23861" class="InductiveConstructor">↝+R</a> <a id="24458" href="/lia/part5/Exp/#24458" class="Bound">e↝e'</a><a id="24462" class="Symbol">)</a> <a id="24464" class="Keyword">rewrite</a> <a id="24472" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24478" href="/lia/part5/Exp/#24458" class="Bound">e↝e'</a> <a id="24483" class="Symbol">=</a> <a id="24485" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24490" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24496" class="Symbol">(</a><a id="24497" href="/lia/part5/Exp/#23933" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="24502" class="Symbol">{</a><a id="24503" href="/lia/part5/Exp/#24503" class="Bound">a</a><a id="24504" class="Symbol">}</a> <a id="24506" class="Symbol">{</a><a id="24507" href="/lia/part5/Exp/#24507" class="Bound">b</a><a id="24508" class="Symbol">})</a> <a id="24511" class="Symbol">=</a> <a id="24513" href="/lia/part5/Exp/#24540" class="Function">magic</a> <a id="24519" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24521" href="/lia/part5/Exp/#24503" class="Bound">a</a> <a id="24523" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24525" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24527" href="/lia/part5/Exp/#24507" class="Bound">b</a> <a id="24529" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24531" class="Keyword">where</a>

  <a id="24540" href="/lia/part5/Exp/#24540" class="Function">magic</a> <a id="24546" class="Symbol">:</a> <a id="24548" class="Symbol">∀</a> <a id="24550" href="/lia/part5/Exp/#24550" class="Bound">a</a> <a id="24552" href="/lia/part5/Exp/#24552" class="Bound">b</a> <a id="24554" class="Symbol">→</a> <a id="24556" href="/lia/part5/Exp/#24550" class="Bound">a</a> <a id="24558" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24561" class="Symbol">(</a><a id="24562" href="/lia/part5/Exp/#24550" class="Bound">a</a> <a id="24564" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24567" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="24571" class="Symbol">)</a> <a id="24573" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24576" class="Symbol">(</a><a id="24577" href="/lia/part5/Exp/#24552" class="Bound">b</a> <a id="24579" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24582" class="Symbol">(</a><a id="24583" href="/lia/part5/Exp/#24552" class="Bound">b</a> <a id="24585" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24588" class="Number">0</a><a id="24589" class="Symbol">))</a> <a id="24592" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24594" href="/lia/part5/Exp/#24550" class="Bound">a</a> <a id="24596" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24599" href="/lia/part5/Exp/#24552" class="Bound">b</a> <a id="24601" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24604" class="Symbol">(</a><a id="24605" href="/lia/part5/Exp/#24550" class="Bound">a</a> <a id="24607" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24610" href="/lia/part5/Exp/#24552" class="Bound">b</a> <a id="24612" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24615" class="Number">0</a><a id="24616" class="Symbol">)</a>
  <a id="24620" href="/lia/part5/Exp/#24540" class="Function">magic</a> <a id="24626" class="Symbol">=</a> <a id="24628" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="24637" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24643" class="Symbol">(</a><a id="24644" href="/lia/part5/Exp/#23996" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="24649" class="Symbol">{</a><a id="24650" href="/lia/part5/Exp/#24650" class="Bound">a</a><a id="24651" class="Symbol">}</a> <a id="24653" class="Symbol">{</a><a id="24654" href="/lia/part5/Exp/#24654" class="Bound">b</a><a id="24655" class="Symbol">})</a> <a id="24658" class="Symbol">=</a> <a id="24660" href="/lia/part5/Exp/#24693" class="Function">magic</a> <a id="24666" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24668" href="/lia/part5/Exp/#24650" class="Bound">a</a> <a id="24670" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24672" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24674" href="/lia/part5/Exp/#24654" class="Bound">b</a> <a id="24676" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24678" class="Keyword">where</a>
    
    <a id="24693" href="/lia/part5/Exp/#24693" class="Function">magic</a> <a id="24699" class="Symbol">:</a> <a id="24701" class="Symbol">∀</a> <a id="24703" href="/lia/part5/Exp/#24703" class="Bound">a</a> <a id="24705" href="/lia/part5/Exp/#24705" class="Bound">b</a> <a id="24707" class="Symbol">→</a> <a id="24709" href="/lia/part5/Exp/#24703" class="Bound">a</a> <a id="24711" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24714" class="Symbol">(</a><a id="24715" href="/lia/part5/Exp/#24703" class="Bound">a</a> <a id="24717" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24720" class="Number">0</a><a id="24721" class="Symbol">)</a> <a id="24723" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24726" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24730" class="Symbol">(</a><a id="24731" href="/lia/part5/Exp/#24705" class="Bound">b</a> <a id="24733" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24736" class="Symbol">(</a><a id="24737" href="/lia/part5/Exp/#24705" class="Bound">b</a> <a id="24739" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24742" class="Number">0</a><a id="24743" class="Symbol">))</a> <a id="24746" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24748" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24752" class="Symbol">(</a><a id="24753" href="/lia/part5/Exp/#24703" class="Bound">a</a> <a id="24755" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24758" href="/lia/part5/Exp/#24705" class="Bound">b</a> <a id="24760" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24763" class="Symbol">(</a><a id="24764" href="/lia/part5/Exp/#24703" class="Bound">a</a> <a id="24766" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24769" href="/lia/part5/Exp/#24705" class="Bound">b</a> <a id="24771" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24774" class="Number">0</a><a id="24775" class="Symbol">))</a>
    <a id="24782" href="/lia/part5/Exp/#24693" class="Function">magic</a> <a id="24788" class="Symbol">=</a> <a id="24790" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="24799" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24805" class="Symbol">(</a><a id="24806" href="/lia/part5/Exp/#24059" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="24811" class="Symbol">{</a><a id="24812" href="/lia/part5/Exp/#24812" class="Bound">a</a><a id="24813" class="Symbol">}</a> <a id="24815" class="Symbol">{</a><a id="24816" href="/lia/part5/Exp/#24816" class="Bound">b</a><a id="24817" class="Symbol">})</a> <a id="24820" class="Symbol">=</a> <a id="24822" href="/lia/part5/Exp/#24855" class="Function">magic</a> <a id="24828" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24830" href="/lia/part5/Exp/#24812" class="Bound">a</a> <a id="24832" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24834" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24836" href="/lia/part5/Exp/#24816" class="Bound">b</a> <a id="24838" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="24840" class="Keyword">where</a>
    
    <a id="24855" href="/lia/part5/Exp/#24855" class="Function">magic</a> <a id="24861" class="Symbol">:</a> <a id="24863" class="Symbol">∀</a> <a id="24865" href="/lia/part5/Exp/#24865" class="Bound">a</a> <a id="24867" href="/lia/part5/Exp/#24867" class="Bound">b</a> <a id="24869" class="Symbol">→</a> <a id="24871" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24875" class="Symbol">(</a><a id="24876" href="/lia/part5/Exp/#24865" class="Bound">a</a> <a id="24878" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24881" class="Symbol">(</a><a id="24882" href="/lia/part5/Exp/#24865" class="Bound">a</a> <a id="24884" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24887" class="Number">0</a><a id="24888" class="Symbol">)</a> <a id="24890" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24893" class="Symbol">(</a><a id="24894" href="/lia/part5/Exp/#24867" class="Bound">b</a> <a id="24896" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24899" class="Symbol">(</a><a id="24900" href="/lia/part5/Exp/#24867" class="Bound">b</a> <a id="24902" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24905" class="Number">0</a><a id="24906" class="Symbol">)))</a> <a id="24910" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24912" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24916" class="Symbol">(</a><a id="24917" href="/lia/part5/Exp/#24865" class="Bound">a</a> <a id="24919" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24922" href="/lia/part5/Exp/#24867" class="Bound">b</a> <a id="24924" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24927" class="Symbol">(</a><a id="24928" href="/lia/part5/Exp/#24865" class="Bound">a</a> <a id="24930" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24933" href="/lia/part5/Exp/#24867" class="Bound">b</a> <a id="24935" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24938" class="Number">0</a><a id="24939" class="Symbol">))</a>
    <a id="24946" href="/lia/part5/Exp/#24855" class="Function">magic</a> <a id="24952" class="Symbol">=</a> <a id="24954" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>
    
<a id="24967" href="/lia/part5/Exp/#24219" class="Function">agree</a> <a id="24973" class="Symbol">(</a><a id="24974" href="/lia/part5/Exp/#24122" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="24979" class="Symbol">{</a><a id="24980" href="/lia/part5/Exp/#24980" class="Bound">a</a><a id="24981" class="Symbol">}</a> <a id="24983" class="Symbol">{</a><a id="24984" href="/lia/part5/Exp/#24984" class="Bound">b</a><a id="24985" class="Symbol">})</a> <a id="24988" class="Symbol">=</a> <a id="24990" href="/lia/part5/Exp/#25017" class="Function">magic</a> <a id="24996" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="24998" href="/lia/part5/Exp/#24980" class="Bound">a</a> <a id="25000" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="25002" href="/lia/part5/Exp/#23424" class="Function Operator">⟦</a> <a id="25004" href="/lia/part5/Exp/#24984" class="Bound">b</a> <a id="25006" href="/lia/part5/Exp/#23424" class="Function Operator">⟧</a> <a id="25008" class="Keyword">where</a>

  <a id="25017" href="/lia/part5/Exp/#25017" class="Function">magic</a> <a id="25023" class="Symbol">:</a> <a id="25025" class="Symbol">∀</a> <a id="25027" href="/lia/part5/Exp/#25027" class="Bound">a</a> <a id="25029" href="/lia/part5/Exp/#25029" class="Bound">b</a> <a id="25031" class="Symbol">→</a> <a id="25033" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25037" class="Symbol">(</a><a id="25038" href="/lia/part5/Exp/#25027" class="Bound">a</a> <a id="25040" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25043" class="Symbol">(</a><a id="25044" href="/lia/part5/Exp/#25027" class="Bound">a</a> <a id="25046" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25049" class="Number">0</a><a id="25050" class="Symbol">)</a> <a id="25052" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25055" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25059" class="Symbol">(</a><a id="25060" href="/lia/part5/Exp/#25029" class="Bound">b</a> <a id="25062" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25065" class="Symbol">(</a><a id="25066" href="/lia/part5/Exp/#25029" class="Bound">b</a> <a id="25068" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25071" class="Number">0</a><a id="25072" class="Symbol">)))</a> <a id="25076" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25078" href="/lia/part5/Exp/#25027" class="Bound">a</a> <a id="25080" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25083" href="/lia/part5/Exp/#25029" class="Bound">b</a> <a id="25085" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25088" class="Number">1</a> <a id="25090" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25093" class="Symbol">(</a><a id="25094" href="/lia/part5/Exp/#25027" class="Bound">a</a> <a id="25096" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25099" href="/lia/part5/Exp/#25029" class="Bound">b</a> <a id="25101" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25104" class="Number">1</a> <a id="25106" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25109" class="Number">0</a><a id="25110" class="Symbol">)</a>
  <a id="25114" href="/lia/part5/Exp/#25017" class="Function">magic</a> <a id="25120" class="Symbol">=</a> <a id="25122" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a></pre>

<h2 id="strong-normalisation-first-proof">
<a class="anchor" href="#strong-normalisation-first-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (first proof)</h2>

<pre class="Agda"><a id="binSize"></a><a id="25178" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25186" class="Symbol">:</a> <a id="25188" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="25192" class="Symbol">→</a> <a id="25194" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="25196" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25204" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="25206" class="Symbol">=</a> <a id="25208" class="Number">0</a>
<a id="25210" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25218" class="Symbol">(</a><a id="25219" href="/lia/part5/Exp/#25219" class="Bound">a</a> <a id="25221" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="25222" class="Symbol">)</a> <a id="25224" class="Symbol">=</a> <a id="25226" class="Number">1</a> <a id="25228" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25231" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25239" href="/lia/part5/Exp/#25219" class="Bound">a</a>
<a id="25241" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25249" class="Symbol">(</a><a id="25250" href="/lia/part5/Exp/#25250" class="Bound">a</a> <a id="25252" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="25253" class="Symbol">)</a> <a id="25255" class="Symbol">=</a> <a id="25257" class="Number">1</a> <a id="25259" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25262" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25270" href="/lia/part5/Exp/#25250" class="Bound">a</a>
<a id="25272" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25280" class="Symbol">(</a><a id="25281" href="/lia/part5/Exp/#25281" class="Bound">a</a> <a id="25283" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="25285" href="/lia/part5/Exp/#25285" class="Bound">b</a><a id="25286" class="Symbol">)</a> <a id="25288" class="Symbol">=</a> <a id="25290" class="Number">1</a> <a id="25292" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25295" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25303" href="/lia/part5/Exp/#25281" class="Bound">a</a> <a id="25305" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25308" href="/lia/part5/Exp/#25178" class="Function">binSize</a> <a id="25316" href="/lia/part5/Exp/#25285" class="Bound">b</a>

<a id="25319" class="Comment">-- transitive closure</a>
<a id="25341" class="Comment">-- infix 4 _↝*_</a>
<a id="25357" class="Comment">-- data _↝*_ : Bin → Bin → Set where</a>
<a id="25394" class="Comment">--     stop : ∀ {a} → a ↝* a</a>
<a id="25423" class="Comment">--     one : ∀ {a b g} → a ↝ b → b ↝* g → a ↝* g</a>

<a id="25473" class="Comment">-- strong normalisation</a>
<a id="25497" class="Comment">-- we define a measure that is strictly decreasing on each computation step</a>

<a id="μ"></a><a id="25574" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25576" class="Symbol">:</a> <a id="25578" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="25582" class="Symbol">→</a> <a id="25584" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="25586" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25588" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="25590" class="Symbol">=</a> <a id="25592" class="Number">0</a>
<a id="25594" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25596" class="Symbol">(</a><a id="25597" href="/lia/part5/Exp/#25597" class="Bound">a</a> <a id="25599" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="25600" class="Symbol">)</a> <a id="25602" class="Symbol">=</a> <a id="25604" class="Number">2</a> <a id="25606" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25609" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25611" href="/lia/part5/Exp/#25597" class="Bound">a</a>
<a id="25613" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25615" class="Symbol">(</a><a id="25616" href="/lia/part5/Exp/#25616" class="Bound">a</a> <a id="25618" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="25619" class="Symbol">)</a> <a id="25621" class="Symbol">=</a> <a id="25623" class="Number">4</a> <a id="25625" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25628" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25630" href="/lia/part5/Exp/#25616" class="Bound">a</a>
<a id="25632" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25634" class="Symbol">(</a><a id="25635" href="/lia/part5/Exp/#25635" class="Bound">a</a> <a id="25637" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="25639" href="/lia/part5/Exp/#25639" class="Bound">b</a><a id="25640" class="Symbol">)</a> <a id="25642" class="Symbol">=</a> <a id="25644" class="Number">1</a> <a id="25646" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25649" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25651" href="/lia/part5/Exp/#25635" class="Bound">a</a> <a id="25653" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25656" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25658" href="/lia/part5/Exp/#25639" class="Bound">b</a>

<a id="μ-wf"></a><a id="25661" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25666" class="Symbol">:</a> <a id="25668" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="25670" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="25672" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="25674" class="Symbol">→</a>
       <a id="25683" class="Comment">---------</a>
       <a id="25700" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25702" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="25704" href="/lia/part0/Naturals/#1314" class="Function Operator">&lt;</a> <a id="25706" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25708" href="/lia/part5/Exp/#23364" class="Generalizable">a</a>

<a id="25711" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25716" class="Symbol">(</a><a id="25717" href="/lia/part5/Exp/#23617" class="InductiveConstructor">↝𝟬</a> <a id="25720" href="/lia/part5/Exp/#25720" class="Bound">e↝f</a><a id="25723" class="Symbol">)</a> <a id="25725" class="Keyword">with</a> <a id="25730" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25735" href="/lia/part5/Exp/#25720" class="Bound">e↝f</a>
<a id="25739" class="Symbol">...</a> <a id="25743" class="Symbol">|</a> <a id="25745" href="/lia/part5/Exp/#25745" class="Bound">μf&lt;μe</a> <a id="25751" class="Symbol">=</a> <a id="25753" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25757" class="Symbol">(</a><a id="25758" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25762" href="/lia/part5/Exp/#25745" class="Bound">μf&lt;μe</a><a id="25767" class="Symbol">)</a>

<a id="25770" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25775" class="Symbol">(</a><a id="25776" href="/lia/part5/Exp/#23670" class="InductiveConstructor">↝𝟭</a> <a id="25779" href="/lia/part5/Exp/#25779" class="Bound">e↝f</a><a id="25782" class="Symbol">)</a> <a id="25784" class="Keyword">with</a> <a id="25789" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25794" href="/lia/part5/Exp/#25779" class="Bound">e↝f</a>
<a id="25798" class="Symbol">...</a> <a id="25802" class="Symbol">|</a> <a id="25804" href="/lia/part5/Exp/#25804" class="Bound">μf&lt;μe</a> <a id="25810" class="Symbol">=</a> <a id="25812" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25816" class="Symbol">(</a><a id="25817" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25821" class="Symbol">(</a><a id="25822" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25826" class="Symbol">(</a><a id="25827" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25831" href="/lia/part5/Exp/#25804" class="Bound">μf&lt;μe</a><a id="25836" class="Symbol">)))</a>

<a id="25841" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25846" href="/lia/part5/Exp/#23723" class="InductiveConstructor">↝$L</a> <a id="25850" class="Symbol">=</a> <a id="25852" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="25860" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25865" class="DottedPattern Symbol">.{</a><a id="25867" href="/lia/part5/Exp/#25875" class="DottedPattern Bound">a</a> <a id="25869" href="/lia/part5/Exp/#1239" class="DottedPattern InductiveConstructor Operator">+</a> <a id="25871" href="/lia/part5/Exp/#23247" class="DottedPattern InductiveConstructor">$</a><a id="25872" class="DottedPattern Symbol">}</a> <a id="25874" class="Symbol">{</a><a id="25875" href="/lia/part5/Exp/#25875" class="Bound">a</a><a id="25876" class="Symbol">}</a> <a id="25878" href="/lia/part5/Exp/#23760" class="InductiveConstructor">↝$R</a> <a id="25882" class="Keyword">rewrite</a> <a id="25890" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="25896" class="Symbol">(</a><a id="25897" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="25899" href="/lia/part5/Exp/#25875" class="Bound">a</a><a id="25900" class="Symbol">)</a> <a id="25902" class="Symbol">=</a> <a id="25904" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="25912" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25917" class="Symbol">(</a><a id="25918" href="/lia/part5/Exp/#23797" class="InductiveConstructor">↝+L</a> <a id="25922" href="/lia/part5/Exp/#25922" class="Bound">e↝e'</a><a id="25926" class="Symbol">)</a> <a id="25928" class="Keyword">with</a> <a id="25933" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25938" href="/lia/part5/Exp/#25922" class="Bound">e↝e'</a>
<a id="25943" class="Symbol">...</a> <a id="25947" class="Symbol">|</a> <a id="25949" href="/lia/part5/Exp/#25949" class="Bound">μe'&lt;μe</a> <a id="25956" class="Symbol">=</a> <a id="25958" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="25962" class="Symbol">(</a><a id="25963" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="25972" href="/lia/part5/Exp/#25949" class="Bound">μe'&lt;μe</a><a id="25978" class="Symbol">)</a>

<a id="25981" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="25986" class="Symbol">(</a><a id="25987" href="/lia/part5/Exp/#23861" class="InductiveConstructor">↝+R</a> <a id="25991" href="/lia/part5/Exp/#25991" class="Bound">f↝f'</a><a id="25995" class="Symbol">)</a> <a id="25997" class="Keyword">with</a> <a id="26002" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="26007" href="/lia/part5/Exp/#25991" class="Bound">f↝f'</a>
<a id="26012" class="Symbol">...</a> <a id="26016" class="Symbol">|</a> <a id="26018" href="/lia/part5/Exp/#26018" class="Bound">μf'&lt;μf</a> <a id="26025" class="Symbol">=</a> <a id="26027" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26031" class="Symbol">(</a><a id="26032" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="26042" href="/lia/part5/Exp/#26018" class="Bound">μf'&lt;μf</a><a id="26048" class="Symbol">)</a>

<a id="26051" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="26056" class="Symbol">{</a><a id="26057" href="/lia/part5/Exp/#26057" class="Bound">a</a><a id="26058" class="Symbol">}</a> <a id="26060" class="Symbol">{</a><a id="26061" href="/lia/part5/Exp/#26061" class="Bound">b</a><a id="26062" class="Symbol">}</a> <a id="26064" href="/lia/part5/Exp/#23933" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="26069" class="Symbol">=</a> <a id="26071" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26075" class="Symbol">(</a><a id="26076" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26080" class="Symbol">(</a><a id="26081" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26085" class="Symbol">(</a><a id="26086" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="26096" href="/lia/part0/Naturals/#3370" class="Function">n&lt;suc2n</a><a id="26103" class="Symbol">)))</a>

<a id="26108" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="26113" href="/lia/part5/Exp/#26113" class="Bound">a</a><a id="26114" class="Symbol">@{</a><a id="26116" href="/lia/part5/Exp/#23291" class="InductiveConstructor">Add</a> <a id="26120" class="Symbol">(</a><a id="26121" href="/lia/part5/Exp/#26121" class="Bound">a₁</a> <a id="26124" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="26125" class="Symbol">)</a> <a id="26127" class="Symbol">(</a><a id="26128" href="/lia/part5/Exp/#26128" class="Bound">b₁</a> <a id="26131" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="26132" class="Symbol">)}</a> <a id="26135" class="Symbol">{</a><a id="26136" href="/lia/part5/Exp/#26136" class="Bound">b</a><a id="26137" class="Symbol">}</a> <a id="26139" href="/lia/part5/Exp/#23996" class="InductiveConstructor">↝+𝟬𝟭</a>
  <a id="26146" class="Keyword">rewrite</a>
    <a id="26158" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="26164" class="Symbol">(</a><a id="26165" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26167" href="/lia/part5/Exp/#26113" class="Bound">a</a><a id="26168" class="Symbol">)</a> <a id="26170" class="Symbol">|</a>
    <a id="26176" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="26182" class="Symbol">(</a><a id="26183" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26185" href="/lia/part5/Exp/#26136" class="Bound">b</a><a id="26186" class="Symbol">)</a> <a id="26188" class="Symbol">|</a>
    <a id="26194" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26204" class="Symbol">{</a><a id="26205" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26207" href="/lia/part5/Exp/#26121" class="Bound">a₁</a><a id="26209" class="Symbol">}</a> <a id="26211" class="Symbol">{</a><a id="26212" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26216" class="Symbol">(</a><a id="26217" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26221" class="Symbol">(</a><a id="26222" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26226" class="Symbol">(</a><a id="26227" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26229" href="/lia/part5/Exp/#26128" class="Bound">b₁</a><a id="26231" class="Symbol">)))}</a> <a id="26236" class="Symbol">|</a>
    <a id="26242" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26252" class="Symbol">{</a><a id="26253" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26255" href="/lia/part5/Exp/#26121" class="Bound">a₁</a><a id="26257" class="Symbol">}</a> <a id="26259" class="Symbol">{</a><a id="26260" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26264" class="Symbol">(</a><a id="26265" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26269" class="Symbol">(</a><a id="26270" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26272" href="/lia/part5/Exp/#26128" class="Bound">b₁</a><a id="26274" class="Symbol">))}</a> <a id="26278" class="Symbol">|</a>
    <a id="26284" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26294" class="Symbol">{</a><a id="26295" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26297" href="/lia/part5/Exp/#26121" class="Bound">a₁</a><a id="26299" class="Symbol">}</a> <a id="26301" class="Symbol">{</a><a id="26302" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26306" class="Symbol">(</a><a id="26307" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26309" href="/lia/part5/Exp/#26128" class="Bound">b₁</a><a id="26311" class="Symbol">)}</a> <a id="26314" class="Symbol">|</a>
    <a id="26320" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26330" class="Symbol">{</a><a id="26331" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26333" href="/lia/part5/Exp/#26121" class="Bound">a₁</a><a id="26335" class="Symbol">}</a> <a id="26337" class="Symbol">{</a><a id="26338" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26340" href="/lia/part5/Exp/#26128" class="Bound">b₁</a><a id="26342" class="Symbol">}</a>
  <a id="26346" class="Symbol">=</a> <a id="26348" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26352" class="Symbol">(</a><a id="26353" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26357" class="Symbol">(</a><a id="26358" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26362" class="Symbol">(</a><a id="26363" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26367" class="Symbol">(</a><a id="26368" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26372" class="Symbol">(</a><a id="26373" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26377" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="26383" class="Symbol">)))))</a>

<a id="26390" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="26395" href="/lia/part5/Exp/#26395" class="Bound">a</a><a id="26396" class="Symbol">@{</a><a id="26398" href="/lia/part5/Exp/#23291" class="InductiveConstructor">Add</a> <a id="26402" class="Symbol">(</a><a id="26403" href="/lia/part5/Exp/#26403" class="Bound">a₁</a> <a id="26406" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="26407" class="Symbol">)</a> <a id="26409" class="Symbol">(</a><a id="26410" href="/lia/part5/Exp/#26410" class="Bound">b₁</a> <a id="26413" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="26414" class="Symbol">)}</a> <a id="26417" class="Symbol">{</a><a id="26418" href="/lia/part5/Exp/#26418" class="Bound">b</a><a id="26419" class="Symbol">}</a> <a id="26421" href="/lia/part5/Exp/#24059" class="InductiveConstructor">↝+𝟭𝟬</a>
  <a id="26428" class="Keyword">rewrite</a>
    <a id="26440" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="26446" class="Symbol">(</a><a id="26447" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26449" href="/lia/part5/Exp/#26395" class="Bound">a</a><a id="26450" class="Symbol">)</a> <a id="26452" class="Symbol">|</a>
    <a id="26458" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="26464" class="Symbol">(</a><a id="26465" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26467" href="/lia/part5/Exp/#26418" class="Bound">b</a><a id="26468" class="Symbol">)</a> <a id="26470" class="Symbol">|</a>
    <a id="26476" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26486" class="Symbol">{</a><a id="26487" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26489" href="/lia/part5/Exp/#26403" class="Bound">a₁</a><a id="26491" class="Symbol">}</a> <a id="26493" class="Symbol">{</a><a id="26494" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26498" class="Symbol">(</a><a id="26499" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26501" href="/lia/part5/Exp/#26410" class="Bound">b₁</a><a id="26503" class="Symbol">)}</a> <a id="26506" class="Symbol">|</a>
    <a id="26512" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="26522" class="Symbol">{</a><a id="26523" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26525" href="/lia/part5/Exp/#26403" class="Bound">a₁</a><a id="26527" class="Symbol">}</a> <a id="26529" class="Symbol">{</a><a id="26530" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26532" href="/lia/part5/Exp/#26410" class="Bound">b₁</a><a id="26534" class="Symbol">}</a>
  <a id="26538" class="Symbol">=</a> <a id="26540" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26544" class="Symbol">(</a><a id="26545" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26549" class="Symbol">(</a><a id="26550" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26554" class="Symbol">(</a><a id="26555" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26559" class="Symbol">(</a><a id="26560" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26564" class="Symbol">(</a><a id="26565" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="26569" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="26575" class="Symbol">)))))</a>

<a id="26582" href="/lia/part5/Exp/#25661" class="Function">μ-wf</a> <a id="26587" href="/lia/part5/Exp/#26587" class="Bound">a</a><a id="26588" class="Symbol">@{</a><a id="26590" href="/lia/part5/Exp/#23291" class="InductiveConstructor">Add</a> <a id="26594" class="Symbol">(</a><a id="26595" href="/lia/part5/Exp/#26595" class="Bound">a₁</a> <a id="26598" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="26599" class="Symbol">)</a> <a id="26601" class="Symbol">(</a><a id="26602" href="/lia/part5/Exp/#26602" class="Bound">b₁</a> <a id="26605" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="26606" class="Symbol">)}</a> <a id="26609" class="Symbol">{</a><a id="26610" href="/lia/part5/Exp/#26610" class="Bound">b</a><a id="26611" class="Symbol">}</a> <a id="26613" href="/lia/part5/Exp/#24122" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="26618" class="Symbol">=</a> <a id="26620" href="/lia/part5/Exp/#26792" class="Function">goal</a> <a id="26625" class="Keyword">where</a>

  <a id="26634" href="/lia/part5/Exp/#26634" class="Function">magic</a> <a id="26640" class="Symbol">:</a> <a id="26642" class="Symbol">∀</a> <a id="26644" href="/lia/part5/Exp/#26644" class="Bound">a</a> <a id="26646" href="/lia/part5/Exp/#26646" class="Bound">b</a> <a id="26648" class="Symbol">→</a>
      <a id="26656" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26660" class="Symbol">(</a><a id="26661" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26665" class="Symbol">(</a><a id="26666" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26670" class="Symbol">(</a><a id="26671" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26675" class="Symbol">(</a><a id="26676" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26680" class="Symbol">(</a><a id="26681" href="/lia/part5/Exp/#26644" class="Bound">a</a> <a id="26683" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26686" href="/lia/part5/Exp/#26646" class="Bound">b</a> <a id="26688" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26691" class="Number">4</a><a id="26692" class="Symbol">)))))</a> <a id="26698" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a>
      <a id="26706" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26710" class="Symbol">(</a><a id="26711" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26715" class="Symbol">(</a><a id="26716" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26720" class="Symbol">(</a><a id="26721" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26725" class="Symbol">(</a><a id="26726" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26730" class="Symbol">(</a><a id="26731" href="/lia/part5/Exp/#26644" class="Bound">a</a> <a id="26733" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26736" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26740" class="Symbol">(</a><a id="26741" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26745" class="Symbol">(</a><a id="26746" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26750" class="Symbol">(</a><a id="26751" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26755" href="/lia/part5/Exp/#26646" class="Bound">b</a><a id="26756" class="Symbol">))))))))</a>
  <a id="26767" href="/lia/part5/Exp/#26634" class="Function">magic</a> <a id="26773" class="Symbol">=</a> <a id="26775" class="Symbol">{! solve-∀ !}</a>

  <a id="26792" href="/lia/part5/Exp/#26792" class="Function">goal</a> <a id="26797" class="Symbol">:</a> <a id="26799" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26803" class="Symbol">(</a><a id="26804" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26808" class="Symbol">(</a><a id="26809" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26813" class="Symbol">(</a><a id="26814" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26818" class="Symbol">(</a><a id="26819" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26823" class="Symbol">(</a><a id="26824" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26826" href="/lia/part5/Exp/#26595" class="Bound">a₁</a> <a id="26829" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26832" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26834" href="/lia/part5/Exp/#26602" class="Bound">b₁</a> <a id="26837" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26840" class="Number">4</a><a id="26841" class="Symbol">)))))</a> <a id="26847" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a>
         <a id="26859" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26863" class="Symbol">(</a><a id="26864" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26868" class="Symbol">(</a><a id="26869" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26873" class="Symbol">(</a><a id="26874" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26878" class="Symbol">(</a><a id="26879" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26883" class="Symbol">(</a><a id="26884" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26886" href="/lia/part5/Exp/#26595" class="Bound">a₁</a> <a id="26889" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26892" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26896" class="Symbol">(</a><a id="26897" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26901" class="Symbol">(</a><a id="26902" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26906" class="Symbol">(</a><a id="26907" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="26911" class="Symbol">(</a><a id="26912" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26914" href="/lia/part5/Exp/#26602" class="Bound">b₁</a><a id="26916" class="Symbol">)))))))))</a>
  <a id="26928" href="/lia/part5/Exp/#26792" class="Function">goal</a> <a id="26933" class="Keyword">rewrite</a> <a id="26941" href="/lia/part5/Exp/#26634" class="Function">magic</a> <a id="26947" class="Symbol">(</a><a id="26948" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26950" href="/lia/part5/Exp/#26595" class="Bound">a₁</a><a id="26952" class="Symbol">)</a> <a id="26954" class="Symbol">(</a><a id="26955" href="/lia/part5/Exp/#25574" class="Function">μ</a> <a id="26957" href="/lia/part5/Exp/#26602" class="Bound">b₁</a><a id="26959" class="Symbol">)</a> <a id="26961" class="Symbol">=</a> <a id="26963" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<h2 id="strong-normalisation-second-proof">
<a class="anchor" href="#strong-normalisation-second-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (second proof)</h2>

<p>We prove strong normalisation by well-founded induction on a
lexicograpic order.</p>

<pre class="Agda"><a id="zeroes"></a><a id="27101" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="ones"></a><a id="27108" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="dollars"></a><a id="27113" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27121" class="Symbol">:</a> <a id="27123" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="27127" class="Symbol">→</a> <a id="27129" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="27132" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27139" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="27141" class="Symbol">=</a> <a id="27143" class="Number">0</a>
<a id="27145" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27152" class="Symbol">(</a><a id="27153" href="/lia/part5/Exp/#27153" class="Bound">a</a> <a id="27155" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="27156" class="Symbol">)</a> <a id="27158" class="Symbol">=</a> <a id="27160" class="Number">1</a> <a id="27162" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27165" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27172" href="/lia/part5/Exp/#27153" class="Bound">a</a>
<a id="27174" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27181" class="Symbol">(</a><a id="27182" href="/lia/part5/Exp/#27182" class="Bound">a</a> <a id="27184" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="27185" class="Symbol">)</a> <a id="27187" class="Symbol">=</a> <a id="27189" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27196" href="/lia/part5/Exp/#27182" class="Bound">a</a>
<a id="27198" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27205" class="Symbol">(</a><a id="27206" href="/lia/part5/Exp/#27206" class="Bound">a</a> <a id="27208" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="27210" href="/lia/part5/Exp/#27210" class="Bound">b</a><a id="27211" class="Symbol">)</a> <a id="27213" class="Symbol">=</a> <a id="27215" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27222" href="/lia/part5/Exp/#27206" class="Bound">a</a> <a id="27224" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27227" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27234" href="/lia/part5/Exp/#27210" class="Bound">b</a>

<a id="27237" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27242" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="27244" class="Symbol">=</a> <a id="27246" class="Number">0</a>
<a id="27248" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27253" class="Symbol">(</a><a id="27254" href="/lia/part5/Exp/#27254" class="Bound">a</a> <a id="27256" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="27257" class="Symbol">)</a> <a id="27259" class="Symbol">=</a> <a id="27261" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27266" href="/lia/part5/Exp/#27254" class="Bound">a</a>
<a id="27268" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27273" class="Symbol">(</a><a id="27274" href="/lia/part5/Exp/#27274" class="Bound">a</a> <a id="27276" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="27277" class="Symbol">)</a> <a id="27279" class="Symbol">=</a> <a id="27281" class="Number">1</a> <a id="27283" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27286" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27291" href="/lia/part5/Exp/#27274" class="Bound">a</a>
<a id="27293" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27298" class="Symbol">(</a><a id="27299" href="/lia/part5/Exp/#27299" class="Bound">a</a> <a id="27301" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="27303" href="/lia/part5/Exp/#27303" class="Bound">b</a><a id="27304" class="Symbol">)</a> <a id="27306" class="Symbol">=</a> <a id="27308" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27313" href="/lia/part5/Exp/#27299" class="Bound">a</a> <a id="27315" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27318" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27323" href="/lia/part5/Exp/#27303" class="Bound">b</a>

<a id="27326" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27334" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="27336" class="Symbol">=</a> <a id="27338" class="Number">1</a>
<a id="27340" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27348" class="Symbol">(</a><a id="27349" href="/lia/part5/Exp/#27349" class="Bound">a</a> <a id="27351" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="27352" class="Symbol">)</a> <a id="27354" class="Symbol">=</a> <a id="27356" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27364" href="/lia/part5/Exp/#27349" class="Bound">a</a>
<a id="27366" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27374" class="Symbol">(</a><a id="27375" href="/lia/part5/Exp/#27375" class="Bound">a</a> <a id="27377" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="27378" class="Symbol">)</a> <a id="27380" class="Symbol">=</a> <a id="27382" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27390" href="/lia/part5/Exp/#27375" class="Bound">a</a>
<a id="27392" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27400" class="Symbol">(</a><a id="27401" href="/lia/part5/Exp/#27401" class="Bound">a</a> <a id="27403" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="27405" href="/lia/part5/Exp/#27405" class="Bound">b</a><a id="27406" class="Symbol">)</a> <a id="27408" class="Symbol">=</a> <a id="27410" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27418" href="/lia/part5/Exp/#27401" class="Bound">a</a> <a id="27420" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27423" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27431" href="/lia/part5/Exp/#27405" class="Bound">b</a>

<a id="Triple"></a><a id="27434" href="/lia/part5/Exp/#27434" class="Function">Triple</a> <a id="27441" class="Symbol">=</a> <a id="27443" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="27445" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="27447" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="27449" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="27451" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="triple"></a><a id="27454" href="/lia/part5/Exp/#27454" class="Function">triple</a> <a id="27461" class="Symbol">:</a> <a id="27463" href="/lia/part5/Exp/#23229" class="Datatype">Bin</a> <a id="27467" class="Symbol">→</a> <a id="27469" href="/lia/part5/Exp/#27434" class="Function">Triple</a>
<a id="27476" href="/lia/part5/Exp/#27454" class="Function">triple</a> <a id="27483" href="/lia/part5/Exp/#27483" class="Bound">a</a> <a id="27485" class="Symbol">=</a> <a id="27487" class="Symbol">(</a><a id="27488" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="27493" href="/lia/part5/Exp/#27483" class="Bound">a</a> <a id="27495" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27497" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="27504" href="/lia/part5/Exp/#27483" class="Bound">a</a> <a id="27506" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27508" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="27516" href="/lia/part5/Exp/#27483" class="Bound">a</a><a id="27517" class="Symbol">)</a>

<a id="_≺_"></a><a id="27520" href="/lia/part5/Exp/#27520" class="Function Operator">_≺_</a> <a id="27524" class="Symbol">:</a> <a id="27526" href="/lia/part5/Exp/#27434" class="Function">Triple</a> <a id="27533" class="Symbol">→</a> <a id="27535" href="/lia/part5/Exp/#27434" class="Function">Triple</a> <a id="27542" class="Symbol">→</a> <a id="27544" class="PrimitiveType">Set</a>
<a id="27548" href="/lia/part5/Exp/#27520" class="Function Operator">_≺_</a> <a id="27552" class="Symbol">=</a> <a id="27554" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="27558" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="27563" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="27567" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="27572" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a>

<a id="wf-≺"></a><a id="27577" href="/lia/part5/Exp/#27577" class="Function">wf-≺</a> <a id="27582" class="Symbol">:</a> <a id="27584" href="/lia/part0/WellFounded/#548" class="Function">WellFounded</a> <a id="27596" href="/lia/part5/Exp/#27520" class="Function Operator">_≺_</a>
<a id="27600" href="/lia/part5/Exp/#27577" class="Function">wf-≺</a> <a id="27605" class="Symbol">=</a> <a id="27607" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="27614" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="27619" class="Symbol">(</a><a id="27620" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="27627" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="27632" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a><a id="27636" class="Symbol">)</a>

<a id="triple-mon"></a><a id="27639" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="27650" class="Symbol">:</a> <a id="27652" href="/lia/part5/Exp/#23364" class="Generalizable">a</a> <a id="27654" href="/lia/part5/Exp/#23586" class="Datatype Operator">↝</a> <a id="27656" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="27658" class="Symbol">→</a>
             <a id="27673" class="Comment">-------------------</a>
             <a id="27706" href="/lia/part5/Exp/#27454" class="Function">triple</a> <a id="27713" href="/lia/part5/Exp/#23369" class="Generalizable">b</a> <a id="27715" href="/lia/part5/Exp/#27520" class="Function Operator">≺</a> <a id="27717" href="/lia/part5/Exp/#27454" class="Function">triple</a> <a id="27724" href="/lia/part5/Exp/#23364" class="Generalizable">a</a>
             
<a id="27740" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="27751" class="Symbol">(</a><a id="27752" href="/lia/part5/Exp/#23617" class="InductiveConstructor">↝𝟬</a> <a id="27755" href="/lia/part5/Exp/#27755" class="Bound">δ</a><a id="27756" class="Symbol">)</a> <a id="27758" class="Keyword">with</a> <a id="27763" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="27774" href="/lia/part5/Exp/#27755" class="Bound">δ</a>
<a id="27776" class="Symbol">...</a> <a id="27780" class="Symbol">|</a> <a id="27782" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27787" href="/lia/part5/Exp/#27787" class="Bound">1s</a> <a id="27790" class="Symbol">=</a> <a id="27792" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27797" href="/lia/part5/Exp/#27787" class="Bound">1s</a>
<a id="27800" class="Symbol">...</a> <a id="27804" class="Symbol">|</a> <a id="27806" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27812" class="Symbol">(</a><a id="27813" href="/lia/part5/Exp/#27813" class="Bound">1s</a> <a id="27816" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27818" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27823" href="/lia/part5/Exp/#27823" class="Bound">0s</a><a id="27825" class="Symbol">)</a> <a id="27827" class="Symbol">=</a> <a id="27829" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27835" class="Symbol">(</a><a id="27836" href="/lia/part5/Exp/#27813" class="Bound">1s</a> <a id="27839" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27841" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27846" class="Symbol">(</a><a id="27847" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="27851" href="/lia/part5/Exp/#27823" class="Bound">0s</a><a id="27853" class="Symbol">))</a>
<a id="27856" class="Symbol">...</a> <a id="27860" class="Symbol">|</a> <a id="27862" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27868" class="Symbol">(</a><a id="27869" href="/lia/part5/Exp/#27869" class="Bound">1s</a> <a id="27872" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27874" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27880" class="Symbol">(</a><a id="27881" href="/lia/part5/Exp/#27881" class="Bound">0s</a> <a id="27884" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27886" href="/lia/part5/Exp/#27886" class="Bound">$s</a><a id="27888" class="Symbol">))</a> <a id="27891" class="Symbol">=</a> <a id="27893" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27899" class="Symbol">(</a><a id="27900" href="/lia/part5/Exp/#27869" class="Bound">1s</a> <a id="27903" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27905" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="27911" class="Symbol">(</a><a id="27912" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="27917" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27921" href="/lia/part5/Exp/#27881" class="Bound">0s</a> <a id="27924" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="27926" href="/lia/part5/Exp/#27886" class="Bound">$s</a><a id="27928" class="Symbol">))</a>

<a id="27932" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="27943" class="Symbol">(</a><a id="27944" href="/lia/part5/Exp/#23670" class="InductiveConstructor">↝𝟭</a> <a id="27947" href="/lia/part5/Exp/#27947" class="Bound">δ</a><a id="27948" class="Symbol">)</a> <a id="27950" class="Keyword">with</a> <a id="27955" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="27966" href="/lia/part5/Exp/#27947" class="Bound">δ</a>
<a id="27968" class="Symbol">...</a> <a id="27972" class="Symbol">|</a> <a id="27974" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27979" href="/lia/part5/Exp/#27979" class="Bound">1s</a> <a id="27982" class="Symbol">=</a> <a id="27984" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="27989" class="Symbol">(</a><a id="27990" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="27994" href="/lia/part5/Exp/#27979" class="Bound">1s</a><a id="27996" class="Symbol">)</a>
<a id="27998" class="Symbol">...</a> <a id="28002" class="Symbol">|</a> <a id="28004" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28010" class="Symbol">(</a><a id="28011" href="/lia/part5/Exp/#28011" class="Bound">1s</a> <a id="28014" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28016" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28021" href="/lia/part5/Exp/#28021" class="Bound">0s</a><a id="28023" class="Symbol">)</a> <a id="28025" class="Symbol">=</a> <a id="28027" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28033" class="Symbol">(</a><a id="28034" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="28039" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28043" href="/lia/part5/Exp/#28011" class="Bound">1s</a> <a id="28046" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28048" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28053" href="/lia/part5/Exp/#28021" class="Bound">0s</a><a id="28055" class="Symbol">)</a>
<a id="28057" class="Symbol">...</a> <a id="28061" class="Symbol">|</a> <a id="28063" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28069" class="Symbol">(</a><a id="28070" href="/lia/part5/Exp/#28070" class="Bound">1s</a> <a id="28073" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28075" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28081" class="Symbol">(</a><a id="28082" href="/lia/part5/Exp/#28082" class="Bound">0s</a> <a id="28085" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28087" href="/lia/part5/Exp/#28087" class="Bound">$s</a><a id="28089" class="Symbol">))</a> <a id="28092" class="Symbol">=</a> <a id="28094" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28100" class="Symbol">(</a><a id="28101" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="28106" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28110" href="/lia/part5/Exp/#28070" class="Bound">1s</a> <a id="28113" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28115" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28121" class="Symbol">(</a><a id="28122" href="/lia/part5/Exp/#28082" class="Bound">0s</a> <a id="28125" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28127" href="/lia/part5/Exp/#28087" class="Bound">$s</a><a id="28129" class="Symbol">))</a>

<a id="28133" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28144" class="Symbol">{</a><a id="28145" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a> <a id="28147" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="28149" href="/lia/part5/Exp/#28149" class="Bound">b</a><a id="28150" class="Symbol">}</a> <a id="28152" href="/lia/part5/Exp/#23723" class="InductiveConstructor">↝$L</a> <a id="28156" class="Symbol">=</a> <a id="28158" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28164" class="Symbol">(</a><a id="28165" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28170" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28172" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28178" class="Symbol">(</a><a id="28179" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28184" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28186" href="/lia/part0/Naturals/#1490" class="Function">n&lt;sucn</a><a id="28192" class="Symbol">))</a>

<a id="28196" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28207" class="Symbol">{</a><a id="28208" href="/lia/part5/Exp/#28208" class="Bound">b</a> <a id="28210" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="28212" href="/lia/part5/Exp/#23247" class="InductiveConstructor">$</a><a id="28213" class="Symbol">}</a> <a id="28215" href="/lia/part5/Exp/#23760" class="InductiveConstructor">↝$R</a>
  <a id="28221" class="Keyword">rewrite</a>
    <a id="28233" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="28239" class="Symbol">(</a><a id="28240" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="28245" href="/lia/part5/Exp/#28208" class="Bound">b</a><a id="28246" class="Symbol">)</a> <a id="28248" class="Symbol">|</a>
    <a id="28254" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="28260" class="Symbol">(</a><a id="28261" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="28268" href="/lia/part5/Exp/#28208" class="Bound">b</a><a id="28269" class="Symbol">)</a> <a id="28271" class="Symbol">|</a>
    <a id="28277" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="28287" class="Symbol">{</a><a id="28288" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="28296" href="/lia/part5/Exp/#28208" class="Bound">b</a><a id="28297" class="Symbol">}</a> <a id="28299" class="Symbol">{</a><a id="28300" class="Number">0</a><a id="28301" class="Symbol">}</a> <a id="28303" class="Symbol">|</a>
    <a id="28309" href="/lia/part0/Naturals/#5290" class="Function">n+0≡n</a> <a id="28315" class="Symbol">(</a><a id="28316" href="/lia/part5/Exp/#27113" class="Function">dollars</a> <a id="28324" href="/lia/part5/Exp/#28208" class="Bound">b</a><a id="28325" class="Symbol">)</a> <a id="28327" class="Symbol">=</a> <a id="28329" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28335" class="Symbol">(</a><a id="28336" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28341" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28343" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28349" class="Symbol">(</a><a id="28350" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28355" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28357" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="28363" class="Symbol">))</a>

<a id="28367" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28378" class="Symbol">(</a><a id="28379" href="/lia/part5/Exp/#23797" class="InductiveConstructor">↝+L</a> <a id="28383" href="/lia/part5/Exp/#28383" class="Bound">δ</a><a id="28384" class="Symbol">)</a> <a id="28386" class="Keyword">with</a> <a id="28391" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28402" href="/lia/part5/Exp/#28383" class="Bound">δ</a>
<a id="28404" class="Symbol">...</a> <a id="28408" class="Symbol">|</a> <a id="28410" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28415" href="/lia/part5/Exp/#28415" class="Bound">1s</a> <a id="28418" class="Symbol">=</a> <a id="28420" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28425" class="Symbol">(</a><a id="28426" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="28435" href="/lia/part5/Exp/#28415" class="Bound">1s</a><a id="28437" class="Symbol">)</a>
<a id="28439" class="Symbol">...</a> <a id="28443" class="Symbol">|</a> <a id="28445" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28451" class="Symbol">(</a><a id="28452" href="/lia/part5/Exp/#28452" class="Bound">1s</a> <a id="28455" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28457" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28462" href="/lia/part5/Exp/#28462" class="Bound">0s</a><a id="28464" class="Symbol">)</a> <a id="28466" class="Keyword">rewrite</a> <a id="28474" href="/lia/part5/Exp/#28452" class="Bound">1s</a> <a id="28477" class="Symbol">=</a> <a id="28479" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28485" class="Symbol">(</a><a id="28486" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28491" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28493" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28498" class="Symbol">(</a><a id="28499" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="28508" href="/lia/part5/Exp/#28462" class="Bound">0s</a><a id="28510" class="Symbol">))</a>
<a id="28513" class="Symbol">...</a> <a id="28517" class="Symbol">|</a> <a id="28519" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28525" class="Symbol">(</a><a id="28526" href="/lia/part5/Exp/#28526" class="Bound">1s</a> <a id="28529" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28531" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28537" class="Symbol">(</a><a id="28538" href="/lia/part5/Exp/#28538" class="Bound">0s</a> <a id="28541" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28543" href="/lia/part5/Exp/#28543" class="Bound">$s</a><a id="28545" class="Symbol">))</a> <a id="28548" class="Keyword">rewrite</a> <a id="28556" href="/lia/part5/Exp/#28526" class="Bound">1s</a> <a id="28559" class="Symbol">|</a> <a id="28561" href="/lia/part5/Exp/#28538" class="Bound">0s</a> <a id="28564" class="Symbol">=</a> <a id="28566" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28572" class="Symbol">(</a><a id="28573" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28578" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28580" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28586" class="Symbol">(</a><a id="28587" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28592" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28594" href="/lia/part0/Naturals/#7235" class="Function">&lt;-+-left</a> <a id="28603" href="/lia/part5/Exp/#28543" class="Bound">$s</a><a id="28605" class="Symbol">))</a>

<a id="28609" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28620" class="Symbol">(</a><a id="28621" href="/lia/part5/Exp/#23861" class="InductiveConstructor">↝+R</a> <a id="28625" href="/lia/part5/Exp/#28625" class="Bound">δ</a><a id="28626" class="Symbol">)</a> <a id="28628" class="Keyword">with</a> <a id="28633" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28644" href="/lia/part5/Exp/#28625" class="Bound">δ</a>
<a id="28646" class="Symbol">...</a> <a id="28650" class="Symbol">|</a> <a id="28652" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28657" href="/lia/part5/Exp/#28657" class="Bound">1s</a> <a id="28660" class="Symbol">=</a> <a id="28662" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28667" class="Symbol">(</a><a id="28668" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="28678" href="/lia/part5/Exp/#28657" class="Bound">1s</a><a id="28680" class="Symbol">)</a>
<a id="28682" class="Symbol">...</a> <a id="28686" class="Symbol">|</a> <a id="28688" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28694" class="Symbol">(</a><a id="28695" href="/lia/part5/Exp/#28695" class="Bound">1s</a> <a id="28698" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28700" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28705" href="/lia/part5/Exp/#28705" class="Bound">0s</a><a id="28707" class="Symbol">)</a> <a id="28709" class="Keyword">rewrite</a> <a id="28717" href="/lia/part5/Exp/#28695" class="Bound">1s</a> <a id="28720" class="Symbol">|</a> <a id="28722" href="/lia/part5/Exp/#28695" class="Bound">1s</a> <a id="28725" class="Symbol">=</a> <a id="28727" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28733" class="Symbol">(</a><a id="28734" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28739" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28741" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28746" class="Symbol">(</a><a id="28747" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="28757" href="/lia/part5/Exp/#28705" class="Bound">0s</a><a id="28759" class="Symbol">))</a>
<a id="28762" class="Symbol">...</a> <a id="28766" class="Symbol">|</a> <a id="28768" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28774" class="Symbol">(</a><a id="28775" href="/lia/part5/Exp/#28775" class="Bound">1s</a> <a id="28778" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28780" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28786" class="Symbol">(</a><a id="28787" href="/lia/part5/Exp/#28787" class="Bound">0s</a> <a id="28790" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28792" href="/lia/part5/Exp/#28792" class="Bound">$s</a><a id="28794" class="Symbol">))</a> <a id="28797" class="Keyword">rewrite</a> <a id="28805" href="/lia/part5/Exp/#28775" class="Bound">1s</a> <a id="28808" class="Symbol">|</a> <a id="28810" href="/lia/part5/Exp/#28775" class="Bound">1s</a> <a id="28813" class="Symbol">|</a> <a id="28815" href="/lia/part5/Exp/#28787" class="Bound">0s</a> <a id="28818" class="Symbol">=</a> <a id="28820" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28826" class="Symbol">(</a><a id="28827" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28832" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28834" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28840" class="Symbol">(</a><a id="28841" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28846" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28848" href="/lia/part0/Naturals/#7288" class="Function">&lt;-+-right</a> <a id="28858" href="/lia/part5/Exp/#28792" class="Bound">$s</a><a id="28860" class="Symbol">))</a>

<a id="28864" class="Comment">-- number of zeroes goes down</a>
<a id="28894" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="28905" class="Symbol">{</a><a id="28906" href="/lia/part5/Exp/#28906" class="Bound">a</a> <a id="28908" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="28910" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="28912" href="/lia/part5/Exp/#28912" class="Bound">b</a> <a id="28914" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="28915" class="Symbol">}</a> <a id="28917" href="/lia/part5/Exp/#23933" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="28922" class="Keyword">rewrite</a> <a id="28930" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="28940" class="Symbol">{</a><a id="28941" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="28948" href="/lia/part5/Exp/#28906" class="Bound">a</a><a id="28949" class="Symbol">}</a> <a id="28951" class="Symbol">{</a><a id="28952" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="28959" href="/lia/part5/Exp/#28912" class="Bound">b</a><a id="28960" class="Symbol">}</a> <a id="28962" class="Symbol">=</a> <a id="28964" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="28970" class="Symbol">(</a> <a id="28972" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="28977" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="28979" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="28984" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="28990" class="Symbol">)</a>

<a id="28993" class="Comment">-- number of zeroes goes down</a>
<a id="29023" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="29034" class="Symbol">{</a><a id="29035" href="/lia/part5/Exp/#29035" class="Bound">a</a> <a id="29037" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a> <a id="29039" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="29041" href="/lia/part5/Exp/#29041" class="Bound">b</a> <a id="29043" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="29044" class="Symbol">}</a> <a id="29046" href="/lia/part5/Exp/#23996" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="29051" class="Keyword">rewrite</a> <a id="29059" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="29069" class="Symbol">{</a><a id="29070" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29075" href="/lia/part5/Exp/#29035" class="Bound">a</a><a id="29076" class="Symbol">}</a> <a id="29078" class="Symbol">{</a><a id="29079" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29084" href="/lia/part5/Exp/#29041" class="Bound">b</a><a id="29085" class="Symbol">}</a> <a id="29087" class="Symbol">=</a> <a id="29089" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="29095" class="Symbol">(</a> <a id="29097" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="29102" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="29104" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="29109" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="29115" class="Symbol">)</a>

<a id="29118" class="Comment">-- number of zeroes goes down</a>
<a id="29148" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="29159" class="Symbol">{</a><a id="29160" href="/lia/part5/Exp/#29160" class="Bound">a</a> <a id="29162" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="29164" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="29166" href="/lia/part5/Exp/#29166" class="Bound">b</a> <a id="29168" href="/lia/part5/Exp/#23257" class="InductiveConstructor Operator">𝟬</a><a id="29169" class="Symbol">}</a> <a id="29171" href="/lia/part5/Exp/#24059" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="29176" class="Keyword">rewrite</a> <a id="29184" href="/lia/part0/Naturals/#5457" class="Function">suc-lemma</a> <a id="29194" class="Symbol">{</a><a id="29195" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="29202" href="/lia/part5/Exp/#29160" class="Bound">a</a><a id="29203" class="Symbol">}</a> <a id="29205" class="Symbol">{</a><a id="29206" href="/lia/part5/Exp/#27101" class="Function">zeroes</a> <a id="29213" href="/lia/part5/Exp/#29166" class="Bound">b</a><a id="29214" class="Symbol">}</a> <a id="29216" class="Symbol">=</a> <a id="29218" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="29224" class="Symbol">(</a> <a id="29226" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="29231" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="29233" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="29238" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="29244" class="Symbol">)</a>

<a id="29247" class="Comment">-- number of ones goes down</a>
<a id="29275" href="/lia/part5/Exp/#27639" class="Function">triple-mon</a> <a id="29286" class="Symbol">{</a><a id="29287" href="/lia/part5/Exp/#29287" class="Bound">a</a> <a id="29289" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a> <a id="29291" href="/lia/part5/Exp/#1239" class="InductiveConstructor Operator">+</a> <a id="29293" href="/lia/part5/Exp/#29293" class="Bound">b</a> <a id="29295" href="/lia/part5/Exp/#23274" class="InductiveConstructor Operator">𝟭</a><a id="29296" class="Symbol">}</a> <a id="29298" href="/lia/part5/Exp/#24122" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="29303" class="Symbol">=</a> <a id="29305" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="29310" href="/lia/part5/Exp/#29402" class="Function">goal</a> <a id="29315" class="Keyword">where</a>

  <a id="29324" href="/lia/part5/Exp/#29324" class="Function">have</a> <a id="29329" class="Symbol">:</a> <a id="29331" class="Symbol">∀</a> <a id="29333" href="/lia/part5/Exp/#29333" class="Bound">a</a> <a id="29335" href="/lia/part5/Exp/#29335" class="Bound">b</a> <a id="29337" class="Symbol">→</a> <a id="29339" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29343" class="Symbol">(</a><a id="29344" href="/lia/part5/Exp/#29333" class="Bound">a</a> <a id="29346" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29349" href="/lia/part5/Exp/#29335" class="Bound">b</a> <a id="29351" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29354" class="Number">1</a><a id="29355" class="Symbol">)</a> <a id="29357" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="29359" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29363" class="Symbol">(</a><a id="29364" href="/lia/part5/Exp/#29333" class="Bound">a</a> <a id="29366" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29369" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29373" href="/lia/part5/Exp/#29335" class="Bound">b</a><a id="29374" class="Symbol">)</a>
  <a id="29378" href="/lia/part5/Exp/#29324" class="Function">have</a> <a id="29383" class="Symbol">=</a> <a id="29385" class="Symbol">{! solve-∀ !}</a>

  <a id="29402" href="/lia/part5/Exp/#29402" class="Function">goal</a> <a id="29407" class="Symbol">:</a> <a id="29409" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29413" class="Symbol">(</a><a id="29414" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29419" href="/lia/part5/Exp/#29287" class="Bound">a</a> <a id="29421" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29424" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29429" href="/lia/part5/Exp/#29293" class="Bound">b</a> <a id="29431" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29434" class="Number">1</a><a id="29435" class="Symbol">)</a> <a id="29437" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a> <a id="29440" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29444" class="Symbol">(</a><a id="29445" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29450" href="/lia/part5/Exp/#29287" class="Bound">a</a> <a id="29452" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29455" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29459" class="Symbol">(</a><a id="29460" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29465" href="/lia/part5/Exp/#29293" class="Bound">b</a><a id="29466" class="Symbol">))</a>
  <a id="29471" href="/lia/part5/Exp/#29402" class="Function">goal</a> <a id="29476" class="Keyword">rewrite</a> <a id="29484" href="/lia/part5/Exp/#29324" class="Function">have</a> <a id="29489" class="Symbol">(</a><a id="29490" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29495" href="/lia/part5/Exp/#29287" class="Bound">a</a><a id="29496" class="Symbol">)</a> <a id="29498" class="Symbol">(</a><a id="29499" href="/lia/part5/Exp/#27108" class="Function">ones</a> <a id="29504" href="/lia/part5/Exp/#29293" class="Bound">b</a><a id="29505" class="Symbol">)</a> <a id="29507" class="Symbol">=</a> <a id="29509" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<div id="refs">

  <h1 id="references">
<a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

</div>

<h1 id="solutions">
<a class="anchor" href="#solutions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Solutions</h1>

<div class="solutionbox">

  <h6 id="exercise-BExp-semantics-solution">Solution to <a href="#exercise-BExp-semantics" title="Exercise %g">Exercise %g</a>
</h6>

  <p>We proceed by structural induction on Boolan expressions.</p>

  <pre class="Agda"><a id="2928" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="2931" href="/lia/part5/Exp/#1957" class="InductiveConstructor">tt</a> <a id="2934" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="2936" href="/lia/part5/Exp/#2936" class="Bound">ρ</a> <a id="2938" class="Symbol">=</a> <a id="2940" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="2943" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="2946" href="/lia/part5/Exp/#1969" class="InductiveConstructor">ff</a> <a id="2949" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="2951" href="/lia/part5/Exp/#2951" class="Bound">ρ</a> <a id="2953" class="Symbol">=</a> <a id="2955" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a>
<a id="2958" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="2961" href="/lia/part5/Exp/#2147" class="InductiveConstructor Operator">¬</a> <a id="2963" href="/lia/part5/Exp/#2963" class="Bound">b</a> <a id="2965" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="2967" href="/lia/part5/Exp/#2967" class="Bound">ρ</a> <a id="2969" class="Symbol">=</a> <a id="2971" href="/lia/part0/Booleans/#1066" class="Function Operator">¬𝔹</a> <a id="2974" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="2977" href="/lia/part5/Exp/#2963" class="Bound">b</a> <a id="2979" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="2981" href="/lia/part5/Exp/#2967" class="Bound">ρ</a>
<a id="2983" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="2986" href="/lia/part5/Exp/#2986" class="Bound">b</a> <a id="2988" href="/lia/part5/Exp/#2088" class="InductiveConstructor Operator">∨</a> <a id="2990" href="/lia/part5/Exp/#2990" class="Bound">c</a> <a id="2992" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="2994" href="/lia/part5/Exp/#2994" class="Bound">ρ</a> <a id="2996" class="Symbol">=</a> <a id="2998" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3001" href="/lia/part5/Exp/#2986" class="Bound">b</a> <a id="3003" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3005" href="/lia/part5/Exp/#2994" class="Bound">ρ</a> <a id="3007" href="/lia/part0/Booleans/#1008" class="Function Operator">∨𝔹</a> <a id="3010" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3013" href="/lia/part5/Exp/#2990" class="Bound">c</a> <a id="3015" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3017" href="/lia/part5/Exp/#2994" class="Bound">ρ</a>
<a id="3019" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3022" href="/lia/part5/Exp/#3022" class="Bound">b</a> <a id="3024" href="/lia/part5/Exp/#2117" class="InductiveConstructor Operator">∧</a> <a id="3026" href="/lia/part5/Exp/#3026" class="Bound">c</a> <a id="3028" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3030" href="/lia/part5/Exp/#3030" class="Bound">ρ</a> <a id="3032" class="Symbol">=</a> <a id="3034" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3037" href="/lia/part5/Exp/#3022" class="Bound">b</a> <a id="3039" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3041" href="/lia/part5/Exp/#3030" class="Bound">ρ</a> <a id="3043" href="/lia/part0/Booleans/#950" class="Function Operator">∧𝔹</a> <a id="3046" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3049" href="/lia/part5/Exp/#3026" class="Bound">c</a> <a id="3051" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3053" href="/lia/part5/Exp/#3030" class="Bound">ρ</a>
<a id="3055" href="/lia/part5/Exp/#2717" class="Function Operator">B⟦</a> <a id="3058" href="/lia/part5/Exp/#3058" class="Bound">e</a> <a id="3060" href="/lia/part5/Exp/#2168" class="InductiveConstructor Operator">≤</a> <a id="3062" href="/lia/part5/Exp/#3062" class="Bound">f</a> <a id="3064" href="/lia/part5/Exp/#2717" class="Function Operator">⟧</a> <a id="3066" href="/lia/part5/Exp/#3066" class="Bound">ρ</a>
  <a id="3070" class="Keyword">with</a> <a id="3075" href="/lia/part5/Exp/#2410" class="Function Operator">A⟦</a> <a id="3078" href="/lia/part5/Exp/#3058" class="Bound">e</a> <a id="3080" href="/lia/part5/Exp/#2410" class="Function Operator">⟧</a> <a id="3082" href="/lia/part5/Exp/#3066" class="Bound">ρ</a> <a id="3084" href="/lia/part0/Naturals/#1135" class="Function Operator">≤?</a> <a id="3087" href="/lia/part5/Exp/#2410" class="Function Operator">A⟦</a> <a id="3090" href="/lia/part5/Exp/#3062" class="Bound">f</a> <a id="3092" href="/lia/part5/Exp/#2410" class="Function Operator">⟧</a> <a id="3094" href="/lia/part5/Exp/#3066" class="Bound">ρ</a>
<a id="3096" class="Symbol">...</a> <a id="3100" class="Symbol">|</a> <a id="3102" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="3106" class="Symbol">_</a> <a id="3108" class="Symbol">=</a> <a id="3110" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="3113" class="Symbol">...</a> <a id="3117" class="Symbol">|</a> <a id="3119" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="3122" class="Symbol">_</a> <a id="3124" class="Symbol">=</a> <a id="3126" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a></pre>

  <p><span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

</div>

<hr>

    </div>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

    <p class="p-name"> Last-modified: Jan  7 14:42:55 2021 </p>
  </article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/lia/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Logic in Agda</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Lorenzo Clemente</li>
          <li><a class="u-email" href="mailto:clementelorenzo@gmail.com">clementelorenzo@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/lclem"><svg class="svg-icon"><use xlink:href="/lia/assets/minima-social-icons.svg#github"></use></svg> <span class="username">lclem</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>

<!-- Parse the Latex divs with Katex
<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex, {displayMode: false});
  });
  
  $("script[type='math/tex; mode=display']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
  });
</script>
-->

<script type="text/javascript" src="/lia/assets/hidebox.js"></script>
</body>

</html>
