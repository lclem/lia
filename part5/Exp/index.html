<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arithmetic and Boolean expressions 🚧 | Logic in Agda</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Arithmetic and Boolean expressions 🚧" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<meta property="og:description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<link rel="canonical" href="/lia/part5/Exp/" />
<meta property="og:url" content="/lia/part5/Exp/" />
<meta property="og:site_name" content="Logic in Agda" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Arithmetic and Boolean expressions 🚧" />
<script type="application/ld+json">
{"url":"/lia/part5/Exp/","description":"Propositional and fist-order logic developed with the proof assistant Agda.","@type":"WebPage","headline":"Arithmetic and Boolean expressions 🚧","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/lia/assets/main.css">

  <!-- <link rel="stylesheet" href="/lia/assets/custom.css"> --><!-- Mathjax Support -->
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.js"></script>

<script type="text/x-thebe-config">
  {
    bootstrap: true,
    requestKernel: true,
    runAllCells: false,
    selector: "[data-executable]",
    predefinedOutput: false,
    codeMirrorConfig: {
        //theme: "idea",
        language: "agda",
        readOnly: false,
        lineNumbers: true,
        keyMap: "default",
//        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
    },
    kernelOptions: {
        name: "agda",
        kernelName: "agda",
        path: "src/",
        loadFromStore: true,
        persistent: false,
        // notebook server configuration; not needed with binder
        serverSettings: {
              baseUrl: "http://127.0.0.1:8888",
              token: "test-secret",
            },
    },
    binderOptions: {
      repo: "lclem/lia", // need to put here the actual github repo (if it is a fork)
      ref: "main",
      binderUrl: "https://mybinder.org",
      repoProvider: "github",
      savedSession: {
        enabled: true,
        maxAge: 86400, // the max age in seconds to consider re-using a session
        storagePrefix: "thebe-binder-lia-"
      },
    },
  }
</script>

<!-- <script type="text/javascript" src="https://unpkg.com/thebelab@latest"></script> -->

<!-- our own version of the thebe library: -->
<script type="text/javascript" src="/lia/thebe/lib/index.js"></script>

<!-- highlighting for Agda -->
<script src="/lia/codemirror-agda/lib/index.js"></script>

</head>
<body><header class="site-header" id="site-header">

    <div class="wrapper">

        <a class="site-title" href="/lia/">Logic in Agda</a>

        <nav class="site-nav">
            <!-- <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span> -->

            <div class="trigger">
                <a class="page-link" href="/lia/part0/index/">Part 0</a>
                <a class="page-link" href="/lia/part1/index/">Part 1</a>
                <a class="page-link" href="/lia/part2/index/">Part 2</a>
                <a class="page-link" href="/lia/part3/index/">Part 3</a>
                <a class="page-link" href="/lia/part4/index/">Part 4</a>
                <a class="page-link" href="/lia/part5/index/">Part 5</a>

                <span class="kernel-status">
                    <button class="kernel-status-button" onclick="kernel_status_clicked()" title="kernel status"></button>
                    <span id="kernel-messages" class="kernel-messages"></span>
                </span>

                <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;">
                    <!-- display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; -->
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                    <div>
                        <label for="username" style="color: white;">User:</label>
                        <input type="text" placeholder="github username" id="username" name="username">
                        <label for="password" style="color: white;">Password:</label>
                        <input type="password" placeholder="password" id="password" name="password">
                    </div>
                    <div>
                        <label for="loadFromStore" style="color: white;">Load code from browser store:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="loadFromStore" name="loadFromStore">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="baseUrl" style="color: white;">Base URL:</label>
                        <input type="text" placeholder="baseUrl" id="baseUrl" name="baseUrl" value="http://127.0.0.1:8888">
                        <label for="token" style="color: white;">Token:</label>
                        <input type="text" placeholder="token" id="token" name="token" value="test-secret">
                    </div>
                    <div>
                        <label for="useBinder" style="color: white;">Use binder:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="useBinder" name="useBinder">
                            <span class="slider round"></span>
                        </label>
                        <label for="savedSession" style="color: white;">Reuse session:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="savedSession" name="savedSession">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="repository" style="color: white;">Github repo:</label>
                        <input type="text" placeholder="repository" id="repository" name="repository" value="">

                        <label for="ref" style="color: white;">Branch:</label>
                        <input type="text" placeholder="ref" id="ref" name="ref" value="main">

                        <label for="binderUrl" style="color: white;">Binder URL:</label>                        
                        <input type="text" placeholder="binderUrl" id="binderUrl" name="binderUrl" value="https://mybinder.org">
                    </div>
                </div>

                <span class="control-container" id="control-container">
                    <svg class="progress-ring" id="progress-ring" width="30" height="30" title="exercise progress" onclick="kernel_status_clicked()">
                        <circle
                            id="progress-circle"
                            class="progress-ring__circle"
                            stroke="black"
                            stroke-width="2.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                        <circle
                            stroke="lightgray"
                            stroke-width="0.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                    </svg>
                    <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;"></div>
                    <span class="progress-text" id="progress-text" onclick="kernel_status_clicked()"> 0/0 </span>

                    <span id="controls" class="controls">
                        <svg version="1.1" id="run-all" class="run-all" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="15" height="15" viewBox="0 0 163.861 163.861" style="enable-background:new 0 0 163.861 163.861;"
                            xml:space="preserve">
                            <g>
                                <path d="M34.857,3.613C20.084-4.861,8.107,2.081,8.107,19.106v125.637c0,17.042,11.977,23.975,26.75,15.509L144.67,97.275
                                    c14.778-8.477,14.778-22.211,0-30.686L34.857,3.613z"/>
                            </g>
                        </svg>
                    </span>
                </span>
            </div>

            <style>
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 40px;
                    height: 20px;
                }

                /* Hide default HTML checkbox */
                .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }

                /* The slider */
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 2px;
                    /* right: 4px; */
                    bottom: 2px;
                    top: 2px;
                    background-color: white;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                input:checked + .slider {
                    background-color: #2196F3;
                }

                input:focus + .slider {
                    box-shadow: 0 0 1px #2196F3;
                }

                input:checked + .slider:before {
                    -webkit-transform: translateX(18px);
                    -ms-transform: translateX(18px);
                    transform: translateX(18px);
                }

                /* Rounded sliders */
                .slider.round {
                    border-radius: 30px;
                }

                .slider.round:before {
                border-radius: 50%;
                }

                .sidebar input[type=text] {
                    padding: 6px;
                    margin-top: 8px;
                    /* font-size: 17px; */
                    border: none;
                    /* width: 150px; */
                }

                .sidebar {
                    /* height: 100%; */
                    width: 0;
                    position: fixed;
                    z-index: 1000;
                    top: 0;
                    right: 20px;
                    background-color: rgba(17, 17, 17, 0.637);
                    /* overflow-x: hidden; */
                    transition: 0.5s;
                    padding-top: 60px;
                    display: none;
                    margin-top: 60px;
                }

                .sidebar .closebtn {
                    position: absolute;
                    color: white;
                    top: 0;
                    right: 10px;
                    font-size: 24px;
                    margin-left: 20px;
                }

                .progress-ring, .run-all {
                    vertical-align: middle;
                }

                .control-container {
                    transition: all .2s ease-in-out;
                }

                .controls {
                    display: none;
                    opacity: 0;
                    margin-right: 10px;
                    transition: all .5s ease-in-out;
                }

                .run-all:hover {
                    filter: brightness(135%);
                }

                .progress-ring__circle {
                    transition: 0.35s stroke-dashoffset;
                    transform: rotate(-90deg);
                    transform-origin: 50% 50%;
                    visibility: hidden;
                }

                .progress-text {
                    position: relative;
                    top: 0;
                    left: -25px;
                    font-size: 8px;
                    vertical-align: middle;
                    align-self: center;
                }

                .progress-text:hover, .progress-ring:hover, .progress-ring__circle:hover, .run-all {
                    cursor: pointer;
                }
            </style>

            <script>

                //  var storedUsername = localStorage.getItem("username");
                //  localStorage.setItem("username", storedUsername.value);
            
                function doStore(input, key) {

                    if(input.type == "checkbox") {
                        var checked = localStorage.getItem(key);

                        if (checked == "yes") {
                            localStorage.setItem(key, "no");
                        }
                        else {
                            localStorage.setItem(key, "yes");
                        }

                        console.info("checked: ", localStorage.getItem(key));
                    }
                    else {
                        console.info("value: ", input.value);
                        localStorage.setItem(key, input.value);
                    }
                }

                function persistInput(input) {
                    var key = "input-" + input.id;
                    var storedValue = localStorage.getItem(key);
                
                    console.info("Persisting input: ", input);
                
                    // if there is a stored value, use it
                    if (storedValue) {

                        if(input.type != "password") {
                            console.info("restoring value ", storedValue, " for ", input);
                        }

                        if(input.type == "checkbox") {
                            if(storedValue=="yes") {
                                input.setAttribute("checked", "");
                            }
                            else {
                                input.removeAttribute("checked");
                            }
                        }
                        else {
                            input.value = storedValue;
                        }
                    }
                    // if there is no stored value, store the current value
                    else {
                        doStore(input, key);
                    }

                    input.addEventListener('input', function () {
                        console.info("input changed: key = ", key, "; value = ", input);
                        doStore(input, key);
                    });
                    }
                
                    persistInput(document.getElementById("username"));
                    persistInput(document.getElementById("password"));

                    persistInput(document.getElementById("loadFromStore"));

                    persistInput(document.getElementById("baseUrl"));
                    persistInput(document.getElementById("token"));

                    persistInput(document.getElementById("useBinder"));
                    persistInput(document.getElementById("savedSession"));
                    persistInput(document.getElementById("repository"));
                    persistInput(document.getElementById("ref"));
                    persistInput(document.getElementById("binderUrl"));

                    // init
                    document.getElementById("connection_options").style.display = "none";

                    function kernel_status_clicked() {
                
                        console.info("Clicked kernel status");

                        document.getElementById("kernel-messages").style.display = "none";

                        document.getElementById("connection_options").style.width = "750px";
                        document.getElementById("connection_options").style.display = "block";
                        //document.getElementById("header").style.marginLeft = "250px";

                    }

                    function closeNav() {

                        document.getElementById("kernel-messages").style.display = "inline";

                        document.getElementById("connection_options").style.width = "0";
                        document.getElementById("connection_options").style.display = "none";
                        //document.getElementById("header").style.marginLeft= "0";
                    }

                var prevScrollpos = window.pageYOffset;
                var header = document.getElementById("site-header");
                var boxShadow = header.style.boxShadow;

                window.onscroll = function() {
                    var currentScrollPos = window.pageYOffset;
                    // detect scroll down
                    if (prevScrollpos > currentScrollPos) {
                        header.style.top = "0";
                        header.style.boxShadow = boxShadow;
                        prevScrollpos = currentScrollPos;
                    } else if (prevScrollpos <= currentScrollPos) {
                        header.style.top = "-55px";
                        header.style.boxShadow = "none"
                        prevScrollpos = currentScrollPos;
                    }
                }

            let control_container = document.getElementById("control-container");
            let controls = document.getElementById("controls");

            control_container.addEventListener("mouseenter", function(event) {
                controls.style.display = "inline";
//                controls.style.visibility = "visible";
                controls.style.opacity = 1;
                console.info("mouseenter");
            }, false);

            control_container.addEventListener("mouseleave", function(event) {
                // controls.style.visibility = "hidden";
                // controls.style.display = "none";
                controls.style.opacity = 0;
                console.info("mouseleave");
            }, false);

            </script>
            
        </nav>

    </div>

</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

    <header class="post-header">
        <h1 class="post-title">Arithmetic and Boolean expressions 🚧</h1>
    </header>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

  
    <div class="post-content">
        <h2>Contents</h2>    
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#arithmetic-expressions">Arithmetic expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#variables">Variables</a></li>
<li class="toc-entry toc-h2"><a href="#syntax-of-expressions">Syntax of expressions</a></li>
<li class="toc-entry toc-h2"><a href="#environments">Environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#boolean-expressions">Boolean expressions</a></li>
<li class="toc-entry toc-h1"><a href="#denotational-semantics">Denotational semantics</a></li>
<li class="toc-entry toc-h1"><a href="#lazy-semantics">Lazy semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#dynamic-binding">Dynamic binding</a></li>
<li class="toc-entry toc-h2"><a href="#static-binding">Static binding</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#free-variables">Free variables</a></li>
<li class="toc-entry toc-h1"><a href="#substitution">Substitution</a></li>
<li class="toc-entry toc-h1"><a href="#contextual-equivalence-and-full-abstraction">Contextual equivalence and full abstraction</a></li>
<li class="toc-entry toc-h1"><a href="#small-steps-operational-semantics">Small-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#global-environment">Global environment</a></li>
<li class="toc-entry toc-h2"><a href="#local-environments">Local environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#big-steps-operational-semantics">Big-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#evaluator-interpreter">Evaluator (interpreter)</a></li>
<li class="toc-entry toc-h2"><a href="#evaluation-is-deterministic">Evaluation is deterministic</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-the-semantics">Agreement of the semantics</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-numbers">Binary numbers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#lsd">LSD</a></li>
<li class="toc-entry toc-h2"><a href="#msd">MSD</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-lsd-and-msd">Agreement of LSD and MSD</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-expressions">Binary expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#syntax">Syntax</a></li>
<li class="toc-entry toc-h2"><a href="#denotational-semantics-1">Denotational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#small-steps-operational-semantics-1">Small-steps operational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#agreement">Agreement</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-first-proof">Strong normalisation (first proof)</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-second-proof">Strong normalisation (second proof)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#references">References</a></li>
<li class="toc-entry toc-h1"><a href="#solutions">Solutions</a></li>
</ul><pre class="Agda"><a id="60" class="Symbol">{-#</a> <a id="64" class="Keyword">OPTIONS</a> <a id="72" class="Pragma">--allow-unsolved-metas</a> <a id="95" class="Symbol">#-}</a>
<a id="99" class="Keyword">module</a> <a id="106" href="/lia/part5/Exp/" class="Module">part5.Exp</a> <a id="116" class="Keyword">where</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="/lia/part0/index/" class="Module">part0.index</a> <a id="146" class="Keyword">hiding</a> <a id="153" class="Symbol">(</a><a id="154" href="/lia/part0/Naturals/#7367" class="Datatype">AExp</a><a id="158" class="Symbol">;</a> <a id="160" href="/lia/part0/Naturals/#7478" class="Function Operator">A⟦_⟧</a><a id="164" class="Symbol">;</a> <a id="166" href="/lia/part0/List/#23605" class="Function Operator">_≈_</a><a id="169" class="Symbol">)</a> <a id="171" class="Keyword">renaming</a> <a id="180" class="Symbol">(</a><a id="181" href="/lia/part0/Naturals/#266" class="Primitive Operator">_+_</a> <a id="185" class="Symbol">to</a> <a id="Nat._+_"></a><a id="188" href="/lia/part5/Exp/#188" class="Primitive Operator">_+ℕ_</a><a id="192" class="Symbol">;</a> <a id="194" href="/lia/part0/Naturals/#288" class="Primitive Operator">_*_</a> <a id="198" class="Symbol">to</a> <a id="Nat._*_"></a><a id="201" href="/lia/part5/Exp/#201" class="Primitive Operator">_·ℕ_</a><a id="205" class="Symbol">;</a> <a id="207" href="/lia/part0/Naturals/#798" class="Datatype Operator">_≤_</a> <a id="211" class="Symbol">to</a> <a id="_≤_"></a><a id="214" href="/lia/part5/Exp/#214" class="Datatype Operator">_≤ℕ_</a><a id="218" class="Symbol">)</a> <a id="220" class="Keyword">public</a></pre>

<h1 id="arithmetic-expressions">
<a class="anchor" href="#arithmetic-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arithmetic expressions</h1>

<p>We develop an eager denotational and operational semantics for a simple
language of arithmetic expressions, and we prove that they agree.</p>

<h2 id="variables">
<a class="anchor" href="#variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variables</h2>

<p>We represent <em>variable names</em> as natural Number. Any countable domain
with decidable equality (such as strings) would work here</p>

<pre class="Agda"><a id="VarName"></a><a id="544" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="552" class="Symbol">=</a> <a id="554" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="x₀"></a><a id="557" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="x₁"></a><a id="560" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="563" class="Symbol">:</a> <a id="565" href="/lia/part5/Exp/#544" class="Function">VarName</a>
<a id="573" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="576" class="Symbol">=</a> <a id="578" class="Number">0</a>
<a id="580" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="583" class="Symbol">=</a> <a id="585" class="Number">1</a>

<a id="588" class="Keyword">private</a> <a id="596" class="Keyword">variable</a> <a id="605" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="607" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="609" href="/lia/part5/Exp/#609" class="Generalizable">z</a> <a id="611" class="Symbol">:</a> <a id="613" href="/lia/part5/Exp/#544" class="Function">VarName</a></pre>

<h2 id="syntax-of-expressions">
<a class="anchor" href="#syntax-of-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax of expressions</h2>

<p>We define a minimalistic language of arithmetic expressions comprising
variables and a let assignment construct.</p>

<pre class="Agda"><a id="770" class="Keyword">data</a> <a id="AExp"></a><a id="775" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="780" class="Symbol">:</a> <a id="782" class="PrimitiveType">Set</a> <a id="786" class="Keyword">where</a>
  <a id="AExp.Num"></a><a id="794" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="798" class="Symbol">:</a> <a id="800" class="Symbol">(</a><a id="801" href="/lia/part5/Exp/#801" class="Bound">n</a> <a id="803" class="Symbol">:</a> <a id="805" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="806" class="Symbol">)</a> <a id="808" class="Symbol">→</a> <a id="810" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Var"></a><a id="817" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="821" class="Symbol">:</a> <a id="823" class="Symbol">(</a><a id="824" href="/lia/part5/Exp/#824" class="Bound">x</a> <a id="826" class="Symbol">:</a> <a id="828" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="835" class="Symbol">)</a> <a id="837" class="Symbol">→</a> <a id="839" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Add"></a><a id="846" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="850" class="Symbol">:</a> <a id="852" class="Symbol">(</a><a id="853" href="/lia/part5/Exp/#853" class="Bound">e</a> <a id="855" href="/lia/part5/Exp/#855" class="Bound">f</a> <a id="857" class="Symbol">:</a> <a id="859" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="863" class="Symbol">)</a> <a id="865" class="Symbol">→</a> <a id="867" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Mul"></a><a id="874" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="878" class="Symbol">:</a> <a id="880" class="Symbol">(</a><a id="881" href="/lia/part5/Exp/#881" class="Bound">e</a> <a id="883" href="/lia/part5/Exp/#883" class="Bound">f</a> <a id="885" class="Symbol">:</a> <a id="887" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="891" class="Symbol">)</a> <a id="893" class="Symbol">→</a> <a id="895" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Let"></a><a id="902" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="906" class="Symbol">:</a> <a id="908" class="Symbol">(</a><a id="909" href="/lia/part5/Exp/#909" class="Bound">x</a> <a id="911" class="Symbol">:</a> <a id="913" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="920" class="Symbol">)</a> <a id="922" class="Symbol">(</a><a id="923" href="/lia/part5/Exp/#923" class="Bound">e</a> <a id="925" href="/lia/part5/Exp/#925" class="Bound">f</a> <a id="927" class="Symbol">:</a> <a id="929" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="933" class="Symbol">)</a> <a id="935" class="Symbol">→</a> <a id="937" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="943" class="Keyword">private</a>
  <a id="953" class="Keyword">variable</a>
    <a id="966" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="968" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="971" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="973" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="976" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="978" class="Symbol">:</a> <a id="980" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
    <a id="989" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="991" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="993" class="Symbol">:</a> <a id="995" href="/lia/part0/Naturals/#301" class="Function">ℕ</a></pre>

<p>For example, the following expression adds one to a variable (called
10). This is pure syntax so far, no calculation is being performed.</p>

<pre class="Agda"><a id="add-one"></a><a id="1144" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="1152" class="Symbol">:</a> <a id="1154" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
<a id="1159" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="1167" class="Symbol">=</a> <a id="1169" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="1173" class="Symbol">(</a><a id="1174" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="1178" class="Number">10</a><a id="1180" class="Symbol">)</a> <a id="1182" class="Symbol">(</a><a id="1183" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="1187" class="Number">1</a><a id="1188" class="Symbol">)</a></pre>
<pre class="Agda"><a id="1199" class="Keyword">pattern</a> <a id="$_"></a><a id="1207" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$_</a> <a id="1210" href="/lia/part5/Exp/#1218" class="Bound">n</a> <a id="1212" class="Symbol">=</a> <a id="1214" class="InductiveConstructor">Num</a> <a id="1218" href="/lia/part5/Exp/#1218" class="Bound">n</a>
<a id="1220" class="Keyword">pattern</a> <a id="`_"></a><a id="1228" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`_</a> <a id="1231" href="/lia/part5/Exp/#1239" class="Bound">x</a> <a id="1233" class="Symbol">=</a> <a id="1235" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="1239" href="/lia/part5/Exp/#1239" class="Bound">x</a>
<a id="1241" class="Keyword">pattern</a> <a id="_+_"></a><a id="1249" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">_+_</a> <a id="1253" href="/lia/part5/Exp/#1263" class="Bound">x</a> <a id="1255" href="/lia/part5/Exp/#1265" class="Bound">y</a> <a id="1257" class="Symbol">=</a> <a id="1259" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="1263" href="/lia/part5/Exp/#1263" class="Bound">x</a> <a id="1265" href="/lia/part5/Exp/#1265" class="Bound">y</a>
<a id="1267" class="Keyword">pattern</a> <a id="_·_"></a><a id="1275" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">_·_</a> <a id="1279" href="/lia/part5/Exp/#1289" class="Bound">x</a> <a id="1281" href="/lia/part5/Exp/#1291" class="Bound">y</a> <a id="1283" class="Symbol">=</a> <a id="1285" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="1289" href="/lia/part5/Exp/#1289" class="Bound">x</a> <a id="1291" href="/lia/part5/Exp/#1291" class="Bound">y</a>
<a id="1293" class="Keyword">pattern</a> <a id="Let_≔_In_"></a><a id="1301" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let_≔_In_</a> <a id="1311" href="/lia/part5/Exp/#1323" class="Bound">x</a> <a id="1313" href="/lia/part5/Exp/#1325" class="Bound">e</a> <a id="1315" href="/lia/part5/Exp/#1327" class="Bound">f</a> <a id="1317" class="Symbol">=</a> <a id="1319" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="1323" href="/lia/part5/Exp/#1323" class="Bound">x</a> <a id="1325" href="/lia/part5/Exp/#1325" class="Bound">e</a> <a id="1327" href="/lia/part5/Exp/#1327" class="Bound">f</a>

<a id="1330" class="Keyword">infix</a> <a id="1336" class="Number">50</a> <a id="1339" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$_</a> <a id="1342" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`_</a>
<a id="1345" class="Keyword">infixr</a> <a id="1352" class="Number">30</a> <a id="1355" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">_·_</a>
<a id="1359" class="Keyword">infixl</a> <a id="1366" class="Number">25</a> <a id="1369" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">_+_</a>
<a id="1373" class="Keyword">infixr</a> <a id="1380" class="Number">20</a> <a id="1383" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let_≔_In_</a></pre>
<pre class="Agda"><a id="add-one′"></a><a id="1402" href="/lia/part5/Exp/#1402" class="Function">add-one′</a> <a id="1411" class="Symbol">:</a> <a id="1413" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
<a id="1418" href="/lia/part5/Exp/#1402" class="Function">add-one′</a> <a id="1427" class="Symbol">=</a> <a id="1429" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="1431" class="Number">10</a> <a id="1434" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="1436" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="1438" class="Number">1</a></pre>

<h2 id="environments">
<a class="anchor" href="#environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environments</h2>

<p>In order to represent the value of free variables, we use environments.</p>

<pre class="Agda"><a id="Env"></a><a id="1539" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="1543" class="Symbol">=</a> <a id="1545" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="1553" class="Symbol">→</a> <a id="1555" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="1558" class="Keyword">private</a> <a id="1566" class="Keyword">variable</a> <a id="1575" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="1577" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="1580" class="Symbol">:</a> <a id="1582" href="/lia/part5/Exp/#1539" class="Function">Env</a></pre>

<p>The following environment assigns value <code class="language-plaintext highlighter-rouge">200</code> to the variable named
<code class="language-plaintext highlighter-rouge">10</code>, and value <code class="language-plaintext highlighter-rouge">40</code> to every other variable.</p>

<pre class="Agda"><a id="ϱ₀"></a><a id="1710" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="1713" class="Symbol">:</a> <a id="1715" href="/lia/part5/Exp/#1539" class="Function">Env</a>
<a id="1719" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="1722" class="Number">10</a> <a id="1725" class="Symbol">=</a> <a id="1727" class="Number">200</a>
<a id="1731" href="/lia/part5/Exp/#1710" class="CatchallClause Function">ϱ₀</a><a id="1733" class="CatchallClause"> </a><a id="1734" class="CatchallClause Symbol">_</a> <a id="1736" class="Symbol">=</a> <a id="1738" class="Number">40</a></pre>

<h1 id="boolean-expressions">
<a class="anchor" href="#boolean-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Boolean expressions</h1>

<p>On top of arithmetic expressions we can build a simple language of
Boolean expressions. An element in <code class="language-plaintext highlighter-rouge">BExp</code> is a boolean combination of
atomic expressions of the form <code class="language-plaintext highlighter-rouge">Leq e f</code>, where <code class="language-plaintext highlighter-rouge">e</code> and <code class="language-plaintext highlighter-rouge">f</code> are
arithmetic expressions.</p>

<pre class="Agda"><a id="1999" class="Keyword">data</a> <a id="BExp"></a><a id="2004" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2009" class="Symbol">:</a> <a id="2011" class="PrimitiveType">Set</a> <a id="2015" class="Keyword">where</a>
  <a id="BExp.tt"></a><a id="2023" href="/lia/part5/Exp/#2023" class="InductiveConstructor">tt</a> <a id="2026" class="Symbol">:</a> <a id="2028" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.ff"></a><a id="2035" href="/lia/part5/Exp/#2035" class="InductiveConstructor">ff</a> <a id="2038" class="Symbol">:</a> <a id="2040" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Not"></a><a id="2047" href="/lia/part5/Exp/#2047" class="InductiveConstructor">Not</a> <a id="2051" class="Symbol">:</a> <a id="2053" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2058" class="Symbol">→</a> <a id="2060" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Or"></a><a id="2067" href="/lia/part5/Exp/#2067" class="InductiveConstructor">Or</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2077" class="Symbol">→</a> <a id="2079" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2084" class="Symbol">→</a> <a id="2086" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.And"></a><a id="2093" href="/lia/part5/Exp/#2093" class="InductiveConstructor">And</a> <a id="2097" class="Symbol">:</a> <a id="2099" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2104" class="Symbol">→</a> <a id="2106" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2111" class="Symbol">→</a> <a id="2113" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Leq"></a><a id="2120" href="/lia/part5/Exp/#2120" class="InductiveConstructor">Leq</a> <a id="2124" class="Symbol">:</a> <a id="2126" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2131" class="Symbol">→</a> <a id="2133" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2138" class="Symbol">→</a> <a id="2140" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>

<a id="2146" class="Keyword">pattern</a> <a id="_∨_"></a><a id="2154" href="/lia/part5/Exp/#2154" class="InductiveConstructor Operator">_∨_</a> <a id="2158" href="/lia/part5/Exp/#2169" class="Bound">b₀</a> <a id="2161" href="/lia/part5/Exp/#2172" class="Bound">b₁</a> <a id="2164" class="Symbol">=</a> <a id="2166" href="/lia/part5/Exp/#2067" class="InductiveConstructor">Or</a> <a id="2169" href="/lia/part5/Exp/#2169" class="Bound">b₀</a> <a id="2172" href="/lia/part5/Exp/#2172" class="Bound">b₁</a>
<a id="2175" class="Keyword">pattern</a> <a id="_∧_"></a><a id="2183" href="/lia/part5/Exp/#2183" class="InductiveConstructor Operator">_∧_</a> <a id="2187" href="/lia/part5/Exp/#2199" class="Bound">b₀</a> <a id="2190" href="/lia/part5/Exp/#2202" class="Bound">b₁</a> <a id="2193" class="Symbol">=</a> <a id="2195" href="/lia/part5/Exp/#2093" class="InductiveConstructor">And</a> <a id="2199" href="/lia/part5/Exp/#2199" class="Bound">b₀</a> <a id="2202" href="/lia/part5/Exp/#2202" class="Bound">b₁</a>
<a id="2205" class="Keyword">pattern</a> <a id="¬_"></a><a id="2213" href="/lia/part5/Exp/#2213" class="InductiveConstructor Operator">¬_</a> <a id="2216" href="/lia/part5/Exp/#2224" class="Bound">b</a> <a id="2218" class="Symbol">=</a> <a id="2220" href="/lia/part5/Exp/#2047" class="InductiveConstructor">Not</a> <a id="2224" href="/lia/part5/Exp/#2224" class="Bound">b</a>
<a id="2226" class="Keyword">pattern</a> <a id="_≤_"></a><a id="2234" href="/lia/part5/Exp/#2234" class="InductiveConstructor Operator">_≤_</a> <a id="2238" href="/lia/part5/Exp/#2248" class="Bound">e</a> <a id="2240" href="/lia/part5/Exp/#2250" class="Bound">f</a> <a id="2242" class="Symbol">=</a> <a id="2244" href="/lia/part5/Exp/#2120" class="InductiveConstructor">Leq</a> <a id="2248" href="/lia/part5/Exp/#2248" class="Bound">e</a> <a id="2250" href="/lia/part5/Exp/#2250" class="Bound">f</a></pre>

<h1 id="denotational-semantics">
<a class="anchor" href="#denotational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h1>

<pre class="Agda"><a id="2287" class="Keyword">infix</a> <a id="2293" class="Number">15</a> <a id="2296" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a> <a id="2301" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦_⟧_</a>
<a id="2307" class="Keyword">private</a> <a id="⟦_⟧_"></a><a id="2315" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a> <a id="2320" class="Symbol">:</a> <a id="2322" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2327" class="Symbol">→</a> <a id="2329" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="2333" class="Symbol">→</a> <a id="2335" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="2337" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2339" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="2341" href="/lia/part5/Exp/#2341" class="Bound">n</a> <a id="2343" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2345" href="/lia/part5/Exp/#2345" class="Bound">ϱ</a> <a id="2347" class="Symbol">=</a> <a id="2349" href="/lia/part5/Exp/#2341" class="Bound">n</a>
<a id="2351" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2353" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="2355" href="/lia/part5/Exp/#2355" class="Bound">x</a> <a id="2357" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2359" href="/lia/part5/Exp/#2359" class="Bound">ϱ</a> <a id="2361" class="Symbol">=</a> <a id="2363" href="/lia/part5/Exp/#2359" class="Bound">ϱ</a> <a id="2365" href="/lia/part5/Exp/#2355" class="Bound">x</a>
<a id="2367" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2369" href="/lia/part5/Exp/#2369" class="Bound">e</a> <a id="2371" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="2373" href="/lia/part5/Exp/#2373" class="Bound">f</a> <a id="2375" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2377" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a> <a id="2379" class="Symbol">=</a> <a id="2381" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2383" href="/lia/part5/Exp/#2369" class="Bound">e</a> <a id="2385" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2387" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a> <a id="2389" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="2392" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2394" href="/lia/part5/Exp/#2373" class="Bound">f</a> <a id="2396" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2398" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a>
<a id="2400" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2402" href="/lia/part5/Exp/#2402" class="Bound">e</a> <a id="2404" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="2406" href="/lia/part5/Exp/#2406" class="Bound">f</a> <a id="2408" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2410" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a> <a id="2412" class="Symbol">=</a> <a id="2414" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2416" href="/lia/part5/Exp/#2402" class="Bound">e</a> <a id="2418" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2420" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a> <a id="2422" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="2425" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2427" href="/lia/part5/Exp/#2406" class="Bound">f</a> <a id="2429" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2431" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a>
<a id="2433" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2435" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="2439" href="/lia/part5/Exp/#2439" class="Bound">x</a> <a id="2441" href="/lia/part5/Exp/#2441" class="Bound">e</a> <a id="2443" href="/lia/part5/Exp/#2443" class="Bound">f</a> <a id="2445" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2447" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2449" class="Symbol">=</a> <a id="2451" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2453" href="/lia/part5/Exp/#2443" class="Bound">f</a> <a id="2455" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2457" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2459" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="2461" href="/lia/part5/Exp/#2439" class="Bound">x</a> <a id="2463" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="2465" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2467" href="/lia/part5/Exp/#2441" class="Bound">e</a> <a id="2469" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2471" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2473" href="/lia/part0/Functions/#570" class="Function Operator">]</a>

<a id="A⟦_⟧_"></a><a id="2476" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦_⟧_</a> <a id="2482" class="Symbol">=</a> <a id="2484" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a></pre>

<p>With our denotational semantics for expressions we can check (by
computation) the value of concrete expressions.</p>

<pre class="Agda"><a id="2612" href="/lia/part5/Exp/#2612" class="Function">_</a> <a id="2614" class="Symbol">:</a> <a id="2616" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2618" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="2626" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2628" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="2631" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2633" class="Number">201</a>
<a id="2637" class="Symbol">_</a> <a id="2639" class="Symbol">=</a> <a id="2641" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<div class="exercisebox">

  <dl>
    <dt><span id="exercise:BExp-semantics" class="pandoc-numbering-text exercise"><strong>Exercise 1</strong></span></dt>
    <dd>Write the denotational semantics of Boolean expressions.</dd>
  </dl>

  <pre class="Agda"><a id="2767" class="Keyword">infix</a> <a id="2773" class="Number">101</a> <a id="2777" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦_⟧_</a>
<a id="B⟦_⟧_"></a><a id="2783" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦_⟧_</a> <a id="2789" class="Symbol">:</a> <a id="2791" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2796" class="Symbol">→</a> <a id="2798" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="2802" class="Symbol">→</a> <a id="2804" href="/lia/part0/Booleans/#259" class="Datatype">𝔹</a></pre>
  <pre data-executable="true" data-language="agda" id="part5.Exp.BExp-semantics">

module part5.Exp.BExp-semantics where
open import TypeOf
open import part5.Exp renaming (B⟦_⟧_ to B⟦_⟧_-orig)


B⟦_⟧_ : typeOf B⟦_⟧_-orig

-- BEGIN SOLUTION
B⟦_⟧_ = ?</pre>
  <pre data-executable="true" data-language="agda" id="part5.Exp.BExp-semantics2">

module part5.Exp.BExp-semantics2 where
open import TypeOf
open import part5.Exp renaming (B⟦_⟧_ to B⟦_⟧_-orig)


B⟦_⟧_ : typeOf B⟦_⟧_-orig

-- BEGIN SOLUTION
B⟦_⟧_ = ?</pre>

  <p><em>Hint:</em> In the <code class="language-plaintext highlighter-rouge">Leq</code> case you will need <code class="language-plaintext highlighter-rouge">_≤?_</code>. <span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

  <!--
::::::: {.solutionlink}
[solution](#exercise:BExp-semantics-solution)
:::::::
-->

</div>

<h1 id="lazy-semantics">
<a class="anchor" href="#lazy-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lazy semantics</h1>

<h2 id="dynamic-binding">
<a class="anchor" href="#dynamic-binding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dynamic binding</h2>

<pre class="Agda"><a id="Envˡ"></a><a id="3297" href="/lia/part5/Exp/#3297" class="Function">Envˡ</a> <a id="3302" class="Symbol">=</a> <a id="3304" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3312" class="Symbol">→</a> <a id="3314" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="ϱ₁"></a><a id="3320" href="/lia/part5/Exp/#3320" class="Function">ϱ₁</a> <a id="3323" class="Symbol">:</a> <a id="3325" href="/lia/part5/Exp/#3297" class="Function">Envˡ</a>
<a id="3330" href="/lia/part5/Exp/#3320" class="Function">ϱ₁</a> <a id="3333" class="Symbol">_</a> <a id="3335" class="Symbol">=</a> <a id="3337" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3339" class="Number">0</a>

<a id="3342" class="Keyword">infix</a> <a id="3348" class="Number">15</a> <a id="3351" href="/lia/part5/Exp/#3378" class="Function Operator">⟦_⟧ˡ_</a>

<a id="3358" class="Symbol">{-#</a> <a id="3362" class="Keyword">TERMINATING</a> <a id="3374" class="Symbol">#-}</a>
<a id="⟦_⟧ˡ_"></a><a id="3378" href="/lia/part5/Exp/#3378" class="Function Operator">⟦_⟧ˡ_</a> <a id="3384" class="Symbol">:</a> <a id="3386" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="3391" class="Symbol">→</a> <a id="3393" href="/lia/part5/Exp/#3297" class="Function">Envˡ</a> <a id="3398" class="Symbol">→</a> <a id="3400" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="3402" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3404" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3406" href="/lia/part5/Exp/#3406" class="Bound">n</a> <a id="3408" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3411" href="/lia/part5/Exp/#3411" class="Bound">ϱ</a> <a id="3413" class="Symbol">=</a> <a id="3415" href="/lia/part5/Exp/#3406" class="Bound">n</a>
<a id="3417" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3419" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3421" href="/lia/part5/Exp/#3421" class="Bound">x</a> <a id="3423" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3426" href="/lia/part5/Exp/#3426" class="Bound">ϱ</a> <a id="3428" class="Symbol">=</a> <a id="3430" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3432" href="/lia/part5/Exp/#3426" class="Bound">ϱ</a> <a id="3434" href="/lia/part5/Exp/#3421" class="Bound">x</a> <a id="3436" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3439" href="/lia/part5/Exp/#3426" class="Bound">ϱ</a> <a id="3441" class="Comment">-- termination issue here</a>
<a id="3467" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3469" href="/lia/part5/Exp/#3469" class="Bound">e</a> <a id="3471" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="3473" href="/lia/part5/Exp/#3473" class="Bound">f</a> <a id="3475" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3478" href="/lia/part5/Exp/#3478" class="Bound">ϱ</a> <a id="3480" class="Symbol">=</a> <a id="3482" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3484" href="/lia/part5/Exp/#3469" class="Bound">e</a> <a id="3486" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3489" href="/lia/part5/Exp/#3478" class="Bound">ϱ</a> <a id="3491" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="3494" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3496" href="/lia/part5/Exp/#3473" class="Bound">f</a> <a id="3498" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3501" href="/lia/part5/Exp/#3478" class="Bound">ϱ</a>
<a id="3503" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3505" href="/lia/part5/Exp/#3505" class="Bound">e</a> <a id="3507" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="3509" href="/lia/part5/Exp/#3509" class="Bound">f</a> <a id="3511" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3514" href="/lia/part5/Exp/#3514" class="Bound">ϱ</a> <a id="3516" class="Symbol">=</a> <a id="3518" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3520" href="/lia/part5/Exp/#3505" class="Bound">e</a> <a id="3522" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3525" href="/lia/part5/Exp/#3514" class="Bound">ϱ</a> <a id="3527" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="3530" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3532" href="/lia/part5/Exp/#3509" class="Bound">f</a> <a id="3534" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3537" href="/lia/part5/Exp/#3514" class="Bound">ϱ</a>
<a id="3539" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3541" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="3545" href="/lia/part5/Exp/#3545" class="Bound">x</a> <a id="3547" href="/lia/part5/Exp/#3547" class="Bound">e</a> <a id="3549" href="/lia/part5/Exp/#3549" class="Bound">f</a> <a id="3551" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3554" href="/lia/part5/Exp/#3554" class="Bound">ϱ</a> <a id="3556" class="Symbol">=</a> <a id="3558" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3560" href="/lia/part5/Exp/#3549" class="Bound">f</a> <a id="3562" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3565" href="/lia/part5/Exp/#3554" class="Bound">ϱ</a> <a id="3567" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="3569" href="/lia/part5/Exp/#3545" class="Bound">x</a> <a id="3571" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="3573" href="/lia/part5/Exp/#3547" class="Bound">e</a> <a id="3575" href="/lia/part0/Functions/#570" class="Function Operator">]</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="3596" href="/lia/part5/Exp/#3596" class="Function">_</a> <a id="3598" class="Symbol">:</a> <a id="3600" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3602" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="3606" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3609" class="Symbol">(</a><a id="3610" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3612" class="Number">2</a> <a id="3614" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="3616" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3618" class="Number">3</a><a id="3619" class="Symbol">)</a> <a id="3621" class="Symbol">(</a><a id="3622" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3624" class="Number">3</a> <a id="3626" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="3628" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3630" href="/lia/part5/Exp/#557" class="Function">x₀</a><a id="3632" class="Symbol">)</a> <a id="3634" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3637" href="/lia/part5/Exp/#3320" class="Function">ϱ₁</a> <a id="3640" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3642" class="Number">15</a>
<a id="3645" class="Symbol">_</a>  <a id="3648" class="Symbol">=</a> <a id="3650" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Notice how the meaning of free variables dynamically depends on the
environment active when they are <em>used</em>:</p>

<pre class="Agda"><a id="3774" href="/lia/part5/Exp/#3774" class="Function">_</a> <a id="3776" class="Symbol">:</a> <a id="3778" href="/lia/part5/Exp/#3378" class="Function Operator">⟦</a> <a id="3780" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3784" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3787" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3789" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3791" class="Number">1</a> <a id="3793" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3796" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3800" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3803" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3805" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3807" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3810" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3813" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3817" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3820" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3822" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3824" class="Number">2</a> <a id="3826" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3829" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3831" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3834" href="/lia/part5/Exp/#3378" class="Function Operator">⟧ˡ</a> <a id="3837" href="/lia/part5/Exp/#3320" class="Function">ϱ₁</a> <a id="3840" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3842" class="Number">2</a>
<a id="3844" class="Symbol">_</a>  <a id="3847" class="Symbol">=</a> <a id="3849" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="static-binding">
<a class="anchor" href="#static-binding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static binding</h2>

<p>We need coinductively-defined environments.</p>

<pre class="Agda"><a id="3927" class="Comment">-- Envˡˢ = VarName → AExp × Envˡˢ</a></pre>
<pre class="Agda"><a id="3970" class="Keyword">record</a> <a id="Envˡˢ"></a><a id="3977" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a> <a id="3983" class="Symbol">:</a> <a id="3985" class="PrimitiveType">Set</a> <a id="3989" class="Keyword">where</a>
  <a id="3997" class="Keyword">coinductive</a>
  <a id="4011" class="Keyword">field</a>
    <a id="Envˡˢ.env"></a><a id="4021" href="/lia/part5/Exp/#4021" class="Field">env</a> <a id="4025" class="Symbol">:</a> <a id="4027" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="4035" class="Symbol">→</a> <a id="4037" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4042" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="4044" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a>

<a id="4051" class="Keyword">open</a> <a id="4056" href="/lia/part5/Exp/#3977" class="Module">Envˡˢ</a>

<a id="_[[_↦_,_]]"></a><a id="4063" href="/lia/part5/Exp/#4063" class="Function Operator">_[[_↦_,_]]</a> <a id="4074" class="Symbol">:</a> <a id="4076" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a> <a id="4082" class="Symbol">→</a> <a id="4084" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="4092" class="Symbol">→</a> <a id="4094" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4099" class="Symbol">→</a> <a id="4101" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a> <a id="4107" class="Symbol">→</a> <a id="4109" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a>
<a id="4115" href="/lia/part5/Exp/#4021" class="Field">env</a> <a id="4119" class="Symbol">(</a><a id="4120" href="/lia/part5/Exp/#4120" class="Bound">ϱ</a> <a id="4122" href="/lia/part5/Exp/#4063" class="Function Operator">[[</a> <a id="4125" href="/lia/part5/Exp/#4125" class="Bound">x</a> <a id="4127" href="/lia/part5/Exp/#4063" class="Function Operator">↦</a> <a id="4129" href="/lia/part5/Exp/#4129" class="Bound">e</a> <a id="4131" href="/lia/part5/Exp/#4063" class="Function Operator">,</a> <a id="4133" href="/lia/part5/Exp/#4133" class="Bound">ϱ′</a> <a id="4136" href="/lia/part5/Exp/#4063" class="Function Operator">]]</a><a id="4138" class="Symbol">)</a> <a id="4140" class="Symbol">=</a> <a id="4142" href="/lia/part5/Exp/#4021" class="Field">env</a> <a id="4146" href="/lia/part5/Exp/#4120" class="Bound">ϱ</a> <a id="4148" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="4150" href="/lia/part5/Exp/#4125" class="Bound">x</a> <a id="4152" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="4154" href="/lia/part5/Exp/#4129" class="Bound">e</a> <a id="4156" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4158" href="/lia/part5/Exp/#4133" class="Bound">ϱ′</a> <a id="4161" href="/lia/part0/Functions/#570" class="Function Operator">]</a></pre>
<pre class="Agda"><a id="ϱ₂"></a><a id="4172" href="/lia/part5/Exp/#4172" class="Function">ϱ₂</a> <a id="4175" class="Symbol">:</a> <a id="4177" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a>
<a id="4183" href="/lia/part5/Exp/#4021" class="Field">env</a> <a id="4187" href="/lia/part5/Exp/#4172" class="Function">ϱ₂</a> <a id="4190" class="Symbol">_</a> <a id="4192" class="Symbol">=</a> <a id="4194" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4196" class="Number">0</a> <a id="4198" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4200" href="/lia/part5/Exp/#4172" class="Function">ϱ₂</a>

<a id="4204" class="Keyword">infix</a> <a id="4210" class="Number">15</a> <a id="4213" href="/lia/part5/Exp/#4241" class="Function Operator">⟦_⟧ˡˢ_</a>

<a id="4221" class="Symbol">{-#</a> <a id="4225" class="Keyword">TERMINATING</a> <a id="4237" class="Symbol">#-}</a>
<a id="⟦_⟧ˡˢ_"></a><a id="4241" href="/lia/part5/Exp/#4241" class="Function Operator">⟦_⟧ˡˢ_</a> <a id="4248" class="Symbol">:</a> <a id="4250" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4255" class="Symbol">→</a> <a id="4257" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a> <a id="4263" class="Symbol">→</a> <a id="4265" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="4267" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4269" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4271" href="/lia/part5/Exp/#4271" class="Bound">n</a> <a id="4273" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4277" href="/lia/part5/Exp/#4277" class="Bound">ϱ</a> <a id="4279" class="Symbol">=</a> <a id="4281" href="/lia/part5/Exp/#4271" class="Bound">n</a>
<a id="4283" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4285" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4287" href="/lia/part5/Exp/#4287" class="Bound">x</a> <a id="4289" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4293" href="/lia/part5/Exp/#4293" class="Bound">ϱ</a> <a id="4295" class="Symbol">=</a> <a id="4297" class="Keyword">let</a> <a id="4301" href="/lia/part5/Exp/#4301" class="Bound">e</a> <a id="4303" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4305" href="/lia/part5/Exp/#4305" class="Bound">ϱ′</a> <a id="4308" class="Symbol">=</a> <a id="4310" href="/lia/part5/Exp/#4021" class="Field">env</a> <a id="4314" href="/lia/part5/Exp/#4293" class="Bound">ϱ</a> <a id="4316" href="/lia/part5/Exp/#4287" class="Bound">x</a> <a id="4318" class="Keyword">in</a> <a id="4321" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4323" href="/lia/part5/Exp/#4301" class="Bound">e</a> <a id="4325" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4329" href="/lia/part5/Exp/#4305" class="Bound">ϱ′</a> <a id="4332" class="Comment">-- termination issue</a>
<a id="4353" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4355" href="/lia/part5/Exp/#4355" class="Bound">e</a> <a id="4357" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="4359" href="/lia/part5/Exp/#4359" class="Bound">f</a> <a id="4361" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4365" href="/lia/part5/Exp/#4365" class="Bound">ϱ</a> <a id="4367" class="Symbol">=</a> <a id="4369" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4371" href="/lia/part5/Exp/#4355" class="Bound">e</a> <a id="4373" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4377" href="/lia/part5/Exp/#4365" class="Bound">ϱ</a> <a id="4379" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="4382" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4384" href="/lia/part5/Exp/#4359" class="Bound">f</a> <a id="4386" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4390" href="/lia/part5/Exp/#4365" class="Bound">ϱ</a>
<a id="4392" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4394" href="/lia/part5/Exp/#4394" class="Bound">e</a> <a id="4396" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="4398" href="/lia/part5/Exp/#4398" class="Bound">f</a> <a id="4400" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4404" href="/lia/part5/Exp/#4404" class="Bound">ϱ</a> <a id="4406" class="Symbol">=</a> <a id="4408" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4410" href="/lia/part5/Exp/#4394" class="Bound">e</a> <a id="4412" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4416" href="/lia/part5/Exp/#4404" class="Bound">ϱ</a> <a id="4418" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="4421" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4423" href="/lia/part5/Exp/#4398" class="Bound">f</a> <a id="4425" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4429" href="/lia/part5/Exp/#4404" class="Bound">ϱ</a>
<a id="4431" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4433" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="4437" href="/lia/part5/Exp/#4437" class="Bound">x</a> <a id="4439" href="/lia/part5/Exp/#4439" class="Bound">e</a> <a id="4441" href="/lia/part5/Exp/#4441" class="Bound">f</a> <a id="4443" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4447" href="/lia/part5/Exp/#4447" class="Bound">ϱ</a> <a id="4449" class="Symbol">=</a> <a id="4451" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4453" href="/lia/part5/Exp/#4441" class="Bound">f</a> <a id="4455" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4459" href="/lia/part5/Exp/#4447" class="Bound">ϱ</a> <a id="4461" href="/lia/part5/Exp/#4063" class="Function Operator">[[</a> <a id="4464" href="/lia/part5/Exp/#4437" class="Bound">x</a> <a id="4466" href="/lia/part5/Exp/#4063" class="Function Operator">↦</a> <a id="4468" href="/lia/part5/Exp/#4439" class="Bound">e</a> <a id="4470" href="/lia/part5/Exp/#4063" class="Function Operator">,</a> <a id="4472" href="/lia/part5/Exp/#4447" class="Bound">ϱ</a> <a id="4474" href="/lia/part5/Exp/#4063" class="Function Operator">]]</a></pre>

<p>Notice how the meaning of free variables statically depends on the
environment active when they are <em>defined</em>:</p>

<pre class="Agda"><a id="4598" href="/lia/part5/Exp/#4598" class="Function">_</a> <a id="4600" class="Symbol">:</a> <a id="4602" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4604" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4608" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4611" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4613" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4615" class="Number">1</a> <a id="4617" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4620" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4624" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="4627" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4629" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4631" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4634" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4637" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4641" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4644" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4646" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4648" class="Number">2</a> <a id="4650" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4653" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4655" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="4658" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4662" href="/lia/part5/Exp/#4172" class="Function">ϱ₂</a> <a id="4665" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4667" class="Number">1</a>
<a id="4669" class="Symbol">_</a>  <a id="4672" class="Symbol">=</a> <a id="4674" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>We show that the lazy semantics with static binding agrees with the
eager semantics. Note that in general the lazy semantics may be “more
defined” than the eager one, i.e., in the presence of errors or
exceptions.</p>

<pre class="Agda"><a id="env-agree"></a><a id="4903" href="/lia/part5/Exp/#4903" class="Function">env-agree</a> <a id="4913" class="Symbol">:</a> <a id="4915" href="/lia/part5/Exp/#3977" class="Record">Envˡˢ</a> <a id="4921" class="Symbol">→</a> <a id="4923" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="4927" class="Symbol">→</a> <a id="4929" class="PrimitiveType">Set</a>
<a id="4933" href="/lia/part5/Exp/#4903" class="Function">env-agree</a> <a id="4943" href="/lia/part5/Exp/#4943" class="Bound">ϱ</a> <a id="4945" href="/lia/part5/Exp/#4945" class="Bound">τ</a> <a id="4947" class="Symbol">=</a> <a id="4949" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="4952" href="/lia/part5/Exp/#4952" class="Bound">x</a> <a id="4954" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="4956" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="4958" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4960" href="/lia/part5/Exp/#4952" class="Bound">x</a> <a id="4962" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="4966" href="/lia/part5/Exp/#4943" class="Bound">ϱ</a> <a id="4968" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4970" href="/lia/part5/Exp/#4945" class="Bound">τ</a> <a id="4972" href="/lia/part5/Exp/#4952" class="Bound">x</a>

<a id="env-agree-update"></a><a id="4975" href="/lia/part5/Exp/#4975" class="Function">env-agree-update</a> <a id="4992" class="Symbol">:</a> <a id="4994" class="Symbol">∀</a> <a id="4996" href="/lia/part5/Exp/#4996" class="Bound">ϱ</a> <a id="4998" href="/lia/part5/Exp/#4998" class="Bound">τ</a> <a id="5000" href="/lia/part5/Exp/#5000" class="Bound">x</a> <a id="5002" href="/lia/part5/Exp/#5002" class="Bound">e</a> <a id="5004" class="Symbol">→</a> <a id="5006" href="/lia/part5/Exp/#4903" class="Function">env-agree</a> <a id="5016" href="/lia/part5/Exp/#4996" class="Bound">ϱ</a> <a id="5018" href="/lia/part5/Exp/#4998" class="Bound">τ</a> <a id="5020" class="Symbol">→</a> <a id="5022" href="/lia/part5/Exp/#4903" class="Function">env-agree</a> <a id="5032" class="Symbol">(</a><a id="5033" href="/lia/part5/Exp/#4996" class="Bound">ϱ</a> <a id="5035" href="/lia/part5/Exp/#4063" class="Function Operator">[[</a> <a id="5038" href="/lia/part5/Exp/#5000" class="Bound">x</a> <a id="5040" href="/lia/part5/Exp/#4063" class="Function Operator">↦</a> <a id="5042" href="/lia/part5/Exp/#5002" class="Bound">e</a> <a id="5044" href="/lia/part5/Exp/#4063" class="Function Operator">,</a> <a id="5046" href="/lia/part5/Exp/#4996" class="Bound">ϱ</a> <a id="5048" href="/lia/part5/Exp/#4063" class="Function Operator">]]</a><a id="5050" class="Symbol">)</a> <a id="5052" class="Symbol">(</a><a id="5053" href="/lia/part5/Exp/#4998" class="Bound">τ</a> <a id="5055" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="5057" href="/lia/part5/Exp/#5000" class="Bound">x</a> <a id="5059" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="5061" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="5063" href="/lia/part5/Exp/#5002" class="Bound">e</a> <a id="5065" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="5069" href="/lia/part5/Exp/#4996" class="Bound">ϱ</a> <a id="5071" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="5072" class="Symbol">)</a>
<a id="5074" href="/lia/part5/Exp/#4975" class="Function">env-agree-update</a> <a id="5091" href="/lia/part5/Exp/#5091" class="Bound">ϱ</a> <a id="5093" href="/lia/part5/Exp/#5093" class="Bound">τ</a> <a id="5095" href="/lia/part5/Exp/#5095" class="Bound">x</a> <a id="5097" href="/lia/part5/Exp/#5097" class="Bound">e</a> <a id="5099" href="/lia/part5/Exp/#5099" class="Bound">ag</a> <a id="5102" href="/lia/part5/Exp/#5102" class="Bound">y</a>
  <a id="5106" class="Keyword">with</a> <a id="5111" href="/lia/part5/Exp/#5095" class="Bound">x</a> <a id="5113" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="5116" href="/lia/part5/Exp/#5102" class="Bound">y</a>
<a id="5118" class="Symbol">...</a> <a id="5122" class="Symbol">|</a> <a id="5124" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="5128" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5133" class="Symbol">=</a> <a id="5135" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5140" class="Symbol">...</a> <a id="5144" class="Symbol">|</a> <a id="5146" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="5149" class="Symbol">_</a> <a id="5151" class="Symbol">=</a> <a id="5153" class="Bound">ag</a> <a id="5156" class="Bound">y</a>

<a id="eager-lazy-agree"></a><a id="5159" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5176" class="Symbol">:</a> <a id="5178" class="Symbol">∀</a> <a id="5180" href="/lia/part5/Exp/#5180" class="Bound">ϱ</a> <a id="5182" href="/lia/part5/Exp/#5182" class="Bound">τ</a> <a id="5184" class="Symbol">→</a> <a id="5186" href="/lia/part5/Exp/#4903" class="Function">env-agree</a> <a id="5196" href="/lia/part5/Exp/#5180" class="Bound">ϱ</a> <a id="5198" href="/lia/part5/Exp/#5182" class="Bound">τ</a> <a id="5200" class="Symbol">→</a> <a id="5202" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="5205" href="/lia/part5/Exp/#5205" class="Bound">e</a> <a id="5207" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="5209" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="5211" href="/lia/part5/Exp/#5205" class="Bound">e</a> <a id="5213" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="5217" href="/lia/part5/Exp/#5180" class="Bound">ϱ</a> <a id="5219" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5221" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="5223" href="/lia/part5/Exp/#5205" class="Bound">e</a> <a id="5225" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="5227" href="/lia/part5/Exp/#5182" class="Bound">τ</a>
<a id="5229" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5246" class="Symbol">_</a> <a id="5248" class="Symbol">_</a> <a id="5250" href="/lia/part5/Exp/#5250" class="Bound">ag</a> <a id="5253" class="Symbol">(</a><a id="5254" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="5256" href="/lia/part5/Exp/#5256" class="Bound">n</a><a id="5257" class="Symbol">)</a> <a id="5259" class="Symbol">=</a> <a id="5261" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5266" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5283" class="Symbol">_</a> <a id="5285" class="Symbol">_</a> <a id="5287" href="/lia/part5/Exp/#5287" class="Bound">ag</a> <a id="5290" class="Symbol">(</a><a id="5291" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="5293" href="/lia/part5/Exp/#5293" class="Bound">x</a><a id="5294" class="Symbol">)</a> <a id="5296" class="Symbol">=</a> <a id="5298" href="/lia/part5/Exp/#5287" class="Bound">ag</a> <a id="5301" href="/lia/part5/Exp/#5293" class="Bound">x</a>
<a id="5303" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5320" href="/lia/part5/Exp/#5320" class="Bound">ϱ</a> <a id="5322" href="/lia/part5/Exp/#5322" class="Bound">τ</a> <a id="5324" href="/lia/part5/Exp/#5324" class="Bound">ag</a> <a id="5327" class="Symbol">(</a><a id="5328" href="/lia/part5/Exp/#5328" class="Bound">e</a> <a id="5330" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="5332" href="/lia/part5/Exp/#5332" class="Bound">f</a><a id="5333" class="Symbol">)</a>
  <a id="5337" class="Keyword">rewrite</a> <a id="5345" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5362" href="/lia/part5/Exp/#5320" class="Bound">ϱ</a> <a id="5364" href="/lia/part5/Exp/#5322" class="Bound">τ</a> <a id="5366" href="/lia/part5/Exp/#5324" class="Bound">ag</a> <a id="5369" href="/lia/part5/Exp/#5328" class="Bound">e</a> <a id="5371" class="Symbol">|</a>
          <a id="5383" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5400" href="/lia/part5/Exp/#5320" class="Bound">ϱ</a> <a id="5402" href="/lia/part5/Exp/#5322" class="Bound">τ</a> <a id="5404" href="/lia/part5/Exp/#5324" class="Bound">ag</a> <a id="5407" href="/lia/part5/Exp/#5332" class="Bound">f</a> <a id="5409" class="Symbol">=</a> <a id="5411" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5416" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5433" href="/lia/part5/Exp/#5433" class="Bound">ϱ</a> <a id="5435" href="/lia/part5/Exp/#5435" class="Bound">τ</a> <a id="5437" href="/lia/part5/Exp/#5437" class="Bound">ag</a> <a id="5440" class="Symbol">(</a><a id="5441" href="/lia/part5/Exp/#5441" class="Bound">e</a> <a id="5443" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="5445" href="/lia/part5/Exp/#5445" class="Bound">f</a><a id="5446" class="Symbol">)</a>
  <a id="5450" class="Keyword">rewrite</a> <a id="5458" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5475" href="/lia/part5/Exp/#5433" class="Bound">ϱ</a> <a id="5477" href="/lia/part5/Exp/#5435" class="Bound">τ</a> <a id="5479" href="/lia/part5/Exp/#5437" class="Bound">ag</a> <a id="5482" href="/lia/part5/Exp/#5441" class="Bound">e</a> <a id="5484" class="Symbol">|</a>
          <a id="5496" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5513" href="/lia/part5/Exp/#5433" class="Bound">ϱ</a> <a id="5515" href="/lia/part5/Exp/#5435" class="Bound">τ</a> <a id="5517" href="/lia/part5/Exp/#5437" class="Bound">ag</a> <a id="5520" href="/lia/part5/Exp/#5445" class="Bound">f</a> <a id="5522" class="Symbol">=</a> <a id="5524" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5529" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5546" href="/lia/part5/Exp/#5546" class="Bound">ϱ</a> <a id="5548" href="/lia/part5/Exp/#5548" class="Bound">τ</a> <a id="5550" href="/lia/part5/Exp/#5550" class="Bound">ag</a> <a id="5553" class="Symbol">(</a><a id="5554" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="5558" href="/lia/part5/Exp/#5558" class="Bound">x</a> <a id="5560" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="5562" href="/lia/part5/Exp/#5562" class="Bound">e</a> <a id="5564" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="5567" href="/lia/part5/Exp/#5567" class="Bound">f</a><a id="5568" class="Symbol">)</a>
  <a id="5572" class="Keyword">with</a> <a id="5577" href="/lia/part5/Exp/#4975" class="Function">env-agree-update</a> <a id="5594" href="/lia/part5/Exp/#5546" class="Bound">ϱ</a> <a id="5596" href="/lia/part5/Exp/#5548" class="Bound">τ</a> <a id="5598" href="/lia/part5/Exp/#5558" class="Bound">x</a> <a id="5600" href="/lia/part5/Exp/#5562" class="Bound">e</a> <a id="5602" href="/lia/part5/Exp/#5550" class="Bound">ag</a>
<a id="5605" class="Symbol">...</a> <a id="5609" class="Symbol">|</a> <a id="5611" href="/lia/part5/Exp/#5611" class="Bound">ag′</a>
  <a id="5617" class="Keyword">rewrite</a> <a id="5625" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="5629" class="Symbol">(</a><a id="5630" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5647" class="Bound">ϱ</a> <a id="5649" class="Bound">τ</a> <a id="5651" class="Bound">ag</a> <a id="5654" class="Bound">e</a><a id="5655" class="Symbol">)</a> <a id="5657" class="Symbol">|</a>
          <a id="5669" href="/lia/part5/Exp/#5159" class="Function">eager-lazy-agree</a> <a id="5686" class="Symbol">(</a><a id="5687" class="Bound">ϱ</a> <a id="5689" href="/lia/part5/Exp/#4063" class="Function Operator">[[</a> <a id="5692" class="Bound">x</a> <a id="5694" href="/lia/part5/Exp/#4063" class="Function Operator">↦</a> <a id="5696" class="Bound">e</a> <a id="5698" href="/lia/part5/Exp/#4063" class="Function Operator">,</a> <a id="5700" class="Bound">ϱ</a> <a id="5702" href="/lia/part5/Exp/#4063" class="Function Operator">]]</a><a id="5704" class="Symbol">)</a> <a id="5706" class="Symbol">(</a><a id="5707" class="Bound">τ</a> <a id="5709" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="5711" class="Bound">x</a> <a id="5713" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="5715" href="/lia/part5/Exp/#4241" class="Function Operator">⟦</a> <a id="5717" class="Bound">e</a> <a id="5719" href="/lia/part5/Exp/#4241" class="Function Operator">⟧ˡˢ</a> <a id="5723" class="Bound">ϱ</a> <a id="5725" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="5726" class="Symbol">)</a> <a id="5728" href="/lia/part5/Exp/#5611" class="Bound">ag′</a> <a id="5732" class="Bound">f</a> <a id="5734" class="Symbol">=</a> <a id="5736" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="free-variables">
<a class="anchor" href="#free-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Free variables</h1>

<pre class="Agda"><a id="fv"></a><a id="5768" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5771" class="Symbol">:</a> <a id="5773" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="5778" class="Symbol">→</a> <a id="5780" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="5788" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="5790" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5793" class="Symbol">(</a><a id="5794" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="5796" href="/lia/part5/Exp/#5796" class="Bound">n</a><a id="5797" class="Symbol">)</a> <a id="5799" class="Symbol">=</a> <a id="5801" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="5803" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5806" class="Symbol">(</a><a id="5807" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="5809" href="/lia/part5/Exp/#5809" class="Bound">x</a><a id="5810" class="Symbol">)</a> <a id="5812" class="Symbol">=</a> <a id="5814" href="/lia/part0/List/#1792" class="Function">[</a> <a id="5816" href="/lia/part5/Exp/#5809" class="Bound">x</a> <a id="5818" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="5820" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5823" class="Symbol">(</a><a id="5824" href="/lia/part5/Exp/#5824" class="Bound">e</a> <a id="5826" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="5828" href="/lia/part5/Exp/#5828" class="Bound">f</a><a id="5829" class="Symbol">)</a> <a id="5831" class="Symbol">=</a> <a id="5833" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5836" href="/lia/part5/Exp/#5824" class="Bound">e</a> <a id="5838" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5841" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5844" href="/lia/part5/Exp/#5828" class="Bound">f</a>
<a id="5846" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5849" class="Symbol">(</a><a id="5850" href="/lia/part5/Exp/#5850" class="Bound">e</a> <a id="5852" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="5854" href="/lia/part5/Exp/#5854" class="Bound">f</a><a id="5855" class="Symbol">)</a> <a id="5857" class="Symbol">=</a> <a id="5859" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5862" href="/lia/part5/Exp/#5850" class="Bound">e</a> <a id="5864" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5867" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5870" href="/lia/part5/Exp/#5854" class="Bound">f</a>
<a id="5872" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5875" class="Symbol">(</a><a id="5876" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="5880" href="/lia/part5/Exp/#5880" class="Bound">x</a> <a id="5882" href="/lia/part5/Exp/#5882" class="Bound">e</a> <a id="5884" href="/lia/part5/Exp/#5884" class="Bound">f</a><a id="5885" class="Symbol">)</a> <a id="5887" class="Symbol">=</a> <a id="5889" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5892" href="/lia/part5/Exp/#5882" class="Bound">e</a> <a id="5894" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5897" href="/lia/part0/List/#4927" class="Function">remove</a> <a id="5904" href="/lia/part5/Exp/#5880" class="Bound">x</a> <a id="5906" class="Symbol">(</a><a id="5907" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5910" href="/lia/part5/Exp/#5884" class="Bound">f</a><a id="5911" class="Symbol">)</a>

<a id="closed"></a><a id="5914" href="/lia/part5/Exp/#5914" class="Function">closed</a> <a id="5921" class="Symbol">:</a> <a id="5923" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="5928" class="Symbol">→</a> <a id="5930" class="PrimitiveType">Set</a>
<a id="5934" href="/lia/part5/Exp/#5914" class="Function">closed</a> <a id="5941" href="/lia/part5/Exp/#5941" class="Bound">e</a> <a id="5943" class="Symbol">=</a> <a id="5945" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5948" href="/lia/part5/Exp/#5941" class="Bound">e</a> <a id="5950" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5952" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>

<a id="fv-lemma"></a><a id="5955" href="/lia/part5/Exp/#5955" class="Function">fv-lemma</a> <a id="5964" class="Symbol">:</a> <a id="5966" class="Symbol">∀</a> <a id="5968" href="/lia/part5/Exp/#5968" class="Bound">ϱ₀</a> <a id="5971" href="/lia/part5/Exp/#5971" class="Bound">ϱ₁</a> <a id="5974" href="/lia/part5/Exp/#5974" class="Bound">e</a> <a id="5976" class="Symbol">→</a> <a id="5978" href="/lia/part0/List/#19150" class="Function">Agree</a> <a id="5984" href="/lia/part5/Exp/#5968" class="Bound">ϱ₀</a> <a id="5987" href="/lia/part5/Exp/#5971" class="Bound">ϱ₁</a> <a id="5990" class="Symbol">(</a><a id="5991" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="5994" href="/lia/part5/Exp/#5974" class="Bound">e</a><a id="5995" class="Symbol">)</a> <a id="5997" class="Symbol">→</a> <a id="5999" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="6001" href="/lia/part5/Exp/#5974" class="Bound">e</a> <a id="6003" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="6005" href="/lia/part5/Exp/#5968" class="Bound">ϱ₀</a> <a id="6008" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6010" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="6012" href="/lia/part5/Exp/#5974" class="Bound">e</a> <a id="6014" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="6016" href="/lia/part5/Exp/#5971" class="Bound">ϱ₁</a>
<a id="6019" href="/lia/part5/Exp/#5955" class="Function">fv-lemma</a> <a id="6028" class="Symbol">=</a> <a id="6030" class="Symbol">{!   !}</a>

<a id="6039" class="Comment">-- all named variables occurring in the expression</a>
<a id="vars"></a><a id="6090" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6095" class="Symbol">:</a> <a id="6097" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6102" class="Symbol">→</a> <a id="6104" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="6112" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="6114" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6119" class="Symbol">(</a><a id="6120" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6122" href="/lia/part5/Exp/#6122" class="Bound">n</a><a id="6123" class="Symbol">)</a> <a id="6125" class="Symbol">=</a> <a id="6127" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="6129" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6134" class="Symbol">(</a><a id="6135" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6137" href="/lia/part5/Exp/#6137" class="Bound">x</a><a id="6138" class="Symbol">)</a> <a id="6140" class="Symbol">=</a> <a id="6142" href="/lia/part0/List/#1792" class="Function">[</a> <a id="6144" href="/lia/part5/Exp/#6137" class="Bound">x</a> <a id="6146" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="6148" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6153" class="Symbol">(</a><a id="6154" href="/lia/part5/Exp/#6154" class="Bound">e</a> <a id="6156" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6158" href="/lia/part5/Exp/#6158" class="Bound">f</a><a id="6159" class="Symbol">)</a> <a id="6161" class="Symbol">=</a> <a id="6163" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6166" href="/lia/part5/Exp/#6154" class="Bound">e</a> <a id="6168" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6171" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6174" href="/lia/part5/Exp/#6158" class="Bound">f</a>
<a id="6176" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6181" class="Symbol">(</a><a id="6182" href="/lia/part5/Exp/#6182" class="Bound">e</a> <a id="6184" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6186" href="/lia/part5/Exp/#6186" class="Bound">f</a><a id="6187" class="Symbol">)</a> <a id="6189" class="Symbol">=</a> <a id="6191" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6194" href="/lia/part5/Exp/#6182" class="Bound">e</a> <a id="6196" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6199" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6202" href="/lia/part5/Exp/#6186" class="Bound">f</a>
<a id="6204" href="/lia/part5/Exp/#6090" class="Function">vars</a> <a id="6209" class="Symbol">(</a><a id="6210" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6214" href="/lia/part5/Exp/#6214" class="Bound">x</a> <a id="6216" href="/lia/part5/Exp/#6216" class="Bound">e</a> <a id="6218" href="/lia/part5/Exp/#6218" class="Bound">f</a><a id="6219" class="Symbol">)</a> <a id="6221" class="Symbol">=</a> <a id="6223" href="/lia/part0/List/#1792" class="Function">[</a> <a id="6225" href="/lia/part5/Exp/#6214" class="Bound">x</a> <a id="6227" href="/lia/part0/List/#2043" class="Function Operator">]</a> <a id="6229" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6232" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6235" href="/lia/part5/Exp/#6216" class="Bound">e</a> <a id="6237" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6240" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="6243" href="/lia/part5/Exp/#6218" class="Bound">f</a></pre>

<h1 id="substitution">
<a class="anchor" href="#substitution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substitution</h1>

<p>We say that two arithmetic expression are <em>contextually equivalent</em> if
they provide the same result whenever they are plugged in the same
context.</p>

<pre class="Agda"><a id="6418" class="Keyword">infix</a> <a id="6424" class="Number">101</a> <a id="6428" href="/lia/part5/Exp/#6436" class="Function Operator">_A[_↦_]</a>
<a id="_A[_↦_]"></a><a id="6436" href="/lia/part5/Exp/#6436" class="Function Operator">_A[_↦_]</a> <a id="6444" class="Symbol">:</a> <a id="6446" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6451" class="Symbol">→</a> <a id="6453" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="6461" class="Symbol">→</a> <a id="6463" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6468" class="Symbol">→</a> <a id="6470" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="6476" class="Symbol">(</a><a id="6477" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6479" href="/lia/part5/Exp/#6479" class="Bound">n</a><a id="6480" class="Symbol">)</a> <a id="6482" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6485" href="/lia/part5/Exp/#6485" class="Bound">x</a> <a id="6487" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6489" href="/lia/part5/Exp/#6489" class="Bound">g</a> <a id="6491" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6493" class="Symbol">=</a> <a id="6495" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6497" href="/lia/part5/Exp/#6479" class="Bound">n</a>

<a id="6500" class="Symbol">(</a><a id="6501" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6503" href="/lia/part5/Exp/#6503" class="Bound">y</a><a id="6504" class="Symbol">)</a> <a id="6506" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6509" href="/lia/part5/Exp/#6509" class="Bound">x</a> <a id="6511" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6513" href="/lia/part5/Exp/#6513" class="Bound">g</a> <a id="6515" href="/lia/part5/Exp/#6436" class="Function Operator">]</a>
  <a id="6519" class="Keyword">with</a> <a id="6524" href="/lia/part5/Exp/#6509" class="Bound">x</a> <a id="6526" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="6529" href="/lia/part5/Exp/#6503" class="Bound">y</a>
<a id="6531" class="Symbol">...</a> <a id="6535" class="Symbol">|</a> <a id="6537" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="6541" class="Symbol">_</a> <a id="6543" class="Symbol">=</a> <a id="6545" class="Bound">g</a>
<a id="6547" class="Symbol">...</a> <a id="6551" class="Symbol">|</a> <a id="6553" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="6556" class="Symbol">_</a> <a id="6558" class="Symbol">=</a> <a id="6560" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6562" class="Bound">y</a>

<a id="6565" class="Symbol">(</a><a id="6566" href="/lia/part5/Exp/#6566" class="Bound">e</a> <a id="6568" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6570" href="/lia/part5/Exp/#6570" class="Bound">f</a><a id="6571" class="Symbol">)</a> <a id="6573" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6576" href="/lia/part5/Exp/#6576" class="Bound">x</a> <a id="6578" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6580" href="/lia/part5/Exp/#6580" class="Bound">g</a> <a id="6582" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6584" class="Symbol">=</a> <a id="6586" href="/lia/part5/Exp/#6566" class="Bound">e</a> <a id="6588" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6591" href="/lia/part5/Exp/#6576" class="Bound">x</a> <a id="6593" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6595" href="/lia/part5/Exp/#6580" class="Bound">g</a> <a id="6597" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6599" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6601" href="/lia/part5/Exp/#6570" class="Bound">f</a> <a id="6603" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6606" href="/lia/part5/Exp/#6576" class="Bound">x</a> <a id="6608" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6610" href="/lia/part5/Exp/#6580" class="Bound">g</a> <a id="6612" href="/lia/part5/Exp/#6436" class="Function Operator">]</a>
<a id="6614" class="Symbol">(</a><a id="6615" href="/lia/part5/Exp/#6615" class="Bound">e</a> <a id="6617" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6619" href="/lia/part5/Exp/#6619" class="Bound">f</a><a id="6620" class="Symbol">)</a> <a id="6622" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6625" href="/lia/part5/Exp/#6625" class="Bound">x</a> <a id="6627" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6629" href="/lia/part5/Exp/#6629" class="Bound">g</a> <a id="6631" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6633" class="Symbol">=</a> <a id="6635" href="/lia/part5/Exp/#6615" class="Bound">e</a> <a id="6637" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6640" href="/lia/part5/Exp/#6625" class="Bound">x</a> <a id="6642" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6644" href="/lia/part5/Exp/#6629" class="Bound">g</a> <a id="6646" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6648" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6650" href="/lia/part5/Exp/#6619" class="Bound">f</a> <a id="6652" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6655" href="/lia/part5/Exp/#6625" class="Bound">x</a> <a id="6657" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6659" href="/lia/part5/Exp/#6629" class="Bound">g</a> <a id="6661" href="/lia/part5/Exp/#6436" class="Function Operator">]</a>

<a id="6664" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6668" href="/lia/part5/Exp/#6668" class="Bound">y</a> <a id="6670" href="/lia/part5/Exp/#6670" class="Bound">e</a> <a id="6672" href="/lia/part5/Exp/#6672" class="Bound">f</a> <a id="6674" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6677" href="/lia/part5/Exp/#6677" class="Bound">x</a> <a id="6679" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6681" href="/lia/part5/Exp/#6681" class="Bound">g</a> <a id="6683" href="/lia/part5/Exp/#6436" class="Function Operator">]</a>
  <a id="6687" class="Keyword">with</a> <a id="6692" href="/lia/part5/Exp/#6670" class="Bound">e</a> <a id="6694" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6697" href="/lia/part5/Exp/#6677" class="Bound">x</a> <a id="6699" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6701" href="/lia/part5/Exp/#6681" class="Bound">g</a> <a id="6703" href="/lia/part5/Exp/#6436" class="Function Operator">]</a>
<a id="6705" class="Symbol">...</a> <a id="6709" class="Symbol">|</a> <a id="6711" href="/lia/part5/Exp/#6711" class="Bound">e′</a>
  <a id="6716" class="Keyword">with</a> <a id="6721" class="Bound">x</a> <a id="6723" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="6726" class="Bound">y</a>
<a id="6728" class="Symbol">...</a> <a id="6732" class="Symbol">|</a> <a id="6734" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="6738" class="Symbol">_</a> <a id="6740" class="Symbol">=</a> <a id="6742" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6746" class="Bound">y</a> <a id="6748" class="Bound">e′</a> <a id="6751" class="Bound">f</a>
<a id="6753" class="Symbol">...</a> <a id="6757" class="Symbol">|</a> <a id="6759" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="6762" class="Symbol">_</a> <a id="6764" class="Symbol">=</a> <a id="6766" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6770" class="Bound">y</a> <a id="6772" class="Bound">e′</a> <a id="6775" class="Symbol">(</a><a id="6776" class="Bound">f</a> <a id="6778" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6781" class="Bound">x</a> <a id="6783" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6785" class="Bound">g</a> <a id="6787" href="/lia/part5/Exp/#6436" class="Function Operator">]</a><a id="6788" class="Symbol">)</a> <a id="6790" class="Comment">-- in general this is incorrect since free variables in g may get captured</a></pre>

<p>Substitution facts:</p>

<pre class="Agda"><a id="subs-Let-1"></a><a id="6895" href="/lia/part5/Exp/#6895" class="Function">subs-Let-1</a> <a id="6906" class="Symbol">:</a> <a id="6908" class="Symbol">∀</a> <a id="6910" href="/lia/part5/Exp/#6910" class="Bound">x</a> <a id="6912" href="/lia/part5/Exp/#6912" class="Bound">e</a> <a id="6914" class="Symbol">→</a> <a id="6916" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6920" href="/lia/part5/Exp/#6910" class="Bound">x</a> <a id="6922" href="/lia/part5/Exp/#6912" class="Bound">e</a> <a id="6924" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="6926" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6929" href="/lia/part5/Exp/#6910" class="Bound">x</a> <a id="6931" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6933" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="6935" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="6937" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6939" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6943" href="/lia/part5/Exp/#6910" class="Bound">x</a> <a id="6945" class="Symbol">(</a><a id="6946" href="/lia/part5/Exp/#6912" class="Bound">e</a> <a id="6948" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="6951" href="/lia/part5/Exp/#6910" class="Bound">x</a> <a id="6953" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="6955" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="6957" href="/lia/part5/Exp/#6436" class="Function Operator">]</a><a id="6958" class="Symbol">)</a> <a id="6960" href="/lia/part5/Exp/#971" class="Generalizable">f</a>
<a id="6962" href="/lia/part5/Exp/#6895" class="Function">subs-Let-1</a> <a id="6973" href="/lia/part5/Exp/#6973" class="Bound">x</a> <a id="6975" href="/lia/part5/Exp/#6975" class="Bound">e</a> <a id="6977" class="Symbol">=</a> <a id="6979" class="Symbol">{!   !}</a></pre>

<p>This is correct only if no free occurrence of <code class="language-plaintext highlighter-rouge">x</code> in <code class="language-plaintext highlighter-rouge">e</code> falls under a
let binding a variable <code class="language-plaintext highlighter-rouge">y</code> which is free in <code class="language-plaintext highlighter-rouge">g</code>. This is captured by
<code class="language-plaintext highlighter-rouge">g AdmissibleFor x In e</code>.</p>

<pre class="Agda"><a id="_NotFreeIn_"></a><a id="7163" href="/lia/part5/Exp/#7163" class="Function Operator">_NotFreeIn_</a> <a id="7175" class="Symbol">:</a> <a id="7177" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="7185" class="Symbol">→</a> <a id="7187" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="7192" class="Symbol">→</a> <a id="7194" class="PrimitiveType">Set</a>
<a id="7198" href="/lia/part5/Exp/#7198" class="Bound">x</a> <a id="7200" href="/lia/part5/Exp/#7163" class="Function Operator">NotFreeIn</a> <a id="7210" href="/lia/part5/Exp/#7210" class="Bound">e</a> <a id="7212" class="Symbol">=</a> <a id="7214" href="/lia/part5/Exp/#7198" class="Bound">x</a> <a id="7216" href="/lia/part0/List/#8983" class="Function Operator">~∈</a> <a id="7219" href="/lia/part5/Exp/#5768" class="Function">fv</a> <a id="7222" href="/lia/part5/Exp/#7210" class="Bound">e</a>

<a id="7225" class="Keyword">infix</a> <a id="7231" class="Number">20</a> <a id="7234" href="/lia/part5/Exp/#7258" class="Datatype Operator">_AdmissibleFor_In_</a>
<a id="7253" class="Keyword">data</a> <a id="_AdmissibleFor_In_"></a><a id="7258" href="/lia/part5/Exp/#7258" class="Datatype Operator">_AdmissibleFor_In_</a> <a id="7277" class="Symbol">(</a><a id="7278" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7280" class="Symbol">:</a> <a id="7282" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="7286" class="Symbol">)</a> <a id="7288" class="Symbol">(</a><a id="7289" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7291" class="Symbol">:</a> <a id="7293" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="7300" class="Symbol">)</a> <a id="7302" class="Symbol">:</a> <a id="7304" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="7309" class="Symbol">→</a> <a id="7311" class="PrimitiveType">Set</a> <a id="7315" class="Keyword">where</a>

  <a id="_AdmissibleFor_In_.Num"></a><a id="7324" href="/lia/part5/Exp/#7324" class="InductiveConstructor">Num</a> <a id="7328" class="Symbol">:</a> <a id="7330" class="Symbol">(</a><a id="7331" href="/lia/part5/Exp/#7331" class="Bound">n</a> <a id="7333" class="Symbol">:</a> <a id="7335" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="7336" class="Symbol">)</a> <a id="7338" class="Symbol">→</a> <a id="7340" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7342" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7356" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7358" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7361" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="7363" href="/lia/part5/Exp/#7331" class="Bound">n</a>

  <a id="_AdmissibleFor_In_.Var"></a><a id="7368" href="/lia/part5/Exp/#7368" class="InductiveConstructor">Var</a> <a id="7372" class="Symbol">:</a> <a id="7374" class="Symbol">(</a><a id="7375" href="/lia/part5/Exp/#7375" class="Bound">y</a> <a id="7377" class="Symbol">:</a> <a id="7379" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="7386" class="Symbol">)</a> <a id="7388" class="Symbol">→</a> <a id="7390" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7392" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7406" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7408" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7411" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="7413" href="/lia/part5/Exp/#7375" class="Bound">y</a>

  <a id="_AdmissibleFor_In_.Add"></a><a id="7418" href="/lia/part5/Exp/#7418" class="InductiveConstructor">Add</a> <a id="7422" class="Symbol">:</a> <a id="7424" class="Symbol">∀</a> <a id="7426" href="/lia/part5/Exp/#7426" class="Bound">e</a> <a id="7428" href="/lia/part5/Exp/#7428" class="Bound">f</a> <a id="7430" class="Symbol">→</a>
        <a id="7440" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7442" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7456" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7458" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7461" href="/lia/part5/Exp/#7426" class="Bound">e</a> <a id="7463" class="Symbol">→</a> 
        <a id="7474" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7476" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7490" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7492" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7495" href="/lia/part5/Exp/#7428" class="Bound">f</a> <a id="7497" class="Symbol">→</a> 
        <a id="7508" class="Comment">----------------------------</a>
        <a id="7545" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7547" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7561" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7563" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7566" class="Symbol">(</a><a id="7567" href="/lia/part5/Exp/#7426" class="Bound">e</a> <a id="7569" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="7571" href="/lia/part5/Exp/#7428" class="Bound">f</a><a id="7572" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Mul"></a><a id="7577" href="/lia/part5/Exp/#7577" class="InductiveConstructor">Mul</a> <a id="7581" class="Symbol">:</a> <a id="7583" class="Symbol">∀</a> <a id="7585" href="/lia/part5/Exp/#7585" class="Bound">e</a> <a id="7587" href="/lia/part5/Exp/#7587" class="Bound">f</a> <a id="7589" class="Symbol">→</a>
        <a id="7599" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7601" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7615" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7617" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7620" href="/lia/part5/Exp/#7585" class="Bound">e</a> <a id="7622" class="Symbol">→</a> 
        <a id="7633" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7635" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7649" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7651" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7654" href="/lia/part5/Exp/#7587" class="Bound">f</a> <a id="7656" class="Symbol">→</a> 
        <a id="7667" class="Comment">----------------------------</a>
        <a id="7704" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7706" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7720" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7722" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7725" class="Symbol">(</a><a id="7726" href="/lia/part5/Exp/#7585" class="Bound">e</a> <a id="7728" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="7730" href="/lia/part5/Exp/#7587" class="Bound">f</a><a id="7731" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-1"></a><a id="7736" href="/lia/part5/Exp/#7736" class="InductiveConstructor">Let-1</a> <a id="7742" class="Symbol">:</a> <a id="7744" class="Symbol">∀</a> <a id="7746" href="/lia/part5/Exp/#7746" class="Bound">e</a> <a id="7748" href="/lia/part5/Exp/#7748" class="Bound">f</a> <a id="7750" class="Symbol">→</a>
          <a id="7762" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7764" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7778" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7780" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7783" href="/lia/part5/Exp/#7746" class="Bound">e</a> <a id="7785" class="Symbol">→</a> 
          <a id="7798" class="Comment">--------------------------------</a>
          <a id="7841" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7843" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7857" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7859" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7862" class="Symbol">(</a><a id="7863" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="7867" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7869" href="/lia/part5/Exp/#7746" class="Bound">e</a> <a id="7871" href="/lia/part5/Exp/#7748" class="Bound">f</a><a id="7872" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-2"></a><a id="7877" href="/lia/part5/Exp/#7877" class="InductiveConstructor">Let-2</a> <a id="7883" class="Symbol">:</a> <a id="7885" class="Symbol">∀</a> <a id="7887" href="/lia/part5/Exp/#7887" class="Bound">e</a> <a id="7889" href="/lia/part5/Exp/#7889" class="Bound">f</a> <a id="7891" class="Symbol">→</a>
          <a id="7903" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7905" href="/lia/part0/Equality/#2825" class="Function Operator">≢</a> <a id="7907" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="7909" class="Symbol">→</a>
          <a id="7921" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7923" href="/lia/part5/Exp/#7163" class="Function Operator">NotFreeIn</a> <a id="7933" href="/lia/part5/Exp/#7889" class="Bound">f</a> <a id="7935" class="Symbol">→</a>
          <a id="7947" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="7949" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="7963" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="7965" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="7968" href="/lia/part5/Exp/#7887" class="Bound">e</a> <a id="7970" class="Symbol">→</a>
          <a id="7982" class="Comment">--------------------------------</a>
          <a id="8025" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="8027" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="8041" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="8043" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="8046" class="Symbol">(</a><a id="8047" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8051" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8053" href="/lia/part5/Exp/#7887" class="Bound">e</a> <a id="8055" href="/lia/part5/Exp/#7889" class="Bound">f</a><a id="8056" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-3"></a><a id="8061" href="/lia/part5/Exp/#8061" class="InductiveConstructor">Let-3</a> <a id="8067" class="Symbol">:</a> <a id="8069" class="Symbol">∀</a> <a id="8071" href="/lia/part5/Exp/#8071" class="Bound">e</a> <a id="8073" href="/lia/part5/Exp/#8073" class="Bound">f</a> <a id="8075" class="Symbol">→</a>
          <a id="8087" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="8089" href="/lia/part0/Equality/#2825" class="Function Operator">≢</a> <a id="8091" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8093" class="Symbol">→</a>
          <a id="8105" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8107" href="/lia/part5/Exp/#7163" class="Function Operator">NotFreeIn</a> <a id="8117" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="8119" class="Symbol">→</a>
          <a id="8131" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="8133" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="8147" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="8149" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="8152" href="/lia/part5/Exp/#8071" class="Bound">e</a> <a id="8154" class="Symbol">→</a>
          <a id="8166" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="8168" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="8182" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="8184" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="8187" href="/lia/part5/Exp/#8073" class="Bound">f</a> <a id="8189" class="Symbol">→</a>
          <a id="8201" class="Comment">--------------------------------</a>
          <a id="8244" href="/lia/part5/Exp/#7278" class="Bound">g</a> <a id="8246" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="8260" href="/lia/part5/Exp/#7289" class="Bound">x</a> <a id="8262" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="8265" class="Symbol">(</a><a id="8266" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8270" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8272" href="/lia/part5/Exp/#8071" class="Bound">e</a> <a id="8274" href="/lia/part5/Exp/#8073" class="Bound">f</a><a id="8275" class="Symbol">)</a>

<a id="subst-lemma"></a><a id="8278" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8290" class="Symbol">:</a> <a id="8292" class="Symbol">∀</a> <a id="8294" href="/lia/part5/Exp/#8294" class="Bound">g</a> <a id="8296" href="/lia/part5/Exp/#8296" class="Bound">x</a> <a id="8298" href="/lia/part5/Exp/#8298" class="Bound">ϱ</a> <a id="8300" class="Symbol">→</a>
  <a id="8304" href="/lia/part5/Exp/#8294" class="Bound">g</a> <a id="8306" href="/lia/part5/Exp/#7258" class="Datatype Operator">AdmissibleFor</a> <a id="8320" href="/lia/part5/Exp/#8296" class="Bound">x</a> <a id="8322" href="/lia/part5/Exp/#7258" class="Datatype Operator">In</a> <a id="8325" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8327" class="Symbol">→</a>
  <a id="8331" class="Comment">--------------------------------------------</a>
  <a id="8378" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8380" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8382" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="8385" href="/lia/part5/Exp/#8296" class="Bound">x</a> <a id="8387" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="8389" href="/lia/part5/Exp/#8294" class="Bound">g</a> <a id="8391" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="8393" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8395" href="/lia/part5/Exp/#8298" class="Bound">ϱ</a> <a id="8397" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8399" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8401" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8403" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8405" href="/lia/part5/Exp/#8298" class="Bound">ϱ</a> <a id="8407" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="8409" href="/lia/part5/Exp/#8296" class="Bound">x</a> <a id="8411" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="8413" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8415" href="/lia/part5/Exp/#8294" class="Bound">g</a> <a id="8417" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8419" href="/lia/part5/Exp/#8298" class="Bound">ϱ</a> <a id="8421" href="/lia/part0/Functions/#570" class="Function Operator">]</a>

<a id="8424" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8436" class="Symbol">_</a> <a id="8438" class="Symbol">_</a> <a id="8440" class="Symbol">_</a> <a id="8442" class="Symbol">(</a><a id="8443" href="/lia/part5/Exp/#7324" class="InductiveConstructor">Num</a> <a id="8447" href="/lia/part5/Exp/#8447" class="Bound">n</a><a id="8448" class="Symbol">)</a> <a id="8450" class="Symbol">=</a> <a id="8452" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8458" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8470" class="Symbol">_</a> <a id="8472" href="/lia/part5/Exp/#8472" class="Bound">x</a> <a id="8474" class="Symbol">_</a> <a id="8476" class="Symbol">(</a><a id="8477" href="/lia/part5/Exp/#7368" class="InductiveConstructor">Var</a> <a id="8481" href="/lia/part5/Exp/#8481" class="Bound">y</a><a id="8482" class="Symbol">)</a>
  <a id="8486" class="Keyword">with</a> <a id="8491" href="/lia/part5/Exp/#8472" class="Bound">x</a> <a id="8493" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="8496" href="/lia/part5/Exp/#8481" class="Bound">y</a>
<a id="8498" class="Symbol">...</a> <a id="8502" class="Symbol">|</a> <a id="8504" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="8508" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="8513" class="Symbol">=</a> <a id="8515" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="8520" class="Symbol">...</a> <a id="8524" class="Symbol">|</a> <a id="8526" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="8529" class="Symbol">_</a> <a id="8531" class="Symbol">=</a> <a id="8533" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8539" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8551" href="/lia/part5/Exp/#8551" class="Bound">g</a> <a id="8553" href="/lia/part5/Exp/#8553" class="Bound">x</a> <a id="8555" href="/lia/part5/Exp/#8555" class="Bound">ϱ</a> <a id="8557" class="Symbol">(</a><a id="8558" href="/lia/part5/Exp/#7418" class="InductiveConstructor">Add</a> <a id="8562" href="/lia/part5/Exp/#8562" class="Bound">e</a> <a id="8564" href="/lia/part5/Exp/#8564" class="Bound">f</a> <a id="8566" href="/lia/part5/Exp/#8566" class="Bound">adm-e</a> <a id="8572" href="/lia/part5/Exp/#8572" class="Bound">adm-f</a><a id="8577" class="Symbol">)</a>
  <a id="8581" class="Keyword">rewrite</a> <a id="8589" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8601" href="/lia/part5/Exp/#8551" class="Bound">g</a> <a id="8603" href="/lia/part5/Exp/#8553" class="Bound">x</a> <a id="8605" href="/lia/part5/Exp/#8555" class="Bound">ϱ</a> <a id="8607" href="/lia/part5/Exp/#8566" class="Bound">adm-e</a> <a id="8613" class="Symbol">|</a>
          <a id="8625" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8637" href="/lia/part5/Exp/#8551" class="Bound">g</a> <a id="8639" href="/lia/part5/Exp/#8553" class="Bound">x</a> <a id="8641" href="/lia/part5/Exp/#8555" class="Bound">ϱ</a> <a id="8643" href="/lia/part5/Exp/#8572" class="Bound">adm-f</a>
  <a id="8651" class="Symbol">=</a> <a id="8653" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8659" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8671" href="/lia/part5/Exp/#8671" class="Bound">g</a> <a id="8673" href="/lia/part5/Exp/#8673" class="Bound">x</a> <a id="8675" href="/lia/part5/Exp/#8675" class="Bound">ϱ</a> <a id="8677" class="Symbol">(</a><a id="8678" href="/lia/part5/Exp/#7577" class="InductiveConstructor">Mul</a> <a id="8682" href="/lia/part5/Exp/#8682" class="Bound">e</a> <a id="8684" href="/lia/part5/Exp/#8684" class="Bound">f</a> <a id="8686" href="/lia/part5/Exp/#8686" class="Bound">adm-e</a> <a id="8692" href="/lia/part5/Exp/#8692" class="Bound">adm-f</a><a id="8697" class="Symbol">)</a>
  <a id="8701" class="Keyword">rewrite</a> <a id="8709" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8721" href="/lia/part5/Exp/#8671" class="Bound">g</a> <a id="8723" href="/lia/part5/Exp/#8673" class="Bound">x</a> <a id="8725" href="/lia/part5/Exp/#8675" class="Bound">ϱ</a> <a id="8727" href="/lia/part5/Exp/#8686" class="Bound">adm-e</a> <a id="8733" class="Symbol">|</a>
          <a id="8745" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8757" href="/lia/part5/Exp/#8671" class="Bound">g</a> <a id="8759" href="/lia/part5/Exp/#8673" class="Bound">x</a> <a id="8761" href="/lia/part5/Exp/#8675" class="Bound">ϱ</a> <a id="8763" href="/lia/part5/Exp/#8692" class="Bound">adm-f</a>
  <a id="8771" class="Symbol">=</a> <a id="8773" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8779" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8791" href="/lia/part5/Exp/#8791" class="Bound">g</a> <a id="8793" href="/lia/part5/Exp/#8793" class="Bound">x</a> <a id="8795" href="/lia/part5/Exp/#8795" class="Bound">ϱ</a> <a id="8797" class="Symbol">(</a><a id="8798" href="/lia/part5/Exp/#7736" class="InductiveConstructor">Let-1</a> <a id="8804" href="/lia/part5/Exp/#8804" class="Bound">e</a> <a id="8806" href="/lia/part5/Exp/#8806" class="Bound">f</a> <a id="8808" href="/lia/part5/Exp/#8808" class="Bound">adm-e</a><a id="8813" class="Symbol">)</a>
  <a id="8817" class="Keyword">with</a> <a id="8822" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="8834" href="/lia/part5/Exp/#8791" class="Bound">g</a> <a id="8836" href="/lia/part5/Exp/#8793" class="Bound">x</a> <a id="8838" href="/lia/part5/Exp/#8795" class="Bound">ϱ</a> <a id="8840" href="/lia/part5/Exp/#8808" class="Bound">adm-e</a>
<a id="8846" class="Symbol">...</a> <a id="8850" class="Symbol">|</a> <a id="8852" href="/lia/part5/Exp/#8852" class="Bound">ind</a> <a id="8856" class="Symbol">=</a>
  <a id="8860" href="/lia/part0/Equality/#2528" class="Function Operator">begin</a>
    <a id="8870" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8872" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8876" class="Bound">x</a> <a id="8878" class="Bound">e</a> <a id="8880" class="Bound">f</a> <a id="8882" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="8885" class="Bound">x</a> <a id="8887" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="8889" class="Bound">g</a> <a id="8891" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="8893" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8895" class="Bound">ϱ</a>
      <a id="8903" href="/lia/part0/Equality/#2673" class="Function Operator">≡⟨</a> <a id="8906" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="8911" class="Symbol">(λ</a> <a id="8914" href="/lia/part5/Exp/#8914" class="Bound">C</a> <a id="8916" class="Symbol">→</a> <a id="8918" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8920" href="/lia/part5/Exp/#8914" class="Bound">C</a> <a id="8922" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8924" class="Bound">ϱ</a><a id="8925" class="Symbol">)</a> <a id="8927" class="Symbol">(</a><a id="8928" href="/lia/part5/Exp/#6895" class="Function">subs-Let-1</a> <a id="8939" class="Bound">x</a> <a id="8941" class="Bound">e</a><a id="8942" class="Symbol">)</a> <a id="8944" href="/lia/part0/Equality/#2673" class="Function Operator">⟩</a>
    <a id="8950" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8952" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8956" class="Bound">x</a> <a id="8958" class="Symbol">(</a><a id="8959" class="Bound">e</a> <a id="8961" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="8964" class="Bound">x</a> <a id="8966" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="8968" class="Bound">g</a> <a id="8970" href="/lia/part5/Exp/#6436" class="Function Operator">]</a><a id="8971" class="Symbol">)</a> <a id="8973" class="Bound">f</a> <a id="8975" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8977" class="Bound">ϱ</a>
      <a id="8985" href="/lia/part0/Equality/#2598" class="Function Operator">≡⟨⟩</a>
    <a id="8993" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8995" class="Bound">f</a> <a id="8997" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8999" class="Bound">ϱ</a> <a id="9001" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9003" class="Bound">x</a> <a id="9005" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9007" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9009" class="Bound">e</a> <a id="9011" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="9014" class="Bound">x</a> <a id="9016" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="9018" class="Bound">g</a> <a id="9020" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="9022" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9024" class="Bound">ϱ</a> <a id="9026" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="9034" href="/lia/part0/Equality/#2673" class="Function Operator">≡⟨</a> <a id="9037" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="9042" class="Symbol">(λ</a> <a id="9045" href="/lia/part5/Exp/#9045" class="Bound">C</a> <a id="9047" class="Symbol">→</a> <a id="9049" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9051" class="Bound">f</a> <a id="9053" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9055" class="Bound">ϱ</a> <a id="9057" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9059" class="Bound">x</a> <a id="9061" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9063" href="/lia/part5/Exp/#9045" class="Bound">C</a> <a id="9065" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="9066" class="Symbol">)</a> <a id="9068" href="/lia/part5/Exp/#8852" class="Bound">ind</a> <a id="9072" href="/lia/part0/Equality/#2673" class="Function Operator">⟩</a>
    <a id="9078" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9080" class="Bound">f</a> <a id="9082" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9084" class="Bound">ϱ</a> <a id="9086" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9088" class="Bound">x</a> <a id="9090" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9092" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9094" class="Bound">e</a> <a id="9096" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9098" class="Bound">ϱ</a> <a id="9100" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9102" class="Bound">x</a> <a id="9104" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9106" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9108" class="Bound">g</a> <a id="9110" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9112" class="Bound">ϱ</a> <a id="9114" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9116" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="9124" href="/lia/part0/Equality/#2673" class="Function Operator">≡⟨</a> <a id="9127" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="9132" class="Symbol">(λ</a> <a id="9135" href="/lia/part5/Exp/#9135" class="Bound">C</a> <a id="9137" class="Symbol">→</a> <a id="9139" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9141" class="Bound">f</a> <a id="9143" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9145" href="/lia/part5/Exp/#9135" class="Bound">C</a><a id="9146" class="Symbol">)</a> <a id="9148" class="Symbol">(</a><a id="9149" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="9153" class="Symbol">(</a><a id="9154" href="/lia/part0/Functions/#3155" class="Function">doubleupdate</a> <a id="9167" class="Bound">x</a><a id="9168" class="Symbol">))</a> <a id="9171" href="/lia/part0/Equality/#2673" class="Function Operator">⟩</a>
    <a id="9177" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9179" class="Bound">f</a> <a id="9181" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9183" class="Bound">ϱ</a> <a id="9185" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9187" class="Bound">x</a> <a id="9189" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9191" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9193" class="Bound">g</a> <a id="9195" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9197" class="Bound">ϱ</a> <a id="9199" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9201" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9203" class="Bound">x</a> <a id="9205" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9207" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9209" class="Bound">e</a> <a id="9211" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9213" class="Bound">ϱ</a> <a id="9215" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9217" class="Bound">x</a> <a id="9219" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9221" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9223" class="Bound">g</a> <a id="9225" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9227" class="Bound">ϱ</a> <a id="9229" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9231" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="9239" href="/lia/part0/Equality/#2598" class="Function Operator">≡⟨⟩</a>
    <a id="9247" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9249" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="9253" class="Bound">x</a> <a id="9255" class="Bound">e</a> <a id="9257" class="Bound">f</a> <a id="9259" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9261" class="Bound">ϱ</a> <a id="9263" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9265" class="Bound">x</a> <a id="9267" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9269" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9271" class="Bound">g</a> <a id="9273" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9275" class="Bound">ϱ</a> <a id="9277" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
  <a id="9281" href="/lia/part0/Equality/#2774" class="Function Operator">∎</a>

<a id="9284" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="9296" href="/lia/part5/Exp/#9296" class="Bound">g</a> <a id="9298" href="/lia/part5/Exp/#9298" class="Bound">x</a> <a id="9300" href="/lia/part5/Exp/#9300" class="Bound">ϱ</a> <a id="9302" class="Symbol">(</a><a id="9303" href="/lia/part5/Exp/#7877" class="InductiveConstructor">Let-2</a> <a id="9309" href="/lia/part5/Exp/#9309" class="Bound">e</a> <a id="9311" href="/lia/part5/Exp/#9311" class="Bound">f</a> <a id="9313" href="/lia/part5/Exp/#9313" class="Bound">x≢y</a> <a id="9317" href="/lia/part5/Exp/#9317" class="Bound">xNFf</a> <a id="9322" href="/lia/part5/Exp/#9322" class="Bound">adm-e</a><a id="9327" class="Symbol">)</a> <a id="9329" class="Symbol">=</a> <a id="9331" class="Symbol">{!   !}</a>

<a id="9340" href="/lia/part5/Exp/#8278" class="Function">subst-lemma</a> <a id="9352" href="/lia/part5/Exp/#9352" class="Bound">g</a> <a id="9354" href="/lia/part5/Exp/#9354" class="Bound">x</a> <a id="9356" href="/lia/part5/Exp/#9356" class="Bound">ϱ</a> <a id="9358" class="Symbol">(</a><a id="9359" href="/lia/part5/Exp/#8061" class="InductiveConstructor">Let-3</a> <a id="9365" href="/lia/part5/Exp/#9365" class="Bound">e</a> <a id="9367" href="/lia/part5/Exp/#9367" class="Bound">f</a> <a id="9369" href="/lia/part5/Exp/#9369" class="Bound">x≢y</a> <a id="9373" href="/lia/part5/Exp/#9373" class="Bound">yNFg</a> <a id="9378" href="/lia/part5/Exp/#9378" class="Bound">adm-e</a> <a id="9384" href="/lia/part5/Exp/#9384" class="Bound">adm-f</a><a id="9389" class="Symbol">)</a> <a id="9391" class="Symbol">=</a> <a id="9393" class="Symbol">{!   !}</a>

<a id="9402" class="Comment">-- subst-lemma ($ n) = refl</a>

<a id="9431" class="Comment">-- subst-lemma {x} (` y)</a>
<a id="9456" class="Comment">--   with x ≡? y</a>
<a id="9473" class="Comment">-- ... | yes refl = refl</a>
<a id="9498" class="Comment">-- ... | no _ = refl</a>

<a id="9520" class="Comment">-- subst-lemma {x} {g} {ϱ} (e + f)</a>
<a id="9555" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="9596" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="9643" class="Comment">-- subst-lemma {x} {g} {ϱ} (e · f)</a>
<a id="9678" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="9719" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="9766" class="Comment">-- subst-lemma {x} {g} {ϱ} (Let y e f)</a>
<a id="9805" class="Comment">--   with x ≡? y</a>
<a id="9822" class="Comment">-- ... | yes refl = </a>
<a id="9843" class="Comment">--   begin</a>
<a id="9854" class="Comment">--   ⟦ Let x (e A[ x ↦ g ]) f ⟧ ϱ</a>
<a id="9888" class="Comment">--     ≡⟨⟩</a>
<a id="9899" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="9939" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ]) (subst-lemma {x} {g} {ϱ} e) ⟩</a>
<a id="10010" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10040" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ C) (sym (doubleupdate x)) ⟩</a>
<a id="10096" class="Comment">--   ⟦ f ⟧ ϱ′ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10127" class="Comment">--     ≡⟨⟩</a>
<a id="10138" class="Comment">--   ⟦ Let x e f ⟧ ϱ′</a>
<a id="10160" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>

<a id="10197" class="Comment">-- ... | no x≢y</a>
<a id="10213" class="Comment">--   with y ∈? fv g</a>
<a id="10233" class="Comment">-- ... | no ¬y∈g =</a>
<a id="10252" class="Comment">--   begin</a>
<a id="10263" class="Comment">--   ⟦ Let y (e A[ x ↦ g ]) (f A[ x ↦ g ]) ⟧ ϱ</a>
<a id="10310" class="Comment">--     ≡⟨⟩</a>
<a id="10321" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="10372" class="Comment">--     ≡⟨ cong (λ C → ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ C ]) (subst-lemma e) ⟩</a>
<a id="10442" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ′′</a>
<a id="10468" class="Comment">--     ≡⟨ subst-lemma f ⟩</a>
<a id="10494" class="Comment">--   ⟦ f ⟧ ϱ′′ [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="10527" class="Comment">--     ≡⟨⟩</a>
<a id="10538" class="Comment">--   ⟦ f ⟧ ϱ [ y ↦ ⟦ e ⟧ ϱ′ ] [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="10586" class="Comment">--     ≡⟨ sym (cong (λ C → ⟦ f ⟧ C) (update-comm _ _ _ _ _  x≢y))⟩</a>
<a id="10653" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ′′ ] [ y ↦ ⟦ e ⟧ ϱ′ ] </a>
<a id="10702" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ] [ y ↦ ⟦ e ⟧ ϱ′ ]) eq ⟩</a>
<a id="10765" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ ] [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10811" class="Comment">--     ≡⟨⟩</a>
<a id="10822" class="Comment">--   ⟦ f ⟧ ϱ′ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10853" class="Comment">--     ≡⟨⟩</a>
<a id="10864" class="Comment">--   ⟦ Let y e f ⟧ ϱ′</a>
<a id="10886" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>
<a id="10922" class="Comment">--           ϱ′′ = ϱ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>

<a id="10961" class="Comment">--           ag : Agree ϱ ϱ′′ (fv g)</a>
<a id="10998" class="Comment">--           ag = Agree-update-~∈ ¬y∈g</a>

<a id="11038" class="Comment">--           eq : ⟦ g ⟧ ϱ′′ ≡ ⟦ g ⟧ ϱ</a>
<a id="11076" class="Comment">--           eq = fv-lemma ϱ′′ ϱ g (sym-Agree ag)</a>

<a id="11127" class="Comment">-- ... | yes y∈g = {!   !}</a></pre>

<h1 id="contextual-equivalence-and-full-abstraction">
<a class="anchor" href="#contextual-equivalence-and-full-abstraction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contextual equivalence and full abstraction</h1>

<pre class="Agda"><a id="11210" class="Keyword">private</a> <a id="_≈_"></a><a id="11218" href="/lia/part5/Exp/#11218" class="Function Operator">_≈_</a> <a id="11222" class="Symbol">:</a> <a id="11224" class="Symbol">∀</a> <a id="11226" href="/lia/part5/Exp/#11226" class="Bound">e</a> <a id="11228" href="/lia/part5/Exp/#11228" class="Bound">f</a> <a id="11230" class="Symbol">→</a> <a id="11232" class="PrimitiveType">Set</a>
<a id="11236" href="/lia/part5/Exp/#11236" class="Bound">e</a> <a id="11238" href="/lia/part5/Exp/#11218" class="Function Operator">≈</a> <a id="11240" href="/lia/part5/Exp/#11240" class="Bound">f</a> <a id="11242" class="Symbol">=</a> <a id="11244" class="Symbol">∀</a> <a id="11246" href="/lia/part5/Exp/#11246" class="Bound">c</a> <a id="11248" href="/lia/part5/Exp/#11248" class="Bound">x</a> <a id="11250" href="/lia/part5/Exp/#11250" class="Bound">ϱ</a> <a id="11252" class="Symbol">→</a> <a id="11254" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11256" href="/lia/part5/Exp/#11246" class="Bound">c</a> <a id="11258" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="11261" href="/lia/part5/Exp/#11248" class="Bound">x</a> <a id="11263" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="11265" href="/lia/part5/Exp/#11236" class="Bound">e</a> <a id="11267" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="11269" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11271" href="/lia/part5/Exp/#11250" class="Bound">ϱ</a> <a id="11273" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11275" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11277" href="/lia/part5/Exp/#11246" class="Bound">c</a> <a id="11279" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="11282" href="/lia/part5/Exp/#11248" class="Bound">x</a> <a id="11284" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="11286" href="/lia/part5/Exp/#11240" class="Bound">f</a> <a id="11288" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="11290" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11292" href="/lia/part5/Exp/#11250" class="Bound">ϱ</a></pre>

<p>There is nothing else beside the numerical value an expression has.</p>

<pre class="Agda"><a id="full-abstraction-1"></a><a id="11372" href="/lia/part5/Exp/#11372" class="Function">full-abstraction-1</a> <a id="11391" class="Symbol">:</a> <a id="11393" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11395" href="/lia/part5/Exp/#11218" class="Function Operator">≈</a> <a id="11397" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11399" class="Symbol">→</a> <a id="11401" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="11404" href="/lia/part5/Exp/#11404" class="Bound">ϱ</a> <a id="11406" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="11408" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11410" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11412" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11414" href="/lia/part5/Exp/#11404" class="Bound">ϱ</a> <a id="11416" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11418" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11420" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11422" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11424" href="/lia/part5/Exp/#11404" class="Bound">ϱ</a>
<a id="11426" href="/lia/part5/Exp/#11372" class="Function">full-abstraction-1</a> <a id="11445" href="/lia/part5/Exp/#11445" class="Bound">e≈f</a> <a id="11449" href="/lia/part5/Exp/#11449" class="Bound">ϱ</a> <a id="11451" class="Symbol">=</a> <a id="11453" href="/lia/part5/Exp/#11445" class="Bound">e≈f</a> <a id="11457" class="Symbol">(</a><a id="11458" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="11460" href="/lia/part5/Exp/#557" class="Function">x₀</a><a id="11462" class="Symbol">)</a> <a id="11464" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="11467" href="/lia/part5/Exp/#11449" class="Bound">ϱ</a>

<a id="full-abstraction-2"></a><a id="11470" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11489" class="Symbol">:</a> <a id="11491" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="11494" href="/lia/part5/Exp/#11494" class="Bound">ϱ</a> <a id="11496" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="11498" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11500" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11502" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11504" href="/lia/part5/Exp/#11494" class="Bound">ϱ</a> <a id="11506" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11508" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11510" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11512" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11514" href="/lia/part5/Exp/#11494" class="Bound">ϱ</a> <a id="11516" class="Symbol">→</a> <a id="11518" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11520" href="/lia/part5/Exp/#11218" class="Function Operator">≈</a> <a id="11522" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="11525" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11544" href="/lia/part5/Exp/#11544" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11552" class="Symbol">(</a><a id="11553" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="11555" href="/lia/part5/Exp/#11555" class="Bound">n</a><a id="11556" class="Symbol">)</a> <a id="11558" href="/lia/part5/Exp/#11558" class="Bound">x</a> <a id="11560" href="/lia/part5/Exp/#11560" class="Bound">ϱ</a> <a id="11562" class="Symbol">=</a> <a id="11564" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11570" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11589" href="/lia/part5/Exp/#11589" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11597" class="Symbol">(</a><a id="11598" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="11600" href="/lia/part5/Exp/#11600" class="Bound">y</a><a id="11601" class="Symbol">)</a> <a id="11603" href="/lia/part5/Exp/#11603" class="Bound">x</a> <a id="11605" href="/lia/part5/Exp/#11605" class="Bound">ϱ</a>
  <a id="11609" class="Keyword">with</a> <a id="11614" href="/lia/part5/Exp/#11603" class="Bound">x</a> <a id="11616" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="11619" href="/lia/part5/Exp/#11600" class="Bound">y</a>
<a id="11621" class="Symbol">...</a> <a id="11625" class="Symbol">|</a> <a id="11627" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="11631" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11636" class="Symbol">=</a> <a id="11638" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11646" class="Bound">ϱ</a>
<a id="11648" class="Symbol">...</a> <a id="11652" class="Symbol">|</a> <a id="11654" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="11657" class="Symbol">_</a> <a id="11659" class="Symbol">=</a> <a id="11661" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11667" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11686" class="Symbol">{</a><a id="11687" href="/lia/part5/Exp/#11687" class="Bound">e</a><a id="11688" class="Symbol">}</a> <a id="11690" class="Symbol">{</a><a id="11691" href="/lia/part5/Exp/#11691" class="Bound">f</a><a id="11692" class="Symbol">}</a> <a id="11694" href="/lia/part5/Exp/#11694" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11702" class="Symbol">(</a><a id="11703" href="/lia/part5/Exp/#11703" class="Bound">c</a> <a id="11705" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="11707" href="/lia/part5/Exp/#11707" class="Bound">d</a><a id="11708" class="Symbol">)</a> <a id="11710" href="/lia/part5/Exp/#11710" class="Bound">x</a> <a id="11712" href="/lia/part5/Exp/#11712" class="Bound">ϱ</a>
  <a id="11716" class="Keyword">rewrite</a> <a id="11724" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11743" class="Symbol">{</a><a id="11744" href="/lia/part5/Exp/#11687" class="Bound">e</a><a id="11745" class="Symbol">}</a> <a id="11747" class="Symbol">{</a><a id="11748" href="/lia/part5/Exp/#11691" class="Bound">f</a><a id="11749" class="Symbol">}</a> <a id="11751" href="/lia/part5/Exp/#11694" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11759" href="/lia/part5/Exp/#11703" class="Bound">c</a> <a id="11761" href="/lia/part5/Exp/#11710" class="Bound">x</a> <a id="11763" href="/lia/part5/Exp/#11712" class="Bound">ϱ</a> <a id="11765" class="Symbol">|</a>
          <a id="11777" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11796" class="Symbol">{</a><a id="11797" href="/lia/part5/Exp/#11687" class="Bound">e</a><a id="11798" class="Symbol">}</a> <a id="11800" class="Symbol">{</a><a id="11801" href="/lia/part5/Exp/#11691" class="Bound">f</a><a id="11802" class="Symbol">}</a> <a id="11804" href="/lia/part5/Exp/#11694" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11812" href="/lia/part5/Exp/#11707" class="Bound">d</a> <a id="11814" href="/lia/part5/Exp/#11710" class="Bound">x</a> <a id="11816" href="/lia/part5/Exp/#11712" class="Bound">ϱ</a> <a id="11818" class="Symbol">=</a> <a id="11820" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11826" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11845" class="Symbol">{</a><a id="11846" href="/lia/part5/Exp/#11846" class="Bound">e</a><a id="11847" class="Symbol">}</a> <a id="11849" class="Symbol">{</a><a id="11850" href="/lia/part5/Exp/#11850" class="Bound">f</a><a id="11851" class="Symbol">}</a> <a id="11853" href="/lia/part5/Exp/#11853" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11861" class="Symbol">(</a><a id="11862" href="/lia/part5/Exp/#11862" class="Bound">c</a> <a id="11864" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="11866" href="/lia/part5/Exp/#11866" class="Bound">d</a><a id="11867" class="Symbol">)</a> <a id="11869" href="/lia/part5/Exp/#11869" class="Bound">x</a> <a id="11871" href="/lia/part5/Exp/#11871" class="Bound">ϱ</a>
  <a id="11875" class="Keyword">rewrite</a> <a id="11883" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11902" class="Symbol">{</a><a id="11903" href="/lia/part5/Exp/#11846" class="Bound">e</a><a id="11904" class="Symbol">}</a> <a id="11906" class="Symbol">{</a><a id="11907" href="/lia/part5/Exp/#11850" class="Bound">f</a><a id="11908" class="Symbol">}</a> <a id="11910" href="/lia/part5/Exp/#11853" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11918" href="/lia/part5/Exp/#11862" class="Bound">c</a> <a id="11920" href="/lia/part5/Exp/#11869" class="Bound">x</a> <a id="11922" href="/lia/part5/Exp/#11871" class="Bound">ϱ</a> <a id="11924" class="Symbol">|</a>
          <a id="11936" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="11955" class="Symbol">{</a><a id="11956" href="/lia/part5/Exp/#11846" class="Bound">e</a><a id="11957" class="Symbol">}</a> <a id="11959" class="Symbol">{</a><a id="11960" href="/lia/part5/Exp/#11850" class="Bound">f</a><a id="11961" class="Symbol">}</a> <a id="11963" href="/lia/part5/Exp/#11853" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11971" href="/lia/part5/Exp/#11866" class="Bound">d</a> <a id="11973" href="/lia/part5/Exp/#11869" class="Bound">x</a> <a id="11975" href="/lia/part5/Exp/#11871" class="Bound">ϱ</a> <a id="11977" class="Symbol">=</a> <a id="11979" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11985" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="12004" class="Symbol">{</a><a id="12005" href="/lia/part5/Exp/#12005" class="Bound">e</a><a id="12006" class="Symbol">}</a> <a id="12008" class="Symbol">{</a><a id="12009" href="/lia/part5/Exp/#12009" class="Bound">f</a><a id="12010" class="Symbol">}</a> <a id="12012" href="/lia/part5/Exp/#12012" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12020" class="Symbol">(</a><a id="12021" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="12025" href="/lia/part5/Exp/#12025" class="Bound">y</a> <a id="12027" href="/lia/part5/Exp/#12027" class="Bound">c</a> <a id="12029" href="/lia/part5/Exp/#12029" class="Bound">d</a><a id="12030" class="Symbol">)</a> <a id="12032" href="/lia/part5/Exp/#12032" class="Bound">x</a> <a id="12034" href="/lia/part5/Exp/#12034" class="Bound">ϱ</a>
  <a id="12038" class="Keyword">with</a> <a id="12043" href="/lia/part5/Exp/#12032" class="Bound">x</a> <a id="12045" href="/lia/part0/Equality/#3576" class="Field Operator">≡?</a> <a id="12048" href="/lia/part5/Exp/#12025" class="Bound">y</a>
<a id="12050" class="Symbol">...</a> <a id="12054" class="Symbol">|</a> <a id="12056" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="12060" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="12067" class="Keyword">rewrite</a> <a id="12075" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="12094" class="Symbol">{</a><a id="12095" class="Bound">e</a><a id="12096" class="Symbol">}</a> <a id="12098" class="Symbol">{</a><a id="12099" class="Bound">f</a><a id="12100" class="Symbol">}</a> <a id="12102" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12110" class="Bound">c</a> <a id="12112" class="Bound">y</a> <a id="12114" class="Bound">ϱ</a> <a id="12116" class="Symbol">=</a> <a id="12118" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="12123" class="Symbol">...</a> <a id="12127" class="Symbol">|</a> <a id="12129" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="12132" class="Symbol">_</a>
  <a id="12136" class="Keyword">rewrite</a> <a id="12144" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="12163" class="Symbol">{</a><a id="12164" class="Bound">e</a><a id="12165" class="Symbol">}</a> <a id="12167" class="Symbol">{</a><a id="12168" class="Bound">f</a><a id="12169" class="Symbol">}</a> <a id="12171" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12179" class="Bound">c</a> <a id="12181" class="Bound">x</a> <a id="12183" class="Bound">ϱ</a> <a id="12185" class="Symbol">|</a>
          <a id="12197" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a> <a id="12216" class="Symbol">{</a><a id="12217" class="Bound">e</a><a id="12218" class="Symbol">}</a> <a id="12220" class="Symbol">{</a><a id="12221" class="Bound">f</a><a id="12222" class="Symbol">}</a> <a id="12224" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12232" class="Bound">d</a> <a id="12234" class="Bound">x</a> <a id="12236" class="Symbol">(</a><a id="12237" class="Bound">ϱ</a> <a id="12239" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="12241" class="Bound">y</a> <a id="12243" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="12245" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="12247" class="Bound">c</a> <a id="12249" href="/lia/part5/Exp/#6436" class="Function Operator">A[</a> <a id="12252" class="Bound">x</a> <a id="12254" href="/lia/part5/Exp/#6436" class="Function Operator">↦</a> <a id="12256" class="Bound">f</a> <a id="12258" href="/lia/part5/Exp/#6436" class="Function Operator">]</a> <a id="12260" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="12262" class="Bound">ϱ</a> <a id="12264" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="12265" class="Symbol">)</a> <a id="12267" class="Symbol">=</a> <a id="12269" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="full-abstraction"></a><a id="12275" href="/lia/part5/Exp/#12275" class="Function">full-abstraction</a> <a id="12292" class="Symbol">:</a> <a id="12294" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12296" href="/lia/part5/Exp/#11218" class="Function Operator">≈</a> <a id="12298" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12300" href="/lia/part0/Logic/#3145" class="Function Operator">↔</a> <a id="12302" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="12305" href="/lia/part5/Exp/#12305" class="Bound">ϱ</a> <a id="12307" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="12309" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="12311" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12313" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="12315" href="/lia/part5/Exp/#12305" class="Bound">ϱ</a> <a id="12317" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12319" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="12322" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12324" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="12326" href="/lia/part5/Exp/#12305" class="Bound">ϱ</a>
<a id="12328" href="/lia/part5/Exp/#12275" class="Function">full-abstraction</a> <a id="12345" class="Symbol">=</a> <a id="12347" href="/lia/part5/Exp/#11372" class="Function">full-abstraction-1</a> <a id="12366" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="12368" href="/lia/part5/Exp/#11470" class="Function">full-abstraction-2</a></pre>

<h1 id="small-steps-operational-semantics">
<a class="anchor" href="#small-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h1>

<h2 id="global-environment">
<a class="anchor" href="#global-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global environment</h2>

<p>We use global environments and eager semantics.</p>

<pre class="Agda"><a id="12505" class="Keyword">infix</a> <a id="12511" class="Number">4</a> <a id="12513" href="/lia/part5/Exp/#12524" class="Datatype Operator">_⊢_↝_</a>
<a id="12519" class="Keyword">data</a> <a id="_⊢_↝_"></a><a id="12524" href="/lia/part5/Exp/#12524" class="Datatype Operator">_⊢_↝_</a> <a id="12530" class="Symbol">:</a> <a id="12532" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="12536" class="Symbol">→</a> <a id="12538" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="12543" class="Symbol">→</a> <a id="12545" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="12550" class="Symbol">→</a> <a id="12552" class="PrimitiveType">Set</a> <a id="12556" class="Keyword">where</a>

  <a id="_⊢_↝_.↝-Var"></a><a id="12565" href="/lia/part5/Exp/#12565" class="InductiveConstructor">↝-Var</a> <a id="12571" class="Symbol">:</a> <a id="12573" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12575" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12577" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="12579" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="12581" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12583" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12585" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12587" href="/lia/part5/Exp/#605" class="Generalizable">x</a>

  <a id="_⊢_↝_.↝-Add-stop"></a><a id="12592" href="/lia/part5/Exp/#12592" class="InductiveConstructor">↝-Add-stop</a> <a id="12603" class="Symbol">:</a>
    <a id="12609" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12611" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12613" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12615" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12617" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12619" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12621" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="12623" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12625" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12627" class="Symbol">(</a><a id="12628" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12630" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="12633" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="12634" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Add-left"></a><a id="12639" href="/lia/part5/Exp/#12639" class="InductiveConstructor">↝-Add-left</a> <a id="12650" class="Symbol">:</a>
    <a id="12656" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12658" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12660" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12662" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12664" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12667" class="Symbol">→</a>
    <a id="12673" class="Comment">------------------</a>
    <a id="12696" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12698" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12700" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12702" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12704" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12706" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12708" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12711" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12713" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Add-right"></a><a id="12718" href="/lia/part5/Exp/#12718" class="InductiveConstructor">↝-Add-right</a> <a id="12730" class="Symbol">:</a>
    <a id="12736" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12738" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12740" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12742" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12744" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="12747" class="Symbol">→</a>
    <a id="12753" class="Comment">------------------</a>
    <a id="12776" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12778" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12780" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12782" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12784" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12786" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12788" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12790" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12792" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Mul-stop"></a><a id="12798" href="/lia/part5/Exp/#12798" class="InductiveConstructor">↝-Mul-stop</a> <a id="12809" class="Symbol">:</a>
    <a id="12815" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12817" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12819" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12821" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12823" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12825" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12827" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="12829" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12831" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12833" class="Symbol">(</a><a id="12834" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12836" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="12839" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="12840" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Mul-left"></a><a id="12845" href="/lia/part5/Exp/#12845" class="InductiveConstructor">↝-Mul-left</a> <a id="12856" class="Symbol">:</a>
    <a id="12862" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12864" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12866" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12868" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12870" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12873" class="Symbol">→</a>
    <a id="12879" class="Comment">------------------</a>
    <a id="12902" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12904" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12906" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12908" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12910" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12912" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12914" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12917" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12919" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Mul-right"></a><a id="12924" href="/lia/part5/Exp/#12924" class="InductiveConstructor">↝-Mul-right</a> <a id="12936" class="Symbol">:</a>
    <a id="12942" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12944" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12946" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12948" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12950" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="12953" class="Symbol">→</a>
    <a id="12959" class="Comment">------------------</a>
    <a id="12982" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12984" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="12986" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12988" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12990" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12992" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="12994" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12996" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12998" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-stop"></a><a id="13004" href="/lia/part5/Exp/#13004" class="InductiveConstructor">↝-Let-stop</a> <a id="13015" class="Symbol">:</a>
    <a id="13021" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13023" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13025" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13029" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13031" class="Symbol">(</a><a id="13032" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13034" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="13035" class="Symbol">)</a> <a id="13037" class="Symbol">(</a><a id="13038" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13040" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="13041" class="Symbol">)</a> <a id="13043" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13045" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13047" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_⊢_↝_.↝-Let-1"></a><a id="13052" href="/lia/part5/Exp/#13052" class="InductiveConstructor">↝-Let-1</a> <a id="13060" class="Symbol">:</a>
    <a id="13066" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13068" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="13070" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13072" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="13074" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="13076" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="13078" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13080" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13082" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13084" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="13087" class="Symbol">→</a>
    <a id="13093" class="Comment">----------------------------------</a>
    <a id="13132" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13134" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13136" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13140" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13142" class="Symbol">(</a><a id="13143" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13145" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="13146" class="Symbol">)</a> <a id="13148" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13150" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13152" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13156" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13158" class="Symbol">(</a><a id="13159" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13161" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="13162" class="Symbol">)</a> <a id="13164" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-2"></a><a id="13170" href="/lia/part5/Exp/#13170" class="InductiveConstructor">↝-Let-2</a> <a id="13178" class="Symbol">:</a>
    <a id="13184" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13186" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13188" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13190" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13192" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="13195" class="Symbol">→</a>
    <a id="13201" class="Comment">--------------------------</a>
    <a id="13232" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13234" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13236" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13240" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13242" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13244" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13246" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13248" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13252" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13254" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="13257" href="/lia/part5/Exp/#971" class="Generalizable">f</a></pre>

<h3 id="preservation">Preservation</h3>

<pre class="Agda"><a id="preservation"></a><a id="13286" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13299" class="Symbol">:</a>
  <a id="13303" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13305" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="13307" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13309" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="13311" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13313" class="Symbol">→</a>
  <a id="13317" class="Comment">-----------------</a>
  <a id="13337" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="13339" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13341" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="13343" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13345" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="13347" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="13349" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13351" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="13353" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="13356" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13369" href="/lia/part5/Exp/#12565" class="InductiveConstructor">↝-Var</a> <a id="13375" class="Symbol">=</a> <a id="13377" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13383" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13396" href="/lia/part5/Exp/#12592" class="InductiveConstructor">↝-Add-stop</a> <a id="13407" class="Symbol">=</a> <a id="13409" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13414" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13427" class="Symbol">(</a><a id="13428" href="/lia/part5/Exp/#12639" class="InductiveConstructor">↝-Add-left</a> <a id="13439" href="/lia/part5/Exp/#13439" class="Bound">step</a><a id="13443" class="Symbol">)</a> <a id="13445" class="Keyword">rewrite</a> <a id="13453" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13466" href="/lia/part5/Exp/#13439" class="Bound">step</a> <a id="13471" class="Symbol">=</a> <a id="13473" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13478" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13491" class="Symbol">(</a><a id="13492" href="/lia/part5/Exp/#12718" class="InductiveConstructor">↝-Add-right</a> <a id="13504" href="/lia/part5/Exp/#13504" class="Bound">step</a><a id="13508" class="Symbol">)</a> <a id="13510" class="Keyword">rewrite</a> <a id="13518" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13531" href="/lia/part5/Exp/#13504" class="Bound">step</a> <a id="13536" class="Symbol">=</a> <a id="13538" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13544" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13557" href="/lia/part5/Exp/#12798" class="InductiveConstructor">↝-Mul-stop</a> <a id="13568" class="Symbol">=</a> <a id="13570" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13575" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13588" class="Symbol">(</a><a id="13589" href="/lia/part5/Exp/#12845" class="InductiveConstructor">↝-Mul-left</a> <a id="13600" href="/lia/part5/Exp/#13600" class="Bound">step</a><a id="13604" class="Symbol">)</a> <a id="13606" class="Keyword">rewrite</a> <a id="13614" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13627" href="/lia/part5/Exp/#13600" class="Bound">step</a> <a id="13632" class="Symbol">=</a> <a id="13634" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13639" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13652" class="Symbol">(</a><a id="13653" href="/lia/part5/Exp/#12924" class="InductiveConstructor">↝-Mul-right</a> <a id="13665" href="/lia/part5/Exp/#13665" class="Bound">step</a><a id="13669" class="Symbol">)</a> <a id="13671" class="Keyword">rewrite</a> <a id="13679" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13692" href="/lia/part5/Exp/#13665" class="Bound">step</a> <a id="13697" class="Symbol">=</a> <a id="13699" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13705" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13718" href="/lia/part5/Exp/#13004" class="InductiveConstructor">↝-Let-stop</a> <a id="13729" class="Symbol">=</a> <a id="13731" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13736" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13749" class="Symbol">(</a><a id="13750" href="/lia/part5/Exp/#13052" class="InductiveConstructor">↝-Let-1</a> <a id="13758" href="/lia/part5/Exp/#13758" class="Bound">step</a><a id="13762" class="Symbol">)</a> <a id="13764" class="Keyword">rewrite</a> <a id="13772" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13785" href="/lia/part5/Exp/#13758" class="Bound">step</a> <a id="13790" class="Symbol">=</a> <a id="13792" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13797" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13810" class="Symbol">(</a><a id="13811" href="/lia/part5/Exp/#13170" class="InductiveConstructor">↝-Let-2</a> <a id="13819" href="/lia/part5/Exp/#13819" class="Bound">step</a><a id="13823" class="Symbol">)</a> <a id="13825" class="Keyword">rewrite</a> <a id="13833" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="13846" href="/lia/part5/Exp/#13819" class="Bound">step</a> <a id="13851" class="Symbol">=</a> <a id="13853" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="transitive-closure">Transitive closure</h3>

<p>We define the transitive closure of the small-step operational
semantics.</p>

<pre class="Agda"><a id="13966" class="Keyword">data</a> <a id="_⊢_↝*_"></a><a id="13971" href="/lia/part5/Exp/#13971" class="Datatype Operator">_⊢_↝*_</a> <a id="13978" class="Symbol">:</a> <a id="13980" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="13984" class="Symbol">→</a> <a id="13986" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="13991" class="Symbol">→</a> <a id="13993" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="13998" class="Symbol">→</a> <a id="14000" class="PrimitiveType">Set</a> <a id="14004" class="Keyword">where</a>

    <a id="_⊢_↝*_.stop"></a><a id="14015" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="14020" class="Symbol">:</a> <a id="14022" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14024" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14026" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14028" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14031" href="/lia/part5/Exp/#966" class="Generalizable">e</a>

    <a id="_⊢_↝*_.one"></a><a id="14038" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="14042" class="Symbol">:</a> <a id="14044" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14046" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="14048" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14050" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="14052" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14054" class="Symbol">→</a>
          <a id="14066" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14068" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14070" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14072" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14075" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="14077" class="Symbol">→</a>
          <a id="14089" class="Comment">----------</a>
          <a id="14110" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14112" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14114" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14116" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14119" href="/lia/part5/Exp/#976" class="Generalizable">g</a></pre>

<p>We can indeed show that <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> is transitive with a standard
induction.</p>

<pre class="Agda"><a id="↝*-trans"></a><a id="14205" href="/lia/part5/Exp/#14205" class="Function">↝*-trans</a> <a id="14214" class="Symbol">:</a>
  <a id="14218" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14220" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14222" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14224" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14227" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14229" class="Symbol">→</a>
  <a id="14233" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14235" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14237" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14239" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14242" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="14244" class="Symbol">→</a>
  <a id="14248" class="Comment">----------</a>
  <a id="14261" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14263" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14265" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14267" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14270" href="/lia/part5/Exp/#976" class="Generalizable">g</a>

<a id="14273" href="/lia/part5/Exp/#14205" class="Function">↝*-trans</a> <a id="14282" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="14287" href="/lia/part5/Exp/#14287" class="Bound">δ</a> <a id="14289" class="Symbol">=</a> <a id="14291" href="/lia/part5/Exp/#14287" class="Bound">δ</a>
<a id="14293" href="/lia/part5/Exp/#14205" class="Function">↝*-trans</a> <a id="14302" class="Symbol">(</a><a id="14303" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="14307" href="/lia/part5/Exp/#14307" class="Bound">step</a> <a id="14312" href="/lia/part5/Exp/#14312" class="Bound">δ₁</a><a id="14314" class="Symbol">)</a> <a id="14316" href="/lia/part5/Exp/#14316" class="Bound">δ₂</a> <a id="14319" class="Symbol">=</a> <a id="14321" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="14325" href="/lia/part5/Exp/#14307" class="Bound">step</a> <a id="14330" class="Symbol">(</a><a id="14331" href="/lia/part5/Exp/#14205" class="Function">↝*-trans</a> <a id="14340" href="/lia/part5/Exp/#14312" class="Bound">δ₁</a> <a id="14343" href="/lia/part5/Exp/#14316" class="Bound">δ₂</a><a id="14345" class="Symbol">)</a></pre>

<p>An easy induction based on <a href="#preservation"><code class="language-plaintext highlighter-rouge">preservation</code></a> shows that
the denotational semantics is preserved by the transitive closure of the
small-step operational semantics.</p>

<pre class="Agda"><a id="preservation*"></a><a id="14521" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="14535" class="Symbol">:</a>
  <a id="14539" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14541" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14543" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14545" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14548" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14550" class="Symbol">→</a>
  <a id="14554" class="Comment">-----------------</a>
  <a id="14574" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14576" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14578" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14580" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14582" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14584" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14586" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14588" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14590" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="14593" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="14607" class="Symbol">{</a><a id="14608" href="/lia/part5/Exp/#14608" class="Bound">ϱ</a><a id="14609" class="Symbol">}</a> <a id="14611" class="Symbol">{</a><a id="14612" href="/lia/part5/Exp/#14612" class="Bound">e</a><a id="14613" class="Symbol">}</a> <a id="14615" class="Symbol">{</a><a id="14616" class="DottedPattern Symbol">.</a><a id="14617" href="/lia/part5/Exp/#14612" class="DottedPattern Bound">e</a><a id="14618" class="Symbol">}</a> <a id="14620" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="14625" class="Symbol">=</a> <a id="14627" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="14632" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="14646" class="Symbol">{</a><a id="14647" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a><a id="14648" class="Symbol">}</a> <a id="14650" class="Symbol">{</a><a id="14651" href="/lia/part5/Exp/#14651" class="Bound">e</a><a id="14652" class="Symbol">}</a> <a id="14654" class="Symbol">{</a><a id="14655" href="/lia/part5/Exp/#14655" class="Bound">g</a><a id="14656" class="Symbol">}</a> <a id="14658" class="Symbol">(</a><a id="14659" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="14663" class="Symbol">{</a><a id="14664" class="Argument">f</a> <a id="14666" class="Symbol">=</a> <a id="14668" href="/lia/part5/Exp/#14668" class="Bound">f</a><a id="14669" class="Symbol">}</a> <a id="14671" href="/lia/part5/Exp/#14671" class="Bound">step</a> <a id="14676" href="/lia/part5/Exp/#14676" class="Bound">der</a><a id="14679" class="Symbol">)</a> <a id="14681" class="Symbol">=</a>
    <a id="14687" href="/lia/part0/Equality/#2528" class="Function Operator">begin</a>
        <a id="14701" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14703" href="/lia/part5/Exp/#14651" class="Bound">e</a> <a id="14705" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14707" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a> <a id="14709" href="/lia/part0/Equality/#2673" class="Function Operator">≡⟨</a> <a id="14712" href="/lia/part5/Exp/#13286" class="Function">preservation</a> <a id="14725" class="Symbol">{</a><a id="14726" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a><a id="14727" class="Symbol">}</a> <a id="14729" class="Symbol">{</a><a id="14730" href="/lia/part5/Exp/#14651" class="Bound">e</a><a id="14731" class="Symbol">}</a> <a id="14733" class="Symbol">{</a><a id="14734" href="/lia/part5/Exp/#14668" class="Bound">f</a><a id="14735" class="Symbol">}</a> <a id="14737" href="/lia/part5/Exp/#14671" class="Bound">step</a> <a id="14742" href="/lia/part0/Equality/#2673" class="Function Operator">⟩</a>
        <a id="14752" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14754" href="/lia/part5/Exp/#14668" class="Bound">f</a> <a id="14756" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14758" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a> <a id="14760" href="/lia/part0/Equality/#2673" class="Function Operator">≡⟨</a> <a id="14763" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="14777" class="Symbol">{</a><a id="14778" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a><a id="14779" class="Symbol">}</a> <a id="14781" class="Symbol">{</a><a id="14782" href="/lia/part5/Exp/#14668" class="Bound">f</a><a id="14783" class="Symbol">}</a> <a id="14785" class="Symbol">{</a><a id="14786" href="/lia/part5/Exp/#14655" class="Bound">g</a><a id="14787" class="Symbol">}</a> <a id="14789" href="/lia/part5/Exp/#14676" class="Bound">der</a> <a id="14793" href="/lia/part0/Equality/#2673" class="Function Operator">⟩</a>
        <a id="14803" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14805" href="/lia/part5/Exp/#14655" class="Bound">g</a> <a id="14807" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14809" href="/lia/part5/Exp/#14647" class="Bound">ϱ</a>
    <a id="14815" href="/lia/part0/Equality/#2774" class="Function Operator">∎</a></pre>

<p>This immediately implies that whenever the small-step semantics
terminates producing a number <code class="language-plaintext highlighter-rouge">m</code>, then this is the right result.</p>

<pre class="Agda"><a id="↝*-agree-⟦⟧"></a><a id="14957" href="/lia/part5/Exp/#14957" class="Function">↝*-agree-⟦⟧</a> <a id="14969" class="Symbol">:</a>
  <a id="14973" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14975" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="14977" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14979" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="14982" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="14984" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="14986" class="Symbol">→</a>
  <a id="14990" class="Comment">--------------</a>
  <a id="15007" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="15009" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="15011" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="15013" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15015" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="15017" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="15020" href="/lia/part5/Exp/#14957" class="Function">↝*-agree-⟦⟧</a> <a id="15032" href="/lia/part5/Exp/#15032" class="Bound">der</a> <a id="15036" class="Symbol">=</a> <a id="15038" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="15042" class="Symbol">(</a><a id="15043" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="15057" href="/lia/part5/Exp/#15032" class="Bound">der</a><a id="15060" class="Symbol">)</a></pre>

<h3 id="deterministic-values">Deterministic values</h3>

<p>Notice that small-step semantics is a non-deterministic relation: In
general there may be several ways to reduce an expression (as witnessed
by the rules <code class="language-plaintext highlighter-rouge">↝-Add-left</code> and <code class="language-plaintext highlighter-rouge">↝-Add-right</code> for instance).</p>

<p>However, as an immediate consequence of preservation we have that if two
numerical values are eventually produced, then they necessarily are the
same number.</p>

<pre class="Agda"><a id="↝*-det"></a><a id="15457" href="/lia/part5/Exp/#15457" class="Function">↝*-det</a> <a id="15464" class="Symbol">:</a>
  <a id="15468" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15470" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15472" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15474" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15477" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="15481" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="15483" class="Symbol">→</a>
  <a id="15487" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15489" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15491" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15493" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15496" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="15500" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="15502" class="Symbol">→</a>
  <a id="15506" class="Comment">-----------------</a>
  <a id="15526" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="15528" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="15530" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

<a id="15533" href="/lia/part5/Exp/#15457" class="Function">↝*-det</a> <a id="15540" href="/lia/part5/Exp/#15540" class="Bound">der1</a> <a id="15545" href="/lia/part5/Exp/#15545" class="Bound">der2</a> <a id="15550" class="Keyword">rewrite</a> <a id="15558" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="15562" class="Symbol">(</a><a id="15563" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="15577" href="/lia/part5/Exp/#15540" class="Bound">der1</a><a id="15581" class="Symbol">)</a> <a id="15583" class="Symbol">|</a> <a id="15585" href="/lia/part5/Exp/#14521" class="Function">preservation*</a> <a id="15599" href="/lia/part5/Exp/#15545" class="Bound">der2</a> <a id="15604" class="Symbol">=</a> <a id="15606" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="congruence">Congruence</h3>

<p>We show that the transitive closure <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> respects subexpressions.</p>

<pre class="Agda"><a id="add-cong-1"></a><a id="15707" href="/lia/part5/Exp/#15707" class="Function">add-cong-1</a> <a id="15718" class="Symbol">:</a>
  <a id="15722" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15724" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15726" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15728" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15731" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="15734" class="Symbol">→</a>
  <a id="15738" class="Comment">-------------------</a>
  <a id="15760" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15762" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15764" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15766" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15768" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15770" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15773" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="15776" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15778" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="15781" href="/lia/part5/Exp/#15707" class="Function">add-cong-1</a> <a id="15792" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="15797" class="Symbol">=</a> <a id="15799" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="15804" href="/lia/part5/Exp/#15707" class="Function">add-cong-1</a> <a id="15815" class="Symbol">(</a><a id="15816" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="15820" href="/lia/part5/Exp/#15820" class="Bound">x</a> <a id="15822" href="/lia/part5/Exp/#15822" class="Bound">d</a><a id="15823" class="Symbol">)</a> <a id="15825" class="Symbol">=</a> <a id="15827" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="15831" class="Symbol">(</a><a id="15832" href="/lia/part5/Exp/#12639" class="InductiveConstructor">↝-Add-left</a> <a id="15843" href="/lia/part5/Exp/#15820" class="Bound">x</a><a id="15844" class="Symbol">)</a> <a id="15846" class="Symbol">(</a><a id="15847" href="/lia/part5/Exp/#15707" class="Function">add-cong-1</a> <a id="15858" href="/lia/part5/Exp/#15822" class="Bound">d</a><a id="15859" class="Symbol">)</a>

<a id="add-cong-2"></a><a id="15862" href="/lia/part5/Exp/#15862" class="Function">add-cong-2</a> <a id="15873" class="Symbol">:</a>
  <a id="15877" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15879" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15881" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15883" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15886" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="15889" class="Symbol">→</a>
  <a id="15893" class="Comment">-------------------</a>
  <a id="15915" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15917" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="15919" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15921" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15923" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15925" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="15928" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15930" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15932" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="15936" href="/lia/part5/Exp/#15862" class="Function">add-cong-2</a> <a id="15947" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="15952" class="Symbol">=</a> <a id="15954" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="15959" href="/lia/part5/Exp/#15862" class="Function">add-cong-2</a> <a id="15970" class="Symbol">(</a><a id="15971" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="15975" href="/lia/part5/Exp/#15975" class="Bound">x</a> <a id="15977" href="/lia/part5/Exp/#15977" class="Bound">d</a><a id="15978" class="Symbol">)</a> <a id="15980" class="Symbol">=</a> <a id="15982" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="15986" class="Symbol">(</a><a id="15987" href="/lia/part5/Exp/#12718" class="InductiveConstructor">↝-Add-right</a> <a id="15999" href="/lia/part5/Exp/#15975" class="Bound">x</a><a id="16000" class="Symbol">)</a> <a id="16002" class="Symbol">(</a><a id="16003" href="/lia/part5/Exp/#15862" class="Function">add-cong-2</a> <a id="16014" href="/lia/part5/Exp/#15977" class="Bound">d</a><a id="16015" class="Symbol">)</a>

<a id="mul-cong-1"></a><a id="16018" href="/lia/part5/Exp/#16018" class="Function">mul-cong-1</a> <a id="16029" class="Symbol">:</a>
  <a id="16033" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16035" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16037" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16039" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16042" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16045" class="Symbol">→</a>
  <a id="16049" class="Comment">-------------------</a>
  <a id="16071" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16073" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16075" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16077" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16079" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16081" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16084" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16087" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16089" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="16092" href="/lia/part5/Exp/#16018" class="Function">mul-cong-1</a> <a id="16103" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="16108" class="Symbol">=</a> <a id="16110" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="16115" href="/lia/part5/Exp/#16018" class="Function">mul-cong-1</a> <a id="16126" class="Symbol">(</a><a id="16127" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16131" href="/lia/part5/Exp/#16131" class="Bound">x</a> <a id="16133" href="/lia/part5/Exp/#16133" class="Bound">d</a><a id="16134" class="Symbol">)</a> <a id="16136" class="Symbol">=</a> <a id="16138" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16142" class="Symbol">(</a><a id="16143" href="/lia/part5/Exp/#12845" class="InductiveConstructor">↝-Mul-left</a> <a id="16154" href="/lia/part5/Exp/#16131" class="Bound">x</a><a id="16155" class="Symbol">)</a> <a id="16157" class="Symbol">(</a><a id="16158" href="/lia/part5/Exp/#16018" class="Function">mul-cong-1</a> <a id="16169" href="/lia/part5/Exp/#16133" class="Bound">d</a><a id="16170" class="Symbol">)</a>

<a id="mul-cong-2"></a><a id="16173" href="/lia/part5/Exp/#16173" class="Function">mul-cong-2</a> <a id="16184" class="Symbol">:</a>
  <a id="16188" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16190" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16192" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16194" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16197" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="16200" class="Symbol">→</a>
  <a id="16204" class="Comment">-------------------</a>
  <a id="16226" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16228" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16230" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16232" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16234" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16236" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16239" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16241" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16243" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="16247" href="/lia/part5/Exp/#16173" class="Function">mul-cong-2</a> <a id="16258" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="16263" class="Symbol">=</a> <a id="16265" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="16270" href="/lia/part5/Exp/#16173" class="Function">mul-cong-2</a> <a id="16281" class="Symbol">(</a><a id="16282" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16286" href="/lia/part5/Exp/#16286" class="Bound">x</a> <a id="16288" href="/lia/part5/Exp/#16288" class="Bound">d</a><a id="16289" class="Symbol">)</a> <a id="16291" class="Symbol">=</a> <a id="16293" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16297" class="Symbol">(</a><a id="16298" href="/lia/part5/Exp/#12924" class="InductiveConstructor">↝-Mul-right</a> <a id="16310" href="/lia/part5/Exp/#16286" class="Bound">x</a><a id="16311" class="Symbol">)</a> <a id="16313" class="Symbol">(</a><a id="16314" href="/lia/part5/Exp/#16173" class="Function">mul-cong-2</a> <a id="16325" href="/lia/part5/Exp/#16288" class="Bound">d</a><a id="16326" class="Symbol">)</a>

<a id="let-cong-1"></a><a id="16329" href="/lia/part5/Exp/#16329" class="Function">let-cong-1</a> <a id="16340" class="Symbol">:</a>
  <a id="16344" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16346" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16348" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16350" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16353" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16356" class="Symbol">→</a>
  <a id="16360" class="Comment">----------------------------</a>
  <a id="16391" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16393" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16395" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16399" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16401" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16403" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16405" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16408" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16412" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16414" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16417" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="16420" href="/lia/part5/Exp/#16329" class="Function">let-cong-1</a> <a id="16431" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="16436" class="Symbol">=</a> <a id="16438" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="16443" href="/lia/part5/Exp/#16329" class="Function">let-cong-1</a> <a id="16454" class="Symbol">(</a><a id="16455" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16459" href="/lia/part5/Exp/#16459" class="Bound">x</a> <a id="16461" href="/lia/part5/Exp/#16461" class="Bound">d</a><a id="16462" class="Symbol">)</a> <a id="16464" class="Symbol">=</a> <a id="16466" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16470" class="Symbol">(</a><a id="16471" href="/lia/part5/Exp/#13170" class="InductiveConstructor">↝-Let-2</a> <a id="16479" href="/lia/part5/Exp/#16459" class="Bound">x</a><a id="16480" class="Symbol">)</a> <a id="16482" class="Symbol">(</a><a id="16483" href="/lia/part5/Exp/#16329" class="Function">let-cong-1</a> <a id="16494" href="/lia/part5/Exp/#16461" class="Bound">d</a><a id="16495" class="Symbol">)</a>

<a id="let-cong-2"></a><a id="16498" href="/lia/part5/Exp/#16498" class="Function">let-cong-2</a> <a id="16509" class="Symbol">:</a>
  <a id="16513" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16515" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="16517" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16519" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="16521" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="16523" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="16525" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16527" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16529" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16532" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="16535" class="Symbol">→</a>
  <a id="16539" class="Comment">-----------------------------------</a>
  <a id="16577" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16579" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16581" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16585" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16587" class="Symbol">(</a><a id="16588" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="16590" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="16591" class="Symbol">)</a> <a id="16593" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16595" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16598" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16602" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16604" class="Symbol">(</a><a id="16605" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="16607" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="16608" class="Symbol">)</a> <a id="16610" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="16614" href="/lia/part5/Exp/#16498" class="Function">let-cong-2</a> <a id="16625" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="16630" class="Symbol">=</a> <a id="16632" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>
<a id="16637" href="/lia/part5/Exp/#16498" class="Function">let-cong-2</a> <a id="16648" class="Symbol">(</a><a id="16649" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16653" href="/lia/part5/Exp/#16653" class="Bound">x</a> <a id="16655" href="/lia/part5/Exp/#16655" class="Bound">d</a><a id="16656" class="Symbol">)</a> <a id="16658" class="Symbol">=</a> <a id="16660" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="16664" class="Symbol">(</a><a id="16665" href="/lia/part5/Exp/#13052" class="InductiveConstructor">↝-Let-1</a> <a id="16673" href="/lia/part5/Exp/#16653" class="Bound">x</a><a id="16674" class="Symbol">)</a> <a id="16676" class="Symbol">(</a><a id="16677" href="/lia/part5/Exp/#16498" class="Function">let-cong-2</a> <a id="16688" href="/lia/part5/Exp/#16655" class="Bound">d</a><a id="16689" class="Symbol">)</a></pre>

<h3 id="relational-reasoning">Relational reasoning</h3>

<p>We introduce some syntactic sugaring to conveniently write chains of
small steps.</p>

<pre class="Agda"><a id="16809" class="Keyword">infixr</a> <a id="16816" class="Number">2</a> <a id="16818" href="/lia/part5/Exp/#16856" class="Function Operator">_↝*⟨⟩_</a> <a id="16825" href="/lia/part5/Exp/#16923" class="Function Operator">_↝*⟨_⟩_</a> <a id="16833" href="/lia/part5/Exp/#17026" class="Function Operator">_↝⟨_⟩_</a> 
<a id="16841" class="Keyword">infix</a>  <a id="16848" class="Number">3</a> <a id="16850" href="/lia/part5/Exp/#17133" class="Function Operator">_↝*∎</a>

<a id="_↝*⟨⟩_"></a><a id="16856" href="/lia/part5/Exp/#16856" class="Function Operator">_↝*⟨⟩_</a> <a id="16863" class="Symbol">:</a> <a id="16865" class="Symbol">∀</a> <a id="16867" class="Symbol">{</a><a id="16868" href="/lia/part5/Exp/#16868" class="Bound">ϱ</a><a id="16869" class="Symbol">}</a> <a id="16871" href="/lia/part5/Exp/#16871" class="Bound">e</a> <a id="16873" class="Symbol">{</a><a id="16874" href="/lia/part5/Exp/#16874" class="Bound">f</a><a id="16875" class="Symbol">}</a> <a id="16877" class="Symbol">→</a> <a id="16879" href="/lia/part5/Exp/#16868" class="Bound">ϱ</a> <a id="16881" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16883" href="/lia/part5/Exp/#16871" class="Bound">e</a> <a id="16885" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16888" href="/lia/part5/Exp/#16874" class="Bound">f</a> <a id="16890" class="Symbol">→</a> <a id="16892" href="/lia/part5/Exp/#16868" class="Bound">ϱ</a> <a id="16894" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16896" href="/lia/part5/Exp/#16871" class="Bound">e</a> <a id="16898" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16901" href="/lia/part5/Exp/#16874" class="Bound">f</a>
<a id="16903" href="/lia/part5/Exp/#16903" class="Bound">e</a> <a id="16905" href="/lia/part5/Exp/#16856" class="Function Operator">↝*⟨⟩</a> <a id="16910" href="/lia/part5/Exp/#16910" class="Bound">e↝*f</a> <a id="16915" class="Symbol">=</a> <a id="16917" href="/lia/part5/Exp/#16910" class="Bound">e↝*f</a>

<a id="_↝*⟨_⟩_"></a><a id="16923" href="/lia/part5/Exp/#16923" class="Function Operator">_↝*⟨_⟩_</a> <a id="16931" class="Symbol">:</a> <a id="16933" class="Symbol">∀</a> <a id="16935" class="Symbol">{</a><a id="16936" href="/lia/part5/Exp/#16936" class="Bound">ϱ</a><a id="16937" class="Symbol">}</a> <a id="16939" href="/lia/part5/Exp/#16939" class="Bound">e</a> <a id="16941" class="Symbol">{</a><a id="16942" href="/lia/part5/Exp/#16942" class="Bound">f</a> <a id="16944" href="/lia/part5/Exp/#16944" class="Bound">g</a><a id="16945" class="Symbol">}</a> <a id="16947" class="Symbol">→</a> <a id="16949" href="/lia/part5/Exp/#16936" class="Bound">ϱ</a> <a id="16951" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16953" href="/lia/part5/Exp/#16939" class="Bound">e</a> <a id="16955" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16958" href="/lia/part5/Exp/#16942" class="Bound">f</a> <a id="16960" class="Symbol">→</a> <a id="16962" href="/lia/part5/Exp/#16936" class="Bound">ϱ</a> <a id="16964" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16966" href="/lia/part5/Exp/#16942" class="Bound">f</a> <a id="16968" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16971" href="/lia/part5/Exp/#16944" class="Bound">g</a> <a id="16973" class="Symbol">→</a> <a id="16975" href="/lia/part5/Exp/#16936" class="Bound">ϱ</a> <a id="16977" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="16979" href="/lia/part5/Exp/#16939" class="Bound">e</a> <a id="16981" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="16984" href="/lia/part5/Exp/#16944" class="Bound">g</a>
<a id="16986" href="/lia/part5/Exp/#16986" class="Bound">e</a> <a id="16988" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="16992" href="/lia/part5/Exp/#16992" class="Bound">e↝*f</a> <a id="16997" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a> <a id="16999" href="/lia/part5/Exp/#16999" class="Bound">f↝*g</a> <a id="17004" class="Symbol">=</a> <a id="17006" href="/lia/part5/Exp/#14205" class="Function">↝*-trans</a> <a id="17015" href="/lia/part5/Exp/#16992" class="Bound">e↝*f</a> <a id="17020" href="/lia/part5/Exp/#16999" class="Bound">f↝*g</a>

<a id="_↝⟨_⟩_"></a><a id="17026" href="/lia/part5/Exp/#17026" class="Function Operator">_↝⟨_⟩_</a> <a id="17033" class="Symbol">:</a> <a id="17035" class="Symbol">∀</a> <a id="17037" class="Symbol">{</a><a id="17038" href="/lia/part5/Exp/#17038" class="Bound">ϱ</a><a id="17039" class="Symbol">}</a> <a id="17041" href="/lia/part5/Exp/#17041" class="Bound">e</a> <a id="17043" class="Symbol">{</a><a id="17044" href="/lia/part5/Exp/#17044" class="Bound">f</a> <a id="17046" href="/lia/part5/Exp/#17046" class="Bound">g</a><a id="17047" class="Symbol">}</a> <a id="17049" class="Symbol">→</a> <a id="17051" href="/lia/part5/Exp/#17038" class="Bound">ϱ</a> <a id="17053" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="17055" href="/lia/part5/Exp/#17041" class="Bound">e</a> <a id="17057" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="17059" href="/lia/part5/Exp/#17044" class="Bound">f</a> <a id="17061" class="Symbol">→</a> <a id="17063" href="/lia/part5/Exp/#17038" class="Bound">ϱ</a> <a id="17065" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="17067" href="/lia/part5/Exp/#17044" class="Bound">f</a> <a id="17069" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="17072" href="/lia/part5/Exp/#17046" class="Bound">g</a> <a id="17074" class="Symbol">→</a> <a id="17076" href="/lia/part5/Exp/#17038" class="Bound">ϱ</a> <a id="17078" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="17080" href="/lia/part5/Exp/#17041" class="Bound">e</a> <a id="17082" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="17085" href="/lia/part5/Exp/#17046" class="Bound">g</a>
<a id="17087" href="/lia/part5/Exp/#17087" class="Bound">e</a> <a id="17089" href="/lia/part5/Exp/#17026" class="Function Operator">↝⟨</a> <a id="17092" href="/lia/part5/Exp/#17092" class="Bound">e↝f</a> <a id="17096" href="/lia/part5/Exp/#17026" class="Function Operator">⟩</a> <a id="17098" href="/lia/part5/Exp/#17098" class="Bound">f↝*g</a> <a id="17103" class="Symbol">=</a> <a id="17105" href="/lia/part5/Exp/#17087" class="Bound">e</a> <a id="17107" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="17111" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="17115" href="/lia/part5/Exp/#17092" class="Bound">e↝f</a> <a id="17119" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a> <a id="17124" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a> <a id="17126" href="/lia/part5/Exp/#17098" class="Bound">f↝*g</a> 

<a id="_↝*∎"></a><a id="17133" href="/lia/part5/Exp/#17133" class="Function Operator">_↝*∎</a> <a id="17138" class="Symbol">:</a> <a id="17140" class="Symbol">∀</a> <a id="17142" href="/lia/part5/Exp/#17142" class="Bound">e</a> <a id="17144" class="Symbol">→</a> <a id="17146" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="17148" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="17150" href="/lia/part5/Exp/#17142" class="Bound">e</a> <a id="17152" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="17155" href="/lia/part5/Exp/#17142" class="Bound">e</a>
<a id="17157" href="/lia/part5/Exp/#17157" class="Bound">e</a> <a id="17159" href="/lia/part5/Exp/#17133" class="Function Operator">↝*∎</a> <a id="17163" class="Symbol">=</a> <a id="17165" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a></pre>

<h3 id="exercise-termination-weak-normalisation">
<strong>Exercise</strong>: Termination (Weak normalisation)</h3>

<p>So far we have shown that the small-step semantics produces the right
result, <em>if it produces any result at all</em>. In fact, an operational
semantics that never reaches a Numerical value trivially satisfies this
condition.</p>

<p>We prove that the small step operational semantics can always reache
some numerical value after a finite number of steps. In other word, we
prove below that the rewrite is <em>weakly normalising</em>.</p>

<pre class="Agda"><a id="weak-normalisation"></a><a id="17648" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17667" class="Symbol">:</a> <a id="17669" class="Symbol">∀</a> <a id="17671" href="/lia/part5/Exp/#17671" class="Bound">e</a> <a id="17673" class="Symbol">→</a> <a id="17675" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="17677" href="/lia/part5/Exp/#13971" class="Datatype Operator">⊢</a> <a id="17679" href="/lia/part5/Exp/#17671" class="Bound">e</a> <a id="17681" href="/lia/part5/Exp/#13971" class="Datatype Operator">↝*</a> <a id="17684" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17686" class="Symbol">(</a><a id="17687" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17689" href="/lia/part5/Exp/#17671" class="Bound">e</a> <a id="17691" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17693" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a><a id="17694" class="Symbol">)</a>

<a id="17697" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17716" class="Symbol">(</a><a id="17717" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17719" href="/lia/part5/Exp/#17719" class="Bound">n</a><a id="17720" class="Symbol">)</a> <a id="17722" class="Symbol">=</a> <a id="17724" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>

<a id="17730" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17749" class="Symbol">(</a><a id="17750" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="17752" href="/lia/part5/Exp/#17752" class="Bound">x</a><a id="17753" class="Symbol">)</a> <a id="17755" class="Symbol">=</a> <a id="17757" href="/lia/part5/Exp/#14038" class="InductiveConstructor">one</a> <a id="17761" href="/lia/part5/Exp/#12565" class="InductiveConstructor">↝-Var</a> <a id="17767" href="/lia/part5/Exp/#14015" class="InductiveConstructor">stop</a>

<a id="17773" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17792" class="Symbol">{</a><a id="17793" href="/lia/part5/Exp/#17793" class="Bound">ϱ</a><a id="17794" class="Symbol">}</a> <a id="17796" class="Symbol">(</a><a id="17797" href="/lia/part5/Exp/#17797" class="Bound">e</a> <a id="17799" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17801" href="/lia/part5/Exp/#17801" class="Bound">f</a><a id="17802" class="Symbol">)</a>
  <a id="17806" class="Keyword">with</a> <a id="17811" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17830" href="/lia/part5/Exp/#17797" class="Bound">e</a> <a id="17832" class="Symbol">|</a> <a id="17834" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="17853" href="/lia/part5/Exp/#17801" class="Bound">f</a>
<a id="17855" class="Symbol">...</a> <a id="17859" class="Symbol">|</a> <a id="17861" href="/lia/part5/Exp/#17861" class="Bound">de</a> <a id="17864" class="Symbol">|</a> <a id="17866" href="/lia/part5/Exp/#17866" class="Bound">df</a> <a id="17869" class="Symbol">=</a> 
  <a id="17874" class="Bound">e</a> <a id="17876" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17878" class="Bound">f</a> <a id="17880" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="17884" href="/lia/part5/Exp/#15707" class="Function">add-cong-1</a> <a id="17895" href="/lia/part5/Exp/#17861" class="Bound">de</a> <a id="17898" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
  <a id="17902" class="Symbol">(</a><a id="17903" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17905" class="Symbol">(</a><a id="17906" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17908" class="Bound">e</a> <a id="17910" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17912" class="Bound">ϱ</a><a id="17913" class="Symbol">))</a> <a id="17916" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17918" class="Bound">f</a> <a id="17920" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="17924" href="/lia/part5/Exp/#15862" class="Function">add-cong-2</a> <a id="17935" href="/lia/part5/Exp/#17866" class="Bound">df</a> <a id="17938" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
  <a id="17942" class="Symbol">(</a><a id="17943" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17945" class="Symbol">(</a><a id="17946" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17948" class="Bound">e</a> <a id="17950" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17952" class="Bound">ϱ</a><a id="17953" class="Symbol">))</a> <a id="17956" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17958" class="Symbol">(</a><a id="17959" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17961" class="Symbol">(</a><a id="17962" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17964" class="Bound">f</a> <a id="17966" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17968" class="Bound">ϱ</a><a id="17969" class="Symbol">))</a> <a id="17972" href="/lia/part5/Exp/#17026" class="Function Operator">↝⟨</a> <a id="17975" href="/lia/part5/Exp/#12592" class="InductiveConstructor">↝-Add-stop</a> <a id="17986" href="/lia/part5/Exp/#17026" class="Function Operator">⟩</a>
  <a id="17990" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17992" class="Symbol">(</a><a id="17993" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17995" class="Bound">e</a> <a id="17997" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17999" class="Bound">ϱ</a> <a id="18001" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="18004" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18006" class="Bound">f</a> <a id="18008" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18010" class="Bound">ϱ</a><a id="18011" class="Symbol">)</a>
  <a id="18015" href="/lia/part5/Exp/#17133" class="Function Operator">↝*∎</a>

<a id="18020" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18039" class="Symbol">{</a><a id="18040" href="/lia/part5/Exp/#18040" class="Bound">ϱ</a><a id="18041" class="Symbol">}</a> <a id="18043" class="Symbol">(</a><a id="18044" href="/lia/part5/Exp/#18044" class="Bound">e</a> <a id="18046" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18048" href="/lia/part5/Exp/#18048" class="Bound">f</a><a id="18049" class="Symbol">)</a>
  <a id="18053" class="Keyword">with</a> <a id="18058" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18077" href="/lia/part5/Exp/#18044" class="Bound">e</a> <a id="18079" class="Symbol">|</a> <a id="18081" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18100" href="/lia/part5/Exp/#18048" class="Bound">f</a>
<a id="18102" class="Symbol">...</a> <a id="18106" class="Symbol">|</a> <a id="18108" href="/lia/part5/Exp/#18108" class="Bound">de</a> <a id="18111" class="Symbol">|</a> <a id="18113" href="/lia/part5/Exp/#18113" class="Bound">df</a> <a id="18116" class="Symbol">=</a> 
  <a id="18121" class="Bound">e</a> <a id="18123" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18125" class="Bound">f</a> <a id="18127" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="18131" href="/lia/part5/Exp/#16018" class="Function">mul-cong-1</a> <a id="18142" href="/lia/part5/Exp/#18108" class="Bound">de</a> <a id="18145" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
  <a id="18149" class="Symbol">(</a><a id="18150" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18152" class="Symbol">(</a><a id="18153" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18155" class="Bound">e</a> <a id="18157" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18159" class="Bound">ϱ</a><a id="18160" class="Symbol">))</a> <a id="18163" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18165" class="Bound">f</a> <a id="18167" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="18171" href="/lia/part5/Exp/#16173" class="Function">mul-cong-2</a> <a id="18182" href="/lia/part5/Exp/#18113" class="Bound">df</a> <a id="18185" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
  <a id="18189" class="Symbol">(</a><a id="18190" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18192" class="Symbol">(</a><a id="18193" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18195" class="Bound">e</a> <a id="18197" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18199" class="Bound">ϱ</a><a id="18200" class="Symbol">))</a> <a id="18203" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18205" class="Symbol">(</a><a id="18206" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18208" class="Symbol">(</a><a id="18209" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18211" class="Bound">f</a> <a id="18213" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18215" class="Bound">ϱ</a><a id="18216" class="Symbol">))</a> <a id="18219" href="/lia/part5/Exp/#17026" class="Function Operator">↝⟨</a> <a id="18222" href="/lia/part5/Exp/#12798" class="InductiveConstructor">↝-Mul-stop</a> <a id="18233" href="/lia/part5/Exp/#17026" class="Function Operator">⟩</a>
  <a id="18237" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18239" class="Symbol">(</a><a id="18240" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18242" class="Bound">e</a> <a id="18244" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18246" class="Bound">ϱ</a> <a id="18248" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="18251" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18253" class="Bound">f</a> <a id="18255" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18257" class="Bound">ϱ</a><a id="18258" class="Symbol">)</a>
  <a id="18262" href="/lia/part5/Exp/#17133" class="Function Operator">↝*∎</a>

<a id="18267" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18286" class="Symbol">{</a><a id="18287" href="/lia/part5/Exp/#18287" class="Bound">ϱ</a><a id="18288" class="Symbol">}</a> <a id="18290" class="Symbol">(</a><a id="18291" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18295" href="/lia/part5/Exp/#18295" class="Bound">x</a> <a id="18297" href="/lia/part5/Exp/#18297" class="Bound">e</a> <a id="18299" href="/lia/part5/Exp/#18299" class="Bound">f</a><a id="18300" class="Symbol">)</a>
  <a id="18304" class="Keyword">with</a> <a id="18309" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18328" href="/lia/part5/Exp/#18297" class="Bound">e</a> <a id="18330" class="Symbol">|</a> <a id="18332" href="/lia/part5/Exp/#17648" class="Function">weak-normalisation</a> <a id="18351" href="/lia/part5/Exp/#18299" class="Bound">f</a>
<a id="18353" class="Symbol">...</a> <a id="18357" class="Symbol">|</a> <a id="18359" href="/lia/part5/Exp/#18359" class="Bound">de</a> <a id="18362" class="Symbol">|</a> <a id="18364" href="/lia/part5/Exp/#18364" class="Bound">df</a> <a id="18367" class="Symbol">=</a>
    <a id="18373" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18377" class="Bound">x</a> <a id="18379" class="Bound">e</a> <a id="18381" class="Bound">f</a> <a id="18383" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="18387" href="/lia/part5/Exp/#16329" class="Function">let-cong-1</a> <a id="18398" href="/lia/part5/Exp/#18359" class="Bound">de</a> <a id="18401" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
    <a id="18407" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18411" class="Bound">x</a> <a id="18413" class="Symbol">(</a><a id="18414" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18416" class="Symbol">(</a><a id="18417" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18419" class="Bound">e</a> <a id="18421" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18423" class="Bound">ϱ</a><a id="18424" class="Symbol">))</a> <a id="18427" class="Bound">f</a> <a id="18429" href="/lia/part5/Exp/#16923" class="Function Operator">↝*⟨</a> <a id="18433" href="/lia/part5/Exp/#16498" class="Function">let-cong-2</a> <a id="18444" href="/lia/part5/Exp/#18364" class="Bound">df</a> <a id="18447" href="/lia/part5/Exp/#16923" class="Function Operator">⟩</a>
    <a id="18453" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18457" class="Bound">x</a> <a id="18459" class="Symbol">(</a><a id="18460" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18462" class="Symbol">(</a><a id="18463" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18465" class="Bound">e</a> <a id="18467" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18469" class="Bound">ϱ</a><a id="18470" class="Symbol">))</a> <a id="18473" class="Symbol">(</a><a id="18474" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18476" class="Symbol">(</a><a id="18477" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18479" class="Bound">f</a> <a id="18481" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18483" class="Symbol">(</a><a id="18484" class="Bound">ϱ</a> <a id="18486" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="18488" class="Bound">x</a> <a id="18490" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="18492" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18494" class="Bound">e</a> <a id="18496" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18498" class="Bound">ϱ</a> <a id="18500" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="18501" class="Symbol">)))</a>
        <a id="18513" href="/lia/part5/Exp/#17026" class="Function Operator">↝⟨</a> <a id="18516" href="/lia/part5/Exp/#13004" class="InductiveConstructor">↝-Let-stop</a> <a id="18527" href="/lia/part5/Exp/#17026" class="Function Operator">⟩</a>
    <a id="18533" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18535" class="Symbol">(</a><a id="18536" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18538" class="Bound">f</a> <a id="18540" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18542" class="Symbol">(</a><a id="18543" class="Bound">ϱ</a> <a id="18545" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="18547" class="Bound">x</a> <a id="18549" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="18551" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18553" class="Bound">e</a> <a id="18555" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18557" class="Bound">ϱ</a> <a id="18559" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="18560" class="Symbol">))</a>
    <a id="18567" href="/lia/part5/Exp/#17133" class="Function Operator">↝*∎</a></pre>

<h3 id="exercise-strong-normalisation">
<strong>Exercise</strong>: Strong normalisation</h3>

<p>The termination property above is also called <em>weak normalisation</em>,
which means that there exists a finite reduction sequence <code class="language-plaintext highlighter-rouge">e ↝* f</code>
reaching a normal form (i.e. a value) <code class="language-plaintext highlighter-rouge">f ≡ Num m</code>. We show below even
<em>strong normalisation</em>, namely, <em>every</em> reduction sequence starting from
<code class="language-plaintext highlighter-rouge">e</code> is finite.</p>

<p>To this end, we introduce a notion of <em>size</em> of arithmetic expressions.</p>

<pre class="Agda"><a id="size"></a><a id="18987" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="18992" class="Symbol">:</a> <a id="18994" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="18999" class="Symbol">→</a> <a id="19001" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="19003" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19008" class="Symbol">(</a><a id="19009" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="19013" href="/lia/part5/Exp/#19013" class="Bound">x</a><a id="19014" class="Symbol">)</a> <a id="19016" class="Symbol">=</a> <a id="19018" class="Number">0</a>
<a id="19020" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19025" class="Symbol">(</a><a id="19026" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="19030" href="/lia/part5/Exp/#19030" class="Bound">x</a><a id="19031" class="Symbol">)</a> <a id="19033" class="Symbol">=</a> <a id="19035" class="Number">1</a>
<a id="19037" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19042" class="Symbol">(</a><a id="19043" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="19047" href="/lia/part5/Exp/#19047" class="Bound">e</a> <a id="19049" href="/lia/part5/Exp/#19049" class="Bound">f</a><a id="19050" class="Symbol">)</a> <a id="19052" class="Symbol">=</a> <a id="19054" class="Number">1</a> <a id="19056" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19059" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19064" href="/lia/part5/Exp/#19047" class="Bound">e</a> <a id="19066" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19069" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19074" href="/lia/part5/Exp/#19049" class="Bound">f</a>
<a id="19076" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19081" class="Symbol">(</a><a id="19082" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="19086" href="/lia/part5/Exp/#19086" class="Bound">e</a> <a id="19088" href="/lia/part5/Exp/#19088" class="Bound">f</a><a id="19089" class="Symbol">)</a> <a id="19091" class="Symbol">=</a> <a id="19093" class="Number">1</a> <a id="19095" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19098" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19103" href="/lia/part5/Exp/#19086" class="Bound">e</a> <a id="19105" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19108" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19113" href="/lia/part5/Exp/#19088" class="Bound">f</a>
<a id="19115" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19120" class="Symbol">(</a><a id="19121" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="19125" href="/lia/part5/Exp/#19125" class="Bound">x</a> <a id="19127" href="/lia/part5/Exp/#19127" class="Bound">e</a> <a id="19129" href="/lia/part5/Exp/#19129" class="Bound">f</a><a id="19130" class="Symbol">)</a> <a id="19132" class="Symbol">=</a> <a id="19134" class="Number">1</a> <a id="19136" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19139" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19144" href="/lia/part5/Exp/#19127" class="Bound">e</a> <a id="19146" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19149" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19154" href="/lia/part5/Exp/#19129" class="Bound">f</a></pre>

<p>In the lemma below we show that the size of an expression strictly
decreases at each step, which implies strong normalisation.</p>

<pre class="Agda"><a id="size-down"></a><a id="19293" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19303" class="Symbol">:</a>
  <a id="19307" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="19309" href="/lia/part5/Exp/#12524" class="Datatype Operator">⊢</a> <a id="19311" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="19313" href="/lia/part5/Exp/#12524" class="Datatype Operator">↝</a> <a id="19315" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="19317" class="Symbol">→</a>
  <a id="19321" class="Comment">---------------</a>
  <a id="19339" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19344" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="19346" href="/lia/part0/Naturals/#1318" class="Function Operator">&gt;</a> <a id="19348" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19353" href="/lia/part5/Exp/#971" class="Generalizable">f</a>
  
<a id="19358" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19368" href="/lia/part5/Exp/#12565" class="InductiveConstructor">↝-Var</a> <a id="19374" class="Symbol">=</a> <a id="19376" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19380" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>

<a id="19385" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19395" href="/lia/part5/Exp/#12592" class="InductiveConstructor">↝-Add-stop</a> <a id="19406" class="Symbol">=</a> <a id="19408" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19412" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19416" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19426" class="Symbol">(</a><a id="19427" href="/lia/part5/Exp/#12639" class="InductiveConstructor">↝-Add-left</a> <a id="19438" href="/lia/part5/Exp/#19438" class="Bound">δ</a><a id="19439" class="Symbol">)</a> <a id="19441" class="Symbol">=</a> <a id="19443" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19447" class="Symbol">(</a><a id="19448" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="19457" class="Symbol">(</a><a id="19458" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19468" href="/lia/part5/Exp/#19438" class="Bound">δ</a><a id="19469" class="Symbol">))</a>
<a id="19472" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19482" class="Symbol">{</a><a id="19483" class="Argument">e</a> <a id="19485" class="Symbol">=</a> <a id="19487" href="/lia/part5/Exp/#19487" class="Bound">e</a> <a id="19489" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="19491" class="Symbol">_}</a> <a id="19494" class="Symbol">(</a><a id="19495" href="/lia/part5/Exp/#12718" class="InductiveConstructor">↝-Add-right</a> <a id="19507" href="/lia/part5/Exp/#19507" class="Bound">δ</a><a id="19508" class="Symbol">)</a> <a id="19510" class="Symbol">=</a> <a id="19512" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19516" class="Symbol">(</a><a id="19517" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="19527" class="Symbol">{</a><a id="19528" class="Argument">n</a> <a id="19530" class="Symbol">=</a> <a id="19532" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19537" href="/lia/part5/Exp/#19487" class="Bound">e</a><a id="19538" class="Symbol">}</a> <a id="19540" class="Symbol">(</a><a id="19541" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19551" href="/lia/part5/Exp/#19507" class="Bound">δ</a><a id="19552" class="Symbol">))</a>

<a id="19556" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19566" href="/lia/part5/Exp/#12798" class="InductiveConstructor">↝-Mul-stop</a> <a id="19577" class="Symbol">=</a> <a id="19579" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19583" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19587" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19597" class="Symbol">(</a><a id="19598" href="/lia/part5/Exp/#12845" class="InductiveConstructor">↝-Mul-left</a> <a id="19609" href="/lia/part5/Exp/#19609" class="Bound">δ</a><a id="19610" class="Symbol">)</a> <a id="19612" class="Symbol">=</a> <a id="19614" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19618" class="Symbol">(</a><a id="19619" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="19628" class="Symbol">(</a><a id="19629" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19639" href="/lia/part5/Exp/#19609" class="Bound">δ</a><a id="19640" class="Symbol">))</a>
<a id="19643" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19653" class="Symbol">{</a><a id="19654" class="Argument">e</a> <a id="19656" class="Symbol">=</a> <a id="19658" href="/lia/part5/Exp/#19658" class="Bound">e</a> <a id="19660" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="19662" class="Symbol">_}</a> <a id="19665" class="Symbol">(</a><a id="19666" href="/lia/part5/Exp/#12924" class="InductiveConstructor">↝-Mul-right</a> <a id="19678" href="/lia/part5/Exp/#19678" class="Bound">δ</a><a id="19679" class="Symbol">)</a> <a id="19681" class="Symbol">=</a> <a id="19683" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19687" class="Symbol">(</a><a id="19688" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="19698" class="Symbol">{</a><a id="19699" class="Argument">n</a> <a id="19701" class="Symbol">=</a> <a id="19703" href="/lia/part5/Exp/#18987" class="Function">size</a> <a id="19708" href="/lia/part5/Exp/#19658" class="Bound">e</a><a id="19709" class="Symbol">}</a> <a id="19711" class="Symbol">(</a><a id="19712" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19722" href="/lia/part5/Exp/#19678" class="Bound">δ</a><a id="19723" class="Symbol">))</a>

<a id="19727" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19737" href="/lia/part5/Exp/#13004" class="InductiveConstructor">↝-Let-stop</a> <a id="19748" class="Symbol">=</a> <a id="19750" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19754" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19758" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19768" class="Symbol">(</a><a id="19769" href="/lia/part5/Exp/#13052" class="InductiveConstructor">↝-Let-1</a> <a id="19777" href="/lia/part5/Exp/#19777" class="Bound">δ</a><a id="19778" class="Symbol">)</a> <a id="19780" class="Symbol">=</a> <a id="19782" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19786" class="Symbol">(</a><a id="19787" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19797" href="/lia/part5/Exp/#19777" class="Bound">δ</a><a id="19798" class="Symbol">)</a>
<a id="19800" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19810" class="Symbol">(</a><a id="19811" href="/lia/part5/Exp/#13170" class="InductiveConstructor">↝-Let-2</a> <a id="19819" href="/lia/part5/Exp/#19819" class="Bound">δ</a><a id="19820" class="Symbol">)</a> <a id="19822" class="Symbol">=</a> <a id="19824" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19828" class="Symbol">(</a><a id="19829" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="19838" class="Symbol">(</a><a id="19839" href="/lia/part5/Exp/#19293" class="Function">size-down</a> <a id="19849" href="/lia/part5/Exp/#19819" class="Bound">δ</a><a id="19850" class="Symbol">))</a></pre>

<p>In the two “right” cases we need to give some extra hint for one
implicit parameter.</p>

<h2 id="local-environments">
<a class="anchor" href="#local-environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Local environments</h2>

<p>An alternative way to deal with the environment is to use it in a local
way. However this causes troubles. The naive way to write the derivation
rules is incorrect:</p>

<pre class="Agda"><a id="20137" class="Keyword">infix</a> <a id="20143" class="Number">4</a> <a id="20145" href="/lia/part5/Exp/#20158" class="Datatype Operator">_,_↝_,_</a>
<a id="20153" class="Keyword">data</a> <a id="_,_↝_,_"></a><a id="20158" href="/lia/part5/Exp/#20158" class="Datatype Operator">_,_↝_,_</a> <a id="20166" class="Symbol">:</a> <a id="20168" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20173" class="Symbol">→</a> <a id="20175" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20179" class="Symbol">→</a> <a id="20181" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20186" class="Symbol">→</a> <a id="20188" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20192" class="Symbol">→</a> <a id="20194" class="PrimitiveType">Set</a> <a id="20198" class="Keyword">where</a>

  <a id="_,_↝_,_.↝-Var"></a><a id="20207" href="/lia/part5/Exp/#20207" class="InductiveConstructor">↝-Var</a> <a id="20213" class="Symbol">:</a> <a id="20215" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="20217" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20219" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20221" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20223" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20225" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20227" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20229" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20231" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20233" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-stop"></a><a id="20238" href="/lia/part5/Exp/#20238" class="InductiveConstructor">↝-Add-stop</a> <a id="20249" class="Symbol">:</a>
    <a id="20255" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20257" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20259" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20261" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20263" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="20265" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20267" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20269" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20271" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20273" class="Symbol">(</a><a id="20274" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20276" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="20279" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="20280" class="Symbol">)</a> <a id="20282" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20284" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-left"></a><a id="20289" href="/lia/part5/Exp/#20289" class="InductiveConstructor">↝-Add-left</a> <a id="20300" class="Symbol">:</a>
    <a id="20306" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20308" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20310" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20312" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20314" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20317" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20319" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20322" class="Symbol">→</a>
    <a id="20328" class="Comment">-----------------------</a>
    <a id="20356" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20358" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20360" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20362" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20364" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20366" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20368" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20371" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20373" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20375" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20377" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Add-right"></a><a id="20383" href="/lia/part5/Exp/#20383" class="InductiveConstructor">↝-Add-right</a> <a id="20395" class="Symbol">:</a>
    <a id="20401" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20403" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20405" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20407" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20409" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20412" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20414" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20417" class="Symbol">→</a>
    <a id="20423" class="Comment">------------------</a>
    <a id="20446" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20448" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20450" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20452" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20454" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20456" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20458" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20460" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20462" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20465" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20467" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-stop"></a><a id="20473" href="/lia/part5/Exp/#20473" class="InductiveConstructor">↝-Let-stop</a> <a id="20484" class="Symbol">:</a>
    <a id="20490" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20494" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20496" class="Symbol">(</a><a id="20497" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20499" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20500" class="Symbol">)</a> <a id="20502" class="Symbol">(</a><a id="20503" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20505" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="20506" class="Symbol">)</a> <a id="20508" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20510" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20512" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20514" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20516" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="20518" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20520" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Let-1"></a><a id="20525" href="/lia/part5/Exp/#20525" class="InductiveConstructor">↝-Let-1</a> <a id="20533" class="Symbol">:</a>
    <a id="20539" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20541" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20543" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20545" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="20547" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20549" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="20551" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20553" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="20555" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20557" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20560" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20562" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20565" class="Symbol">→</a>
    <a id="20571" class="Comment">---------------------------------------</a>
    <a id="20615" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20619" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20621" class="Symbol">(</a><a id="20622" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20624" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20625" class="Symbol">)</a> <a id="20627" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20629" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20631" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20633" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20635" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20639" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20641" class="Symbol">(</a><a id="20642" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20644" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20645" class="Symbol">)</a> <a id="20647" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20650" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20652" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-2"></a><a id="20658" href="/lia/part5/Exp/#20658" class="InductiveConstructor">↝-Let-2</a> <a id="20666" class="Symbol">:</a>
    <a id="20672" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20674" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20676" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20678" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20680" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20683" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20685" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20688" class="Symbol">→</a>
    <a id="20694" class="Comment">------------------------------</a>
    <a id="20729" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20733" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20735" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20737" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20739" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20741" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20743" href="/lia/part5/Exp/#20158" class="Datatype Operator">↝</a> <a id="20745" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20749" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20751" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20754" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20756" href="/lia/part5/Exp/#20158" class="Datatype Operator">,</a> <a id="20758" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a></pre>

<p>One option would be to add a new construct in the language
<code class="language-plaintext highlighter-rouge">e then x is n</code> to save and restore the previous value of <code class="language-plaintext highlighter-rouge">x</code>.</p>

<h1 id="big-steps-operational-semantics">
<a class="anchor" href="#big-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Big-steps operational semantics</h1>

<pre class="Agda"><a id="20928" class="Keyword">infix</a> <a id="20934" class="Number">4</a> <a id="20936" href="/lia/part5/Exp/#20947" class="Datatype Operator">_,_⇒_</a>
<a id="20942" class="Keyword">data</a> <a id="_,_⇒_"></a><a id="20947" href="/lia/part5/Exp/#20947" class="Datatype Operator">_,_⇒_</a> <a id="20953" class="Symbol">:</a> <a id="20955" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20960" class="Symbol">→</a> <a id="20962" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20966" class="Symbol">→</a> <a id="20968" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="20970" class="Symbol">→</a> <a id="20972" class="PrimitiveType">Set</a> <a id="20976" class="Keyword">where</a>

  <a id="_,_⇒_.⇒-Num"></a><a id="20985" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a> <a id="20991" class="Symbol">:</a>
    <a id="20997" class="Comment">-------------</a>
    <a id="21015" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="21019" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21021" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21023" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21025" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21027" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Var"></a><a id="21032" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a> <a id="21038" class="Symbol">:</a>
    <a id="21044" class="Comment">---------------</a>
    <a id="21064" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="21068" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21070" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21072" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21074" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21076" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21078" href="/lia/part5/Exp/#605" class="Generalizable">x</a>

  <a id="_,_⇒_.⇒-Add"></a><a id="21083" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="21089" class="Symbol">:</a>
    <a id="21095" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21097" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21099" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21101" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21103" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21105" class="Symbol">→</a>
    <a id="21111" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21113" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21115" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21117" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21119" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21121" class="Symbol">→</a>
    <a id="21127" class="Comment">------------------</a>
    <a id="21150" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21152" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21154" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21156" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21158" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21160" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21162" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21164" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="21167" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Mul"></a><a id="21172" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="21178" class="Symbol">:</a>
    <a id="21184" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21186" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21188" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21190" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21192" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21194" class="Symbol">→</a>
    <a id="21200" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21202" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21204" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21206" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21208" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21210" class="Symbol">→</a>
    <a id="21216" class="Comment">------------------</a>
    <a id="21239" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21241" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21243" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21245" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21247" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21249" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21251" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21253" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="21256" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Let"></a><a id="21261" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="21267" class="Symbol">:</a>
    <a id="21273" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21275" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21277" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21279" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21281" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21283" class="Symbol">→</a>
    <a id="21289" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21291" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21293" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21295" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21297" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21299" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21301" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21303" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21305" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21307" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21309" class="Symbol">→</a>
    <a id="21315" class="Comment">---------------------</a>
    <a id="21341" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21345" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21347" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21349" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21351" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21353" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21355" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21357" href="/lia/part5/Exp/#991" class="Generalizable">n</a></pre>

<p>Example derivation:</p>

<pre class="Agda"><a id="x0"></a><a id="21389" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21392" class="Symbol">=</a> <a id="21394" class="Number">0</a>
<a id="e0"></a><a id="21396" href="/lia/part5/Exp/#21396" class="Function">e0</a> <a id="21399" class="Symbol">=</a> <a id="21401" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21405" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21408" class="Symbol">(</a><a id="21409" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21411" class="Number">2</a> <a id="21413" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21415" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21417" class="Number">3</a><a id="21418" class="Symbol">)</a> <a id="21420" class="Symbol">(</a><a id="21421" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21423" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21426" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21428" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21430" class="Number">2</a><a id="21431" class="Symbol">)</a> 

<a id="21435" href="/lia/part5/Exp/#21435" class="Function">_</a> <a id="21437" class="Symbol">:</a> <a id="21439" href="/lia/part5/Exp/#21396" class="Function">e0</a> <a id="21442" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21444" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21447" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21449" class="Number">10</a>
<a id="21452" class="Symbol">_</a> <a id="21454" class="Symbol">=</a> <a id="21456" href="/lia/part0/TList/#253" class="InductiveConstructor">BEGIN</a>
    <a id="21466" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21471" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21473" class="Number">2</a> <a id="21475" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21477" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21480" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21482" class="Number">2</a>                               <a id="21514" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21517" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a>
    <a id="21527" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21532" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21534" class="Number">3</a> <a id="21536" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21538" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21541" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21543" class="Number">3</a>                               <a id="21575" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21578" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a>
    <a id="21588" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21593" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21595" class="Number">2</a> <a id="21597" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21599" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21601" class="Number">3</a> <a id="21603" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21605" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21608" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21610" class="Number">5</a>                         <a id="21636" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21642" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="21648" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21651" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21656" class="Number">1</a> <a id="21658" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21660" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="21670" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21675" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21677" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21680" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21682" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21685" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21687" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21690" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21692" class="Number">5</a> <a id="21694" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21696" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21698" class="Number">5</a>                   <a id="21718" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21721" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a>
    <a id="21731" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21736" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21738" class="Number">2</a> <a id="21740" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21742" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21745" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21747" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21750" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21752" class="Number">5</a> <a id="21754" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21756" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21758" class="Number">2</a>                    <a id="21779" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21782" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a>
    <a id="21792" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21797" class="Symbol">(</a><a id="21798" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21800" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21803" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21805" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21807" class="Number">2</a><a id="21808" class="Symbol">)</a> <a id="21810" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21812" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21815" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21817" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21820" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21822" class="Number">5</a> <a id="21824" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21826" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21828" class="Number">10</a>          <a id="21840" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21846" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="21852" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21855" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21860" class="Number">1</a> <a id="21862" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21864" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="21874" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21879" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21883" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21886" class="Symbol">(</a><a id="21887" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21889" class="Number">2</a> <a id="21891" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21893" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21895" class="Number">3</a><a id="21896" class="Symbol">)</a> <a id="21898" class="Symbol">(</a><a id="21899" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21901" href="/lia/part5/Exp/#21389" class="Function">x0</a> <a id="21904" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21906" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21908" class="Number">2</a><a id="21909" class="Symbol">)</a> <a id="21911" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="21913" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21916" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="21918" class="Number">10</a>  <a id="21922" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21928" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="21934" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21937" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21942" class="Number">3</a> <a id="21944" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21946" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>
    <a id="21955" href="/lia/part0/TList/#1233" class="Function">END</a></pre>

<h2 id="evaluator-interpreter">
<a class="anchor" href="#evaluator-interpreter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluator (interpreter)</h2>

<p>Luckily we can automatically produce the derivations as in the previous
example.</p>

<pre class="Agda"><a id="eval"></a><a id="22078" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22083" class="Symbol">:</a> <a id="22085" class="Symbol">∀</a> <a id="22087" href="/lia/part5/Exp/#22087" class="Bound">e</a> <a id="22089" href="/lia/part5/Exp/#22089" class="Bound">ϱ</a> <a id="22091" class="Symbol">→</a> <a id="22093" href="/lia/part0/Logic/#461" class="Function">∃[</a> <a id="22096" href="/lia/part5/Exp/#22096" class="Bound">n</a> <a id="22098" href="/lia/part0/Logic/#461" class="Function">]</a> <a id="22100" href="/lia/part5/Exp/#22087" class="Bound">e</a> <a id="22102" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="22104" href="/lia/part5/Exp/#22089" class="Bound">ϱ</a> <a id="22106" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="22108" href="/lia/part5/Exp/#22096" class="Bound">n</a>

<a id="22111" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22116" class="Symbol">(</a><a id="22117" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="22119" href="/lia/part5/Exp/#22119" class="Bound">n</a><a id="22120" class="Symbol">)</a> <a id="22122" href="/lia/part5/Exp/#22122" class="Bound">ϱ</a> <a id="22124" class="Symbol">=</a> <a id="22126" href="/lia/part5/Exp/#22119" class="Bound">n</a> <a id="22128" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22130" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a>

<a id="22137" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22142" class="Symbol">(</a><a id="22143" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="22145" href="/lia/part5/Exp/#22145" class="Bound">x</a><a id="22146" class="Symbol">)</a> <a id="22148" href="/lia/part5/Exp/#22148" class="Bound">ϱ</a> <a id="22150" class="Symbol">=</a> <a id="22152" href="/lia/part5/Exp/#22148" class="Bound">ϱ</a> <a id="22154" href="/lia/part5/Exp/#22145" class="Bound">x</a> <a id="22156" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22158" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a>

<a id="22165" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22170" class="Symbol">(</a><a id="22171" href="/lia/part5/Exp/#22171" class="Bound">e</a> <a id="22173" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="22175" href="/lia/part5/Exp/#22175" class="Bound">f</a><a id="22176" class="Symbol">)</a> <a id="22178" href="/lia/part5/Exp/#22178" class="Bound">ϱ</a>
  <a id="22182" class="Keyword">with</a> <a id="22187" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22192" href="/lia/part5/Exp/#22171" class="Bound">e</a> <a id="22194" href="/lia/part5/Exp/#22178" class="Bound">ϱ</a> <a id="22196" class="Symbol">|</a> <a id="22198" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22203" href="/lia/part5/Exp/#22175" class="Bound">f</a> <a id="22205" href="/lia/part5/Exp/#22178" class="Bound">ϱ</a>
<a id="22207" class="Symbol">...</a> <a id="22211" class="Symbol">|</a> <a id="22213" href="/lia/part5/Exp/#22213" class="Bound">m</a> <a id="22215" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22217" href="/lia/part5/Exp/#22217" class="Bound">δ</a> <a id="22219" class="Symbol">|</a> <a id="22221" href="/lia/part5/Exp/#22221" class="Bound">n</a> <a id="22223" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22225" href="/lia/part5/Exp/#22225" class="Bound">σ</a> <a id="22227" class="Symbol">=</a> <a id="22229" href="/lia/part5/Exp/#22213" class="Bound">m</a> <a id="22231" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22234" href="/lia/part5/Exp/#22221" class="Bound">n</a> <a id="22236" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22238" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="22244" href="/lia/part5/Exp/#22217" class="Bound">δ</a> <a id="22246" href="/lia/part5/Exp/#22225" class="Bound">σ</a>

<a id="22249" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22254" class="Symbol">(</a><a id="22255" href="/lia/part5/Exp/#22255" class="Bound">e</a> <a id="22257" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="22259" href="/lia/part5/Exp/#22259" class="Bound">f</a><a id="22260" class="Symbol">)</a> <a id="22262" href="/lia/part5/Exp/#22262" class="Bound">ϱ</a>
  <a id="22266" class="Keyword">with</a> <a id="22271" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22276" href="/lia/part5/Exp/#22255" class="Bound">e</a> <a id="22278" href="/lia/part5/Exp/#22262" class="Bound">ϱ</a> <a id="22280" class="Symbol">|</a> <a id="22282" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22287" href="/lia/part5/Exp/#22259" class="Bound">f</a> <a id="22289" href="/lia/part5/Exp/#22262" class="Bound">ϱ</a>
<a id="22291" class="Symbol">...</a> <a id="22295" class="Symbol">|</a> <a id="22297" href="/lia/part5/Exp/#22297" class="Bound">m</a> <a id="22299" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22301" href="/lia/part5/Exp/#22301" class="Bound">δ</a> <a id="22303" class="Symbol">|</a> <a id="22305" href="/lia/part5/Exp/#22305" class="Bound">n</a> <a id="22307" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22309" href="/lia/part5/Exp/#22309" class="Bound">σ</a> <a id="22311" class="Symbol">=</a> <a id="22313" href="/lia/part5/Exp/#22297" class="Bound">m</a> <a id="22315" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="22318" href="/lia/part5/Exp/#22305" class="Bound">n</a> <a id="22320" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22322" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="22328" href="/lia/part5/Exp/#22301" class="Bound">δ</a> <a id="22330" href="/lia/part5/Exp/#22309" class="Bound">σ</a>

<a id="22333" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22338" class="Symbol">(</a><a id="22339" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="22343" href="/lia/part5/Exp/#22343" class="Bound">x</a> <a id="22345" href="/lia/part5/Exp/#22345" class="Bound">e</a> <a id="22347" href="/lia/part5/Exp/#22347" class="Bound">f</a><a id="22348" class="Symbol">)</a> <a id="22350" href="/lia/part5/Exp/#22350" class="Bound">ϱ</a>
  <a id="22354" class="Keyword">with</a> <a id="22359" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22364" href="/lia/part5/Exp/#22345" class="Bound">e</a> <a id="22366" href="/lia/part5/Exp/#22350" class="Bound">ϱ</a>
<a id="22368" class="Symbol">...</a> <a id="22372" class="Symbol">|</a> <a id="22374" href="/lia/part5/Exp/#22374" class="Bound">m</a> <a id="22376" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22378" href="/lia/part5/Exp/#22378" class="Bound">δ</a> 
  <a id="22383" class="Keyword">with</a> <a id="22388" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22393" class="Bound">f</a> <a id="22395" class="Symbol">(</a><a id="22396" class="Bound">ϱ</a> <a id="22398" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="22400" class="Bound">x</a> <a id="22402" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="22404" href="/lia/part5/Exp/#22374" class="Bound">m</a> <a id="22406" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="22407" class="Symbol">)</a>
<a id="22409" class="Symbol">...</a> <a id="22413" class="Symbol">|</a> <a id="22415" href="/lia/part5/Exp/#22415" class="Bound">n</a> <a id="22417" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22419" href="/lia/part5/Exp/#22419" class="Bound">σ</a> <a id="22421" class="Symbol">=</a> <a id="22423" href="/lia/part5/Exp/#22415" class="Bound">n</a> <a id="22425" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22427" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="22433" class="Bound">δ</a> <a id="22435" href="/lia/part5/Exp/#22419" class="Bound">σ</a></pre>
<pre class="Agda"><a id="22446" href="/lia/part5/Exp/#22446" class="Function">_</a> <a id="22448" class="Symbol">:</a> <a id="22450" href="/lia/part5/Exp/#21396" class="Function">e0</a> <a id="22453" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="22455" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="22458" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="22460" class="Number">10</a>
<a id="22463" class="Symbol">_</a> <a id="22465" class="Symbol">=</a> <a id="22467" href="/lia/part0/Logic/#431" class="Field">dsnd</a> <a id="22472" class="Symbol">(</a><a id="22473" href="/lia/part5/Exp/#22078" class="Function">eval</a> <a id="22478" href="/lia/part5/Exp/#21396" class="Function">e0</a> <a id="22481" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a><a id="22483" class="Symbol">)</a></pre>

<h2 id="evaluation-is-deterministic">
<a class="anchor" href="#evaluation-is-deterministic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation is deterministic</h2>

<pre class="Agda"><a id="⇒-det"></a><a id="22526" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22532" class="Symbol">:</a>
  <a id="22536" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="22538" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="22540" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="22542" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="22544" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="22546" class="Symbol">→</a>
  <a id="22550" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="22552" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="22554" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="22556" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="22558" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="22560" class="Symbol">→</a>
  <a id="22564" class="Comment">-----------</a>
  <a id="22578" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="22580" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22582" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

<a id="22585" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22591" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a> <a id="22597" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a> <a id="22603" class="Symbol">=</a> <a id="22605" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22610" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22616" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a> <a id="22622" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a> <a id="22628" class="Symbol">=</a> <a id="22630" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22635" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22641" class="Symbol">(</a><a id="22642" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="22648" href="/lia/part5/Exp/#22648" class="Bound">x</a> <a id="22650" href="/lia/part5/Exp/#22650" class="Bound">x₁</a><a id="22652" class="Symbol">)</a> <a id="22654" class="Symbol">(</a><a id="22655" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="22661" href="/lia/part5/Exp/#22661" class="Bound">y</a> <a id="22663" href="/lia/part5/Exp/#22663" class="Bound">y₁</a><a id="22665" class="Symbol">)</a>
    <a id="22671" class="Keyword">with</a> <a id="22676" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22682" href="/lia/part5/Exp/#22648" class="Bound">x</a> <a id="22684" href="/lia/part5/Exp/#22661" class="Bound">y</a> <a id="22686" class="Symbol">|</a> <a id="22688" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22694" href="/lia/part5/Exp/#22650" class="Bound">x₁</a> <a id="22697" href="/lia/part5/Exp/#22663" class="Bound">y₁</a>
<a id="22700" class="Symbol">...</a> <a id="22704" class="Symbol">|</a> <a id="22706" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22711" class="Symbol">|</a> <a id="22713" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22718" class="Symbol">=</a> <a id="22720" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22725" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22731" class="Symbol">(</a><a id="22732" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="22738" href="/lia/part5/Exp/#22738" class="Bound">x</a> <a id="22740" href="/lia/part5/Exp/#22740" class="Bound">x₁</a><a id="22742" class="Symbol">)</a> <a id="22744" class="Symbol">(</a><a id="22745" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="22751" href="/lia/part5/Exp/#22751" class="Bound">y</a> <a id="22753" href="/lia/part5/Exp/#22753" class="Bound">y₁</a><a id="22755" class="Symbol">)</a>
    <a id="22761" class="Keyword">with</a> <a id="22766" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22772" href="/lia/part5/Exp/#22738" class="Bound">x</a> <a id="22774" href="/lia/part5/Exp/#22751" class="Bound">y</a> <a id="22776" class="Symbol">|</a> <a id="22778" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22784" href="/lia/part5/Exp/#22740" class="Bound">x₁</a> <a id="22787" href="/lia/part5/Exp/#22753" class="Bound">y₁</a>
<a id="22790" class="Symbol">...</a> <a id="22794" class="Symbol">|</a> <a id="22796" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22801" class="Symbol">|</a> <a id="22803" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22808" class="Symbol">=</a> <a id="22810" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22815" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22821" class="Symbol">(</a><a id="22822" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="22828" href="/lia/part5/Exp/#22828" class="Bound">⇒₁-e</a> <a id="22833" href="/lia/part5/Exp/#22833" class="Bound">⇒₁-f</a><a id="22837" class="Symbol">)</a> <a id="22839" class="Symbol">(</a><a id="22840" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="22846" href="/lia/part5/Exp/#22846" class="Bound">⇒₂-e</a> <a id="22851" href="/lia/part5/Exp/#22851" class="Bound">⇒₂-f</a><a id="22855" class="Symbol">)</a>
    <a id="22861" class="Keyword">with</a> <a id="22866" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22872" href="/lia/part5/Exp/#22828" class="Bound">⇒₁-e</a> <a id="22877" href="/lia/part5/Exp/#22846" class="Bound">⇒₂-e</a>
<a id="22882" class="Symbol">...</a> <a id="22886" class="Symbol">|</a> <a id="22888" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="22897" class="Keyword">with</a> <a id="22902" href="/lia/part5/Exp/#22526" class="Function">⇒-det</a> <a id="22908" class="Bound">⇒₁-f</a> <a id="22913" class="Bound">⇒₂-f</a>
<a id="22918" class="Symbol">...</a> <a id="22922" class="Symbol">|</a> <a id="22924" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22929" class="Symbol">=</a> <a id="22931" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Note that in the <code class="language-plaintext highlighter-rouge">⇒-Let</code> case we cannot perform the two
with-abstractions in parallel because in order to apply the second one
<code class="language-plaintext highlighter-rouge">⇒-det ⇒₁-f ⇒₂-f</code> we need the result of the first one.</p>

<h2 id="agreement-of-the-semantics">
<a class="anchor" href="#agreement-of-the-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of the semantics</h2>

<p>The following lemma shows that the big-steps operational semantics
agrees with the denotational semantics.</p>

<pre class="Agda"><a id="⇒-agree-⟦⟧"></a><a id="23267" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23278" class="Symbol">:</a> <a id="23280" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="23282" href="/lia/part5/Exp/#20947" class="Datatype Operator">,</a> <a id="23284" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="23286" href="/lia/part5/Exp/#20947" class="Datatype Operator">⇒</a> <a id="23288" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="23290" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="23292" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="23294" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>
<a id="23296" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23307" class="Symbol">{</a><a id="23308" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="23312" href="/lia/part5/Exp/#23312" class="Bound">x</a><a id="23313" class="Symbol">}</a> <a id="23315" class="Symbol">=</a> <a id="23317" href="/lia/part5/Exp/#20985" class="InductiveConstructor">⇒-Num</a>
<a id="23323" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23334" class="Symbol">{</a><a id="23335" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="23339" href="/lia/part5/Exp/#23339" class="Bound">x</a><a id="23340" class="Symbol">}</a> <a id="23342" class="Symbol">=</a> <a id="23344" href="/lia/part5/Exp/#21032" class="InductiveConstructor">⇒-Var</a>
<a id="23350" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23361" class="Symbol">{</a><a id="23362" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="23366" href="/lia/part5/Exp/#23366" class="Bound">e</a> <a id="23368" href="/lia/part5/Exp/#23368" class="Bound">e₁</a><a id="23370" class="Symbol">}</a> <a id="23372" class="Symbol">=</a> <a id="23374" href="/lia/part5/Exp/#21083" class="InductiveConstructor">⇒-Add</a> <a id="23380" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23391" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> 
<a id="23403" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23414" class="Symbol">{</a><a id="23415" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="23419" href="/lia/part5/Exp/#23419" class="Bound">e</a> <a id="23421" href="/lia/part5/Exp/#23421" class="Bound">e₁</a><a id="23423" class="Symbol">}</a> <a id="23425" class="Symbol">=</a> <a id="23427" href="/lia/part5/Exp/#21172" class="InductiveConstructor">⇒-Mul</a> <a id="23433" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23444" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> 
<a id="23456" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23467" class="Symbol">{</a><a id="23468" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="23472" href="/lia/part5/Exp/#23472" class="Bound">x</a> <a id="23474" href="/lia/part5/Exp/#23474" class="Bound">e</a> <a id="23476" href="/lia/part5/Exp/#23476" class="Bound">f</a><a id="23477" class="Symbol">}</a> <a id="23479" class="Symbol">=</a> <a id="23481" href="/lia/part5/Exp/#21261" class="InductiveConstructor">⇒-Let</a> <a id="23487" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a> <a id="23498" href="/lia/part5/Exp/#23267" class="Function">⇒-agree-⟦⟧</a></pre>

<h1 id="binary-numbers">
<a class="anchor" href="#binary-numbers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary numbers</h1>

<h2 id="lsd">
<a class="anchor" href="#lsd" aria-hidden="true"><span class="octicon octicon-link"></span></a>LSD</h2>

<pre class="Agda"><a id="23544" class="Keyword">data</a> <a id="LSD"></a><a id="23549" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a> <a id="23553" class="Symbol">:</a> <a id="23555" class="PrimitiveType">Set</a> <a id="23559" class="Keyword">where</a>
  <a id="LSD.$"></a><a id="23567" href="/lia/part5/Exp/#23567" class="InductiveConstructor">$</a> <a id="23569" class="Symbol">:</a> <a id="23571" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a>
  <a id="LSD._𝟬"></a><a id="23577" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">_𝟬</a> <a id="23580" class="Symbol">:</a> <a id="23582" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a> <a id="23586" class="Symbol">→</a> <a id="23588" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a>
  <a id="LSD._𝟭"></a><a id="23594" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">_𝟭</a> <a id="23597" class="Symbol">:</a> <a id="23599" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a> <a id="23603" class="Symbol">→</a> <a id="23605" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a></pre>

<p>Semantics according to least significant digit (LSD)</p>

<pre class="Agda"><a id="LSD⟦_⟧"></a><a id="23672" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦_⟧</a> <a id="23679" class="Symbol">:</a> <a id="23681" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a> <a id="23685" class="Symbol">→</a> <a id="23687" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="23689" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23694" href="/lia/part5/Exp/#23567" class="InductiveConstructor">$</a> <a id="23696" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a> <a id="23698" class="Symbol">=</a> <a id="23700" class="Number">0</a>
<a id="23702" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23707" href="/lia/part5/Exp/#23707" class="Bound">x</a> <a id="23709" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">𝟬</a> <a id="23711" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a> <a id="23713" class="Symbol">=</a> <a id="23715" class="Number">2</a> <a id="23717" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23720" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23725" href="/lia/part5/Exp/#23707" class="Bound">x</a> <a id="23727" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a>
<a id="23729" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23734" href="/lia/part5/Exp/#23734" class="Bound">x</a> <a id="23736" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">𝟭</a> <a id="23738" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a> <a id="23740" class="Symbol">=</a> <a id="23742" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23746" class="Symbol">(</a><a id="23747" class="Number">2</a> <a id="23749" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23752" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23757" href="/lia/part5/Exp/#23734" class="Bound">x</a> <a id="23759" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a><a id="23760" class="Symbol">)</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="23781" href="/lia/part5/Exp/#23781" class="Function">_</a> <a id="23783" class="Symbol">:</a> <a id="23785" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="23790" href="/lia/part5/Exp/#23567" class="InductiveConstructor">$</a> <a id="23792" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">𝟬</a> <a id="23794" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">𝟭</a> <a id="23796" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">𝟭</a> <a id="23798" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">𝟬</a> <a id="23800" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a> <a id="23802" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="23804" class="Number">6</a>
<a id="23806" class="Symbol">_</a> <a id="23808" class="Symbol">=</a> <a id="23810" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="msd">
<a class="anchor" href="#msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>MSD</h2>

<pre class="Agda"><a id="23832" class="Keyword">data</a> <a id="MSD"></a><a id="23837" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a> <a id="23841" class="Symbol">:</a> <a id="23843" class="PrimitiveType">Set</a> <a id="23847" class="Keyword">where</a>
  <a id="MSD.$"></a><a id="23855" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="23857" class="Symbol">:</a> <a id="23859" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a>
  <a id="MSD.𝟬_"></a><a id="23865" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬_</a> <a id="23868" class="Symbol">:</a> <a id="23870" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a> <a id="23874" class="Symbol">→</a> <a id="23876" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a>
  <a id="MSD.𝟭_"></a><a id="23882" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭_</a> <a id="23885" class="Symbol">:</a> <a id="23887" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a> <a id="23891" class="Symbol">→</a> <a id="23893" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a></pre>

<p>Semantics according to most significant digit (MSD). This won’t work:</p>

<pre class="Agda"><a id="23977" class="Comment">-- MSD⟦_⟧ : MSD → ℕ</a>
<a id="23997" class="Comment">-- MSD⟦ x ⟧ = {!   !}</a></pre>

<p>A possible solution: Additionally remember the number of digits (second
component).</p>

<pre class="Agda"><a id="MSD⟦_⟧"></a><a id="24113" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦_⟧</a> <a id="24120" class="Symbol">:</a> <a id="24122" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a> <a id="24126" class="Symbol">→</a> <a id="24128" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="24130" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="24132" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="24134" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24139" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="24141" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="24143" class="Symbol">=</a> <a id="24145" class="Number">0</a> <a id="24147" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24149" class="Number">0</a>
<a id="24151" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24156" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24158" href="/lia/part5/Exp/#24158" class="Bound">x</a> <a id="24160" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a>
  <a id="24164" class="Keyword">with</a> <a id="24169" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24174" href="/lia/part5/Exp/#24158" class="Bound">x</a> <a id="24176" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a>
<a id="24178" class="Symbol">...</a> <a id="24182" class="Symbol">|</a> <a id="24184" href="/lia/part5/Exp/#24184" class="Bound">n</a> <a id="24186" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24188" href="/lia/part5/Exp/#24188" class="Bound">k</a> <a id="24190" class="Symbol">=</a> <a id="24192" href="/lia/part5/Exp/#24184" class="Bound">n</a> <a id="24194" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24196" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24200" href="/lia/part5/Exp/#24188" class="Bound">k</a>

<a id="24203" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24208" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24210" href="/lia/part5/Exp/#24210" class="Bound">x</a> <a id="24212" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a>
  <a id="24216" class="Keyword">with</a> <a id="24221" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24226" href="/lia/part5/Exp/#24210" class="Bound">x</a> <a id="24228" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a>
<a id="24230" class="Symbol">...</a> <a id="24234" class="Symbol">|</a> <a id="24236" href="/lia/part5/Exp/#24236" class="Bound">n</a> <a id="24238" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24240" href="/lia/part5/Exp/#24240" class="Bound">k</a> <a id="24242" class="Symbol">=</a> <a id="24244" href="/lia/part5/Exp/#24236" class="Bound">n</a> <a id="24246" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24249" class="Number">2</a> <a id="24251" href="/lia/part0/Naturals/#8956" class="Function Operator">^</a> <a id="24253" href="/lia/part5/Exp/#24240" class="Bound">k</a> <a id="24255" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24257" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24261" href="/lia/part5/Exp/#24240" class="Bound">k</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="24282" href="/lia/part5/Exp/#24282" class="Function">_</a> <a id="24284" class="Symbol">:</a> <a id="24286" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24291" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24293" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24295" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24297" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24299" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="24301" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="24303" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24305" class="Number">6</a> <a id="24307" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24309" class="Number">4</a> 
<a id="24312" class="Symbol">_</a> <a id="24314" class="Symbol">=</a> <a id="24316" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="agreement-of-lsd-and-msd">
<a class="anchor" href="#agreement-of-lsd-and-msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of LSD and MSD</h2>

<pre class="Agda"><a id="push-𝟬"></a><a id="24359" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="push-𝟭"></a><a id="24366" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24373" class="Symbol">:</a> <a id="24375" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a> <a id="24379" class="Symbol">→</a> <a id="24381" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a>
<a id="24385" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24392" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="24394" class="Symbol">=</a> <a id="24396" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24398" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a>
<a id="24400" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24407" class="Symbol">(</a><a id="24408" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24410" href="/lia/part5/Exp/#24410" class="Bound">x</a><a id="24411" class="Symbol">)</a> <a id="24413" class="Symbol">=</a> <a id="24415" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24417" class="Symbol">(</a><a id="24418" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24425" href="/lia/part5/Exp/#24410" class="Bound">x</a><a id="24426" class="Symbol">)</a>
<a id="24428" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24435" class="Symbol">(</a><a id="24436" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24438" href="/lia/part5/Exp/#24438" class="Bound">x</a><a id="24439" class="Symbol">)</a> <a id="24441" class="Symbol">=</a> <a id="24443" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24445" class="Symbol">(</a><a id="24446" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24453" href="/lia/part5/Exp/#24438" class="Bound">x</a><a id="24454" class="Symbol">)</a>

<a id="24457" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24464" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="24466" class="Symbol">=</a> <a id="24468" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24470" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a>
<a id="24472" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24479" class="Symbol">(</a><a id="24480" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24482" href="/lia/part5/Exp/#24482" class="Bound">x</a><a id="24483" class="Symbol">)</a> <a id="24485" class="Symbol">=</a> <a id="24487" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24489" class="Symbol">(</a><a id="24490" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24497" href="/lia/part5/Exp/#24482" class="Bound">x</a><a id="24498" class="Symbol">)</a>
<a id="24500" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24507" class="Symbol">(</a><a id="24508" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24510" href="/lia/part5/Exp/#24510" class="Bound">x</a><a id="24511" class="Symbol">)</a> <a id="24513" class="Symbol">=</a> <a id="24515" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24517" class="Symbol">(</a><a id="24518" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="24525" href="/lia/part5/Exp/#24510" class="Bound">x</a><a id="24526" class="Symbol">)</a>

<a id="24529" class="Comment">-- this type was copied-pasted and abstracted from the goal in push-𝟬-lemma  before the last rewrite</a>
<a id="aux-𝟬"></a><a id="24630" href="/lia/part5/Exp/#24630" class="Function">aux-𝟬</a> <a id="24636" class="Symbol">:</a> <a id="24638" class="Symbol">∀</a> <a id="24640" href="/lia/part5/Exp/#24640" class="Bound">m</a> <a id="24642" href="/lia/part5/Exp/#24642" class="Bound">n</a> <a id="24644" class="Symbol">→</a> <a id="24646" href="/lia/part5/Exp/#24640" class="Bound">m</a> <a id="24648" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24651" class="Symbol">(</a><a id="24652" href="/lia/part5/Exp/#24640" class="Bound">m</a> <a id="24654" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24657" class="Number">0</a><a id="24658" class="Symbol">)</a> <a id="24660" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24663" class="Symbol">(</a><a id="24664" href="/lia/part5/Exp/#24642" class="Bound">n</a> <a id="24666" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24669" class="Symbol">(</a><a id="24670" href="/lia/part5/Exp/#24642" class="Bound">n</a> <a id="24672" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24675" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="24679" class="Symbol">))</a> <a id="24682" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24684" href="/lia/part5/Exp/#24640" class="Bound">m</a> <a id="24686" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24689" href="/lia/part5/Exp/#24642" class="Bound">n</a> <a id="24691" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24694" class="Symbol">(</a><a id="24695" href="/lia/part5/Exp/#24640" class="Bound">m</a> <a id="24697" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24700" href="/lia/part5/Exp/#24642" class="Bound">n</a> <a id="24702" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24705" class="Number">0</a><a id="24706" class="Symbol">)</a>
<a id="24708" href="/lia/part5/Exp/#24630" class="Function">aux-𝟬</a> <a id="24714" class="Symbol">=</a> <a id="24716" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟬-lemma"></a><a id="24725" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24738" class="Symbol">:</a> <a id="24740" class="Symbol">∀</a> <a id="24742" href="/lia/part5/Exp/#24742" class="Bound">x</a> <a id="24744" class="Symbol">→</a> <a id="24746" class="Keyword">let</a> <a id="24750" href="/lia/part5/Exp/#24750" class="Bound">n</a> <a id="24752" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24754" href="/lia/part5/Exp/#24754" class="Bound">k</a> <a id="24756" class="Symbol">=</a> <a id="24758" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24763" href="/lia/part5/Exp/#24742" class="Bound">x</a> <a id="24765" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="24767" class="Keyword">in</a> <a id="24770" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24775" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="24782" href="/lia/part5/Exp/#24742" class="Bound">x</a> <a id="24784" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="24786" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24788" class="Number">2</a> <a id="24790" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="24793" href="/lia/part5/Exp/#24750" class="Bound">n</a> <a id="24795" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24797" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24801" href="/lia/part5/Exp/#24754" class="Bound">k</a>
<a id="24803" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24816" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="24818" class="Symbol">=</a> <a id="24820" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24825" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24838" class="Symbol">(</a><a id="24839" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="24841" href="/lia/part5/Exp/#24841" class="Bound">x</a><a id="24842" class="Symbol">)</a> <a id="24844" class="Keyword">rewrite</a> <a id="24852" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24865" href="/lia/part5/Exp/#24841" class="Bound">x</a> <a id="24867" class="Symbol">=</a> <a id="24869" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24874" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24887" class="Symbol">(</a><a id="24888" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="24890" href="/lia/part5/Exp/#24890" class="Bound">x</a><a id="24891" class="Symbol">)</a>
  <a id="24895" class="Keyword">rewrite</a> <a id="24903" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="24916" href="/lia/part5/Exp/#24890" class="Bound">x</a> <a id="24918" class="Symbol">|</a>
          <a id="24930" href="/lia/part5/Exp/#24630" class="Function">aux-𝟬</a> <a id="24936" class="Symbol">(</a><a id="24937" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="24941" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24946" href="/lia/part5/Exp/#24890" class="Bound">x</a> <a id="24948" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a><a id="24949" class="Symbol">)</a> <a id="24951" class="Symbol">(</a><a id="24952" class="Number">2</a> <a id="24954" href="/lia/part0/Naturals/#8956" class="Function Operator">^</a> <a id="24956" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="24960" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="24965" href="/lia/part5/Exp/#24890" class="Bound">x</a> <a id="24967" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a><a id="24968" class="Symbol">)</a> <a id="24970" class="Symbol">=</a> <a id="24972" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="aux-𝟭"></a><a id="24978" href="/lia/part5/Exp/#24978" class="Function">aux-𝟭</a> <a id="24984" class="Symbol">:</a> <a id="24986" class="Symbol">∀</a> <a id="24988" href="/lia/part5/Exp/#24988" class="Bound">m</a> <a id="24990" href="/lia/part5/Exp/#24990" class="Bound">n</a> <a id="24992" class="Symbol">→</a> <a id="24994" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24998" class="Symbol">(</a><a id="24999" href="/lia/part5/Exp/#24988" class="Bound">m</a> <a id="25001" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25004" class="Symbol">(</a><a id="25005" href="/lia/part5/Exp/#24988" class="Bound">m</a> <a id="25007" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25010" class="Number">0</a><a id="25011" class="Symbol">)</a> <a id="25013" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25016" class="Symbol">(</a><a id="25017" href="/lia/part5/Exp/#24990" class="Bound">n</a> <a id="25019" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25022" class="Symbol">(</a><a id="25023" href="/lia/part5/Exp/#24990" class="Bound">n</a> <a id="25025" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25028" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="25032" class="Symbol">)))</a> <a id="25036" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25038" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25042" class="Symbol">(</a><a id="25043" href="/lia/part5/Exp/#24988" class="Bound">m</a> <a id="25045" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25048" href="/lia/part5/Exp/#24990" class="Bound">n</a> <a id="25050" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25053" class="Symbol">(</a><a id="25054" href="/lia/part5/Exp/#24988" class="Bound">m</a> <a id="25056" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25059" href="/lia/part5/Exp/#24990" class="Bound">n</a> <a id="25061" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25064" class="Number">0</a><a id="25065" class="Symbol">))</a>
<a id="25068" href="/lia/part5/Exp/#24978" class="Function">aux-𝟭</a> <a id="25074" class="Symbol">=</a> <a id="25076" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟭-lemma"></a><a id="25085" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25098" class="Symbol">:</a> <a id="25100" class="Symbol">∀</a> <a id="25102" href="/lia/part5/Exp/#25102" class="Bound">x</a> <a id="25104" class="Symbol">→</a> <a id="25106" class="Keyword">let</a> <a id="25110" href="/lia/part5/Exp/#25110" class="Bound">n</a> <a id="25112" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25114" href="/lia/part5/Exp/#25114" class="Bound">k</a> <a id="25116" class="Symbol">=</a> <a id="25118" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="25123" href="/lia/part5/Exp/#25102" class="Bound">x</a> <a id="25125" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="25127" class="Keyword">in</a> <a id="25130" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="25135" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="25142" href="/lia/part5/Exp/#25102" class="Bound">x</a> <a id="25144" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a> <a id="25146" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25148" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25152" class="Symbol">(</a><a id="25153" class="Number">2</a> <a id="25155" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="25158" href="/lia/part5/Exp/#25110" class="Bound">n</a><a id="25159" class="Symbol">)</a> <a id="25161" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25163" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25167" href="/lia/part5/Exp/#25114" class="Bound">k</a>
<a id="25169" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25182" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a> <a id="25184" class="Symbol">=</a> <a id="25186" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="25191" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25204" class="Symbol">(</a><a id="25205" href="/lia/part5/Exp/#23865" class="InductiveConstructor Operator">𝟬</a> <a id="25207" href="/lia/part5/Exp/#25207" class="Bound">x</a><a id="25208" class="Symbol">)</a> <a id="25210" class="Keyword">rewrite</a> <a id="25218" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25231" href="/lia/part5/Exp/#25207" class="Bound">x</a> <a id="25233" class="Symbol">=</a> <a id="25235" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="25240" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25253" class="Symbol">(</a><a id="25254" href="/lia/part5/Exp/#23882" class="InductiveConstructor Operator">𝟭</a> <a id="25256" href="/lia/part5/Exp/#25256" class="Bound">x</a><a id="25257" class="Symbol">)</a>
  <a id="25261" class="Keyword">rewrite</a> <a id="25269" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25282" href="/lia/part5/Exp/#25256" class="Bound">x</a> <a id="25284" class="Symbol">|</a>
          <a id="25296" href="/lia/part5/Exp/#24978" class="Function">aux-𝟭</a> <a id="25302" class="Symbol">(</a><a id="25303" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="25307" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="25312" href="/lia/part5/Exp/#25256" class="Bound">x</a> <a id="25314" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a><a id="25315" class="Symbol">)</a> <a id="25317" class="Symbol">(</a><a id="25318" class="Number">2</a> <a id="25320" href="/lia/part0/Naturals/#8956" class="Function Operator">^</a> <a id="25322" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="25326" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="25331" href="/lia/part5/Exp/#25256" class="Bound">x</a> <a id="25333" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a><a id="25334" class="Symbol">)</a> <a id="25336" class="Symbol">=</a> <a id="25338" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="LSD2MSD"></a><a id="25344" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25352" class="Symbol">:</a> <a id="25354" href="/lia/part5/Exp/#23549" class="Datatype">LSD</a> <a id="25358" class="Symbol">→</a> <a id="25360" href="/lia/part5/Exp/#23837" class="Datatype">MSD</a>
<a id="25364" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25372" href="/lia/part5/Exp/#23567" class="InductiveConstructor">$</a> <a id="25374" class="Symbol">=</a> <a id="25376" href="/lia/part5/Exp/#23855" class="InductiveConstructor">$</a>
<a id="25378" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25386" class="Symbol">(</a><a id="25387" href="/lia/part5/Exp/#25387" class="Bound">x</a> <a id="25389" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">𝟬</a><a id="25390" class="Symbol">)</a> <a id="25392" class="Symbol">=</a> <a id="25394" href="/lia/part5/Exp/#24359" class="Function">push-𝟬</a> <a id="25401" class="Symbol">(</a><a id="25402" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25410" href="/lia/part5/Exp/#25387" class="Bound">x</a><a id="25411" class="Symbol">)</a>
<a id="25413" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25421" class="Symbol">(</a><a id="25422" href="/lia/part5/Exp/#25422" class="Bound">x</a> <a id="25424" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">𝟭</a><a id="25425" class="Symbol">)</a> <a id="25427" class="Symbol">=</a> <a id="25429" href="/lia/part5/Exp/#24366" class="Function">push-𝟭</a> <a id="25436" class="Symbol">(</a><a id="25437" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25445" href="/lia/part5/Exp/#25422" class="Bound">x</a><a id="25446" class="Symbol">)</a> 

<a id="LSD-MSD-agree"></a><a id="25450" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25464" class="Symbol">:</a> <a id="25466" class="Symbol">∀</a> <a id="25468" href="/lia/part5/Exp/#25468" class="Bound">x</a> <a id="25470" class="Symbol">→</a> <a id="25472" href="/lia/part5/Exp/#23672" class="Function Operator">LSD⟦</a> <a id="25477" href="/lia/part5/Exp/#25468" class="Bound">x</a> <a id="25479" href="/lia/part5/Exp/#23672" class="Function Operator">⟧</a> <a id="25481" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25483" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="25487" href="/lia/part5/Exp/#24113" class="Function Operator">MSD⟦</a> <a id="25492" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25500" href="/lia/part5/Exp/#25468" class="Bound">x</a> <a id="25502" href="/lia/part5/Exp/#24113" class="Function Operator">⟧</a>

<a id="25505" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25519" href="/lia/part5/Exp/#23567" class="InductiveConstructor">$</a> <a id="25521" class="Symbol">=</a> <a id="25523" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="25529" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25543" class="Symbol">(</a><a id="25544" href="/lia/part5/Exp/#25544" class="Bound">x</a> <a id="25546" href="/lia/part5/Exp/#23577" class="InductiveConstructor Operator">𝟬</a><a id="25547" class="Symbol">)</a>
  <a id="25551" class="Keyword">with</a> <a id="25556" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25570" href="/lia/part5/Exp/#25544" class="Bound">x</a>
<a id="25572" class="Symbol">...</a> <a id="25576" class="Symbol">|</a> <a id="25578" href="/lia/part5/Exp/#25578" class="Bound">ind</a>
  <a id="25584" class="Keyword">rewrite</a> <a id="25592" href="/lia/part5/Exp/#24725" class="Function">push-𝟬-lemma</a> <a id="25605" class="Symbol">(</a><a id="25606" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25614" class="Bound">x</a><a id="25615" class="Symbol">)</a> <a id="25617" class="Symbol">|</a>
          <a id="25629" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="25633" href="/lia/part5/Exp/#25578" class="Bound">ind</a> <a id="25637" class="Symbol">=</a> <a id="25639" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="25645" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25659" class="Symbol">(</a><a id="25660" href="/lia/part5/Exp/#25660" class="Bound">x</a> <a id="25662" href="/lia/part5/Exp/#23594" class="InductiveConstructor Operator">𝟭</a><a id="25663" class="Symbol">)</a>
  <a id="25667" class="Keyword">with</a> <a id="25672" href="/lia/part5/Exp/#25450" class="Function">LSD-MSD-agree</a> <a id="25686" href="/lia/part5/Exp/#25660" class="Bound">x</a>
<a id="25688" class="Symbol">...</a> <a id="25692" class="Symbol">|</a> <a id="25694" href="/lia/part5/Exp/#25694" class="Bound">ind</a>
  <a id="25700" class="Keyword">rewrite</a> <a id="25708" href="/lia/part5/Exp/#25085" class="Function">push-𝟭-lemma</a> <a id="25721" class="Symbol">(</a><a id="25722" href="/lia/part5/Exp/#25344" class="Function">LSD2MSD</a> <a id="25730" class="Bound">x</a><a id="25731" class="Symbol">)</a> <a id="25733" class="Symbol">|</a>
          <a id="25745" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="25749" href="/lia/part5/Exp/#25694" class="Bound">ind</a> <a id="25753" class="Symbol">=</a> <a id="25755" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="binary-expressions">
<a class="anchor" href="#binary-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary expressions</h1>

<h2 id="syntax">
<a class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>

<pre class="Agda"><a id="25802" class="Keyword">infix</a> <a id="25808" class="Number">30</a> <a id="25811" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">_𝟬</a> <a id="25814" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">_𝟭</a>

<a id="25818" class="Keyword">data</a> <a id="Bin"></a><a id="25823" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="25827" class="Symbol">:</a> <a id="25829" class="PrimitiveType">Set</a> <a id="25833" class="Keyword">where</a>
  <a id="Bin.$"></a><a id="25841" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="25843" class="Symbol">:</a> <a id="25845" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a>
  <a id="Bin._𝟬"></a><a id="25851" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">_𝟬</a> <a id="25854" class="Symbol">:</a> <a id="25856" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="25860" class="Symbol">→</a> <a id="25862" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a>
  <a id="Bin._𝟭"></a><a id="25868" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">_𝟭</a> <a id="25871" class="Symbol">:</a> <a id="25873" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="25877" class="Symbol">→</a> <a id="25879" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a>
  <a id="Bin.Add"></a><a id="25885" href="/lia/part5/Exp/#25885" class="InductiveConstructor">Add</a> <a id="25889" class="Symbol">:</a> <a id="25891" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="25895" class="Symbol">→</a> <a id="25897" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="25901" class="Symbol">→</a> <a id="25903" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a>

<a id="25908" class="Keyword">pattern</a> <a id="_+_"></a><a id="25916" href="/lia/part5/Exp/#25916" class="InductiveConstructor Operator">_+_</a> <a id="25920" href="/lia/part5/Exp/#25930" class="Bound">x</a> <a id="25922" href="/lia/part5/Exp/#25932" class="Bound">y</a> <a id="25924" class="Symbol">=</a> <a id="25926" class="InductiveConstructor">Add</a> <a id="25930" href="/lia/part5/Exp/#25930" class="Bound">x</a> <a id="25932" href="/lia/part5/Exp/#25932" class="Bound">y</a>

<a id="25935" class="Keyword">private</a>
  <a id="25945" class="Keyword">variable</a>
    <a id="25958" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="25960" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="25963" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="25965" href="/lia/part5/Exp/#25965" class="Generalizable">b′</a> <a id="25968" class="Symbol">:</a> <a id="25970" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a></pre>

<h2 id="denotational-semantics-1">
<a class="anchor" href="#denotational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h2>

<pre class="Agda"><a id="26010" class="Keyword">private</a> <a id="⟦_⟧"></a><a id="26018" href="/lia/part5/Exp/#26018" class="Function Operator">⟦_⟧</a> <a id="26022" class="Symbol">:</a> <a id="26024" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="26028" class="Symbol">→</a> <a id="26030" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="26032" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26034" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="26036" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26038" class="Symbol">=</a> <a id="26040" class="Number">0</a>
<a id="26042" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26044" href="/lia/part5/Exp/#26044" class="Bound">a</a> <a id="26046" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26048" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26050" class="Symbol">=</a> <a id="26052" class="Number">2</a> <a id="26054" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="26057" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26059" href="/lia/part5/Exp/#26044" class="Bound">a</a> <a id="26061" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a>
<a id="26063" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26065" href="/lia/part5/Exp/#26065" class="Bound">a</a> <a id="26067" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26069" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26071" class="Symbol">=</a> <a id="26073" class="Number">1</a> <a id="26075" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26078" class="Number">2</a> <a id="26080" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="26083" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26085" href="/lia/part5/Exp/#26065" class="Bound">a</a> <a id="26087" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a>
<a id="26089" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26091" href="/lia/part5/Exp/#26091" class="Bound">a</a> <a id="26093" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26095" href="/lia/part5/Exp/#26095" class="Bound">b</a> <a id="26097" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26099" class="Symbol">=</a> <a id="26101" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26103" href="/lia/part5/Exp/#26091" class="Bound">a</a> <a id="26105" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26107" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26110" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26112" href="/lia/part5/Exp/#26095" class="Bound">b</a> <a id="26114" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a></pre>

<h2 id="small-steps-operational-semantics-1">
<a class="anchor" href="#small-steps-operational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h2>

<pre class="Agda"><a id="26163" class="Keyword">infix</a> <a id="26169" class="Number">4</a> <a id="26171" href="/lia/part5/Exp/#26180" class="Datatype Operator">_↝_</a>
<a id="26175" class="Keyword">data</a> <a id="_↝_"></a><a id="26180" href="/lia/part5/Exp/#26180" class="Datatype Operator">_↝_</a> <a id="26184" class="Symbol">:</a> <a id="26186" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="26190" class="Symbol">→</a> <a id="26192" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="26196" class="Symbol">→</a> <a id="26198" class="PrimitiveType">Set</a> <a id="26202" class="Keyword">where</a>

  <a id="_↝_.↝𝟬"></a><a id="26211" href="/lia/part5/Exp/#26211" class="InductiveConstructor">↝𝟬</a> <a id="26214" class="Symbol">:</a> <a id="26216" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26218" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26220" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26223" class="Symbol">→</a>
       <a id="26232" class="Comment">----------</a>
       <a id="26250" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26252" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26254" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26256" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26259" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝𝟭"></a><a id="26264" href="/lia/part5/Exp/#26264" class="InductiveConstructor">↝𝟭</a> <a id="26267" class="Symbol">:</a> <a id="26269" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26271" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26273" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26276" class="Symbol">→</a>
       <a id="26285" class="Comment">----------</a>
       <a id="26303" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26305" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26307" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26309" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26312" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝$L"></a><a id="26317" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$L</a> <a id="26321" class="Symbol">:</a> <a id="26323" class="Comment">---------</a>
        <a id="26341" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="26343" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26345" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26347" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26349" href="/lia/part5/Exp/#25958" class="Generalizable">a</a>

  <a id="_↝_.↝$R"></a><a id="26354" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝$R</a> <a id="26358" class="Symbol">:</a> <a id="26360" class="Comment">---------</a>
        <a id="26378" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26380" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26382" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="26384" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26386" href="/lia/part5/Exp/#25958" class="Generalizable">a</a>

  <a id="_↝_.↝+L"></a><a id="26391" href="/lia/part5/Exp/#26391" class="InductiveConstructor">↝+L</a> <a id="26395" class="Symbol">:</a> <a id="26397" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26399" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26401" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26404" class="Symbol">→</a>
        <a id="26414" class="Comment">--------------</a>
        <a id="26437" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26439" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26441" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26443" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26445" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26448" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26450" href="/lia/part5/Exp/#25963" class="Generalizable">b</a>

  <a id="_↝_.↝+R"></a><a id="26455" href="/lia/part5/Exp/#26455" class="InductiveConstructor">↝+R</a> <a id="26459" class="Symbol">:</a> <a id="26461" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26463" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26465" href="/lia/part5/Exp/#25965" class="Generalizable">b′</a> <a id="26468" class="Symbol">→</a>
        <a id="26478" class="Comment">--------------</a>
        <a id="26501" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26503" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26505" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26507" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26509" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26511" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26513" href="/lia/part5/Exp/#25965" class="Generalizable">b′</a>
        
  <a id="_↝_.↝+𝟬𝟬"></a><a id="26527" href="/lia/part5/Exp/#26527" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="26532" class="Symbol">:</a> <a id="26534" class="Comment">---------------------</a>
         <a id="26565" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26567" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26569" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26571" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26573" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26575" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26577" class="Symbol">(</a><a id="26578" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26580" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26582" href="/lia/part5/Exp/#25963" class="Generalizable">b</a><a id="26583" class="Symbol">)</a> <a id="26585" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝+𝟬𝟭"></a><a id="26590" href="/lia/part5/Exp/#26590" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="26595" class="Symbol">:</a> <a id="26597" class="Comment">---------------------</a>
         <a id="26628" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26630" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26632" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26634" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26636" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26638" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26640" class="Symbol">(</a><a id="26641" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26643" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26645" href="/lia/part5/Exp/#25963" class="Generalizable">b</a><a id="26646" class="Symbol">)</a> <a id="26648" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟬"></a><a id="26653" href="/lia/part5/Exp/#26653" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="26658" class="Symbol">:</a> <a id="26660" class="Comment">---------------------</a>
         <a id="26691" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26693" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26695" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26697" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26699" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="26701" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26703" class="Symbol">(</a><a id="26704" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26706" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26708" href="/lia/part5/Exp/#25963" class="Generalizable">b</a><a id="26709" class="Symbol">)</a> <a id="26711" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟭"></a><a id="26716" href="/lia/part5/Exp/#26716" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="26721" class="Symbol">:</a> <a id="26723" class="Comment">----------------------------</a>
         <a id="26761" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26763" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26765" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26767" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26769" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="26771" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26773" class="Symbol">(</a><a id="26774" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26776" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26778" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="26780" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26782" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="26784" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="26785" class="Symbol">)</a> <a id="26787" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a></pre>

<h2 id="agreement">
<a class="anchor" href="#agreement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement</h2>

<pre class="Agda"><a id="agree"></a><a id="26813" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26819" class="Symbol">:</a> <a id="26821" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26823" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="26825" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26828" class="Symbol">→</a>
        <a id="26838" class="Comment">--------------</a>
        <a id="26861" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26863" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="26865" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="26867" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="26869" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="26871" href="/lia/part5/Exp/#25960" class="Generalizable">a′</a> <a id="26874" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a>

<a id="26877" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26883" class="Symbol">(</a><a id="26884" href="/lia/part5/Exp/#26211" class="InductiveConstructor">↝𝟬</a> <a id="26887" href="/lia/part5/Exp/#26887" class="Bound">e↝e'</a><a id="26891" class="Symbol">)</a> <a id="26893" class="Keyword">rewrite</a> <a id="26901" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26907" href="/lia/part5/Exp/#26887" class="Bound">e↝e'</a> <a id="26912" class="Symbol">=</a> <a id="26914" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26919" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26925" class="Symbol">(</a><a id="26926" href="/lia/part5/Exp/#26264" class="InductiveConstructor">↝𝟭</a> <a id="26929" href="/lia/part5/Exp/#26929" class="Bound">e↝e'</a><a id="26933" class="Symbol">)</a> <a id="26935" class="Keyword">rewrite</a> <a id="26943" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26949" href="/lia/part5/Exp/#26929" class="Bound">e↝e'</a> <a id="26954" class="Symbol">=</a> <a id="26956" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26961" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26967" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$L</a> <a id="26971" class="Symbol">=</a> <a id="26973" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26978" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="26984" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝$R</a> <a id="26988" class="Symbol">=</a> <a id="26990" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="26996" class="Symbol">_</a>
<a id="26998" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27004" class="Symbol">(</a><a id="27005" href="/lia/part5/Exp/#26391" class="InductiveConstructor">↝+L</a> <a id="27009" href="/lia/part5/Exp/#27009" class="Bound">e↝e'</a><a id="27013" class="Symbol">)</a> <a id="27015" class="Keyword">rewrite</a> <a id="27023" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27029" href="/lia/part5/Exp/#27009" class="Bound">e↝e'</a> <a id="27034" class="Symbol">=</a> <a id="27036" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="27041" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27047" class="Symbol">(</a><a id="27048" href="/lia/part5/Exp/#26455" class="InductiveConstructor">↝+R</a> <a id="27052" href="/lia/part5/Exp/#27052" class="Bound">e↝e'</a><a id="27056" class="Symbol">)</a> <a id="27058" class="Keyword">rewrite</a> <a id="27066" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27072" href="/lia/part5/Exp/#27052" class="Bound">e↝e'</a> <a id="27077" class="Symbol">=</a> <a id="27079" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="27084" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27090" class="Symbol">(</a><a id="27091" href="/lia/part5/Exp/#26527" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="27096" class="Symbol">{</a><a id="27097" href="/lia/part5/Exp/#27097" class="Bound">a</a><a id="27098" class="Symbol">}</a> <a id="27100" class="Symbol">{</a><a id="27101" href="/lia/part5/Exp/#27101" class="Bound">b</a><a id="27102" class="Symbol">})</a> <a id="27105" class="Symbol">=</a> <a id="27107" href="/lia/part5/Exp/#27134" class="Function">magic</a> <a id="27113" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27115" href="/lia/part5/Exp/#27097" class="Bound">a</a> <a id="27117" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27119" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27121" href="/lia/part5/Exp/#27101" class="Bound">b</a> <a id="27123" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27125" class="Keyword">where</a>

  <a id="27134" href="/lia/part5/Exp/#27134" class="Function">magic</a> <a id="27140" class="Symbol">:</a> <a id="27142" class="Symbol">∀</a> <a id="27144" href="/lia/part5/Exp/#27144" class="Bound">a</a> <a id="27146" href="/lia/part5/Exp/#27146" class="Bound">b</a> <a id="27148" class="Symbol">→</a> <a id="27150" href="/lia/part5/Exp/#27144" class="Bound">a</a> <a id="27152" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27155" class="Symbol">(</a><a id="27156" href="/lia/part5/Exp/#27144" class="Bound">a</a> <a id="27158" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27161" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="27165" class="Symbol">)</a> <a id="27167" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27170" class="Symbol">(</a><a id="27171" href="/lia/part5/Exp/#27146" class="Bound">b</a> <a id="27173" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27176" class="Symbol">(</a><a id="27177" href="/lia/part5/Exp/#27146" class="Bound">b</a> <a id="27179" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27182" class="Number">0</a><a id="27183" class="Symbol">))</a> <a id="27186" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27188" href="/lia/part5/Exp/#27144" class="Bound">a</a> <a id="27190" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27193" href="/lia/part5/Exp/#27146" class="Bound">b</a> <a id="27195" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27198" class="Symbol">(</a><a id="27199" href="/lia/part5/Exp/#27144" class="Bound">a</a> <a id="27201" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27204" href="/lia/part5/Exp/#27146" class="Bound">b</a> <a id="27206" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27209" class="Number">0</a><a id="27210" class="Symbol">)</a>
  <a id="27214" href="/lia/part5/Exp/#27134" class="Function">magic</a> <a id="27220" class="Symbol">=</a> <a id="27222" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="27231" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27237" class="Symbol">(</a><a id="27238" href="/lia/part5/Exp/#26590" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="27243" class="Symbol">{</a><a id="27244" href="/lia/part5/Exp/#27244" class="Bound">a</a><a id="27245" class="Symbol">}</a> <a id="27247" class="Symbol">{</a><a id="27248" href="/lia/part5/Exp/#27248" class="Bound">b</a><a id="27249" class="Symbol">})</a> <a id="27252" class="Symbol">=</a> <a id="27254" href="/lia/part5/Exp/#27287" class="Function">magic</a> <a id="27260" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27262" href="/lia/part5/Exp/#27244" class="Bound">a</a> <a id="27264" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27266" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27268" href="/lia/part5/Exp/#27248" class="Bound">b</a> <a id="27270" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27272" class="Keyword">where</a>
    
    <a id="27287" href="/lia/part5/Exp/#27287" class="Function">magic</a> <a id="27293" class="Symbol">:</a> <a id="27295" class="Symbol">∀</a> <a id="27297" href="/lia/part5/Exp/#27297" class="Bound">a</a> <a id="27299" href="/lia/part5/Exp/#27299" class="Bound">b</a> <a id="27301" class="Symbol">→</a> <a id="27303" href="/lia/part5/Exp/#27297" class="Bound">a</a> <a id="27305" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27308" class="Symbol">(</a><a id="27309" href="/lia/part5/Exp/#27297" class="Bound">a</a> <a id="27311" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27314" class="Number">0</a><a id="27315" class="Symbol">)</a> <a id="27317" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27320" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27324" class="Symbol">(</a><a id="27325" href="/lia/part5/Exp/#27299" class="Bound">b</a> <a id="27327" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27330" class="Symbol">(</a><a id="27331" href="/lia/part5/Exp/#27299" class="Bound">b</a> <a id="27333" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27336" class="Number">0</a><a id="27337" class="Symbol">))</a> <a id="27340" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27342" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27346" class="Symbol">(</a><a id="27347" href="/lia/part5/Exp/#27297" class="Bound">a</a> <a id="27349" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27352" href="/lia/part5/Exp/#27299" class="Bound">b</a> <a id="27354" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27357" class="Symbol">(</a><a id="27358" href="/lia/part5/Exp/#27297" class="Bound">a</a> <a id="27360" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27363" href="/lia/part5/Exp/#27299" class="Bound">b</a> <a id="27365" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27368" class="Number">0</a><a id="27369" class="Symbol">))</a>
    <a id="27376" href="/lia/part5/Exp/#27287" class="Function">magic</a> <a id="27382" class="Symbol">=</a> <a id="27384" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="27393" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27399" class="Symbol">(</a><a id="27400" href="/lia/part5/Exp/#26653" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="27405" class="Symbol">{</a><a id="27406" href="/lia/part5/Exp/#27406" class="Bound">a</a><a id="27407" class="Symbol">}</a> <a id="27409" class="Symbol">{</a><a id="27410" href="/lia/part5/Exp/#27410" class="Bound">b</a><a id="27411" class="Symbol">})</a> <a id="27414" class="Symbol">=</a> <a id="27416" href="/lia/part5/Exp/#27449" class="Function">magic</a> <a id="27422" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27424" href="/lia/part5/Exp/#27406" class="Bound">a</a> <a id="27426" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27428" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27430" href="/lia/part5/Exp/#27410" class="Bound">b</a> <a id="27432" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27434" class="Keyword">where</a>
    
    <a id="27449" href="/lia/part5/Exp/#27449" class="Function">magic</a> <a id="27455" class="Symbol">:</a> <a id="27457" class="Symbol">∀</a> <a id="27459" href="/lia/part5/Exp/#27459" class="Bound">a</a> <a id="27461" href="/lia/part5/Exp/#27461" class="Bound">b</a> <a id="27463" class="Symbol">→</a> <a id="27465" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27469" class="Symbol">(</a><a id="27470" href="/lia/part5/Exp/#27459" class="Bound">a</a> <a id="27472" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27475" class="Symbol">(</a><a id="27476" href="/lia/part5/Exp/#27459" class="Bound">a</a> <a id="27478" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27481" class="Number">0</a><a id="27482" class="Symbol">)</a> <a id="27484" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27487" class="Symbol">(</a><a id="27488" href="/lia/part5/Exp/#27461" class="Bound">b</a> <a id="27490" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27493" class="Symbol">(</a><a id="27494" href="/lia/part5/Exp/#27461" class="Bound">b</a> <a id="27496" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27499" class="Number">0</a><a id="27500" class="Symbol">)))</a> <a id="27504" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27506" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27510" class="Symbol">(</a><a id="27511" href="/lia/part5/Exp/#27459" class="Bound">a</a> <a id="27513" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27516" href="/lia/part5/Exp/#27461" class="Bound">b</a> <a id="27518" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27521" class="Symbol">(</a><a id="27522" href="/lia/part5/Exp/#27459" class="Bound">a</a> <a id="27524" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27527" href="/lia/part5/Exp/#27461" class="Bound">b</a> <a id="27529" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27532" class="Number">0</a><a id="27533" class="Symbol">))</a>
    <a id="27540" href="/lia/part5/Exp/#27449" class="Function">magic</a> <a id="27546" class="Symbol">=</a> <a id="27548" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>
    
<a id="27561" href="/lia/part5/Exp/#26813" class="Function">agree</a> <a id="27567" class="Symbol">(</a><a id="27568" href="/lia/part5/Exp/#26716" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="27573" class="Symbol">{</a><a id="27574" href="/lia/part5/Exp/#27574" class="Bound">a</a><a id="27575" class="Symbol">}</a> <a id="27577" class="Symbol">{</a><a id="27578" href="/lia/part5/Exp/#27578" class="Bound">b</a><a id="27579" class="Symbol">})</a> <a id="27582" class="Symbol">=</a> <a id="27584" href="/lia/part5/Exp/#27611" class="Function">magic</a> <a id="27590" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27592" href="/lia/part5/Exp/#27574" class="Bound">a</a> <a id="27594" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27596" href="/lia/part5/Exp/#26018" class="Function Operator">⟦</a> <a id="27598" href="/lia/part5/Exp/#27578" class="Bound">b</a> <a id="27600" href="/lia/part5/Exp/#26018" class="Function Operator">⟧</a> <a id="27602" class="Keyword">where</a>

  <a id="27611" href="/lia/part5/Exp/#27611" class="Function">magic</a> <a id="27617" class="Symbol">:</a> <a id="27619" class="Symbol">∀</a> <a id="27621" href="/lia/part5/Exp/#27621" class="Bound">a</a> <a id="27623" href="/lia/part5/Exp/#27623" class="Bound">b</a> <a id="27625" class="Symbol">→</a> <a id="27627" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27631" class="Symbol">(</a><a id="27632" href="/lia/part5/Exp/#27621" class="Bound">a</a> <a id="27634" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27637" class="Symbol">(</a><a id="27638" href="/lia/part5/Exp/#27621" class="Bound">a</a> <a id="27640" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27643" class="Number">0</a><a id="27644" class="Symbol">)</a> <a id="27646" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27649" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27653" class="Symbol">(</a><a id="27654" href="/lia/part5/Exp/#27623" class="Bound">b</a> <a id="27656" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27659" class="Symbol">(</a><a id="27660" href="/lia/part5/Exp/#27623" class="Bound">b</a> <a id="27662" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27665" class="Number">0</a><a id="27666" class="Symbol">)))</a> <a id="27670" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27672" href="/lia/part5/Exp/#27621" class="Bound">a</a> <a id="27674" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27677" href="/lia/part5/Exp/#27623" class="Bound">b</a> <a id="27679" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27682" class="Number">1</a> <a id="27684" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27687" class="Symbol">(</a><a id="27688" href="/lia/part5/Exp/#27621" class="Bound">a</a> <a id="27690" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27693" href="/lia/part5/Exp/#27623" class="Bound">b</a> <a id="27695" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27698" class="Number">1</a> <a id="27700" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27703" class="Number">0</a><a id="27704" class="Symbol">)</a>
  <a id="27708" href="/lia/part5/Exp/#27611" class="Function">magic</a> <a id="27714" class="Symbol">=</a> <a id="27716" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a></pre>

<h2 id="strong-normalisation-first-proof">
<a class="anchor" href="#strong-normalisation-first-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (first proof)</h2>

<pre class="Agda"><a id="binSize"></a><a id="27772" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27780" class="Symbol">:</a> <a id="27782" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="27786" class="Symbol">→</a> <a id="27788" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="27790" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27798" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="27800" class="Symbol">=</a> <a id="27802" class="Number">0</a>
<a id="27804" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27812" class="Symbol">(</a><a id="27813" href="/lia/part5/Exp/#27813" class="Bound">a</a> <a id="27815" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="27816" class="Symbol">)</a> <a id="27818" class="Symbol">=</a> <a id="27820" class="Number">1</a> <a id="27822" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27825" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27833" href="/lia/part5/Exp/#27813" class="Bound">a</a>
<a id="27835" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27843" class="Symbol">(</a><a id="27844" href="/lia/part5/Exp/#27844" class="Bound">a</a> <a id="27846" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="27847" class="Symbol">)</a> <a id="27849" class="Symbol">=</a> <a id="27851" class="Number">1</a> <a id="27853" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27856" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27864" href="/lia/part5/Exp/#27844" class="Bound">a</a>
<a id="27866" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27874" class="Symbol">(</a><a id="27875" href="/lia/part5/Exp/#27875" class="Bound">a</a> <a id="27877" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="27879" href="/lia/part5/Exp/#27879" class="Bound">b</a><a id="27880" class="Symbol">)</a> <a id="27882" class="Symbol">=</a> <a id="27884" class="Number">1</a> <a id="27886" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27889" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27897" href="/lia/part5/Exp/#27875" class="Bound">a</a> <a id="27899" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27902" href="/lia/part5/Exp/#27772" class="Function">binSize</a> <a id="27910" href="/lia/part5/Exp/#27879" class="Bound">b</a>

<a id="27913" class="Comment">-- transitive closure</a>
<a id="27935" class="Comment">-- infix 4 _↝*_</a>
<a id="27951" class="Comment">-- data _↝*_ : Bin → Bin → Set where</a>
<a id="27988" class="Comment">--     stop : ∀ {a} → a ↝* a</a>
<a id="28017" class="Comment">--     one : ∀ {a b g} → a ↝ b → b ↝* g → a ↝* g</a>

<a id="28067" class="Comment">-- strong normalisation</a>
<a id="28091" class="Comment">-- we define a measure that is strictly decreasing on each computation step</a>

<a id="μ"></a><a id="28168" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28170" class="Symbol">:</a> <a id="28172" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="28176" class="Symbol">→</a> <a id="28178" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="28180" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28182" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="28184" class="Symbol">=</a> <a id="28186" class="Number">0</a>
<a id="28188" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28190" class="Symbol">(</a><a id="28191" href="/lia/part5/Exp/#28191" class="Bound">a</a> <a id="28193" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="28194" class="Symbol">)</a> <a id="28196" class="Symbol">=</a> <a id="28198" class="Number">2</a> <a id="28200" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28203" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28205" href="/lia/part5/Exp/#28191" class="Bound">a</a>
<a id="28207" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28209" class="Symbol">(</a><a id="28210" href="/lia/part5/Exp/#28210" class="Bound">a</a> <a id="28212" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="28213" class="Symbol">)</a> <a id="28215" class="Symbol">=</a> <a id="28217" class="Number">4</a> <a id="28219" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28222" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28224" href="/lia/part5/Exp/#28210" class="Bound">a</a>
<a id="28226" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28228" class="Symbol">(</a><a id="28229" href="/lia/part5/Exp/#28229" class="Bound">a</a> <a id="28231" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="28233" href="/lia/part5/Exp/#28233" class="Bound">b</a><a id="28234" class="Symbol">)</a> <a id="28236" class="Symbol">=</a> <a id="28238" class="Number">1</a> <a id="28240" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28243" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28245" href="/lia/part5/Exp/#28229" class="Bound">a</a> <a id="28247" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28250" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28252" href="/lia/part5/Exp/#28233" class="Bound">b</a>

<a id="μ-wf"></a><a id="28255" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28260" class="Symbol">:</a> <a id="28262" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="28264" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="28266" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="28268" class="Symbol">→</a>
       <a id="28277" class="Comment">---------</a>
       <a id="28294" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28296" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="28298" href="/lia/part0/Naturals/#1314" class="Function Operator">&lt;</a> <a id="28300" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28302" href="/lia/part5/Exp/#25958" class="Generalizable">a</a>

<a id="28305" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28310" class="Symbol">(</a><a id="28311" href="/lia/part5/Exp/#26211" class="InductiveConstructor">↝𝟬</a> <a id="28314" href="/lia/part5/Exp/#28314" class="Bound">e↝f</a><a id="28317" class="Symbol">)</a> <a id="28319" class="Keyword">with</a> <a id="28324" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28329" href="/lia/part5/Exp/#28314" class="Bound">e↝f</a>
<a id="28333" class="Symbol">...</a> <a id="28337" class="Symbol">|</a> <a id="28339" href="/lia/part5/Exp/#28339" class="Bound">μf&lt;μe</a> <a id="28345" class="Symbol">=</a> <a id="28347" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28351" class="Symbol">(</a><a id="28352" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28356" href="/lia/part5/Exp/#28339" class="Bound">μf&lt;μe</a><a id="28361" class="Symbol">)</a>

<a id="28364" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28369" class="Symbol">(</a><a id="28370" href="/lia/part5/Exp/#26264" class="InductiveConstructor">↝𝟭</a> <a id="28373" href="/lia/part5/Exp/#28373" class="Bound">e↝f</a><a id="28376" class="Symbol">)</a> <a id="28378" class="Keyword">with</a> <a id="28383" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28388" href="/lia/part5/Exp/#28373" class="Bound">e↝f</a>
<a id="28392" class="Symbol">...</a> <a id="28396" class="Symbol">|</a> <a id="28398" href="/lia/part5/Exp/#28398" class="Bound">μf&lt;μe</a> <a id="28404" class="Symbol">=</a> <a id="28406" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28410" class="Symbol">(</a><a id="28411" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28415" class="Symbol">(</a><a id="28416" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28420" class="Symbol">(</a><a id="28421" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28425" href="/lia/part5/Exp/#28398" class="Bound">μf&lt;μe</a><a id="28430" class="Symbol">)))</a>

<a id="28435" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28440" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$L</a> <a id="28444" class="Symbol">=</a> <a id="28446" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="28454" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28459" class="DottedPattern Symbol">.{</a><a id="28461" href="/lia/part5/Exp/#28469" class="DottedPattern Bound">a</a> <a id="28463" href="/lia/part5/Exp/#1249" class="DottedPattern InductiveConstructor Operator">+</a> <a id="28465" href="/lia/part5/Exp/#25841" class="DottedPattern InductiveConstructor">$</a><a id="28466" class="DottedPattern Symbol">}</a> <a id="28468" class="Symbol">{</a><a id="28469" href="/lia/part5/Exp/#28469" class="Bound">a</a><a id="28470" class="Symbol">}</a> <a id="28472" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝$R</a> <a id="28476" class="Keyword">rewrite</a> <a id="28484" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="28490" class="Symbol">(</a><a id="28491" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28493" href="/lia/part5/Exp/#28469" class="Bound">a</a><a id="28494" class="Symbol">)</a> <a id="28496" class="Symbol">=</a> <a id="28498" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="28506" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28511" class="Symbol">(</a><a id="28512" href="/lia/part5/Exp/#26391" class="InductiveConstructor">↝+L</a> <a id="28516" href="/lia/part5/Exp/#28516" class="Bound">e↝e'</a><a id="28520" class="Symbol">)</a> <a id="28522" class="Keyword">with</a> <a id="28527" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28532" href="/lia/part5/Exp/#28516" class="Bound">e↝e'</a>
<a id="28537" class="Symbol">...</a> <a id="28541" class="Symbol">|</a> <a id="28543" href="/lia/part5/Exp/#28543" class="Bound">μe'&lt;μe</a> <a id="28550" class="Symbol">=</a> <a id="28552" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28556" class="Symbol">(</a><a id="28557" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="28566" href="/lia/part5/Exp/#28543" class="Bound">μe'&lt;μe</a><a id="28572" class="Symbol">)</a>

<a id="28575" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28580" class="Symbol">(</a><a id="28581" href="/lia/part5/Exp/#26455" class="InductiveConstructor">↝+R</a> <a id="28585" href="/lia/part5/Exp/#28585" class="Bound">f↝f'</a><a id="28589" class="Symbol">)</a> <a id="28591" class="Keyword">with</a> <a id="28596" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28601" href="/lia/part5/Exp/#28585" class="Bound">f↝f'</a>
<a id="28606" class="Symbol">...</a> <a id="28610" class="Symbol">|</a> <a id="28612" href="/lia/part5/Exp/#28612" class="Bound">μf'&lt;μf</a> <a id="28619" class="Symbol">=</a> <a id="28621" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28625" class="Symbol">(</a><a id="28626" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="28636" href="/lia/part5/Exp/#28612" class="Bound">μf'&lt;μf</a><a id="28642" class="Symbol">)</a>

<a id="28645" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28650" class="Symbol">{</a><a id="28651" href="/lia/part5/Exp/#28651" class="Bound">a</a><a id="28652" class="Symbol">}</a> <a id="28654" class="Symbol">{</a><a id="28655" href="/lia/part5/Exp/#28655" class="Bound">b</a><a id="28656" class="Symbol">}</a> <a id="28658" href="/lia/part5/Exp/#26527" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="28663" class="Symbol">=</a> <a id="28665" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28669" class="Symbol">(</a><a id="28670" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28674" class="Symbol">(</a><a id="28675" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28679" class="Symbol">(</a><a id="28680" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="28690" href="/lia/part0/Naturals/#3558" class="Function">n&lt;suc2n</a><a id="28697" class="Symbol">)))</a>

<a id="28702" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28707" href="/lia/part5/Exp/#28707" class="Bound">a</a><a id="28708" class="Symbol">@{</a><a id="28710" href="/lia/part5/Exp/#25885" class="InductiveConstructor">Add</a> <a id="28714" class="Symbol">(</a><a id="28715" href="/lia/part5/Exp/#28715" class="Bound">a₁</a> <a id="28718" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="28719" class="Symbol">)</a> <a id="28721" class="Symbol">(</a><a id="28722" href="/lia/part5/Exp/#28722" class="Bound">b₁</a> <a id="28725" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="28726" class="Symbol">)}</a> <a id="28729" class="Symbol">{</a><a id="28730" href="/lia/part5/Exp/#28730" class="Bound">b</a><a id="28731" class="Symbol">}</a> <a id="28733" href="/lia/part5/Exp/#26590" class="InductiveConstructor">↝+𝟬𝟭</a>
  <a id="28740" class="Keyword">rewrite</a>
    <a id="28752" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="28758" class="Symbol">(</a><a id="28759" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28761" href="/lia/part5/Exp/#28707" class="Bound">a</a><a id="28762" class="Symbol">)</a> <a id="28764" class="Symbol">|</a>
    <a id="28770" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="28776" class="Symbol">(</a><a id="28777" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28779" href="/lia/part5/Exp/#28730" class="Bound">b</a><a id="28780" class="Symbol">)</a> <a id="28782" class="Symbol">|</a>
    <a id="28788" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="28798" class="Symbol">{</a><a id="28799" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28801" href="/lia/part5/Exp/#28715" class="Bound">a₁</a><a id="28803" class="Symbol">}</a> <a id="28805" class="Symbol">{</a><a id="28806" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28810" class="Symbol">(</a><a id="28811" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28815" class="Symbol">(</a><a id="28816" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28820" class="Symbol">(</a><a id="28821" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28823" href="/lia/part5/Exp/#28722" class="Bound">b₁</a><a id="28825" class="Symbol">)))}</a> <a id="28830" class="Symbol">|</a>
    <a id="28836" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="28846" class="Symbol">{</a><a id="28847" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28849" href="/lia/part5/Exp/#28715" class="Bound">a₁</a><a id="28851" class="Symbol">}</a> <a id="28853" class="Symbol">{</a><a id="28854" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28858" class="Symbol">(</a><a id="28859" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28863" class="Symbol">(</a><a id="28864" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28866" href="/lia/part5/Exp/#28722" class="Bound">b₁</a><a id="28868" class="Symbol">))}</a> <a id="28872" class="Symbol">|</a>
    <a id="28878" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="28888" class="Symbol">{</a><a id="28889" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28891" href="/lia/part5/Exp/#28715" class="Bound">a₁</a><a id="28893" class="Symbol">}</a> <a id="28895" class="Symbol">{</a><a id="28896" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28900" class="Symbol">(</a><a id="28901" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28903" href="/lia/part5/Exp/#28722" class="Bound">b₁</a><a id="28905" class="Symbol">)}</a> <a id="28908" class="Symbol">|</a>
    <a id="28914" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="28924" class="Symbol">{</a><a id="28925" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28927" href="/lia/part5/Exp/#28715" class="Bound">a₁</a><a id="28929" class="Symbol">}</a> <a id="28931" class="Symbol">{</a><a id="28932" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="28934" href="/lia/part5/Exp/#28722" class="Bound">b₁</a><a id="28936" class="Symbol">}</a>
  <a id="28940" class="Symbol">=</a> <a id="28942" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28946" class="Symbol">(</a><a id="28947" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28951" class="Symbol">(</a><a id="28952" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28956" class="Symbol">(</a><a id="28957" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28961" class="Symbol">(</a><a id="28962" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28966" class="Symbol">(</a><a id="28967" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28971" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="28977" class="Symbol">)))))</a>

<a id="28984" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="28989" href="/lia/part5/Exp/#28989" class="Bound">a</a><a id="28990" class="Symbol">@{</a><a id="28992" href="/lia/part5/Exp/#25885" class="InductiveConstructor">Add</a> <a id="28996" class="Symbol">(</a><a id="28997" href="/lia/part5/Exp/#28997" class="Bound">a₁</a> <a id="29000" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29001" class="Symbol">)</a> <a id="29003" class="Symbol">(</a><a id="29004" href="/lia/part5/Exp/#29004" class="Bound">b₁</a> <a id="29007" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="29008" class="Symbol">)}</a> <a id="29011" class="Symbol">{</a><a id="29012" href="/lia/part5/Exp/#29012" class="Bound">b</a><a id="29013" class="Symbol">}</a> <a id="29015" href="/lia/part5/Exp/#26653" class="InductiveConstructor">↝+𝟭𝟬</a>
  <a id="29022" class="Keyword">rewrite</a>
    <a id="29034" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="29040" class="Symbol">(</a><a id="29041" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29043" href="/lia/part5/Exp/#28989" class="Bound">a</a><a id="29044" class="Symbol">)</a> <a id="29046" class="Symbol">|</a>
    <a id="29052" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="29058" class="Symbol">(</a><a id="29059" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29061" href="/lia/part5/Exp/#29012" class="Bound">b</a><a id="29062" class="Symbol">)</a> <a id="29064" class="Symbol">|</a>
    <a id="29070" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="29080" class="Symbol">{</a><a id="29081" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29083" href="/lia/part5/Exp/#28997" class="Bound">a₁</a><a id="29085" class="Symbol">}</a> <a id="29087" class="Symbol">{</a><a id="29088" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29092" class="Symbol">(</a><a id="29093" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29095" href="/lia/part5/Exp/#29004" class="Bound">b₁</a><a id="29097" class="Symbol">)}</a> <a id="29100" class="Symbol">|</a>
    <a id="29106" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="29116" class="Symbol">{</a><a id="29117" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29119" href="/lia/part5/Exp/#28997" class="Bound">a₁</a><a id="29121" class="Symbol">}</a> <a id="29123" class="Symbol">{</a><a id="29124" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29126" href="/lia/part5/Exp/#29004" class="Bound">b₁</a><a id="29128" class="Symbol">}</a>
  <a id="29132" class="Symbol">=</a> <a id="29134" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29138" class="Symbol">(</a><a id="29139" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29143" class="Symbol">(</a><a id="29144" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29148" class="Symbol">(</a><a id="29149" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29153" class="Symbol">(</a><a id="29154" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29158" class="Symbol">(</a><a id="29159" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29163" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="29169" class="Symbol">)))))</a>

<a id="29176" href="/lia/part5/Exp/#28255" class="Function">μ-wf</a> <a id="29181" href="/lia/part5/Exp/#29181" class="Bound">a</a><a id="29182" class="Symbol">@{</a><a id="29184" href="/lia/part5/Exp/#25885" class="InductiveConstructor">Add</a> <a id="29188" class="Symbol">(</a><a id="29189" href="/lia/part5/Exp/#29189" class="Bound">a₁</a> <a id="29192" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29193" class="Symbol">)</a> <a id="29195" class="Symbol">(</a><a id="29196" href="/lia/part5/Exp/#29196" class="Bound">b₁</a> <a id="29199" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29200" class="Symbol">)}</a> <a id="29203" class="Symbol">{</a><a id="29204" href="/lia/part5/Exp/#29204" class="Bound">b</a><a id="29205" class="Symbol">}</a> <a id="29207" href="/lia/part5/Exp/#26716" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="29212" class="Symbol">=</a> <a id="29214" href="/lia/part5/Exp/#29386" class="Function">goal</a> <a id="29219" class="Keyword">where</a>

  <a id="29228" href="/lia/part5/Exp/#29228" class="Function">magic</a> <a id="29234" class="Symbol">:</a> <a id="29236" class="Symbol">∀</a> <a id="29238" href="/lia/part5/Exp/#29238" class="Bound">a</a> <a id="29240" href="/lia/part5/Exp/#29240" class="Bound">b</a> <a id="29242" class="Symbol">→</a>
      <a id="29250" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29254" class="Symbol">(</a><a id="29255" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29259" class="Symbol">(</a><a id="29260" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29264" class="Symbol">(</a><a id="29265" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29269" class="Symbol">(</a><a id="29270" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29274" class="Symbol">(</a><a id="29275" href="/lia/part5/Exp/#29238" class="Bound">a</a> <a id="29277" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29280" href="/lia/part5/Exp/#29240" class="Bound">b</a> <a id="29282" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29285" class="Number">4</a><a id="29286" class="Symbol">)))))</a> <a id="29292" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a>
      <a id="29300" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29304" class="Symbol">(</a><a id="29305" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29309" class="Symbol">(</a><a id="29310" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29314" class="Symbol">(</a><a id="29315" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29319" class="Symbol">(</a><a id="29320" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29324" class="Symbol">(</a><a id="29325" href="/lia/part5/Exp/#29238" class="Bound">a</a> <a id="29327" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29330" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29334" class="Symbol">(</a><a id="29335" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29339" class="Symbol">(</a><a id="29340" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29344" class="Symbol">(</a><a id="29345" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29349" href="/lia/part5/Exp/#29240" class="Bound">b</a><a id="29350" class="Symbol">))))))))</a>
  <a id="29361" href="/lia/part5/Exp/#29228" class="Function">magic</a> <a id="29367" class="Symbol">=</a> <a id="29369" class="Symbol">{! solve-∀ !}</a>

  <a id="29386" href="/lia/part5/Exp/#29386" class="Function">goal</a> <a id="29391" class="Symbol">:</a> <a id="29393" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29397" class="Symbol">(</a><a id="29398" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29402" class="Symbol">(</a><a id="29403" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29407" class="Symbol">(</a><a id="29408" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29412" class="Symbol">(</a><a id="29413" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29417" class="Symbol">(</a><a id="29418" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29420" href="/lia/part5/Exp/#29189" class="Bound">a₁</a> <a id="29423" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29426" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29428" href="/lia/part5/Exp/#29196" class="Bound">b₁</a> <a id="29431" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29434" class="Number">4</a><a id="29435" class="Symbol">)))))</a> <a id="29441" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a>
         <a id="29453" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29457" class="Symbol">(</a><a id="29458" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29462" class="Symbol">(</a><a id="29463" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29467" class="Symbol">(</a><a id="29468" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29472" class="Symbol">(</a><a id="29473" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29477" class="Symbol">(</a><a id="29478" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29480" href="/lia/part5/Exp/#29189" class="Bound">a₁</a> <a id="29483" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29486" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29490" class="Symbol">(</a><a id="29491" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29495" class="Symbol">(</a><a id="29496" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29500" class="Symbol">(</a><a id="29501" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29505" class="Symbol">(</a><a id="29506" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29508" href="/lia/part5/Exp/#29196" class="Bound">b₁</a><a id="29510" class="Symbol">)))))))))</a>
  <a id="29522" href="/lia/part5/Exp/#29386" class="Function">goal</a> <a id="29527" class="Keyword">rewrite</a> <a id="29535" href="/lia/part5/Exp/#29228" class="Function">magic</a> <a id="29541" class="Symbol">(</a><a id="29542" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29544" href="/lia/part5/Exp/#29189" class="Bound">a₁</a><a id="29546" class="Symbol">)</a> <a id="29548" class="Symbol">(</a><a id="29549" href="/lia/part5/Exp/#28168" class="Function">μ</a> <a id="29551" href="/lia/part5/Exp/#29196" class="Bound">b₁</a><a id="29553" class="Symbol">)</a> <a id="29555" class="Symbol">=</a> <a id="29557" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<h2 id="strong-normalisation-second-proof">
<a class="anchor" href="#strong-normalisation-second-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (second proof)</h2>

<p>We prove strong normalisation by well-founded induction on a
lexicograpic order.</p>

<pre class="Agda"><a id="zeroes"></a><a id="29695" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="ones"></a><a id="29702" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="dollars"></a><a id="29707" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29715" class="Symbol">:</a> <a id="29717" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="29721" class="Symbol">→</a> <a id="29723" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="29726" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29733" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="29735" class="Symbol">=</a> <a id="29737" class="Number">0</a>
<a id="29739" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29746" class="Symbol">(</a><a id="29747" href="/lia/part5/Exp/#29747" class="Bound">a</a> <a id="29749" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="29750" class="Symbol">)</a> <a id="29752" class="Symbol">=</a> <a id="29754" class="Number">1</a> <a id="29756" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29759" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29766" href="/lia/part5/Exp/#29747" class="Bound">a</a>
<a id="29768" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29775" class="Symbol">(</a><a id="29776" href="/lia/part5/Exp/#29776" class="Bound">a</a> <a id="29778" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29779" class="Symbol">)</a> <a id="29781" class="Symbol">=</a> <a id="29783" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29790" href="/lia/part5/Exp/#29776" class="Bound">a</a>
<a id="29792" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29799" class="Symbol">(</a><a id="29800" href="/lia/part5/Exp/#29800" class="Bound">a</a> <a id="29802" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29804" href="/lia/part5/Exp/#29804" class="Bound">b</a><a id="29805" class="Symbol">)</a> <a id="29807" class="Symbol">=</a> <a id="29809" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29816" href="/lia/part5/Exp/#29800" class="Bound">a</a> <a id="29818" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29821" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="29828" href="/lia/part5/Exp/#29804" class="Bound">b</a>

<a id="29831" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29836" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="29838" class="Symbol">=</a> <a id="29840" class="Number">0</a>
<a id="29842" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29847" class="Symbol">(</a><a id="29848" href="/lia/part5/Exp/#29848" class="Bound">a</a> <a id="29850" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="29851" class="Symbol">)</a> <a id="29853" class="Symbol">=</a> <a id="29855" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29860" href="/lia/part5/Exp/#29848" class="Bound">a</a>
<a id="29862" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29867" class="Symbol">(</a><a id="29868" href="/lia/part5/Exp/#29868" class="Bound">a</a> <a id="29870" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29871" class="Symbol">)</a> <a id="29873" class="Symbol">=</a> <a id="29875" class="Number">1</a> <a id="29877" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29880" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29885" href="/lia/part5/Exp/#29868" class="Bound">a</a>
<a id="29887" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29892" class="Symbol">(</a><a id="29893" href="/lia/part5/Exp/#29893" class="Bound">a</a> <a id="29895" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29897" href="/lia/part5/Exp/#29897" class="Bound">b</a><a id="29898" class="Symbol">)</a> <a id="29900" class="Symbol">=</a> <a id="29902" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29907" href="/lia/part5/Exp/#29893" class="Bound">a</a> <a id="29909" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29912" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="29917" href="/lia/part5/Exp/#29897" class="Bound">b</a>

<a id="29920" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29928" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="29930" class="Symbol">=</a> <a id="29932" class="Number">1</a>
<a id="29934" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29942" class="Symbol">(</a><a id="29943" href="/lia/part5/Exp/#29943" class="Bound">a</a> <a id="29945" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="29946" class="Symbol">)</a> <a id="29948" class="Symbol">=</a> <a id="29950" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29958" href="/lia/part5/Exp/#29943" class="Bound">a</a>
<a id="29960" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29968" class="Symbol">(</a><a id="29969" href="/lia/part5/Exp/#29969" class="Bound">a</a> <a id="29971" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="29972" class="Symbol">)</a> <a id="29974" class="Symbol">=</a> <a id="29976" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29984" href="/lia/part5/Exp/#29969" class="Bound">a</a>
<a id="29986" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="29994" class="Symbol">(</a><a id="29995" href="/lia/part5/Exp/#29995" class="Bound">a</a> <a id="29997" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29999" href="/lia/part5/Exp/#29999" class="Bound">b</a><a id="30000" class="Symbol">)</a> <a id="30002" class="Symbol">=</a> <a id="30004" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="30012" href="/lia/part5/Exp/#29995" class="Bound">a</a> <a id="30014" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="30017" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="30025" href="/lia/part5/Exp/#29999" class="Bound">b</a>

<a id="Triple"></a><a id="30028" href="/lia/part5/Exp/#30028" class="Function">Triple</a> <a id="30035" class="Symbol">=</a> <a id="30037" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="30039" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="30041" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="30043" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="30045" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="triple"></a><a id="30048" href="/lia/part5/Exp/#30048" class="Function">triple</a> <a id="30055" class="Symbol">:</a> <a id="30057" href="/lia/part5/Exp/#25823" class="Datatype">Bin</a> <a id="30061" class="Symbol">→</a> <a id="30063" href="/lia/part5/Exp/#30028" class="Function">Triple</a>
<a id="30070" href="/lia/part5/Exp/#30048" class="Function">triple</a> <a id="30077" href="/lia/part5/Exp/#30077" class="Bound">a</a> <a id="30079" class="Symbol">=</a> <a id="30081" class="Symbol">(</a><a id="30082" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="30087" href="/lia/part5/Exp/#30077" class="Bound">a</a> <a id="30089" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30091" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="30098" href="/lia/part5/Exp/#30077" class="Bound">a</a> <a id="30100" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30102" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="30110" href="/lia/part5/Exp/#30077" class="Bound">a</a><a id="30111" class="Symbol">)</a>

<a id="_≺_"></a><a id="30114" href="/lia/part5/Exp/#30114" class="Function Operator">_≺_</a> <a id="30118" class="Symbol">:</a> <a id="30120" href="/lia/part5/Exp/#30028" class="Function">Triple</a> <a id="30127" class="Symbol">→</a> <a id="30129" href="/lia/part5/Exp/#30028" class="Function">Triple</a> <a id="30136" class="Symbol">→</a> <a id="30138" class="PrimitiveType">Set</a>
<a id="30142" href="/lia/part5/Exp/#30114" class="Function Operator">_≺_</a> <a id="30146" class="Symbol">=</a> <a id="30148" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="30152" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="30157" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="30161" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="30166" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a>

<a id="wf-≺"></a><a id="30171" href="/lia/part5/Exp/#30171" class="Function">wf-≺</a> <a id="30176" class="Symbol">:</a> <a id="30178" href="/lia/part0/WellFounded/#548" class="Function">WellFounded</a> <a id="30190" href="/lia/part5/Exp/#30114" class="Function Operator">_≺_</a>
<a id="30194" href="/lia/part5/Exp/#30171" class="Function">wf-≺</a> <a id="30199" class="Symbol">=</a> <a id="30201" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="30208" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="30213" class="Symbol">(</a><a id="30214" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="30221" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="30226" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a><a id="30230" class="Symbol">)</a>

<a id="triple-mon"></a><a id="30233" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30244" class="Symbol">:</a> <a id="30246" href="/lia/part5/Exp/#25958" class="Generalizable">a</a> <a id="30248" href="/lia/part5/Exp/#26180" class="Datatype Operator">↝</a> <a id="30250" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="30252" class="Symbol">→</a>
             <a id="30267" class="Comment">-------------------</a>
             <a id="30300" href="/lia/part5/Exp/#30048" class="Function">triple</a> <a id="30307" href="/lia/part5/Exp/#25963" class="Generalizable">b</a> <a id="30309" href="/lia/part5/Exp/#30114" class="Function Operator">≺</a> <a id="30311" href="/lia/part5/Exp/#30048" class="Function">triple</a> <a id="30318" href="/lia/part5/Exp/#25958" class="Generalizable">a</a>
             
<a id="30334" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30345" class="Symbol">(</a><a id="30346" href="/lia/part5/Exp/#26211" class="InductiveConstructor">↝𝟬</a> <a id="30349" href="/lia/part5/Exp/#30349" class="Bound">δ</a><a id="30350" class="Symbol">)</a> <a id="30352" class="Keyword">with</a> <a id="30357" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30368" href="/lia/part5/Exp/#30349" class="Bound">δ</a>
<a id="30370" class="Symbol">...</a> <a id="30374" class="Symbol">|</a> <a id="30376" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30381" href="/lia/part5/Exp/#30381" class="Bound">1s</a> <a id="30384" class="Symbol">=</a> <a id="30386" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30391" href="/lia/part5/Exp/#30381" class="Bound">1s</a>
<a id="30394" class="Symbol">...</a> <a id="30398" class="Symbol">|</a> <a id="30400" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30406" class="Symbol">(</a><a id="30407" href="/lia/part5/Exp/#30407" class="Bound">1s</a> <a id="30410" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30412" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30417" href="/lia/part5/Exp/#30417" class="Bound">0s</a><a id="30419" class="Symbol">)</a> <a id="30421" class="Symbol">=</a> <a id="30423" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30429" class="Symbol">(</a><a id="30430" href="/lia/part5/Exp/#30407" class="Bound">1s</a> <a id="30433" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30435" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30440" class="Symbol">(</a><a id="30441" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="30445" href="/lia/part5/Exp/#30417" class="Bound">0s</a><a id="30447" class="Symbol">))</a>
<a id="30450" class="Symbol">...</a> <a id="30454" class="Symbol">|</a> <a id="30456" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30462" class="Symbol">(</a><a id="30463" href="/lia/part5/Exp/#30463" class="Bound">1s</a> <a id="30466" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30468" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30474" class="Symbol">(</a><a id="30475" href="/lia/part5/Exp/#30475" class="Bound">0s</a> <a id="30478" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30480" href="/lia/part5/Exp/#30480" class="Bound">$s</a><a id="30482" class="Symbol">))</a> <a id="30485" class="Symbol">=</a> <a id="30487" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30493" class="Symbol">(</a><a id="30494" href="/lia/part5/Exp/#30463" class="Bound">1s</a> <a id="30497" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30499" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30505" class="Symbol">(</a><a id="30506" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30511" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30515" href="/lia/part5/Exp/#30475" class="Bound">0s</a> <a id="30518" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30520" href="/lia/part5/Exp/#30480" class="Bound">$s</a><a id="30522" class="Symbol">))</a>

<a id="30526" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30537" class="Symbol">(</a><a id="30538" href="/lia/part5/Exp/#26264" class="InductiveConstructor">↝𝟭</a> <a id="30541" href="/lia/part5/Exp/#30541" class="Bound">δ</a><a id="30542" class="Symbol">)</a> <a id="30544" class="Keyword">with</a> <a id="30549" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30560" href="/lia/part5/Exp/#30541" class="Bound">δ</a>
<a id="30562" class="Symbol">...</a> <a id="30566" class="Symbol">|</a> <a id="30568" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30573" href="/lia/part5/Exp/#30573" class="Bound">1s</a> <a id="30576" class="Symbol">=</a> <a id="30578" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30583" class="Symbol">(</a><a id="30584" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="30588" href="/lia/part5/Exp/#30573" class="Bound">1s</a><a id="30590" class="Symbol">)</a>
<a id="30592" class="Symbol">...</a> <a id="30596" class="Symbol">|</a> <a id="30598" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30604" class="Symbol">(</a><a id="30605" href="/lia/part5/Exp/#30605" class="Bound">1s</a> <a id="30608" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30610" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30615" href="/lia/part5/Exp/#30615" class="Bound">0s</a><a id="30617" class="Symbol">)</a> <a id="30619" class="Symbol">=</a> <a id="30621" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30627" class="Symbol">(</a><a id="30628" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30633" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30637" href="/lia/part5/Exp/#30605" class="Bound">1s</a> <a id="30640" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30642" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30647" href="/lia/part5/Exp/#30615" class="Bound">0s</a><a id="30649" class="Symbol">)</a>
<a id="30651" class="Symbol">...</a> <a id="30655" class="Symbol">|</a> <a id="30657" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30663" class="Symbol">(</a><a id="30664" href="/lia/part5/Exp/#30664" class="Bound">1s</a> <a id="30667" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30669" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30675" class="Symbol">(</a><a id="30676" href="/lia/part5/Exp/#30676" class="Bound">0s</a> <a id="30679" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30681" href="/lia/part5/Exp/#30681" class="Bound">$s</a><a id="30683" class="Symbol">))</a> <a id="30686" class="Symbol">=</a> <a id="30688" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30694" class="Symbol">(</a><a id="30695" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30700" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30704" href="/lia/part5/Exp/#30664" class="Bound">1s</a> <a id="30707" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30709" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30715" class="Symbol">(</a><a id="30716" href="/lia/part5/Exp/#30676" class="Bound">0s</a> <a id="30719" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30721" href="/lia/part5/Exp/#30681" class="Bound">$s</a><a id="30723" class="Symbol">))</a>

<a id="30727" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30738" class="Symbol">{</a><a id="30739" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a> <a id="30741" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="30743" href="/lia/part5/Exp/#30743" class="Bound">b</a><a id="30744" class="Symbol">}</a> <a id="30746" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$L</a> <a id="30750" class="Symbol">=</a> <a id="30752" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30758" class="Symbol">(</a><a id="30759" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30764" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30766" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30772" class="Symbol">(</a><a id="30773" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30778" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30780" href="/lia/part0/Naturals/#1490" class="Function">n&lt;sucn</a><a id="30786" class="Symbol">))</a>

<a id="30790" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30801" class="Symbol">{</a><a id="30802" href="/lia/part5/Exp/#30802" class="Bound">b</a> <a id="30804" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="30806" href="/lia/part5/Exp/#25841" class="InductiveConstructor">$</a><a id="30807" class="Symbol">}</a> <a id="30809" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝$R</a>
  <a id="30815" class="Keyword">rewrite</a>
    <a id="30827" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="30833" class="Symbol">(</a><a id="30834" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="30839" href="/lia/part5/Exp/#30802" class="Bound">b</a><a id="30840" class="Symbol">)</a> <a id="30842" class="Symbol">|</a>
    <a id="30848" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="30854" class="Symbol">(</a><a id="30855" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="30862" href="/lia/part5/Exp/#30802" class="Bound">b</a><a id="30863" class="Symbol">)</a> <a id="30865" class="Symbol">|</a>
    <a id="30871" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="30881" class="Symbol">{</a><a id="30882" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="30890" href="/lia/part5/Exp/#30802" class="Bound">b</a><a id="30891" class="Symbol">}</a> <a id="30893" class="Symbol">{</a><a id="30894" class="Number">0</a><a id="30895" class="Symbol">}</a> <a id="30897" class="Symbol">|</a>
    <a id="30903" href="/lia/part0/Naturals/#5486" class="Function">n+0≡n</a> <a id="30909" class="Symbol">(</a><a id="30910" href="/lia/part5/Exp/#29707" class="Function">dollars</a> <a id="30918" href="/lia/part5/Exp/#30802" class="Bound">b</a><a id="30919" class="Symbol">)</a> <a id="30921" class="Symbol">=</a> <a id="30923" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30929" class="Symbol">(</a><a id="30930" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30935" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30937" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30943" class="Symbol">(</a><a id="30944" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30949" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30951" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="30957" class="Symbol">))</a>

<a id="30961" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30972" class="Symbol">(</a><a id="30973" href="/lia/part5/Exp/#26391" class="InductiveConstructor">↝+L</a> <a id="30977" href="/lia/part5/Exp/#30977" class="Bound">δ</a><a id="30978" class="Symbol">)</a> <a id="30980" class="Keyword">with</a> <a id="30985" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="30996" href="/lia/part5/Exp/#30977" class="Bound">δ</a>
<a id="30998" class="Symbol">...</a> <a id="31002" class="Symbol">|</a> <a id="31004" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31009" href="/lia/part5/Exp/#31009" class="Bound">1s</a> <a id="31012" class="Symbol">=</a> <a id="31014" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31019" class="Symbol">(</a><a id="31020" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="31029" href="/lia/part5/Exp/#31009" class="Bound">1s</a><a id="31031" class="Symbol">)</a>
<a id="31033" class="Symbol">...</a> <a id="31037" class="Symbol">|</a> <a id="31039" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31045" class="Symbol">(</a><a id="31046" href="/lia/part5/Exp/#31046" class="Bound">1s</a> <a id="31049" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31051" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31056" href="/lia/part5/Exp/#31056" class="Bound">0s</a><a id="31058" class="Symbol">)</a> <a id="31060" class="Keyword">rewrite</a> <a id="31068" href="/lia/part5/Exp/#31046" class="Bound">1s</a> <a id="31071" class="Symbol">=</a> <a id="31073" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31079" class="Symbol">(</a><a id="31080" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31085" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31087" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31092" class="Symbol">(</a><a id="31093" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="31102" href="/lia/part5/Exp/#31056" class="Bound">0s</a><a id="31104" class="Symbol">))</a>
<a id="31107" class="Symbol">...</a> <a id="31111" class="Symbol">|</a> <a id="31113" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31119" class="Symbol">(</a><a id="31120" href="/lia/part5/Exp/#31120" class="Bound">1s</a> <a id="31123" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31125" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31131" class="Symbol">(</a><a id="31132" href="/lia/part5/Exp/#31132" class="Bound">0s</a> <a id="31135" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31137" href="/lia/part5/Exp/#31137" class="Bound">$s</a><a id="31139" class="Symbol">))</a> <a id="31142" class="Keyword">rewrite</a> <a id="31150" href="/lia/part5/Exp/#31120" class="Bound">1s</a> <a id="31153" class="Symbol">|</a> <a id="31155" href="/lia/part5/Exp/#31132" class="Bound">0s</a> <a id="31158" class="Symbol">=</a> <a id="31160" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31166" class="Symbol">(</a><a id="31167" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31172" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31174" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31180" class="Symbol">(</a><a id="31181" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31186" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31188" href="/lia/part0/Naturals/#7628" class="Function">&lt;-+-left</a> <a id="31197" href="/lia/part5/Exp/#31137" class="Bound">$s</a><a id="31199" class="Symbol">))</a>

<a id="31203" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31214" class="Symbol">(</a><a id="31215" href="/lia/part5/Exp/#26455" class="InductiveConstructor">↝+R</a> <a id="31219" href="/lia/part5/Exp/#31219" class="Bound">δ</a><a id="31220" class="Symbol">)</a> <a id="31222" class="Keyword">with</a> <a id="31227" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31238" href="/lia/part5/Exp/#31219" class="Bound">δ</a>
<a id="31240" class="Symbol">...</a> <a id="31244" class="Symbol">|</a> <a id="31246" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31251" href="/lia/part5/Exp/#31251" class="Bound">1s</a> <a id="31254" class="Symbol">=</a> <a id="31256" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31261" class="Symbol">(</a><a id="31262" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="31272" href="/lia/part5/Exp/#31251" class="Bound">1s</a><a id="31274" class="Symbol">)</a>
<a id="31276" class="Symbol">...</a> <a id="31280" class="Symbol">|</a> <a id="31282" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31288" class="Symbol">(</a><a id="31289" href="/lia/part5/Exp/#31289" class="Bound">1s</a> <a id="31292" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31294" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31299" href="/lia/part5/Exp/#31299" class="Bound">0s</a><a id="31301" class="Symbol">)</a> <a id="31303" class="Keyword">rewrite</a> <a id="31311" href="/lia/part5/Exp/#31289" class="Bound">1s</a> <a id="31314" class="Symbol">|</a> <a id="31316" href="/lia/part5/Exp/#31289" class="Bound">1s</a> <a id="31319" class="Symbol">=</a> <a id="31321" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31327" class="Symbol">(</a><a id="31328" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31333" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31335" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31340" class="Symbol">(</a><a id="31341" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="31351" href="/lia/part5/Exp/#31299" class="Bound">0s</a><a id="31353" class="Symbol">))</a>
<a id="31356" class="Symbol">...</a> <a id="31360" class="Symbol">|</a> <a id="31362" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31368" class="Symbol">(</a><a id="31369" href="/lia/part5/Exp/#31369" class="Bound">1s</a> <a id="31372" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31374" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31380" class="Symbol">(</a><a id="31381" href="/lia/part5/Exp/#31381" class="Bound">0s</a> <a id="31384" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31386" href="/lia/part5/Exp/#31386" class="Bound">$s</a><a id="31388" class="Symbol">))</a> <a id="31391" class="Keyword">rewrite</a> <a id="31399" href="/lia/part5/Exp/#31369" class="Bound">1s</a> <a id="31402" class="Symbol">|</a> <a id="31404" href="/lia/part5/Exp/#31369" class="Bound">1s</a> <a id="31407" class="Symbol">|</a> <a id="31409" href="/lia/part5/Exp/#31381" class="Bound">0s</a> <a id="31412" class="Symbol">=</a> <a id="31414" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31420" class="Symbol">(</a><a id="31421" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31426" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31428" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31434" class="Symbol">(</a><a id="31435" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31440" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31442" href="/lia/part0/Naturals/#7681" class="Function">&lt;-+-right</a> <a id="31452" href="/lia/part5/Exp/#31386" class="Bound">$s</a><a id="31454" class="Symbol">))</a>

<a id="31458" class="Comment">-- number of zeroes goes down</a>
<a id="31488" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31499" class="Symbol">{</a><a id="31500" href="/lia/part5/Exp/#31500" class="Bound">a</a> <a id="31502" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="31504" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31506" href="/lia/part5/Exp/#31506" class="Bound">b</a> <a id="31508" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="31509" class="Symbol">}</a> <a id="31511" href="/lia/part5/Exp/#26527" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="31516" class="Keyword">rewrite</a> <a id="31524" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="31534" class="Symbol">{</a><a id="31535" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="31542" href="/lia/part5/Exp/#31500" class="Bound">a</a><a id="31543" class="Symbol">}</a> <a id="31545" class="Symbol">{</a><a id="31546" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="31553" href="/lia/part5/Exp/#31506" class="Bound">b</a><a id="31554" class="Symbol">}</a> <a id="31556" class="Symbol">=</a> <a id="31558" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31564" class="Symbol">(</a> <a id="31566" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31571" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31573" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31578" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31584" class="Symbol">)</a>

<a id="31587" class="Comment">-- number of zeroes goes down</a>
<a id="31617" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31628" class="Symbol">{</a><a id="31629" href="/lia/part5/Exp/#31629" class="Bound">a</a> <a id="31631" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a> <a id="31633" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31635" href="/lia/part5/Exp/#31635" class="Bound">b</a> <a id="31637" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="31638" class="Symbol">}</a> <a id="31640" href="/lia/part5/Exp/#26590" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="31645" class="Keyword">rewrite</a> <a id="31653" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="31663" class="Symbol">{</a><a id="31664" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="31669" href="/lia/part5/Exp/#31629" class="Bound">a</a><a id="31670" class="Symbol">}</a> <a id="31672" class="Symbol">{</a><a id="31673" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="31678" href="/lia/part5/Exp/#31635" class="Bound">b</a><a id="31679" class="Symbol">}</a> <a id="31681" class="Symbol">=</a> <a id="31683" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31689" class="Symbol">(</a> <a id="31691" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31696" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31698" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31703" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31709" class="Symbol">)</a>

<a id="31712" class="Comment">-- number of zeroes goes down</a>
<a id="31742" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31753" class="Symbol">{</a><a id="31754" href="/lia/part5/Exp/#31754" class="Bound">a</a> <a id="31756" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="31758" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31760" href="/lia/part5/Exp/#31760" class="Bound">b</a> <a id="31762" href="/lia/part5/Exp/#25851" class="InductiveConstructor Operator">𝟬</a><a id="31763" class="Symbol">}</a> <a id="31765" href="/lia/part5/Exp/#26653" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="31770" class="Keyword">rewrite</a> <a id="31778" href="/lia/part0/Naturals/#5653" class="Function">suc-lemma</a> <a id="31788" class="Symbol">{</a><a id="31789" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="31796" href="/lia/part5/Exp/#31754" class="Bound">a</a><a id="31797" class="Symbol">}</a> <a id="31799" class="Symbol">{</a><a id="31800" href="/lia/part5/Exp/#29695" class="Function">zeroes</a> <a id="31807" href="/lia/part5/Exp/#31760" class="Bound">b</a><a id="31808" class="Symbol">}</a> <a id="31810" class="Symbol">=</a> <a id="31812" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31818" class="Symbol">(</a> <a id="31820" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31825" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31827" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31832" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31838" class="Symbol">)</a>

<a id="31841" class="Comment">-- number of ones goes down</a>
<a id="31869" href="/lia/part5/Exp/#30233" class="Function">triple-mon</a> <a id="31880" class="Symbol">{</a><a id="31881" href="/lia/part5/Exp/#31881" class="Bound">a</a> <a id="31883" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a> <a id="31885" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31887" href="/lia/part5/Exp/#31887" class="Bound">b</a> <a id="31889" href="/lia/part5/Exp/#25868" class="InductiveConstructor Operator">𝟭</a><a id="31890" class="Symbol">}</a> <a id="31892" href="/lia/part5/Exp/#26716" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="31897" class="Symbol">=</a> <a id="31899" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31904" href="/lia/part5/Exp/#31996" class="Function">goal</a> <a id="31909" class="Keyword">where</a>

  <a id="31918" href="/lia/part5/Exp/#31918" class="Function">have</a> <a id="31923" class="Symbol">:</a> <a id="31925" class="Symbol">∀</a> <a id="31927" href="/lia/part5/Exp/#31927" class="Bound">a</a> <a id="31929" href="/lia/part5/Exp/#31929" class="Bound">b</a> <a id="31931" class="Symbol">→</a> <a id="31933" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31937" class="Symbol">(</a><a id="31938" href="/lia/part5/Exp/#31927" class="Bound">a</a> <a id="31940" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31943" href="/lia/part5/Exp/#31929" class="Bound">b</a> <a id="31945" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31948" class="Number">1</a><a id="31949" class="Symbol">)</a> <a id="31951" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="31953" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31957" class="Symbol">(</a><a id="31958" href="/lia/part5/Exp/#31927" class="Bound">a</a> <a id="31960" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31963" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31967" href="/lia/part5/Exp/#31929" class="Bound">b</a><a id="31968" class="Symbol">)</a>
  <a id="31972" href="/lia/part5/Exp/#31918" class="Function">have</a> <a id="31977" class="Symbol">=</a> <a id="31979" class="Symbol">{! solve-∀ !}</a>

  <a id="31996" href="/lia/part5/Exp/#31996" class="Function">goal</a> <a id="32001" class="Symbol">:</a> <a id="32003" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="32007" class="Symbol">(</a><a id="32008" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32013" href="/lia/part5/Exp/#31881" class="Bound">a</a> <a id="32015" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="32018" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32023" href="/lia/part5/Exp/#31887" class="Bound">b</a> <a id="32025" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="32028" class="Number">1</a><a id="32029" class="Symbol">)</a> <a id="32031" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a> <a id="32034" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="32038" class="Symbol">(</a><a id="32039" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32044" href="/lia/part5/Exp/#31881" class="Bound">a</a> <a id="32046" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="32049" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="32053" class="Symbol">(</a><a id="32054" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32059" href="/lia/part5/Exp/#31887" class="Bound">b</a><a id="32060" class="Symbol">))</a>
  <a id="32065" href="/lia/part5/Exp/#31996" class="Function">goal</a> <a id="32070" class="Keyword">rewrite</a> <a id="32078" href="/lia/part5/Exp/#31918" class="Function">have</a> <a id="32083" class="Symbol">(</a><a id="32084" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32089" href="/lia/part5/Exp/#31881" class="Bound">a</a><a id="32090" class="Symbol">)</a> <a id="32092" class="Symbol">(</a><a id="32093" href="/lia/part5/Exp/#29702" class="Function">ones</a> <a id="32098" href="/lia/part5/Exp/#31887" class="Bound">b</a><a id="32099" class="Symbol">)</a> <a id="32101" class="Symbol">=</a> <a id="32103" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<div id="refs">

  <h1 id="references">
<a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

</div>

<h1 id="solutions">
<a class="anchor" href="#solutions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Solutions</h1>

<div class="solutionbox">

  <h6 id="exercise:BExp-semantics-solution">Solution to <a href="#exercise:BExp-semantics" title="Exercise 1">Exercise 1</a>
</h6>

  <p>We proceed by structural induction on Boolan expressions.</p>

  <pre class="Agda"><a id="3031" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3034" href="/lia/part5/Exp/#2023" class="InductiveConstructor">tt</a> <a id="3037" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3039" href="/lia/part5/Exp/#3039" class="Bound">ρ</a> <a id="3041" class="Symbol">=</a> <a id="3043" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="3046" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3049" href="/lia/part5/Exp/#2035" class="InductiveConstructor">ff</a> <a id="3052" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3054" href="/lia/part5/Exp/#3054" class="Bound">ρ</a> <a id="3056" class="Symbol">=</a> <a id="3058" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a>
<a id="3061" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3064" href="/lia/part5/Exp/#2213" class="InductiveConstructor Operator">¬</a> <a id="3066" href="/lia/part5/Exp/#3066" class="Bound">b</a> <a id="3068" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3070" href="/lia/part5/Exp/#3070" class="Bound">ρ</a> <a id="3072" class="Symbol">=</a> <a id="3074" href="/lia/part0/Booleans/#1119" class="Function Operator">¬𝔹</a> <a id="3077" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3080" href="/lia/part5/Exp/#3066" class="Bound">b</a> <a id="3082" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3084" href="/lia/part5/Exp/#3070" class="Bound">ρ</a>
<a id="3086" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3089" href="/lia/part5/Exp/#3089" class="Bound">b</a> <a id="3091" href="/lia/part5/Exp/#2154" class="InductiveConstructor Operator">∨</a> <a id="3093" href="/lia/part5/Exp/#3093" class="Bound">c</a> <a id="3095" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3097" href="/lia/part5/Exp/#3097" class="Bound">ρ</a> <a id="3099" class="Symbol">=</a> <a id="3101" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3104" href="/lia/part5/Exp/#3089" class="Bound">b</a> <a id="3106" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3108" href="/lia/part5/Exp/#3097" class="Bound">ρ</a> <a id="3110" href="/lia/part0/Booleans/#1061" class="Function Operator">∨𝔹</a> <a id="3113" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3116" href="/lia/part5/Exp/#3093" class="Bound">c</a> <a id="3118" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3120" href="/lia/part5/Exp/#3097" class="Bound">ρ</a>
<a id="3122" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3125" href="/lia/part5/Exp/#3125" class="Bound">b</a> <a id="3127" href="/lia/part5/Exp/#2183" class="InductiveConstructor Operator">∧</a> <a id="3129" href="/lia/part5/Exp/#3129" class="Bound">c</a> <a id="3131" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3133" href="/lia/part5/Exp/#3133" class="Bound">ρ</a> <a id="3135" class="Symbol">=</a> <a id="3137" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3140" href="/lia/part5/Exp/#3125" class="Bound">b</a> <a id="3142" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3144" href="/lia/part5/Exp/#3133" class="Bound">ρ</a> <a id="3146" href="/lia/part0/Booleans/#1003" class="Function Operator">∧𝔹</a> <a id="3149" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3152" href="/lia/part5/Exp/#3129" class="Bound">c</a> <a id="3154" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3156" href="/lia/part5/Exp/#3133" class="Bound">ρ</a>
<a id="3158" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3161" href="/lia/part5/Exp/#3161" class="Bound">e</a> <a id="3163" href="/lia/part5/Exp/#2234" class="InductiveConstructor Operator">≤</a> <a id="3165" href="/lia/part5/Exp/#3165" class="Bound">f</a> <a id="3167" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3169" href="/lia/part5/Exp/#3169" class="Bound">ρ</a>
  <a id="3173" class="Keyword">with</a> <a id="3178" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="3181" href="/lia/part5/Exp/#3161" class="Bound">e</a> <a id="3183" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="3185" href="/lia/part5/Exp/#3169" class="Bound">ρ</a> <a id="3187" href="/lia/part0/Naturals/#1135" class="Function Operator">≤?</a> <a id="3190" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="3193" href="/lia/part5/Exp/#3165" class="Bound">f</a> <a id="3195" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="3197" href="/lia/part5/Exp/#3169" class="Bound">ρ</a>
<a id="3199" class="Symbol">...</a> <a id="3203" class="Symbol">|</a> <a id="3205" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="3209" class="Symbol">_</a> <a id="3211" class="Symbol">=</a> <a id="3213" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="3216" class="Symbol">...</a> <a id="3220" class="Symbol">|</a> <a id="3222" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="3225" class="Symbol">_</a> <a id="3227" class="Symbol">=</a> <a id="3229" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a></pre>

  <p><span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

</div>

<hr>

    </div>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

    <p class="p-name"> Last-modified: Feb  1 19:51:04 2021 </p>
  </article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/lia/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Logic in Agda</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Lorenzo Clemente</li>
          <li><a class="u-email" href="mailto:clementelorenzo@gmail.com">clementelorenzo@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/lclem"><svg class="svg-icon"><use xlink:href="/lia/assets/minima-social-icons.svg#github"></use></svg> <span class="username">lclem</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>

<!-- Parse the Latex divs with Katex
<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex, {displayMode: false});
  });
  
  $("script[type='math/tex; mode=display']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
  });
</script>
-->

<script type="text/javascript" src="/lia/assets/hidebox.js"></script>
</body>

</html>
