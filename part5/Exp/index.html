<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arithmetic and Boolean expressions 🚧 | Logic in Agda</title><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Arithmetic and Boolean expressions 🚧" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<meta property="og:description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<link rel="canonical" href="/lia/part5/Exp/" />
<meta property="og:url" content="/lia/part5/Exp/" />
<meta property="og:site_name" content="Logic in Agda" />
<script type="application/ld+json">
{"url":"/lia/part5/Exp/","@type":"WebPage","description":"Propositional and fist-order logic developed with the proof assistant Agda.","headline":"Arithmetic and Boolean expressions 🚧","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/lia/assets/main.css">

  <!-- <link rel="stylesheet" href="/lia/assets/custom.css"> --><!-- Mathjax Support -->
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.js"></script>

<script type="text/x-thebe-config">
  {
    bootstrap: true,
    requestKernel: true,
    runAllCells: false,
    selector: "[data-executable]",
    predefinedOutput: false,
    codeMirrorConfig: {
        //theme: "idea",
        language: "agda",
        readOnly: false,
        lineNumbers: true,
        keyMap: "default",
//        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
    },
    kernelOptions: {
        name: "agda",
        kernelName: "agda",
        path: "src/",
        loadFromStore: true,
        persistent: false,
        // notebook server configuration; not needed with binder
        serverSettings: {
              baseUrl: "http://127.0.0.1:8888",
              token: "test-secret",
            },
    },
    binderOptions: {
      repo: "lclem/lia", // need to put here the actual github repo (if it is a fork)
      ref: "main",
      binderUrl: "https://mybinder.org",
      repoProvider: "github",
      savedSession: {
        enabled: true,
        maxAge: 86400, // the max age in seconds to consider re-using a session
        storagePrefix: "thebe-binder-lia-"
      },
    },
  }
</script>

<!-- <script type="text/javascript" src="https://unpkg.com/thebelab@latest"></script> -->

<!-- our own version of the thebe library: -->
<script type="text/javascript" src="/lia/thebe/lib/index.js"></script>

<!-- highlighting for Agda -->
<script src="/lia/codemirror-agda/lib/index.js"></script>

</head>
<body><header class="site-header" id="site-header">

    <div class="wrapper">

        <a class="site-title" href="/lia/">Logic in Agda</a>

        <nav class="site-nav">
            <!-- <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span> -->

            <div class="trigger">
                <a class="page-link" href="/lia/part0/index/">Part 0</a>
                <a class="page-link" href="/lia/part1/index/">Part 1</a>
                <a class="page-link" href="/lia/part2/index/">Part 2</a>
                <a class="page-link" href="/lia/part3/index/">Part 3</a>
                <a class="page-link" href="/lia/part4/index/">Part 4</a>
                <a class="page-link" href="/lia/part5/index/">Part 5</a>

                <span class="kernel-status">
                    <button class="kernel-status-button" onclick="kernel_status_clicked()" title="kernel status"></button>
                    <span id="kernel-messages" class="kernel-messages"></span>
                </span>

                <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;">
                    <!-- display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; -->
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                    <div>
                        <label for="username" style="color: white;">User:</label>
                        <input type="text" placeholder="github username" id="username" name="username">
                        <label for="password" style="color: white;">Password:</label>
                        <input type="password" placeholder="password" id="password" name="password">
                    </div>
                    <div>
                        <label for="loadFromStore" style="color: white;">Load code from browser store:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="loadFromStore" name="loadFromStore">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="baseUrl" style="color: white;">Base URL:</label>
                        <input type="text" placeholder="baseUrl" id="baseUrl" name="baseUrl" value="http://127.0.0.1:8888">
                        <label for="token" style="color: white;">Token:</label>
                        <input type="text" placeholder="token" id="token" name="token" value="test-secret">
                    </div>
                    <div>
                        <label for="useBinder" style="color: white;">Use binder:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="useBinder" name="useBinder">
                            <span class="slider round"></span>
                        </label>
                        <label for="savedSession" style="color: white;">Reuse session:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="savedSession" name="savedSession">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="repository" style="color: white;">Github repo:</label>
                        <input type="text" placeholder="repository" id="repository" name="repository" value="">

                        <label for="ref" style="color: white;">Branch:</label>
                        <input type="text" placeholder="ref" id="ref" name="ref" value="main">

                        <label for="binderUrl" style="color: white;">Binder URL:</label>                        
                        <input type="text" placeholder="binderUrl" id="binderUrl" name="binderUrl" value="https://mybinder.org">
                    </div>
                </div>

                <span class="control-container" id="control-container">
                    <svg class="progress-ring" id="progress-ring" width="30" height="30" title="exercise progress" onclick="kernel_status_clicked()">
                        <circle
                            id="progress-circle"
                            class="progress-ring__circle"
                            stroke="black"
                            stroke-width="2.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                        <circle
                            stroke="lightgray"
                            stroke-width="0.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                    </svg>
                    <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;"></div>
                    <span class="progress-text" id="progress-text" onclick="kernel_status_clicked()"> 0/0 </span>

                    <span id="controls" class="controls">
                        <svg version="1.1" id="run-all" class="run-all" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="15" height="15" viewBox="0 0 163.861 163.861" style="enable-background:new 0 0 163.861 163.861;"
                            xml:space="preserve">
                            <g>
                                <path d="M34.857,3.613C20.084-4.861,8.107,2.081,8.107,19.106v125.637c0,17.042,11.977,23.975,26.75,15.509L144.67,97.275
                                    c14.778-8.477,14.778-22.211,0-30.686L34.857,3.613z"/>
                            </g>
                        </svg>
                    </span>
                </span>
            </div>

            <style>
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 40px;
                    height: 20px;
                }

                /* Hide default HTML checkbox */
                .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }

                /* The slider */
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 2px;
                    /* right: 4px; */
                    bottom: 2px;
                    top: 2px;
                    background-color: white;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                input:checked + .slider {
                    background-color: #2196F3;
                }

                input:focus + .slider {
                    box-shadow: 0 0 1px #2196F3;
                }

                input:checked + .slider:before {
                    -webkit-transform: translateX(18px);
                    -ms-transform: translateX(18px);
                    transform: translateX(18px);
                }

                /* Rounded sliders */
                .slider.round {
                    border-radius: 30px;
                }

                .slider.round:before {
                border-radius: 50%;
                }

                .sidebar input[type=text] {
                    padding: 6px;
                    margin-top: 8px;
                    /* font-size: 17px; */
                    border: none;
                    /* width: 150px; */
                }

                .sidebar {
                    /* height: 100%; */
                    width: 0;
                    position: fixed;
                    z-index: 1000;
                    top: 0;
                    right: 20px;
                    background-color: rgba(17, 17, 17, 0.637);
                    /* overflow-x: hidden; */
                    transition: 0.5s;
                    padding-top: 60px;
                    display: none;
                    margin-top: 60px;
                }

                .sidebar .closebtn {
                    position: absolute;
                    color: white;
                    top: 0;
                    right: 10px;
                    font-size: 24px;
                    margin-left: 20px;
                }

                .progress-ring, .run-all {
                    vertical-align: middle;
                }

                .control-container {
                    transition: all .2s ease-in-out;
                }

                .controls {
                    display: none;
                    opacity: 0;
                    margin-right: 10px;
                    transition: all .5s ease-in-out;
                }

                .run-all:hover {
                    filter: brightness(135%);
                }

                .progress-ring__circle {
                    transition: 0.35s stroke-dashoffset;
                    transform: rotate(-90deg);
                    transform-origin: 50% 50%;
                    visibility: hidden;
                }

                .progress-text {
                    position: relative;
                    top: 0;
                    left: -25px;
                    font-size: 8px;
                    vertical-align: middle;
                    align-self: center;
                }

                .progress-text:hover, .progress-ring:hover, .progress-ring__circle:hover, .run-all {
                    cursor: pointer;
                }
            </style>

            <script>

                //  var storedUsername = localStorage.getItem("username");
                //  localStorage.setItem("username", storedUsername.value);
            
                function doStore(input, key) {

                    if(input.type == "checkbox") {
                        var checked = localStorage.getItem(key);

                        if (checked == "yes") {
                            localStorage.setItem(key, "no");
                        }
                        else {
                            localStorage.setItem(key, "yes");
                        }

                        console.info("checked: ", localStorage.getItem(key));
                    }
                    else {
                        console.info("value: ", input.value);
                        localStorage.setItem(key, input.value);
                    }
                }

                function persistInput(input) {
                    var key = "input-" + input.id;
                    var storedValue = localStorage.getItem(key);
                
                    console.info("Persisting input: ", input);
                
                    // if there is a stored value, use it
                    if (storedValue) {

                        if(input.type != "password") {
                            console.info("restoring value ", storedValue, " for ", input);
                        }

                        if(input.type == "checkbox") {
                            if(storedValue=="yes") {
                                input.setAttribute("checked", "");
                            }
                            else {
                                input.removeAttribute("checked");
                            }
                        }
                        else {
                            input.value = storedValue;
                        }
                    }
                    // if there is no stored value, store the current value
                    else {
                        doStore(input, key);
                    }

                    input.addEventListener('input', function () {
                        console.info("input changed: key = ", key, "; value = ", input);
                        doStore(input, key);
                    });
                    }
                
                    persistInput(document.getElementById("username"));
                    persistInput(document.getElementById("password"));

                    persistInput(document.getElementById("loadFromStore"));

                    persistInput(document.getElementById("baseUrl"));
                    persistInput(document.getElementById("token"));

                    persistInput(document.getElementById("useBinder"));
                    persistInput(document.getElementById("savedSession"));
                    persistInput(document.getElementById("repository"));
                    persistInput(document.getElementById("ref"));
                    persistInput(document.getElementById("binderUrl"));

                    // init
                    document.getElementById("connection_options").style.display = "none";

                    function kernel_status_clicked() {
                
                        console.info("Clicked kernel status");

                        document.getElementById("kernel-messages").style.display = "none";

                        document.getElementById("connection_options").style.width = "750px";
                        document.getElementById("connection_options").style.display = "block";
                        //document.getElementById("header").style.marginLeft = "250px";

                    }

                    function closeNav() {

                        document.getElementById("kernel-messages").style.display = "inline";

                        document.getElementById("connection_options").style.width = "0";
                        document.getElementById("connection_options").style.display = "none";
                        //document.getElementById("header").style.marginLeft= "0";
                    }

                var prevScrollpos = window.pageYOffset;
                var header = document.getElementById("site-header");
                var boxShadow = header.style.boxShadow;

                window.onscroll = function() {
                    var currentScrollPos = window.pageYOffset;
                    // detect scroll down
                    if (prevScrollpos > currentScrollPos) {
                        header.style.top = "0";
                        header.style.boxShadow = boxShadow;
                        prevScrollpos = currentScrollPos;
                    } else if (prevScrollpos <= currentScrollPos) {
                        header.style.top = "-55px";
                        header.style.boxShadow = "none"
                        prevScrollpos = currentScrollPos;
                    }
                }

            let control_container = document.getElementById("control-container");
            let controls = document.getElementById("controls");

            control_container.addEventListener("mouseenter", function(event) {
                controls.style.display = "inline";
//                controls.style.visibility = "visible";
                controls.style.opacity = 1;
                console.info("mouseenter");
            }, false);

            control_container.addEventListener("mouseleave", function(event) {
                // controls.style.visibility = "hidden";
                // controls.style.display = "none";
                controls.style.opacity = 0;
                console.info("mouseleave");
            }, false);

            </script>
            
        </nav>

    </div>

</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

    <header class="post-header">
        <h1 class="post-title">Arithmetic and Boolean expressions 🚧</h1>
    </header>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

  
    <div class="post-content">
        <h2>Contents</h2>    
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#arithmetic-expressions">Arithmetic expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#variables">Variables</a></li>
<li class="toc-entry toc-h2"><a href="#syntax-of-expressions">Syntax of expressions</a></li>
<li class="toc-entry toc-h2"><a href="#environments">Environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#boolean-expressions">Boolean expressions</a></li>
<li class="toc-entry toc-h1"><a href="#denotational-semantics">Denotational semantics</a></li>
<li class="toc-entry toc-h1"><a href="#lazy-semantics">Lazy semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#dynamic-binding">Dynamic binding</a></li>
<li class="toc-entry toc-h2"><a href="#static-binding">Static binding</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#free-variables">Free variables</a></li>
<li class="toc-entry toc-h1"><a href="#substitution">Substitution</a></li>
<li class="toc-entry toc-h1"><a href="#contextual-equivalence-and-full-abstraction">Contextual equivalence and full abstraction</a></li>
<li class="toc-entry toc-h1"><a href="#small-steps-operational-semantics">Small-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#global-environment">Global environment</a></li>
<li class="toc-entry toc-h2"><a href="#local-environments">Local environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#big-steps-operational-semantics">Big-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#evaluator-interpreter">Evaluator (interpreter)</a></li>
<li class="toc-entry toc-h2"><a href="#evaluation-is-deterministic">Evaluation is deterministic</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-the-semantics">Agreement of the semantics</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-numbers">Binary numbers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#lsd">LSD</a></li>
<li class="toc-entry toc-h2"><a href="#msd">MSD</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-lsd-and-msd">Agreement of LSD and MSD</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-expressions">Binary expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#syntax">Syntax</a></li>
<li class="toc-entry toc-h2"><a href="#denotational-semantics-1">Denotational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#small-steps-operational-semantics-1">Small-steps operational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#agreement">Agreement</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-first-proof">Strong normalisation (first proof)</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-second-proof">Strong normalisation (second proof)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#references">References</a></li>
<li class="toc-entry toc-h1"><a href="#solutions">Solutions</a></li>
</ul><pre class="Agda"><a id="60" class="Symbol">{-#</a> <a id="64" class="Keyword">OPTIONS</a> <a id="72" class="Pragma">--allow-unsolved-metas</a> <a id="95" class="Symbol">#-}</a>
<a id="99" class="Keyword">module</a> <a id="106" href="/lia/part5/Exp/" class="Module">part5.Exp</a> <a id="116" class="Keyword">where</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="/lia/part0/index/" class="Module">part0.index</a> <a id="146" class="Keyword">hiding</a> <a id="153" class="Symbol">(</a><a id="154" href="/lia/part0/Naturals/#7324" class="Datatype">AExp</a><a id="158" class="Symbol">;</a> <a id="160" href="/lia/part0/Naturals/#7435" class="Function Operator">A⟦_⟧</a><a id="164" class="Symbol">;</a> <a id="166" href="/lia/part0/List/#23605" class="Function Operator">_≈_</a><a id="169" class="Symbol">)</a> <a id="171" class="Keyword">renaming</a> <a id="180" class="Symbol">(</a><a id="181" href="/lia/part0/Naturals/#266" class="Primitive Operator">_+_</a> <a id="185" class="Symbol">to</a> <a id="Nat._+_"></a><a id="188" href="/lia/part5/Exp/#188" class="Primitive Operator">_+ℕ_</a><a id="192" class="Symbol">;</a> <a id="194" href="/lia/part0/Naturals/#288" class="Primitive Operator">_*_</a> <a id="198" class="Symbol">to</a> <a id="Nat._*_"></a><a id="201" href="/lia/part5/Exp/#201" class="Primitive Operator">_·ℕ_</a><a id="205" class="Symbol">;</a> <a id="207" href="/lia/part0/Naturals/#798" class="Datatype Operator">_≤_</a> <a id="211" class="Symbol">to</a> <a id="_≤_"></a><a id="214" href="/lia/part5/Exp/#214" class="Datatype Operator">_≤ℕ_</a><a id="218" class="Symbol">)</a> <a id="220" class="Keyword">public</a></pre>

<h1 id="arithmetic-expressions">
<a class="anchor" href="#arithmetic-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arithmetic expressions</h1>

<p>We develop an eager denotational and operational semantics for a simple
language of arithmetic expressions, and we prove that they agree.</p>

<h2 id="variables">
<a class="anchor" href="#variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variables</h2>

<p>We represent <em>variable names</em> as natural Number. Any countable domain
with decidable equality (such as strings) would work here</p>

<pre class="Agda"><a id="VarName"></a><a id="544" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="552" class="Symbol">=</a> <a id="554" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="x₀"></a><a id="557" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="x₁"></a><a id="560" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="563" class="Symbol">:</a> <a id="565" href="/lia/part5/Exp/#544" class="Function">VarName</a>
<a id="573" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="576" class="Symbol">=</a> <a id="578" class="Number">0</a>
<a id="580" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="583" class="Symbol">=</a> <a id="585" class="Number">1</a>

<a id="588" class="Keyword">private</a> <a id="596" class="Keyword">variable</a> <a id="605" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="607" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="609" href="/lia/part5/Exp/#609" class="Generalizable">z</a> <a id="611" class="Symbol">:</a> <a id="613" href="/lia/part5/Exp/#544" class="Function">VarName</a></pre>

<h2 id="syntax-of-expressions">
<a class="anchor" href="#syntax-of-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax of expressions</h2>

<p>We define a minimalistic language of arithmetic expressions comprising
variables and a let assignment construct.</p>

<pre class="Agda"><a id="770" class="Keyword">data</a> <a id="AExp"></a><a id="775" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="780" class="Symbol">:</a> <a id="782" class="PrimitiveType">Set</a> <a id="786" class="Keyword">where</a>
  <a id="AExp.Num"></a><a id="794" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="798" class="Symbol">:</a> <a id="800" class="Symbol">(</a><a id="801" href="/lia/part5/Exp/#801" class="Bound">n</a> <a id="803" class="Symbol">:</a> <a id="805" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="806" class="Symbol">)</a> <a id="808" class="Symbol">→</a> <a id="810" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Var"></a><a id="817" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="821" class="Symbol">:</a> <a id="823" class="Symbol">(</a><a id="824" href="/lia/part5/Exp/#824" class="Bound">x</a> <a id="826" class="Symbol">:</a> <a id="828" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="835" class="Symbol">)</a> <a id="837" class="Symbol">→</a> <a id="839" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Add"></a><a id="846" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="850" class="Symbol">:</a> <a id="852" class="Symbol">(</a><a id="853" href="/lia/part5/Exp/#853" class="Bound">e</a> <a id="855" href="/lia/part5/Exp/#855" class="Bound">f</a> <a id="857" class="Symbol">:</a> <a id="859" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="863" class="Symbol">)</a> <a id="865" class="Symbol">→</a> <a id="867" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Mul"></a><a id="874" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="878" class="Symbol">:</a> <a id="880" class="Symbol">(</a><a id="881" href="/lia/part5/Exp/#881" class="Bound">e</a> <a id="883" href="/lia/part5/Exp/#883" class="Bound">f</a> <a id="885" class="Symbol">:</a> <a id="887" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="891" class="Symbol">)</a> <a id="893" class="Symbol">→</a> <a id="895" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
  <a id="AExp.Let"></a><a id="902" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="906" class="Symbol">:</a> <a id="908" class="Symbol">(</a><a id="909" href="/lia/part5/Exp/#909" class="Bound">x</a> <a id="911" class="Symbol">:</a> <a id="913" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="920" class="Symbol">)</a> <a id="922" class="Symbol">(</a><a id="923" href="/lia/part5/Exp/#923" class="Bound">e</a> <a id="925" href="/lia/part5/Exp/#925" class="Bound">f</a> <a id="927" class="Symbol">:</a> <a id="929" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="933" class="Symbol">)</a> <a id="935" class="Symbol">→</a> <a id="937" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="943" class="Keyword">private</a>
  <a id="953" class="Keyword">variable</a>
    <a id="966" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="968" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="971" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="973" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="976" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="978" class="Symbol">:</a> <a id="980" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
    <a id="989" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="991" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="993" class="Symbol">:</a> <a id="995" href="/lia/part0/Naturals/#301" class="Function">ℕ</a></pre>

<p>For example, the following expression adds one to a variable (called
10). This is pure syntax so far, no calculation is being performed.</p>

<pre class="Agda"><a id="add-one"></a><a id="1144" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="1152" class="Symbol">:</a> <a id="1154" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
<a id="1159" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="1167" class="Symbol">=</a> <a id="1169" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="1173" class="Symbol">(</a><a id="1174" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="1178" class="Number">10</a><a id="1180" class="Symbol">)</a> <a id="1182" class="Symbol">(</a><a id="1183" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="1187" class="Number">1</a><a id="1188" class="Symbol">)</a></pre>
<pre class="Agda"><a id="1199" class="Keyword">pattern</a> <a id="$_"></a><a id="1207" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$_</a> <a id="1210" href="/lia/part5/Exp/#1218" class="Bound">n</a> <a id="1212" class="Symbol">=</a> <a id="1214" class="InductiveConstructor">Num</a> <a id="1218" href="/lia/part5/Exp/#1218" class="Bound">n</a>
<a id="1220" class="Keyword">pattern</a> <a id="`_"></a><a id="1228" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`_</a> <a id="1231" href="/lia/part5/Exp/#1239" class="Bound">x</a> <a id="1233" class="Symbol">=</a> <a id="1235" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="1239" href="/lia/part5/Exp/#1239" class="Bound">x</a>
<a id="1241" class="Keyword">pattern</a> <a id="_+_"></a><a id="1249" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">_+_</a> <a id="1253" href="/lia/part5/Exp/#1263" class="Bound">x</a> <a id="1255" href="/lia/part5/Exp/#1265" class="Bound">y</a> <a id="1257" class="Symbol">=</a> <a id="1259" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="1263" href="/lia/part5/Exp/#1263" class="Bound">x</a> <a id="1265" href="/lia/part5/Exp/#1265" class="Bound">y</a>
<a id="1267" class="Keyword">pattern</a> <a id="_·_"></a><a id="1275" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">_·_</a> <a id="1279" href="/lia/part5/Exp/#1289" class="Bound">x</a> <a id="1281" href="/lia/part5/Exp/#1291" class="Bound">y</a> <a id="1283" class="Symbol">=</a> <a id="1285" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="1289" href="/lia/part5/Exp/#1289" class="Bound">x</a> <a id="1291" href="/lia/part5/Exp/#1291" class="Bound">y</a>
<a id="1293" class="Keyword">pattern</a> <a id="Let_≔_In_"></a><a id="1301" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let_≔_In_</a> <a id="1311" href="/lia/part5/Exp/#1323" class="Bound">x</a> <a id="1313" href="/lia/part5/Exp/#1325" class="Bound">e</a> <a id="1315" href="/lia/part5/Exp/#1327" class="Bound">f</a> <a id="1317" class="Symbol">=</a> <a id="1319" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="1323" href="/lia/part5/Exp/#1323" class="Bound">x</a> <a id="1325" href="/lia/part5/Exp/#1325" class="Bound">e</a> <a id="1327" href="/lia/part5/Exp/#1327" class="Bound">f</a>

<a id="1330" class="Keyword">infix</a> <a id="1336" class="Number">50</a> <a id="1339" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$_</a> <a id="1342" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`_</a>
<a id="1345" class="Keyword">infixr</a> <a id="1352" class="Number">30</a> <a id="1355" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">_·_</a>
<a id="1359" class="Keyword">infixl</a> <a id="1366" class="Number">25</a> <a id="1369" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">_+_</a>
<a id="1373" class="Keyword">infixr</a> <a id="1380" class="Number">20</a> <a id="1383" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let_≔_In_</a></pre>
<pre class="Agda"><a id="add-one′"></a><a id="1402" href="/lia/part5/Exp/#1402" class="Function">add-one′</a> <a id="1411" class="Symbol">:</a> <a id="1413" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>
<a id="1418" href="/lia/part5/Exp/#1402" class="Function">add-one′</a> <a id="1427" class="Symbol">=</a> <a id="1429" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="1431" class="Number">10</a> <a id="1434" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="1436" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="1438" class="Number">1</a></pre>

<h2 id="environments">
<a class="anchor" href="#environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environments</h2>

<p>In order to represent the value of free variables, we use environments.</p>

<pre class="Agda"><a id="Env"></a><a id="1539" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="1543" class="Symbol">=</a> <a id="1545" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="1553" class="Symbol">→</a> <a id="1555" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="1558" class="Keyword">private</a> <a id="1566" class="Keyword">variable</a> <a id="1575" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="1577" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="1580" class="Symbol">:</a> <a id="1582" href="/lia/part5/Exp/#1539" class="Function">Env</a></pre>

<p>The following environment assigns value <code class="language-plaintext highlighter-rouge">200</code> to the variable named
<code class="language-plaintext highlighter-rouge">10</code>, and value <code class="language-plaintext highlighter-rouge">40</code> to every other variable.</p>

<pre class="Agda"><a id="ϱ₀"></a><a id="1710" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="1713" class="Symbol">:</a> <a id="1715" href="/lia/part5/Exp/#1539" class="Function">Env</a>
<a id="1719" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="1722" class="Number">10</a> <a id="1725" class="Symbol">=</a> <a id="1727" class="Number">200</a>
<a id="1731" href="/lia/part5/Exp/#1710" class="CatchallClause Function">ϱ₀</a><a id="1733" class="CatchallClause"> </a><a id="1734" class="CatchallClause Symbol">_</a> <a id="1736" class="Symbol">=</a> <a id="1738" class="Number">40</a></pre>

<h1 id="boolean-expressions">
<a class="anchor" href="#boolean-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Boolean expressions</h1>

<p>On top of arithmetic expressions we can build a simple language of
Boolean expressions. An element in <code class="language-plaintext highlighter-rouge">BExp</code> is a boolean combination of
atomic expressions of the form <code class="language-plaintext highlighter-rouge">Leq e f</code>, where <code class="language-plaintext highlighter-rouge">e</code> and <code class="language-plaintext highlighter-rouge">f</code> are
arithmetic expressions.</p>

<pre class="Agda"><a id="1999" class="Keyword">data</a> <a id="BExp"></a><a id="2004" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2009" class="Symbol">:</a> <a id="2011" class="PrimitiveType">Set</a> <a id="2015" class="Keyword">where</a>
  <a id="BExp.tt"></a><a id="2023" href="/lia/part5/Exp/#2023" class="InductiveConstructor">tt</a> <a id="2026" class="Symbol">:</a> <a id="2028" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.ff"></a><a id="2035" href="/lia/part5/Exp/#2035" class="InductiveConstructor">ff</a> <a id="2038" class="Symbol">:</a> <a id="2040" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Not"></a><a id="2047" href="/lia/part5/Exp/#2047" class="InductiveConstructor">Not</a> <a id="2051" class="Symbol">:</a> <a id="2053" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2058" class="Symbol">→</a> <a id="2060" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Or"></a><a id="2067" href="/lia/part5/Exp/#2067" class="InductiveConstructor">Or</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2077" class="Symbol">→</a> <a id="2079" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2084" class="Symbol">→</a> <a id="2086" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.And"></a><a id="2093" href="/lia/part5/Exp/#2093" class="InductiveConstructor">And</a> <a id="2097" class="Symbol">:</a> <a id="2099" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2104" class="Symbol">→</a> <a id="2106" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2111" class="Symbol">→</a> <a id="2113" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>
  <a id="BExp.Leq"></a><a id="2120" href="/lia/part5/Exp/#2120" class="InductiveConstructor">Leq</a> <a id="2124" class="Symbol">:</a> <a id="2126" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2131" class="Symbol">→</a> <a id="2133" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2138" class="Symbol">→</a> <a id="2140" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a>

<a id="2146" class="Keyword">pattern</a> <a id="_∨_"></a><a id="2154" href="/lia/part5/Exp/#2154" class="InductiveConstructor Operator">_∨_</a> <a id="2158" href="/lia/part5/Exp/#2169" class="Bound">b₀</a> <a id="2161" href="/lia/part5/Exp/#2172" class="Bound">b₁</a> <a id="2164" class="Symbol">=</a> <a id="2166" href="/lia/part5/Exp/#2067" class="InductiveConstructor">Or</a> <a id="2169" href="/lia/part5/Exp/#2169" class="Bound">b₀</a> <a id="2172" href="/lia/part5/Exp/#2172" class="Bound">b₁</a>
<a id="2175" class="Keyword">pattern</a> <a id="_∧_"></a><a id="2183" href="/lia/part5/Exp/#2183" class="InductiveConstructor Operator">_∧_</a> <a id="2187" href="/lia/part5/Exp/#2199" class="Bound">b₀</a> <a id="2190" href="/lia/part5/Exp/#2202" class="Bound">b₁</a> <a id="2193" class="Symbol">=</a> <a id="2195" href="/lia/part5/Exp/#2093" class="InductiveConstructor">And</a> <a id="2199" href="/lia/part5/Exp/#2199" class="Bound">b₀</a> <a id="2202" href="/lia/part5/Exp/#2202" class="Bound">b₁</a>
<a id="2205" class="Keyword">pattern</a> <a id="¬_"></a><a id="2213" href="/lia/part5/Exp/#2213" class="InductiveConstructor Operator">¬_</a> <a id="2216" href="/lia/part5/Exp/#2224" class="Bound">b</a> <a id="2218" class="Symbol">=</a> <a id="2220" href="/lia/part5/Exp/#2047" class="InductiveConstructor">Not</a> <a id="2224" href="/lia/part5/Exp/#2224" class="Bound">b</a>
<a id="2226" class="Keyword">pattern</a> <a id="_≤_"></a><a id="2234" href="/lia/part5/Exp/#2234" class="InductiveConstructor Operator">_≤_</a> <a id="2238" href="/lia/part5/Exp/#2248" class="Bound">e</a> <a id="2240" href="/lia/part5/Exp/#2250" class="Bound">f</a> <a id="2242" class="Symbol">=</a> <a id="2244" href="/lia/part5/Exp/#2120" class="InductiveConstructor">Leq</a> <a id="2248" href="/lia/part5/Exp/#2248" class="Bound">e</a> <a id="2250" href="/lia/part5/Exp/#2250" class="Bound">f</a></pre>

<h1 id="denotational-semantics">
<a class="anchor" href="#denotational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h1>

<pre class="Agda"><a id="2287" class="Keyword">infix</a> <a id="2293" class="Number">15</a> <a id="2296" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a> <a id="2301" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦_⟧_</a>
<a id="2307" class="Keyword">private</a> <a id="⟦_⟧_"></a><a id="2315" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a> <a id="2320" class="Symbol">:</a> <a id="2322" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="2327" class="Symbol">→</a> <a id="2329" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="2333" class="Symbol">→</a> <a id="2335" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="2337" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2339" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="2341" href="/lia/part5/Exp/#2341" class="Bound">n</a> <a id="2343" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2345" href="/lia/part5/Exp/#2345" class="Bound">ϱ</a> <a id="2347" class="Symbol">=</a> <a id="2349" href="/lia/part5/Exp/#2341" class="Bound">n</a>
<a id="2351" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2353" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="2355" href="/lia/part5/Exp/#2355" class="Bound">x</a> <a id="2357" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2359" href="/lia/part5/Exp/#2359" class="Bound">ϱ</a> <a id="2361" class="Symbol">=</a> <a id="2363" href="/lia/part5/Exp/#2359" class="Bound">ϱ</a> <a id="2365" href="/lia/part5/Exp/#2355" class="Bound">x</a>
<a id="2367" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2369" href="/lia/part5/Exp/#2369" class="Bound">e</a> <a id="2371" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="2373" href="/lia/part5/Exp/#2373" class="Bound">f</a> <a id="2375" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2377" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a> <a id="2379" class="Symbol">=</a> <a id="2381" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2383" href="/lia/part5/Exp/#2369" class="Bound">e</a> <a id="2385" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2387" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a> <a id="2389" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="2392" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2394" href="/lia/part5/Exp/#2373" class="Bound">f</a> <a id="2396" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2398" href="/lia/part5/Exp/#2377" class="Bound">ϱ</a>
<a id="2400" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2402" href="/lia/part5/Exp/#2402" class="Bound">e</a> <a id="2404" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="2406" href="/lia/part5/Exp/#2406" class="Bound">f</a> <a id="2408" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2410" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a> <a id="2412" class="Symbol">=</a> <a id="2414" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2416" href="/lia/part5/Exp/#2402" class="Bound">e</a> <a id="2418" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2420" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a> <a id="2422" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="2425" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2427" href="/lia/part5/Exp/#2406" class="Bound">f</a> <a id="2429" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2431" href="/lia/part5/Exp/#2410" class="Bound">ϱ</a>
<a id="2433" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2435" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="2439" href="/lia/part5/Exp/#2439" class="Bound">x</a> <a id="2441" href="/lia/part5/Exp/#2441" class="Bound">e</a> <a id="2443" href="/lia/part5/Exp/#2443" class="Bound">f</a> <a id="2445" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2447" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2449" class="Symbol">=</a> <a id="2451" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2453" href="/lia/part5/Exp/#2443" class="Bound">f</a> <a id="2455" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2457" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2459" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="2461" href="/lia/part5/Exp/#2439" class="Bound">x</a> <a id="2463" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="2465" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2467" href="/lia/part5/Exp/#2441" class="Bound">e</a> <a id="2469" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2471" href="/lia/part5/Exp/#2447" class="Bound">ϱ</a> <a id="2473" href="/lia/part0/Functions/#570" class="Function Operator">]</a>

<a id="A⟦_⟧_"></a><a id="2476" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦_⟧_</a> <a id="2482" class="Symbol">=</a> <a id="2484" href="/lia/part5/Exp/#2315" class="Function Operator">⟦_⟧_</a></pre>

<p>With our denotational semantics for expressions we can check (by
computation) the value of concrete expressions.</p>

<pre class="Agda"><a id="2612" href="/lia/part5/Exp/#2612" class="Function">_</a> <a id="2614" class="Symbol">:</a> <a id="2616" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="2618" href="/lia/part5/Exp/#1144" class="Function">add-one</a> <a id="2626" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="2628" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="2631" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2633" class="Number">201</a>
<a id="2637" class="Symbol">_</a> <a id="2639" class="Symbol">=</a> <a id="2641" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<div class="exercisebox">

  <dl>
    <dt><span id="exercise:exercise-BExp-semantics" class="pandoc-numbering-text exercise"><strong>Exercise 1</strong></span></dt>
    <dd>Write the denotational semantics of Boolean expressions.</dd>
  </dl>

  <pre class="Agda"><a id="2767" class="Keyword">infix</a> <a id="2773" class="Number">101</a> <a id="2777" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦_⟧_</a>
<a id="B⟦_⟧_"></a><a id="2783" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦_⟧_</a> <a id="2789" class="Symbol">:</a> <a id="2791" href="/lia/part5/Exp/#2004" class="Datatype">BExp</a> <a id="2796" class="Symbol">→</a> <a id="2798" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="2802" class="Symbol">→</a> <a id="2804" href="/lia/part0/Booleans/#259" class="Datatype">𝔹</a></pre>
  <pre data-executable="true" data-language="agda" id="part5.Exp.BExp-semantics">

module part5.Exp.BExp-semantics where
open import TypeOf
open import part5.Exp renaming (B⟦_⟧_ to B⟦_⟧_-orig)


B⟦_⟧_ : typeOf B⟦_⟧_-orig
-- BEGIN SOLUTION
B⟦_⟧_ = ?</pre>

  <p><em>Hint:</em> In the <code class="language-plaintext highlighter-rouge">Leq</code> case you will need <code class="language-plaintext highlighter-rouge">_≤?_</code>. <span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

  <!--
::::::: {.solutionlink}
[solution](#exercise-BExp-semantics-solution)
:::::::
-->

</div>

<h1 id="lazy-semantics">
<a class="anchor" href="#lazy-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lazy semantics</h1>

<h2 id="dynamic-binding">
<a class="anchor" href="#dynamic-binding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dynamic binding</h2>

<pre class="Agda"><a id="Envˡ"></a><a id="3260" href="/lia/part5/Exp/#3260" class="Function">Envˡ</a> <a id="3265" class="Symbol">=</a> <a id="3267" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3275" class="Symbol">→</a> <a id="3277" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="ϱ₁"></a><a id="3283" href="/lia/part5/Exp/#3283" class="Function">ϱ₁</a> <a id="3286" class="Symbol">:</a> <a id="3288" href="/lia/part5/Exp/#3260" class="Function">Envˡ</a>
<a id="3293" href="/lia/part5/Exp/#3283" class="Function">ϱ₁</a> <a id="3296" class="Symbol">_</a> <a id="3298" class="Symbol">=</a> <a id="3300" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3302" class="Number">0</a>

<a id="3305" class="Keyword">infix</a> <a id="3311" class="Number">15</a> <a id="3314" href="/lia/part5/Exp/#3341" class="Function Operator">⟦_⟧ˡ_</a>

<a id="3321" class="Symbol">{-#</a> <a id="3325" class="Keyword">TERMINATING</a> <a id="3337" class="Symbol">#-}</a>
<a id="⟦_⟧ˡ_"></a><a id="3341" href="/lia/part5/Exp/#3341" class="Function Operator">⟦_⟧ˡ_</a> <a id="3347" class="Symbol">:</a> <a id="3349" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="3354" class="Symbol">→</a> <a id="3356" href="/lia/part5/Exp/#3260" class="Function">Envˡ</a> <a id="3361" class="Symbol">→</a> <a id="3363" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="3365" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3367" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3369" href="/lia/part5/Exp/#3369" class="Bound">n</a> <a id="3371" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3374" href="/lia/part5/Exp/#3374" class="Bound">ϱ</a> <a id="3376" class="Symbol">=</a> <a id="3378" href="/lia/part5/Exp/#3369" class="Bound">n</a>
<a id="3380" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3382" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3384" href="/lia/part5/Exp/#3384" class="Bound">x</a> <a id="3386" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3389" href="/lia/part5/Exp/#3389" class="Bound">ϱ</a> <a id="3391" class="Symbol">=</a> <a id="3393" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3395" href="/lia/part5/Exp/#3389" class="Bound">ϱ</a> <a id="3397" href="/lia/part5/Exp/#3384" class="Bound">x</a> <a id="3399" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3402" href="/lia/part5/Exp/#3389" class="Bound">ϱ</a> <a id="3404" class="Comment">-- termination issue here</a>
<a id="3430" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3432" href="/lia/part5/Exp/#3432" class="Bound">e</a> <a id="3434" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="3436" href="/lia/part5/Exp/#3436" class="Bound">f</a> <a id="3438" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3441" href="/lia/part5/Exp/#3441" class="Bound">ϱ</a> <a id="3443" class="Symbol">=</a> <a id="3445" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3447" href="/lia/part5/Exp/#3432" class="Bound">e</a> <a id="3449" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3452" href="/lia/part5/Exp/#3441" class="Bound">ϱ</a> <a id="3454" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="3457" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3459" href="/lia/part5/Exp/#3436" class="Bound">f</a> <a id="3461" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3464" href="/lia/part5/Exp/#3441" class="Bound">ϱ</a>
<a id="3466" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3468" href="/lia/part5/Exp/#3468" class="Bound">e</a> <a id="3470" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="3472" href="/lia/part5/Exp/#3472" class="Bound">f</a> <a id="3474" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3477" href="/lia/part5/Exp/#3477" class="Bound">ϱ</a> <a id="3479" class="Symbol">=</a> <a id="3481" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3483" href="/lia/part5/Exp/#3468" class="Bound">e</a> <a id="3485" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3488" href="/lia/part5/Exp/#3477" class="Bound">ϱ</a> <a id="3490" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="3493" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3495" href="/lia/part5/Exp/#3472" class="Bound">f</a> <a id="3497" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3500" href="/lia/part5/Exp/#3477" class="Bound">ϱ</a>
<a id="3502" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3504" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="3508" href="/lia/part5/Exp/#3508" class="Bound">x</a> <a id="3510" href="/lia/part5/Exp/#3510" class="Bound">e</a> <a id="3512" href="/lia/part5/Exp/#3512" class="Bound">f</a> <a id="3514" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3517" href="/lia/part5/Exp/#3517" class="Bound">ϱ</a> <a id="3519" class="Symbol">=</a> <a id="3521" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3523" href="/lia/part5/Exp/#3512" class="Bound">f</a> <a id="3525" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3528" href="/lia/part5/Exp/#3517" class="Bound">ϱ</a> <a id="3530" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="3532" href="/lia/part5/Exp/#3508" class="Bound">x</a> <a id="3534" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="3536" href="/lia/part5/Exp/#3510" class="Bound">e</a> <a id="3538" href="/lia/part0/Functions/#570" class="Function Operator">]</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="3559" href="/lia/part5/Exp/#3559" class="Function">_</a> <a id="3561" class="Symbol">:</a> <a id="3563" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3565" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="3569" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3572" class="Symbol">(</a><a id="3573" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3575" class="Number">2</a> <a id="3577" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="3579" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3581" class="Number">3</a><a id="3582" class="Symbol">)</a> <a id="3584" class="Symbol">(</a><a id="3585" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3587" class="Number">3</a> <a id="3589" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="3591" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3593" href="/lia/part5/Exp/#557" class="Function">x₀</a><a id="3595" class="Symbol">)</a> <a id="3597" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3600" href="/lia/part5/Exp/#3283" class="Function">ϱ₁</a> <a id="3603" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3605" class="Number">15</a>
<a id="3608" class="Symbol">_</a>  <a id="3611" class="Symbol">=</a> <a id="3613" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Notice how the meaning of free variables dynamically depends on the
environment active when they are <em>used</em>:</p>

<pre class="Agda"><a id="3737" href="/lia/part5/Exp/#3737" class="Function">_</a> <a id="3739" class="Symbol">:</a> <a id="3741" href="/lia/part5/Exp/#3341" class="Function Operator">⟦</a> <a id="3743" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3747" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3750" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3752" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3754" class="Number">1</a> <a id="3756" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3759" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3763" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3766" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3768" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3770" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3773" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3776" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="3780" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="3783" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="3785" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="3787" class="Number">2</a> <a id="3789" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="3792" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="3794" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="3797" href="/lia/part5/Exp/#3341" class="Function Operator">⟧ˡ</a> <a id="3800" href="/lia/part5/Exp/#3283" class="Function">ϱ₁</a> <a id="3803" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3805" class="Number">2</a>
<a id="3807" class="Symbol">_</a>  <a id="3810" class="Symbol">=</a> <a id="3812" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="static-binding">
<a class="anchor" href="#static-binding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static binding</h2>

<p>We need coinductively-defined environments.</p>

<pre class="Agda"><a id="3890" class="Comment">-- Envˡˢ = VarName → AExp × Envˡˢ</a></pre>
<pre class="Agda"><a id="3933" class="Keyword">record</a> <a id="Envˡˢ"></a><a id="3940" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a> <a id="3946" class="Symbol">:</a> <a id="3948" class="PrimitiveType">Set</a> <a id="3952" class="Keyword">where</a>
  <a id="3960" class="Keyword">coinductive</a>
  <a id="3974" class="Keyword">field</a>
    <a id="Envˡˢ.env"></a><a id="3984" href="/lia/part5/Exp/#3984" class="Field">env</a> <a id="3988" class="Symbol">:</a> <a id="3990" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="3998" class="Symbol">→</a> <a id="4000" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4005" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="4007" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a>

<a id="4014" class="Keyword">open</a> <a id="4019" href="/lia/part5/Exp/#3940" class="Module">Envˡˢ</a>

<a id="_[[_↦_,_]]"></a><a id="4026" href="/lia/part5/Exp/#4026" class="Function Operator">_[[_↦_,_]]</a> <a id="4037" class="Symbol">:</a> <a id="4039" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a> <a id="4045" class="Symbol">→</a> <a id="4047" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="4055" class="Symbol">→</a> <a id="4057" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4062" class="Symbol">→</a> <a id="4064" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a> <a id="4070" class="Symbol">→</a> <a id="4072" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a>
<a id="4078" href="/lia/part5/Exp/#3984" class="Field">env</a> <a id="4082" class="Symbol">(</a><a id="4083" href="/lia/part5/Exp/#4083" class="Bound">ϱ</a> <a id="4085" href="/lia/part5/Exp/#4026" class="Function Operator">[[</a> <a id="4088" href="/lia/part5/Exp/#4088" class="Bound">x</a> <a id="4090" href="/lia/part5/Exp/#4026" class="Function Operator">↦</a> <a id="4092" href="/lia/part5/Exp/#4092" class="Bound">e</a> <a id="4094" href="/lia/part5/Exp/#4026" class="Function Operator">,</a> <a id="4096" href="/lia/part5/Exp/#4096" class="Bound">ϱ′</a> <a id="4099" href="/lia/part5/Exp/#4026" class="Function Operator">]]</a><a id="4101" class="Symbol">)</a> <a id="4103" class="Symbol">=</a> <a id="4105" href="/lia/part5/Exp/#3984" class="Field">env</a> <a id="4109" href="/lia/part5/Exp/#4083" class="Bound">ϱ</a> <a id="4111" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="4113" href="/lia/part5/Exp/#4088" class="Bound">x</a> <a id="4115" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="4117" href="/lia/part5/Exp/#4092" class="Bound">e</a> <a id="4119" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4121" href="/lia/part5/Exp/#4096" class="Bound">ϱ′</a> <a id="4124" href="/lia/part0/Functions/#570" class="Function Operator">]</a></pre>
<pre class="Agda"><a id="ϱ₂"></a><a id="4135" href="/lia/part5/Exp/#4135" class="Function">ϱ₂</a> <a id="4138" class="Symbol">:</a> <a id="4140" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a>
<a id="4146" href="/lia/part5/Exp/#3984" class="Field">env</a> <a id="4150" href="/lia/part5/Exp/#4135" class="Function">ϱ₂</a> <a id="4153" class="Symbol">_</a> <a id="4155" class="Symbol">=</a> <a id="4157" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4159" class="Number">0</a> <a id="4161" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4163" href="/lia/part5/Exp/#4135" class="Function">ϱ₂</a>

<a id="4167" class="Keyword">infix</a> <a id="4173" class="Number">15</a> <a id="4176" href="/lia/part5/Exp/#4204" class="Function Operator">⟦_⟧ˡˢ_</a>

<a id="4184" class="Symbol">{-#</a> <a id="4188" class="Keyword">TERMINATING</a> <a id="4200" class="Symbol">#-}</a>
<a id="⟦_⟧ˡˢ_"></a><a id="4204" href="/lia/part5/Exp/#4204" class="Function Operator">⟦_⟧ˡˢ_</a> <a id="4211" class="Symbol">:</a> <a id="4213" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="4218" class="Symbol">→</a> <a id="4220" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a> <a id="4226" class="Symbol">→</a> <a id="4228" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="4230" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4232" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4234" href="/lia/part5/Exp/#4234" class="Bound">n</a> <a id="4236" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4240" href="/lia/part5/Exp/#4240" class="Bound">ϱ</a> <a id="4242" class="Symbol">=</a> <a id="4244" href="/lia/part5/Exp/#4234" class="Bound">n</a>
<a id="4246" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4248" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4250" href="/lia/part5/Exp/#4250" class="Bound">x</a> <a id="4252" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4256" href="/lia/part5/Exp/#4256" class="Bound">ϱ</a> <a id="4258" class="Symbol">=</a> <a id="4260" class="Keyword">let</a> <a id="4264" href="/lia/part5/Exp/#4264" class="Bound">e</a> <a id="4266" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="4268" href="/lia/part5/Exp/#4268" class="Bound">ϱ′</a> <a id="4271" class="Symbol">=</a> <a id="4273" href="/lia/part5/Exp/#3984" class="Field">env</a> <a id="4277" href="/lia/part5/Exp/#4256" class="Bound">ϱ</a> <a id="4279" href="/lia/part5/Exp/#4250" class="Bound">x</a> <a id="4281" class="Keyword">in</a> <a id="4284" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4286" href="/lia/part5/Exp/#4264" class="Bound">e</a> <a id="4288" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4292" href="/lia/part5/Exp/#4268" class="Bound">ϱ′</a> <a id="4295" class="Comment">-- termination issue</a>
<a id="4316" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4318" href="/lia/part5/Exp/#4318" class="Bound">e</a> <a id="4320" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="4322" href="/lia/part5/Exp/#4322" class="Bound">f</a> <a id="4324" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4328" href="/lia/part5/Exp/#4328" class="Bound">ϱ</a> <a id="4330" class="Symbol">=</a> <a id="4332" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4334" href="/lia/part5/Exp/#4318" class="Bound">e</a> <a id="4336" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4340" href="/lia/part5/Exp/#4328" class="Bound">ϱ</a> <a id="4342" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="4345" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4347" href="/lia/part5/Exp/#4322" class="Bound">f</a> <a id="4349" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4353" href="/lia/part5/Exp/#4328" class="Bound">ϱ</a>
<a id="4355" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4357" href="/lia/part5/Exp/#4357" class="Bound">e</a> <a id="4359" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="4361" href="/lia/part5/Exp/#4361" class="Bound">f</a> <a id="4363" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4367" href="/lia/part5/Exp/#4367" class="Bound">ϱ</a> <a id="4369" class="Symbol">=</a> <a id="4371" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4373" href="/lia/part5/Exp/#4357" class="Bound">e</a> <a id="4375" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4379" href="/lia/part5/Exp/#4367" class="Bound">ϱ</a> <a id="4381" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="4384" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4386" href="/lia/part5/Exp/#4361" class="Bound">f</a> <a id="4388" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4392" href="/lia/part5/Exp/#4367" class="Bound">ϱ</a>
<a id="4394" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4396" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="4400" href="/lia/part5/Exp/#4400" class="Bound">x</a> <a id="4402" href="/lia/part5/Exp/#4402" class="Bound">e</a> <a id="4404" href="/lia/part5/Exp/#4404" class="Bound">f</a> <a id="4406" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4410" href="/lia/part5/Exp/#4410" class="Bound">ϱ</a> <a id="4412" class="Symbol">=</a> <a id="4414" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4416" href="/lia/part5/Exp/#4404" class="Bound">f</a> <a id="4418" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4422" href="/lia/part5/Exp/#4410" class="Bound">ϱ</a> <a id="4424" href="/lia/part5/Exp/#4026" class="Function Operator">[[</a> <a id="4427" href="/lia/part5/Exp/#4400" class="Bound">x</a> <a id="4429" href="/lia/part5/Exp/#4026" class="Function Operator">↦</a> <a id="4431" href="/lia/part5/Exp/#4402" class="Bound">e</a> <a id="4433" href="/lia/part5/Exp/#4026" class="Function Operator">,</a> <a id="4435" href="/lia/part5/Exp/#4410" class="Bound">ϱ</a> <a id="4437" href="/lia/part5/Exp/#4026" class="Function Operator">]]</a></pre>

<p>Notice how the meaning of free variables statically depends on the
environment active when they are <em>defined</em>:</p>

<pre class="Agda"><a id="4561" href="/lia/part5/Exp/#4561" class="Function">_</a> <a id="4563" class="Symbol">:</a> <a id="4565" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4567" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4571" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4574" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4576" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4578" class="Number">1</a> <a id="4580" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4583" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4587" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="4590" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4592" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4594" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4597" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4600" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="4604" href="/lia/part5/Exp/#560" class="Function">x₁</a> <a id="4607" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="4609" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="4611" class="Number">2</a> <a id="4613" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="4616" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4618" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="4621" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4625" href="/lia/part5/Exp/#4135" class="Function">ϱ₂</a> <a id="4628" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4630" class="Number">1</a>
<a id="4632" class="Symbol">_</a>  <a id="4635" class="Symbol">=</a> <a id="4637" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>We show that the lazy semantics with static binding agrees with the
eager semantics. Note that in general the lazy semantics may be “more
defined” than the eager one, i.e., in the presence of errors or
exceptions.</p>

<pre class="Agda"><a id="env-agree"></a><a id="4866" href="/lia/part5/Exp/#4866" class="Function">env-agree</a> <a id="4876" class="Symbol">:</a> <a id="4878" href="/lia/part5/Exp/#3940" class="Record">Envˡˢ</a> <a id="4884" class="Symbol">→</a> <a id="4886" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="4890" class="Symbol">→</a> <a id="4892" class="PrimitiveType">Set</a>
<a id="4896" href="/lia/part5/Exp/#4866" class="Function">env-agree</a> <a id="4906" href="/lia/part5/Exp/#4906" class="Bound">ϱ</a> <a id="4908" href="/lia/part5/Exp/#4908" class="Bound">τ</a> <a id="4910" class="Symbol">=</a> <a id="4912" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="4915" href="/lia/part5/Exp/#4915" class="Bound">x</a> <a id="4917" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="4919" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="4921" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="4923" href="/lia/part5/Exp/#4915" class="Bound">x</a> <a id="4925" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="4929" href="/lia/part5/Exp/#4906" class="Bound">ϱ</a> <a id="4931" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4933" href="/lia/part5/Exp/#4908" class="Bound">τ</a> <a id="4935" href="/lia/part5/Exp/#4915" class="Bound">x</a>

<a id="env-agree-update"></a><a id="4938" href="/lia/part5/Exp/#4938" class="Function">env-agree-update</a> <a id="4955" class="Symbol">:</a> <a id="4957" class="Symbol">∀</a> <a id="4959" href="/lia/part5/Exp/#4959" class="Bound">ϱ</a> <a id="4961" href="/lia/part5/Exp/#4961" class="Bound">τ</a> <a id="4963" href="/lia/part5/Exp/#4963" class="Bound">x</a> <a id="4965" href="/lia/part5/Exp/#4965" class="Bound">e</a> <a id="4967" class="Symbol">→</a> <a id="4969" href="/lia/part5/Exp/#4866" class="Function">env-agree</a> <a id="4979" href="/lia/part5/Exp/#4959" class="Bound">ϱ</a> <a id="4981" href="/lia/part5/Exp/#4961" class="Bound">τ</a> <a id="4983" class="Symbol">→</a> <a id="4985" href="/lia/part5/Exp/#4866" class="Function">env-agree</a> <a id="4995" class="Symbol">(</a><a id="4996" href="/lia/part5/Exp/#4959" class="Bound">ϱ</a> <a id="4998" href="/lia/part5/Exp/#4026" class="Function Operator">[[</a> <a id="5001" href="/lia/part5/Exp/#4963" class="Bound">x</a> <a id="5003" href="/lia/part5/Exp/#4026" class="Function Operator">↦</a> <a id="5005" href="/lia/part5/Exp/#4965" class="Bound">e</a> <a id="5007" href="/lia/part5/Exp/#4026" class="Function Operator">,</a> <a id="5009" href="/lia/part5/Exp/#4959" class="Bound">ϱ</a> <a id="5011" href="/lia/part5/Exp/#4026" class="Function Operator">]]</a><a id="5013" class="Symbol">)</a> <a id="5015" class="Symbol">(</a><a id="5016" href="/lia/part5/Exp/#4961" class="Bound">τ</a> <a id="5018" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="5020" href="/lia/part5/Exp/#4963" class="Bound">x</a> <a id="5022" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="5024" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="5026" href="/lia/part5/Exp/#4965" class="Bound">e</a> <a id="5028" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="5032" href="/lia/part5/Exp/#4959" class="Bound">ϱ</a> <a id="5034" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="5035" class="Symbol">)</a>
<a id="5037" href="/lia/part5/Exp/#4938" class="Function">env-agree-update</a> <a id="5054" href="/lia/part5/Exp/#5054" class="Bound">ϱ</a> <a id="5056" href="/lia/part5/Exp/#5056" class="Bound">τ</a> <a id="5058" href="/lia/part5/Exp/#5058" class="Bound">x</a> <a id="5060" href="/lia/part5/Exp/#5060" class="Bound">e</a> <a id="5062" href="/lia/part5/Exp/#5062" class="Bound">ag</a> <a id="5065" href="/lia/part5/Exp/#5065" class="Bound">y</a>
  <a id="5069" class="Keyword">with</a> <a id="5074" href="/lia/part5/Exp/#5058" class="Bound">x</a> <a id="5076" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="5079" href="/lia/part5/Exp/#5065" class="Bound">y</a>
<a id="5081" class="Symbol">...</a> <a id="5085" class="Symbol">|</a> <a id="5087" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="5091" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5096" class="Symbol">=</a> <a id="5098" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5103" class="Symbol">...</a> <a id="5107" class="Symbol">|</a> <a id="5109" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="5112" class="Symbol">_</a> <a id="5114" class="Symbol">=</a> <a id="5116" class="Bound">ag</a> <a id="5119" class="Bound">y</a>

<a id="eager-lazy-agree"></a><a id="5122" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5139" class="Symbol">:</a> <a id="5141" class="Symbol">∀</a> <a id="5143" href="/lia/part5/Exp/#5143" class="Bound">ϱ</a> <a id="5145" href="/lia/part5/Exp/#5145" class="Bound">τ</a> <a id="5147" class="Symbol">→</a> <a id="5149" href="/lia/part5/Exp/#4866" class="Function">env-agree</a> <a id="5159" href="/lia/part5/Exp/#5143" class="Bound">ϱ</a> <a id="5161" href="/lia/part5/Exp/#5145" class="Bound">τ</a> <a id="5163" class="Symbol">→</a> <a id="5165" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="5168" href="/lia/part5/Exp/#5168" class="Bound">e</a> <a id="5170" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="5172" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="5174" href="/lia/part5/Exp/#5168" class="Bound">e</a> <a id="5176" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="5180" href="/lia/part5/Exp/#5143" class="Bound">ϱ</a> <a id="5182" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5184" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="5186" href="/lia/part5/Exp/#5168" class="Bound">e</a> <a id="5188" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="5190" href="/lia/part5/Exp/#5145" class="Bound">τ</a>
<a id="5192" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5209" class="Symbol">_</a> <a id="5211" class="Symbol">_</a> <a id="5213" href="/lia/part5/Exp/#5213" class="Bound">ag</a> <a id="5216" class="Symbol">(</a><a id="5217" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="5219" href="/lia/part5/Exp/#5219" class="Bound">n</a><a id="5220" class="Symbol">)</a> <a id="5222" class="Symbol">=</a> <a id="5224" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5229" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5246" class="Symbol">_</a> <a id="5248" class="Symbol">_</a> <a id="5250" href="/lia/part5/Exp/#5250" class="Bound">ag</a> <a id="5253" class="Symbol">(</a><a id="5254" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="5256" href="/lia/part5/Exp/#5256" class="Bound">x</a><a id="5257" class="Symbol">)</a> <a id="5259" class="Symbol">=</a> <a id="5261" href="/lia/part5/Exp/#5250" class="Bound">ag</a> <a id="5264" href="/lia/part5/Exp/#5256" class="Bound">x</a>
<a id="5266" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5283" href="/lia/part5/Exp/#5283" class="Bound">ϱ</a> <a id="5285" href="/lia/part5/Exp/#5285" class="Bound">τ</a> <a id="5287" href="/lia/part5/Exp/#5287" class="Bound">ag</a> <a id="5290" class="Symbol">(</a><a id="5291" href="/lia/part5/Exp/#5291" class="Bound">e</a> <a id="5293" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="5295" href="/lia/part5/Exp/#5295" class="Bound">f</a><a id="5296" class="Symbol">)</a>
  <a id="5300" class="Keyword">rewrite</a> <a id="5308" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5325" href="/lia/part5/Exp/#5283" class="Bound">ϱ</a> <a id="5327" href="/lia/part5/Exp/#5285" class="Bound">τ</a> <a id="5329" href="/lia/part5/Exp/#5287" class="Bound">ag</a> <a id="5332" href="/lia/part5/Exp/#5291" class="Bound">e</a> <a id="5334" class="Symbol">|</a>
          <a id="5346" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5363" href="/lia/part5/Exp/#5283" class="Bound">ϱ</a> <a id="5365" href="/lia/part5/Exp/#5285" class="Bound">τ</a> <a id="5367" href="/lia/part5/Exp/#5287" class="Bound">ag</a> <a id="5370" href="/lia/part5/Exp/#5295" class="Bound">f</a> <a id="5372" class="Symbol">=</a> <a id="5374" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5379" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5396" href="/lia/part5/Exp/#5396" class="Bound">ϱ</a> <a id="5398" href="/lia/part5/Exp/#5398" class="Bound">τ</a> <a id="5400" href="/lia/part5/Exp/#5400" class="Bound">ag</a> <a id="5403" class="Symbol">(</a><a id="5404" href="/lia/part5/Exp/#5404" class="Bound">e</a> <a id="5406" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="5408" href="/lia/part5/Exp/#5408" class="Bound">f</a><a id="5409" class="Symbol">)</a>
  <a id="5413" class="Keyword">rewrite</a> <a id="5421" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5438" href="/lia/part5/Exp/#5396" class="Bound">ϱ</a> <a id="5440" href="/lia/part5/Exp/#5398" class="Bound">τ</a> <a id="5442" href="/lia/part5/Exp/#5400" class="Bound">ag</a> <a id="5445" href="/lia/part5/Exp/#5404" class="Bound">e</a> <a id="5447" class="Symbol">|</a>
          <a id="5459" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5476" href="/lia/part5/Exp/#5396" class="Bound">ϱ</a> <a id="5478" href="/lia/part5/Exp/#5398" class="Bound">τ</a> <a id="5480" href="/lia/part5/Exp/#5400" class="Bound">ag</a> <a id="5483" href="/lia/part5/Exp/#5408" class="Bound">f</a> <a id="5485" class="Symbol">=</a> <a id="5487" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="5492" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5509" href="/lia/part5/Exp/#5509" class="Bound">ϱ</a> <a id="5511" href="/lia/part5/Exp/#5511" class="Bound">τ</a> <a id="5513" href="/lia/part5/Exp/#5513" class="Bound">ag</a> <a id="5516" class="Symbol">(</a><a id="5517" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">Let</a> <a id="5521" href="/lia/part5/Exp/#5521" class="Bound">x</a> <a id="5523" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">≔</a> <a id="5525" href="/lia/part5/Exp/#5525" class="Bound">e</a> <a id="5527" href="/lia/part5/Exp/#1301" class="InductiveConstructor Operator">In</a> <a id="5530" href="/lia/part5/Exp/#5530" class="Bound">f</a><a id="5531" class="Symbol">)</a>
  <a id="5535" class="Keyword">with</a> <a id="5540" href="/lia/part5/Exp/#4938" class="Function">env-agree-update</a> <a id="5557" href="/lia/part5/Exp/#5509" class="Bound">ϱ</a> <a id="5559" href="/lia/part5/Exp/#5511" class="Bound">τ</a> <a id="5561" href="/lia/part5/Exp/#5521" class="Bound">x</a> <a id="5563" href="/lia/part5/Exp/#5525" class="Bound">e</a> <a id="5565" href="/lia/part5/Exp/#5513" class="Bound">ag</a>
<a id="5568" class="Symbol">...</a> <a id="5572" class="Symbol">|</a> <a id="5574" href="/lia/part5/Exp/#5574" class="Bound">ag′</a>
  <a id="5580" class="Keyword">rewrite</a> <a id="5588" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="5592" class="Symbol">(</a><a id="5593" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5610" class="Bound">ϱ</a> <a id="5612" class="Bound">τ</a> <a id="5614" class="Bound">ag</a> <a id="5617" class="Bound">e</a><a id="5618" class="Symbol">)</a> <a id="5620" class="Symbol">|</a>
          <a id="5632" href="/lia/part5/Exp/#5122" class="Function">eager-lazy-agree</a> <a id="5649" class="Symbol">(</a><a id="5650" class="Bound">ϱ</a> <a id="5652" href="/lia/part5/Exp/#4026" class="Function Operator">[[</a> <a id="5655" class="Bound">x</a> <a id="5657" href="/lia/part5/Exp/#4026" class="Function Operator">↦</a> <a id="5659" class="Bound">e</a> <a id="5661" href="/lia/part5/Exp/#4026" class="Function Operator">,</a> <a id="5663" class="Bound">ϱ</a> <a id="5665" href="/lia/part5/Exp/#4026" class="Function Operator">]]</a><a id="5667" class="Symbol">)</a> <a id="5669" class="Symbol">(</a><a id="5670" class="Bound">τ</a> <a id="5672" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="5674" class="Bound">x</a> <a id="5676" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="5678" href="/lia/part5/Exp/#4204" class="Function Operator">⟦</a> <a id="5680" class="Bound">e</a> <a id="5682" href="/lia/part5/Exp/#4204" class="Function Operator">⟧ˡˢ</a> <a id="5686" class="Bound">ϱ</a> <a id="5688" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="5689" class="Symbol">)</a> <a id="5691" href="/lia/part5/Exp/#5574" class="Bound">ag′</a> <a id="5695" class="Bound">f</a> <a id="5697" class="Symbol">=</a> <a id="5699" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="free-variables">
<a class="anchor" href="#free-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Free variables</h1>

<pre class="Agda"><a id="fv"></a><a id="5731" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5734" class="Symbol">:</a> <a id="5736" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="5741" class="Symbol">→</a> <a id="5743" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="5751" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="5753" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5756" class="Symbol">(</a><a id="5757" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="5759" href="/lia/part5/Exp/#5759" class="Bound">n</a><a id="5760" class="Symbol">)</a> <a id="5762" class="Symbol">=</a> <a id="5764" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="5766" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5769" class="Symbol">(</a><a id="5770" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="5772" href="/lia/part5/Exp/#5772" class="Bound">x</a><a id="5773" class="Symbol">)</a> <a id="5775" class="Symbol">=</a> <a id="5777" href="/lia/part0/List/#1792" class="Function">[</a> <a id="5779" href="/lia/part5/Exp/#5772" class="Bound">x</a> <a id="5781" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="5783" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5786" class="Symbol">(</a><a id="5787" href="/lia/part5/Exp/#5787" class="Bound">e</a> <a id="5789" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="5791" href="/lia/part5/Exp/#5791" class="Bound">f</a><a id="5792" class="Symbol">)</a> <a id="5794" class="Symbol">=</a> <a id="5796" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5799" href="/lia/part5/Exp/#5787" class="Bound">e</a> <a id="5801" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5804" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5807" href="/lia/part5/Exp/#5791" class="Bound">f</a>
<a id="5809" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5812" class="Symbol">(</a><a id="5813" href="/lia/part5/Exp/#5813" class="Bound">e</a> <a id="5815" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="5817" href="/lia/part5/Exp/#5817" class="Bound">f</a><a id="5818" class="Symbol">)</a> <a id="5820" class="Symbol">=</a> <a id="5822" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5825" href="/lia/part5/Exp/#5813" class="Bound">e</a> <a id="5827" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5830" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5833" href="/lia/part5/Exp/#5817" class="Bound">f</a>
<a id="5835" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5838" class="Symbol">(</a><a id="5839" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="5843" href="/lia/part5/Exp/#5843" class="Bound">x</a> <a id="5845" href="/lia/part5/Exp/#5845" class="Bound">e</a> <a id="5847" href="/lia/part5/Exp/#5847" class="Bound">f</a><a id="5848" class="Symbol">)</a> <a id="5850" class="Symbol">=</a> <a id="5852" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5855" href="/lia/part5/Exp/#5845" class="Bound">e</a> <a id="5857" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="5860" href="/lia/part0/List/#4927" class="Function">remove</a> <a id="5867" href="/lia/part5/Exp/#5843" class="Bound">x</a> <a id="5869" class="Symbol">(</a><a id="5870" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5873" href="/lia/part5/Exp/#5847" class="Bound">f</a><a id="5874" class="Symbol">)</a>

<a id="closed"></a><a id="5877" href="/lia/part5/Exp/#5877" class="Function">closed</a> <a id="5884" class="Symbol">:</a> <a id="5886" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="5891" class="Symbol">→</a> <a id="5893" class="PrimitiveType">Set</a>
<a id="5897" href="/lia/part5/Exp/#5877" class="Function">closed</a> <a id="5904" href="/lia/part5/Exp/#5904" class="Bound">e</a> <a id="5906" class="Symbol">=</a> <a id="5908" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5911" href="/lia/part5/Exp/#5904" class="Bound">e</a> <a id="5913" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5915" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>

<a id="fv-lemma"></a><a id="5918" href="/lia/part5/Exp/#5918" class="Function">fv-lemma</a> <a id="5927" class="Symbol">:</a> <a id="5929" class="Symbol">∀</a> <a id="5931" href="/lia/part5/Exp/#5931" class="Bound">ϱ₀</a> <a id="5934" href="/lia/part5/Exp/#5934" class="Bound">ϱ₁</a> <a id="5937" href="/lia/part5/Exp/#5937" class="Bound">e</a> <a id="5939" class="Symbol">→</a> <a id="5941" href="/lia/part0/List/#19150" class="Function">Agree</a> <a id="5947" href="/lia/part5/Exp/#5931" class="Bound">ϱ₀</a> <a id="5950" href="/lia/part5/Exp/#5934" class="Bound">ϱ₁</a> <a id="5953" class="Symbol">(</a><a id="5954" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="5957" href="/lia/part5/Exp/#5937" class="Bound">e</a><a id="5958" class="Symbol">)</a> <a id="5960" class="Symbol">→</a> <a id="5962" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="5964" href="/lia/part5/Exp/#5937" class="Bound">e</a> <a id="5966" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="5968" href="/lia/part5/Exp/#5931" class="Bound">ϱ₀</a> <a id="5971" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5973" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="5975" href="/lia/part5/Exp/#5937" class="Bound">e</a> <a id="5977" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="5979" href="/lia/part5/Exp/#5934" class="Bound">ϱ₁</a>
<a id="5982" href="/lia/part5/Exp/#5918" class="Function">fv-lemma</a> <a id="5991" class="Symbol">=</a> <a id="5993" class="Symbol">{!   !}</a>

<a id="6002" class="Comment">-- all named variables occurring in the expression</a>
<a id="vars"></a><a id="6053" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6058" class="Symbol">:</a> <a id="6060" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6065" class="Symbol">→</a> <a id="6067" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="6075" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="6077" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6082" class="Symbol">(</a><a id="6083" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6085" href="/lia/part5/Exp/#6085" class="Bound">n</a><a id="6086" class="Symbol">)</a> <a id="6088" class="Symbol">=</a> <a id="6090" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="6092" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6097" class="Symbol">(</a><a id="6098" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6100" href="/lia/part5/Exp/#6100" class="Bound">x</a><a id="6101" class="Symbol">)</a> <a id="6103" class="Symbol">=</a> <a id="6105" href="/lia/part0/List/#1792" class="Function">[</a> <a id="6107" href="/lia/part5/Exp/#6100" class="Bound">x</a> <a id="6109" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="6111" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6116" class="Symbol">(</a><a id="6117" href="/lia/part5/Exp/#6117" class="Bound">e</a> <a id="6119" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6121" href="/lia/part5/Exp/#6121" class="Bound">f</a><a id="6122" class="Symbol">)</a> <a id="6124" class="Symbol">=</a> <a id="6126" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6129" href="/lia/part5/Exp/#6117" class="Bound">e</a> <a id="6131" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6134" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6137" href="/lia/part5/Exp/#6121" class="Bound">f</a>
<a id="6139" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6144" class="Symbol">(</a><a id="6145" href="/lia/part5/Exp/#6145" class="Bound">e</a> <a id="6147" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6149" href="/lia/part5/Exp/#6149" class="Bound">f</a><a id="6150" class="Symbol">)</a> <a id="6152" class="Symbol">=</a> <a id="6154" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6157" href="/lia/part5/Exp/#6145" class="Bound">e</a> <a id="6159" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6162" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6165" href="/lia/part5/Exp/#6149" class="Bound">f</a>
<a id="6167" href="/lia/part5/Exp/#6053" class="Function">vars</a> <a id="6172" class="Symbol">(</a><a id="6173" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6177" href="/lia/part5/Exp/#6177" class="Bound">x</a> <a id="6179" href="/lia/part5/Exp/#6179" class="Bound">e</a> <a id="6181" href="/lia/part5/Exp/#6181" class="Bound">f</a><a id="6182" class="Symbol">)</a> <a id="6184" class="Symbol">=</a> <a id="6186" href="/lia/part0/List/#1792" class="Function">[</a> <a id="6188" href="/lia/part5/Exp/#6177" class="Bound">x</a> <a id="6190" href="/lia/part0/List/#2043" class="Function Operator">]</a> <a id="6192" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6195" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6198" href="/lia/part5/Exp/#6179" class="Bound">e</a> <a id="6200" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="6203" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="6206" href="/lia/part5/Exp/#6181" class="Bound">f</a></pre>

<h1 id="substitution">
<a class="anchor" href="#substitution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substitution</h1>

<p>We say that two arithmetic expression are <em>contextually equivalent</em> if
they provide the same result whenever they are plugged in the same
context.</p>

<pre class="Agda"><a id="6381" class="Keyword">infix</a> <a id="6387" class="Number">101</a> <a id="6391" href="/lia/part5/Exp/#6399" class="Function Operator">_A[_↦_]</a>
<a id="_A[_↦_]"></a><a id="6399" href="/lia/part5/Exp/#6399" class="Function Operator">_A[_↦_]</a> <a id="6407" class="Symbol">:</a> <a id="6409" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6414" class="Symbol">→</a> <a id="6416" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="6424" class="Symbol">→</a> <a id="6426" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="6431" class="Symbol">→</a> <a id="6433" href="/lia/part5/Exp/#775" class="Datatype">AExp</a>

<a id="6439" class="Symbol">(</a><a id="6440" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6442" href="/lia/part5/Exp/#6442" class="Bound">n</a><a id="6443" class="Symbol">)</a> <a id="6445" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6448" href="/lia/part5/Exp/#6448" class="Bound">x</a> <a id="6450" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6452" href="/lia/part5/Exp/#6452" class="Bound">g</a> <a id="6454" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6456" class="Symbol">=</a> <a id="6458" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="6460" href="/lia/part5/Exp/#6442" class="Bound">n</a>

<a id="6463" class="Symbol">(</a><a id="6464" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6466" href="/lia/part5/Exp/#6466" class="Bound">y</a><a id="6467" class="Symbol">)</a> <a id="6469" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6472" href="/lia/part5/Exp/#6472" class="Bound">x</a> <a id="6474" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6476" href="/lia/part5/Exp/#6476" class="Bound">g</a> <a id="6478" href="/lia/part5/Exp/#6399" class="Function Operator">]</a>
  <a id="6482" class="Keyword">with</a> <a id="6487" href="/lia/part5/Exp/#6472" class="Bound">x</a> <a id="6489" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="6492" href="/lia/part5/Exp/#6466" class="Bound">y</a>
<a id="6494" class="Symbol">...</a> <a id="6498" class="Symbol">|</a> <a id="6500" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="6504" class="Symbol">_</a> <a id="6506" class="Symbol">=</a> <a id="6508" class="Bound">g</a>
<a id="6510" class="Symbol">...</a> <a id="6514" class="Symbol">|</a> <a id="6516" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="6519" class="Symbol">_</a> <a id="6521" class="Symbol">=</a> <a id="6523" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="6525" class="Bound">y</a>

<a id="6528" class="Symbol">(</a><a id="6529" href="/lia/part5/Exp/#6529" class="Bound">e</a> <a id="6531" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6533" href="/lia/part5/Exp/#6533" class="Bound">f</a><a id="6534" class="Symbol">)</a> <a id="6536" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6539" href="/lia/part5/Exp/#6539" class="Bound">x</a> <a id="6541" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6543" href="/lia/part5/Exp/#6543" class="Bound">g</a> <a id="6545" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6547" class="Symbol">=</a> <a id="6549" href="/lia/part5/Exp/#6529" class="Bound">e</a> <a id="6551" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6554" href="/lia/part5/Exp/#6539" class="Bound">x</a> <a id="6556" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6558" href="/lia/part5/Exp/#6543" class="Bound">g</a> <a id="6560" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6562" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="6564" href="/lia/part5/Exp/#6533" class="Bound">f</a> <a id="6566" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6569" href="/lia/part5/Exp/#6539" class="Bound">x</a> <a id="6571" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6573" href="/lia/part5/Exp/#6543" class="Bound">g</a> <a id="6575" href="/lia/part5/Exp/#6399" class="Function Operator">]</a>
<a id="6577" class="Symbol">(</a><a id="6578" href="/lia/part5/Exp/#6578" class="Bound">e</a> <a id="6580" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6582" href="/lia/part5/Exp/#6582" class="Bound">f</a><a id="6583" class="Symbol">)</a> <a id="6585" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6588" href="/lia/part5/Exp/#6588" class="Bound">x</a> <a id="6590" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6592" href="/lia/part5/Exp/#6592" class="Bound">g</a> <a id="6594" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6596" class="Symbol">=</a> <a id="6598" href="/lia/part5/Exp/#6578" class="Bound">e</a> <a id="6600" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6603" href="/lia/part5/Exp/#6588" class="Bound">x</a> <a id="6605" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6607" href="/lia/part5/Exp/#6592" class="Bound">g</a> <a id="6609" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6611" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="6613" href="/lia/part5/Exp/#6582" class="Bound">f</a> <a id="6615" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6618" href="/lia/part5/Exp/#6588" class="Bound">x</a> <a id="6620" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6622" href="/lia/part5/Exp/#6592" class="Bound">g</a> <a id="6624" href="/lia/part5/Exp/#6399" class="Function Operator">]</a>

<a id="6627" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6631" href="/lia/part5/Exp/#6631" class="Bound">y</a> <a id="6633" href="/lia/part5/Exp/#6633" class="Bound">e</a> <a id="6635" href="/lia/part5/Exp/#6635" class="Bound">f</a> <a id="6637" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6640" href="/lia/part5/Exp/#6640" class="Bound">x</a> <a id="6642" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6644" href="/lia/part5/Exp/#6644" class="Bound">g</a> <a id="6646" href="/lia/part5/Exp/#6399" class="Function Operator">]</a>
  <a id="6650" class="Keyword">with</a> <a id="6655" href="/lia/part5/Exp/#6633" class="Bound">e</a> <a id="6657" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6660" href="/lia/part5/Exp/#6640" class="Bound">x</a> <a id="6662" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6664" href="/lia/part5/Exp/#6644" class="Bound">g</a> <a id="6666" href="/lia/part5/Exp/#6399" class="Function Operator">]</a>
<a id="6668" class="Symbol">...</a> <a id="6672" class="Symbol">|</a> <a id="6674" href="/lia/part5/Exp/#6674" class="Bound">e′</a>
  <a id="6679" class="Keyword">with</a> <a id="6684" class="Bound">x</a> <a id="6686" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="6689" class="Bound">y</a>
<a id="6691" class="Symbol">...</a> <a id="6695" class="Symbol">|</a> <a id="6697" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="6701" class="Symbol">_</a> <a id="6703" class="Symbol">=</a> <a id="6705" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6709" class="Bound">y</a> <a id="6711" class="Bound">e′</a> <a id="6714" class="Bound">f</a>
<a id="6716" class="Symbol">...</a> <a id="6720" class="Symbol">|</a> <a id="6722" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="6725" class="Symbol">_</a> <a id="6727" class="Symbol">=</a> <a id="6729" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6733" class="Bound">y</a> <a id="6735" class="Bound">e′</a> <a id="6738" class="Symbol">(</a><a id="6739" class="Bound">f</a> <a id="6741" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6744" class="Bound">x</a> <a id="6746" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6748" class="Bound">g</a> <a id="6750" href="/lia/part5/Exp/#6399" class="Function Operator">]</a><a id="6751" class="Symbol">)</a> <a id="6753" class="Comment">-- in general this is incorrect since free variables in g may get captured</a></pre>

<p>Substitution facts:</p>

<pre class="Agda"><a id="subs-Let-1"></a><a id="6858" href="/lia/part5/Exp/#6858" class="Function">subs-Let-1</a> <a id="6869" class="Symbol">:</a> <a id="6871" class="Symbol">∀</a> <a id="6873" href="/lia/part5/Exp/#6873" class="Bound">x</a> <a id="6875" href="/lia/part5/Exp/#6875" class="Bound">e</a> <a id="6877" class="Symbol">→</a> <a id="6879" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6883" href="/lia/part5/Exp/#6873" class="Bound">x</a> <a id="6885" href="/lia/part5/Exp/#6875" class="Bound">e</a> <a id="6887" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="6889" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6892" href="/lia/part5/Exp/#6873" class="Bound">x</a> <a id="6894" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6896" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="6898" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="6900" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6902" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="6906" href="/lia/part5/Exp/#6873" class="Bound">x</a> <a id="6908" class="Symbol">(</a><a id="6909" href="/lia/part5/Exp/#6875" class="Bound">e</a> <a id="6911" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="6914" href="/lia/part5/Exp/#6873" class="Bound">x</a> <a id="6916" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="6918" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="6920" href="/lia/part5/Exp/#6399" class="Function Operator">]</a><a id="6921" class="Symbol">)</a> <a id="6923" href="/lia/part5/Exp/#971" class="Generalizable">f</a>
<a id="6925" href="/lia/part5/Exp/#6858" class="Function">subs-Let-1</a> <a id="6936" href="/lia/part5/Exp/#6936" class="Bound">x</a> <a id="6938" href="/lia/part5/Exp/#6938" class="Bound">e</a> <a id="6940" class="Symbol">=</a> <a id="6942" class="Symbol">{!   !}</a></pre>

<p>This is correct only if no free occurrence of <code class="language-plaintext highlighter-rouge">x</code> in <code class="language-plaintext highlighter-rouge">e</code> falls under a
let binding a variable <code class="language-plaintext highlighter-rouge">y</code> which is free in <code class="language-plaintext highlighter-rouge">g</code>. This is captured by
<code class="language-plaintext highlighter-rouge">g AdmissibleFor x In e</code>.</p>

<pre class="Agda"><a id="_NotFreeIn_"></a><a id="7126" href="/lia/part5/Exp/#7126" class="Function Operator">_NotFreeIn_</a> <a id="7138" class="Symbol">:</a> <a id="7140" href="/lia/part5/Exp/#544" class="Function">VarName</a> <a id="7148" class="Symbol">→</a> <a id="7150" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="7155" class="Symbol">→</a> <a id="7157" class="PrimitiveType">Set</a>
<a id="7161" href="/lia/part5/Exp/#7161" class="Bound">x</a> <a id="7163" href="/lia/part5/Exp/#7126" class="Function Operator">NotFreeIn</a> <a id="7173" href="/lia/part5/Exp/#7173" class="Bound">e</a> <a id="7175" class="Symbol">=</a> <a id="7177" href="/lia/part5/Exp/#7161" class="Bound">x</a> <a id="7179" href="/lia/part0/List/#8983" class="Function Operator">~∈</a> <a id="7182" href="/lia/part5/Exp/#5731" class="Function">fv</a> <a id="7185" href="/lia/part5/Exp/#7173" class="Bound">e</a>

<a id="7188" class="Keyword">infix</a> <a id="7194" class="Number">20</a> <a id="7197" href="/lia/part5/Exp/#7221" class="Datatype Operator">_AdmissibleFor_In_</a>
<a id="7216" class="Keyword">data</a> <a id="_AdmissibleFor_In_"></a><a id="7221" href="/lia/part5/Exp/#7221" class="Datatype Operator">_AdmissibleFor_In_</a> <a id="7240" class="Symbol">(</a><a id="7241" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7243" class="Symbol">:</a> <a id="7245" href="/lia/part5/Exp/#775" class="Datatype">AExp</a><a id="7249" class="Symbol">)</a> <a id="7251" class="Symbol">(</a><a id="7252" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7254" class="Symbol">:</a> <a id="7256" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="7263" class="Symbol">)</a> <a id="7265" class="Symbol">:</a> <a id="7267" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="7272" class="Symbol">→</a> <a id="7274" class="PrimitiveType">Set</a> <a id="7278" class="Keyword">where</a>

  <a id="_AdmissibleFor_In_.Num"></a><a id="7287" href="/lia/part5/Exp/#7287" class="InductiveConstructor">Num</a> <a id="7291" class="Symbol">:</a> <a id="7293" class="Symbol">(</a><a id="7294" href="/lia/part5/Exp/#7294" class="Bound">n</a> <a id="7296" class="Symbol">:</a> <a id="7298" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="7299" class="Symbol">)</a> <a id="7301" class="Symbol">→</a> <a id="7303" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7305" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7319" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7321" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7324" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="7326" href="/lia/part5/Exp/#7294" class="Bound">n</a>

  <a id="_AdmissibleFor_In_.Var"></a><a id="7331" href="/lia/part5/Exp/#7331" class="InductiveConstructor">Var</a> <a id="7335" class="Symbol">:</a> <a id="7337" class="Symbol">(</a><a id="7338" href="/lia/part5/Exp/#7338" class="Bound">y</a> <a id="7340" class="Symbol">:</a> <a id="7342" href="/lia/part5/Exp/#544" class="Function">VarName</a><a id="7349" class="Symbol">)</a> <a id="7351" class="Symbol">→</a> <a id="7353" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7355" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7369" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7371" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7374" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="7376" href="/lia/part5/Exp/#7338" class="Bound">y</a>

  <a id="_AdmissibleFor_In_.Add"></a><a id="7381" href="/lia/part5/Exp/#7381" class="InductiveConstructor">Add</a> <a id="7385" class="Symbol">:</a> <a id="7387" class="Symbol">∀</a> <a id="7389" href="/lia/part5/Exp/#7389" class="Bound">e</a> <a id="7391" href="/lia/part5/Exp/#7391" class="Bound">f</a> <a id="7393" class="Symbol">→</a>
        <a id="7403" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7405" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7419" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7421" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7424" href="/lia/part5/Exp/#7389" class="Bound">e</a> <a id="7426" class="Symbol">→</a> 
        <a id="7437" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7439" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7453" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7455" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7458" href="/lia/part5/Exp/#7391" class="Bound">f</a> <a id="7460" class="Symbol">→</a> 
        <a id="7471" class="Comment">----------------------------</a>
        <a id="7508" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7510" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7524" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7526" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7529" class="Symbol">(</a><a id="7530" href="/lia/part5/Exp/#7389" class="Bound">e</a> <a id="7532" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="7534" href="/lia/part5/Exp/#7391" class="Bound">f</a><a id="7535" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Mul"></a><a id="7540" href="/lia/part5/Exp/#7540" class="InductiveConstructor">Mul</a> <a id="7544" class="Symbol">:</a> <a id="7546" class="Symbol">∀</a> <a id="7548" href="/lia/part5/Exp/#7548" class="Bound">e</a> <a id="7550" href="/lia/part5/Exp/#7550" class="Bound">f</a> <a id="7552" class="Symbol">→</a>
        <a id="7562" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7564" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7578" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7580" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7583" href="/lia/part5/Exp/#7548" class="Bound">e</a> <a id="7585" class="Symbol">→</a> 
        <a id="7596" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7598" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7612" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7614" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7617" href="/lia/part5/Exp/#7550" class="Bound">f</a> <a id="7619" class="Symbol">→</a> 
        <a id="7630" class="Comment">----------------------------</a>
        <a id="7667" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7669" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7683" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7685" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7688" class="Symbol">(</a><a id="7689" href="/lia/part5/Exp/#7548" class="Bound">e</a> <a id="7691" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="7693" href="/lia/part5/Exp/#7550" class="Bound">f</a><a id="7694" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-1"></a><a id="7699" href="/lia/part5/Exp/#7699" class="InductiveConstructor">Let-1</a> <a id="7705" class="Symbol">:</a> <a id="7707" class="Symbol">∀</a> <a id="7709" href="/lia/part5/Exp/#7709" class="Bound">e</a> <a id="7711" href="/lia/part5/Exp/#7711" class="Bound">f</a> <a id="7713" class="Symbol">→</a>
          <a id="7725" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7727" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7741" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7743" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7746" href="/lia/part5/Exp/#7709" class="Bound">e</a> <a id="7748" class="Symbol">→</a> 
          <a id="7761" class="Comment">--------------------------------</a>
          <a id="7804" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7806" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7820" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7822" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7825" class="Symbol">(</a><a id="7826" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="7830" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7832" href="/lia/part5/Exp/#7709" class="Bound">e</a> <a id="7834" href="/lia/part5/Exp/#7711" class="Bound">f</a><a id="7835" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-2"></a><a id="7840" href="/lia/part5/Exp/#7840" class="InductiveConstructor">Let-2</a> <a id="7846" class="Symbol">:</a> <a id="7848" class="Symbol">∀</a> <a id="7850" href="/lia/part5/Exp/#7850" class="Bound">e</a> <a id="7852" href="/lia/part5/Exp/#7852" class="Bound">f</a> <a id="7854" class="Symbol">→</a>
          <a id="7866" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7868" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="7870" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="7872" class="Symbol">→</a>
          <a id="7884" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7886" href="/lia/part5/Exp/#7126" class="Function Operator">NotFreeIn</a> <a id="7896" href="/lia/part5/Exp/#7852" class="Bound">f</a> <a id="7898" class="Symbol">→</a>
          <a id="7910" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7912" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="7926" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="7928" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="7931" href="/lia/part5/Exp/#7850" class="Bound">e</a> <a id="7933" class="Symbol">→</a>
          <a id="7945" class="Comment">--------------------------------</a>
          <a id="7988" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="7990" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="8004" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="8006" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="8009" class="Symbol">(</a><a id="8010" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8014" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8016" href="/lia/part5/Exp/#7850" class="Bound">e</a> <a id="8018" href="/lia/part5/Exp/#7852" class="Bound">f</a><a id="8019" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-3"></a><a id="8024" href="/lia/part5/Exp/#8024" class="InductiveConstructor">Let-3</a> <a id="8030" class="Symbol">:</a> <a id="8032" class="Symbol">∀</a> <a id="8034" href="/lia/part5/Exp/#8034" class="Bound">e</a> <a id="8036" href="/lia/part5/Exp/#8036" class="Bound">f</a> <a id="8038" class="Symbol">→</a>
          <a id="8050" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="8052" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="8054" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8056" class="Symbol">→</a>
          <a id="8068" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8070" href="/lia/part5/Exp/#7126" class="Function Operator">NotFreeIn</a> <a id="8080" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="8082" class="Symbol">→</a>
          <a id="8094" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="8096" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="8110" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="8112" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="8115" href="/lia/part5/Exp/#8034" class="Bound">e</a> <a id="8117" class="Symbol">→</a>
          <a id="8129" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="8131" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="8145" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="8147" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="8150" href="/lia/part5/Exp/#8036" class="Bound">f</a> <a id="8152" class="Symbol">→</a>
          <a id="8164" class="Comment">--------------------------------</a>
          <a id="8207" href="/lia/part5/Exp/#7241" class="Bound">g</a> <a id="8209" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="8223" href="/lia/part5/Exp/#7252" class="Bound">x</a> <a id="8225" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="8228" class="Symbol">(</a><a id="8229" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8233" href="/lia/part5/Exp/#607" class="Generalizable">y</a> <a id="8235" href="/lia/part5/Exp/#8034" class="Bound">e</a> <a id="8237" href="/lia/part5/Exp/#8036" class="Bound">f</a><a id="8238" class="Symbol">)</a>

<a id="subst-lemma"></a><a id="8241" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8253" class="Symbol">:</a> <a id="8255" class="Symbol">∀</a> <a id="8257" href="/lia/part5/Exp/#8257" class="Bound">g</a> <a id="8259" href="/lia/part5/Exp/#8259" class="Bound">x</a> <a id="8261" href="/lia/part5/Exp/#8261" class="Bound">ϱ</a> <a id="8263" class="Symbol">→</a>
  <a id="8267" href="/lia/part5/Exp/#8257" class="Bound">g</a> <a id="8269" href="/lia/part5/Exp/#7221" class="Datatype Operator">AdmissibleFor</a> <a id="8283" href="/lia/part5/Exp/#8259" class="Bound">x</a> <a id="8285" href="/lia/part5/Exp/#7221" class="Datatype Operator">In</a> <a id="8288" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8290" class="Symbol">→</a>
  <a id="8294" class="Comment">--------------------------------------------</a>
  <a id="8341" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8343" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8345" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="8348" href="/lia/part5/Exp/#8259" class="Bound">x</a> <a id="8350" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="8352" href="/lia/part5/Exp/#8257" class="Bound">g</a> <a id="8354" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="8356" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8358" href="/lia/part5/Exp/#8261" class="Bound">ϱ</a> <a id="8360" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8362" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8364" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="8366" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8368" href="/lia/part5/Exp/#8261" class="Bound">ϱ</a> <a id="8370" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="8372" href="/lia/part5/Exp/#8259" class="Bound">x</a> <a id="8374" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="8376" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8378" href="/lia/part5/Exp/#8257" class="Bound">g</a> <a id="8380" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8382" href="/lia/part5/Exp/#8261" class="Bound">ϱ</a> <a id="8384" href="/lia/part0/Functions/#570" class="Function Operator">]</a>

<a id="8387" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8399" class="Symbol">_</a> <a id="8401" class="Symbol">_</a> <a id="8403" class="Symbol">_</a> <a id="8405" class="Symbol">(</a><a id="8406" href="/lia/part5/Exp/#7287" class="InductiveConstructor">Num</a> <a id="8410" href="/lia/part5/Exp/#8410" class="Bound">n</a><a id="8411" class="Symbol">)</a> <a id="8413" class="Symbol">=</a> <a id="8415" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8421" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8433" class="Symbol">_</a> <a id="8435" href="/lia/part5/Exp/#8435" class="Bound">x</a> <a id="8437" class="Symbol">_</a> <a id="8439" class="Symbol">(</a><a id="8440" href="/lia/part5/Exp/#7331" class="InductiveConstructor">Var</a> <a id="8444" href="/lia/part5/Exp/#8444" class="Bound">y</a><a id="8445" class="Symbol">)</a>
  <a id="8449" class="Keyword">with</a> <a id="8454" href="/lia/part5/Exp/#8435" class="Bound">x</a> <a id="8456" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="8459" href="/lia/part5/Exp/#8444" class="Bound">y</a>
<a id="8461" class="Symbol">...</a> <a id="8465" class="Symbol">|</a> <a id="8467" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="8471" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="8476" class="Symbol">=</a> <a id="8478" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="8483" class="Symbol">...</a> <a id="8487" class="Symbol">|</a> <a id="8489" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="8492" class="Symbol">_</a> <a id="8494" class="Symbol">=</a> <a id="8496" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8502" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8514" href="/lia/part5/Exp/#8514" class="Bound">g</a> <a id="8516" href="/lia/part5/Exp/#8516" class="Bound">x</a> <a id="8518" href="/lia/part5/Exp/#8518" class="Bound">ϱ</a> <a id="8520" class="Symbol">(</a><a id="8521" href="/lia/part5/Exp/#7381" class="InductiveConstructor">Add</a> <a id="8525" href="/lia/part5/Exp/#8525" class="Bound">e</a> <a id="8527" href="/lia/part5/Exp/#8527" class="Bound">f</a> <a id="8529" href="/lia/part5/Exp/#8529" class="Bound">adm-e</a> <a id="8535" href="/lia/part5/Exp/#8535" class="Bound">adm-f</a><a id="8540" class="Symbol">)</a>
  <a id="8544" class="Keyword">rewrite</a> <a id="8552" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8564" href="/lia/part5/Exp/#8514" class="Bound">g</a> <a id="8566" href="/lia/part5/Exp/#8516" class="Bound">x</a> <a id="8568" href="/lia/part5/Exp/#8518" class="Bound">ϱ</a> <a id="8570" href="/lia/part5/Exp/#8529" class="Bound">adm-e</a> <a id="8576" class="Symbol">|</a>
          <a id="8588" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8600" href="/lia/part5/Exp/#8514" class="Bound">g</a> <a id="8602" href="/lia/part5/Exp/#8516" class="Bound">x</a> <a id="8604" href="/lia/part5/Exp/#8518" class="Bound">ϱ</a> <a id="8606" href="/lia/part5/Exp/#8535" class="Bound">adm-f</a>
  <a id="8614" class="Symbol">=</a> <a id="8616" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8622" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8634" href="/lia/part5/Exp/#8634" class="Bound">g</a> <a id="8636" href="/lia/part5/Exp/#8636" class="Bound">x</a> <a id="8638" href="/lia/part5/Exp/#8638" class="Bound">ϱ</a> <a id="8640" class="Symbol">(</a><a id="8641" href="/lia/part5/Exp/#7540" class="InductiveConstructor">Mul</a> <a id="8645" href="/lia/part5/Exp/#8645" class="Bound">e</a> <a id="8647" href="/lia/part5/Exp/#8647" class="Bound">f</a> <a id="8649" href="/lia/part5/Exp/#8649" class="Bound">adm-e</a> <a id="8655" href="/lia/part5/Exp/#8655" class="Bound">adm-f</a><a id="8660" class="Symbol">)</a>
  <a id="8664" class="Keyword">rewrite</a> <a id="8672" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8684" href="/lia/part5/Exp/#8634" class="Bound">g</a> <a id="8686" href="/lia/part5/Exp/#8636" class="Bound">x</a> <a id="8688" href="/lia/part5/Exp/#8638" class="Bound">ϱ</a> <a id="8690" href="/lia/part5/Exp/#8649" class="Bound">adm-e</a> <a id="8696" class="Symbol">|</a>
          <a id="8708" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8720" href="/lia/part5/Exp/#8634" class="Bound">g</a> <a id="8722" href="/lia/part5/Exp/#8636" class="Bound">x</a> <a id="8724" href="/lia/part5/Exp/#8638" class="Bound">ϱ</a> <a id="8726" href="/lia/part5/Exp/#8655" class="Bound">adm-f</a>
  <a id="8734" class="Symbol">=</a> <a id="8736" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="8742" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8754" href="/lia/part5/Exp/#8754" class="Bound">g</a> <a id="8756" href="/lia/part5/Exp/#8756" class="Bound">x</a> <a id="8758" href="/lia/part5/Exp/#8758" class="Bound">ϱ</a> <a id="8760" class="Symbol">(</a><a id="8761" href="/lia/part5/Exp/#7699" class="InductiveConstructor">Let-1</a> <a id="8767" href="/lia/part5/Exp/#8767" class="Bound">e</a> <a id="8769" href="/lia/part5/Exp/#8769" class="Bound">f</a> <a id="8771" href="/lia/part5/Exp/#8771" class="Bound">adm-e</a><a id="8776" class="Symbol">)</a>
  <a id="8780" class="Keyword">with</a> <a id="8785" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="8797" href="/lia/part5/Exp/#8754" class="Bound">g</a> <a id="8799" href="/lia/part5/Exp/#8756" class="Bound">x</a> <a id="8801" href="/lia/part5/Exp/#8758" class="Bound">ϱ</a> <a id="8803" href="/lia/part5/Exp/#8771" class="Bound">adm-e</a>
<a id="8809" class="Symbol">...</a> <a id="8813" class="Symbol">|</a> <a id="8815" href="/lia/part5/Exp/#8815" class="Bound">ind</a> <a id="8819" class="Symbol">=</a>
  <a id="8823" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
    <a id="8833" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8835" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8839" class="Bound">x</a> <a id="8841" class="Bound">e</a> <a id="8843" class="Bound">f</a> <a id="8845" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="8848" class="Bound">x</a> <a id="8850" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="8852" class="Bound">g</a> <a id="8854" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="8856" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8858" class="Bound">ϱ</a>
      <a id="8866" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="8869" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="8874" class="Symbol">(λ</a> <a id="8877" href="/lia/part5/Exp/#8877" class="Bound">C</a> <a id="8879" class="Symbol">→</a> <a id="8881" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8883" href="/lia/part5/Exp/#8877" class="Bound">C</a> <a id="8885" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8887" class="Bound">ϱ</a><a id="8888" class="Symbol">)</a> <a id="8890" class="Symbol">(</a><a id="8891" href="/lia/part5/Exp/#6858" class="Function">subs-Let-1</a> <a id="8902" class="Bound">x</a> <a id="8904" class="Bound">e</a><a id="8905" class="Symbol">)</a> <a id="8907" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="8913" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8915" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="8919" class="Bound">x</a> <a id="8921" class="Symbol">(</a><a id="8922" class="Bound">e</a> <a id="8924" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="8927" class="Bound">x</a> <a id="8929" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="8931" class="Bound">g</a> <a id="8933" href="/lia/part5/Exp/#6399" class="Function Operator">]</a><a id="8934" class="Symbol">)</a> <a id="8936" class="Bound">f</a> <a id="8938" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8940" class="Bound">ϱ</a>
      <a id="8948" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="8956" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8958" class="Bound">f</a> <a id="8960" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8962" class="Bound">ϱ</a> <a id="8964" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="8966" class="Bound">x</a> <a id="8968" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="8970" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="8972" class="Bound">e</a> <a id="8974" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="8977" class="Bound">x</a> <a id="8979" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="8981" class="Bound">g</a> <a id="8983" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="8985" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="8987" class="Bound">ϱ</a> <a id="8989" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="8997" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="9000" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="9005" class="Symbol">(λ</a> <a id="9008" href="/lia/part5/Exp/#9008" class="Bound">C</a> <a id="9010" class="Symbol">→</a> <a id="9012" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9014" class="Bound">f</a> <a id="9016" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9018" class="Bound">ϱ</a> <a id="9020" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9022" class="Bound">x</a> <a id="9024" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9026" href="/lia/part5/Exp/#9008" class="Bound">C</a> <a id="9028" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="9029" class="Symbol">)</a> <a id="9031" href="/lia/part5/Exp/#8815" class="Bound">ind</a> <a id="9035" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="9041" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9043" class="Bound">f</a> <a id="9045" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9047" class="Bound">ϱ</a> <a id="9049" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9051" class="Bound">x</a> <a id="9053" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9055" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9057" class="Bound">e</a> <a id="9059" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9061" class="Bound">ϱ</a> <a id="9063" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9065" class="Bound">x</a> <a id="9067" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9069" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9071" class="Bound">g</a> <a id="9073" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9075" class="Bound">ϱ</a> <a id="9077" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9079" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="9087" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="9090" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="9095" class="Symbol">(λ</a> <a id="9098" href="/lia/part5/Exp/#9098" class="Bound">C</a> <a id="9100" class="Symbol">→</a> <a id="9102" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9104" class="Bound">f</a> <a id="9106" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9108" href="/lia/part5/Exp/#9098" class="Bound">C</a><a id="9109" class="Symbol">)</a> <a id="9111" class="Symbol">(</a><a id="9112" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="9116" class="Symbol">(</a><a id="9117" href="/lia/part0/Functions/#3155" class="Function">doubleupdate</a> <a id="9130" class="Bound">x</a><a id="9131" class="Symbol">))</a> <a id="9134" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="9140" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9142" class="Bound">f</a> <a id="9144" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9146" class="Bound">ϱ</a> <a id="9148" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9150" class="Bound">x</a> <a id="9152" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9154" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9156" class="Bound">g</a> <a id="9158" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9160" class="Bound">ϱ</a> <a id="9162" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9164" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9166" class="Bound">x</a> <a id="9168" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9170" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9172" class="Bound">e</a> <a id="9174" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9176" class="Bound">ϱ</a> <a id="9178" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9180" class="Bound">x</a> <a id="9182" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9184" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9186" class="Bound">g</a> <a id="9188" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9190" class="Bound">ϱ</a> <a id="9192" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="9194" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
      <a id="9202" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="9210" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9212" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="9216" class="Bound">x</a> <a id="9218" class="Bound">e</a> <a id="9220" class="Bound">f</a> <a id="9222" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9224" class="Bound">ϱ</a> <a id="9226" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="9228" class="Bound">x</a> <a id="9230" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="9232" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="9234" class="Bound">g</a> <a id="9236" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="9238" class="Bound">ϱ</a> <a id="9240" href="/lia/part0/Functions/#570" class="Function Operator">]</a>
  <a id="9244" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a>

<a id="9247" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="9259" href="/lia/part5/Exp/#9259" class="Bound">g</a> <a id="9261" href="/lia/part5/Exp/#9261" class="Bound">x</a> <a id="9263" href="/lia/part5/Exp/#9263" class="Bound">ϱ</a> <a id="9265" class="Symbol">(</a><a id="9266" href="/lia/part5/Exp/#7840" class="InductiveConstructor">Let-2</a> <a id="9272" href="/lia/part5/Exp/#9272" class="Bound">e</a> <a id="9274" href="/lia/part5/Exp/#9274" class="Bound">f</a> <a id="9276" href="/lia/part5/Exp/#9276" class="Bound">x≢y</a> <a id="9280" href="/lia/part5/Exp/#9280" class="Bound">xNFf</a> <a id="9285" href="/lia/part5/Exp/#9285" class="Bound">adm-e</a><a id="9290" class="Symbol">)</a> <a id="9292" class="Symbol">=</a> <a id="9294" class="Symbol">{!   !}</a>

<a id="9303" href="/lia/part5/Exp/#8241" class="Function">subst-lemma</a> <a id="9315" href="/lia/part5/Exp/#9315" class="Bound">g</a> <a id="9317" href="/lia/part5/Exp/#9317" class="Bound">x</a> <a id="9319" href="/lia/part5/Exp/#9319" class="Bound">ϱ</a> <a id="9321" class="Symbol">(</a><a id="9322" href="/lia/part5/Exp/#8024" class="InductiveConstructor">Let-3</a> <a id="9328" href="/lia/part5/Exp/#9328" class="Bound">e</a> <a id="9330" href="/lia/part5/Exp/#9330" class="Bound">f</a> <a id="9332" href="/lia/part5/Exp/#9332" class="Bound">x≢y</a> <a id="9336" href="/lia/part5/Exp/#9336" class="Bound">yNFg</a> <a id="9341" href="/lia/part5/Exp/#9341" class="Bound">adm-e</a> <a id="9347" href="/lia/part5/Exp/#9347" class="Bound">adm-f</a><a id="9352" class="Symbol">)</a> <a id="9354" class="Symbol">=</a> <a id="9356" class="Symbol">{!   !}</a>

<a id="9365" class="Comment">-- subst-lemma ($ n) = refl</a>

<a id="9394" class="Comment">-- subst-lemma {x} (` y)</a>
<a id="9419" class="Comment">--   with x ≡? y</a>
<a id="9436" class="Comment">-- ... | yes refl = refl</a>
<a id="9461" class="Comment">-- ... | no _ = refl</a>

<a id="9483" class="Comment">-- subst-lemma {x} {g} {ϱ} (e + f)</a>
<a id="9518" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="9559" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="9606" class="Comment">-- subst-lemma {x} {g} {ϱ} (e · f)</a>
<a id="9641" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="9682" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="9729" class="Comment">-- subst-lemma {x} {g} {ϱ} (Let y e f)</a>
<a id="9768" class="Comment">--   with x ≡? y</a>
<a id="9785" class="Comment">-- ... | yes refl = </a>
<a id="9806" class="Comment">--   begin</a>
<a id="9817" class="Comment">--   ⟦ Let x (e A[ x ↦ g ]) f ⟧ ϱ</a>
<a id="9851" class="Comment">--     ≡⟨⟩</a>
<a id="9862" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="9902" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ]) (subst-lemma {x} {g} {ϱ} e) ⟩</a>
<a id="9973" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10003" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ C) (sym (doubleupdate x)) ⟩</a>
<a id="10059" class="Comment">--   ⟦ f ⟧ ϱ′ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10090" class="Comment">--     ≡⟨⟩</a>
<a id="10101" class="Comment">--   ⟦ Let x e f ⟧ ϱ′</a>
<a id="10123" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>

<a id="10160" class="Comment">-- ... | no x≢y</a>
<a id="10176" class="Comment">--   with y ∈? fv g</a>
<a id="10196" class="Comment">-- ... | no ¬y∈g =</a>
<a id="10215" class="Comment">--   begin</a>
<a id="10226" class="Comment">--   ⟦ Let y (e A[ x ↦ g ]) (f A[ x ↦ g ]) ⟧ ϱ</a>
<a id="10273" class="Comment">--     ≡⟨⟩</a>
<a id="10284" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="10335" class="Comment">--     ≡⟨ cong (λ C → ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ C ]) (subst-lemma e) ⟩</a>
<a id="10405" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ′′</a>
<a id="10431" class="Comment">--     ≡⟨ subst-lemma f ⟩</a>
<a id="10457" class="Comment">--   ⟦ f ⟧ ϱ′′ [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="10490" class="Comment">--     ≡⟨⟩</a>
<a id="10501" class="Comment">--   ⟦ f ⟧ ϱ [ y ↦ ⟦ e ⟧ ϱ′ ] [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="10549" class="Comment">--     ≡⟨ sym (cong (λ C → ⟦ f ⟧ C) (update-comm _ _ _ _ _  x≢y))⟩</a>
<a id="10616" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ′′ ] [ y ↦ ⟦ e ⟧ ϱ′ ] </a>
<a id="10665" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ] [ y ↦ ⟦ e ⟧ ϱ′ ]) eq ⟩</a>
<a id="10728" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ ] [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10774" class="Comment">--     ≡⟨⟩</a>
<a id="10785" class="Comment">--   ⟦ f ⟧ ϱ′ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="10816" class="Comment">--     ≡⟨⟩</a>
<a id="10827" class="Comment">--   ⟦ Let y e f ⟧ ϱ′</a>
<a id="10849" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>
<a id="10885" class="Comment">--           ϱ′′ = ϱ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>

<a id="10924" class="Comment">--           ag : Agree ϱ ϱ′′ (fv g)</a>
<a id="10961" class="Comment">--           ag = Agree-update-~∈ ¬y∈g</a>

<a id="11001" class="Comment">--           eq : ⟦ g ⟧ ϱ′′ ≡ ⟦ g ⟧ ϱ</a>
<a id="11039" class="Comment">--           eq = fv-lemma ϱ′′ ϱ g (sym-Agree ag)</a>

<a id="11090" class="Comment">-- ... | yes y∈g = {!   !}</a></pre>

<h1 id="contextual-equivalence-and-full-abstraction">
<a class="anchor" href="#contextual-equivalence-and-full-abstraction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contextual equivalence and full abstraction</h1>

<pre class="Agda"><a id="11173" class="Keyword">private</a> <a id="_≈_"></a><a id="11181" href="/lia/part5/Exp/#11181" class="Function Operator">_≈_</a> <a id="11185" class="Symbol">:</a> <a id="11187" class="Symbol">∀</a> <a id="11189" href="/lia/part5/Exp/#11189" class="Bound">e</a> <a id="11191" href="/lia/part5/Exp/#11191" class="Bound">f</a> <a id="11193" class="Symbol">→</a> <a id="11195" class="PrimitiveType">Set</a>
<a id="11199" href="/lia/part5/Exp/#11199" class="Bound">e</a> <a id="11201" href="/lia/part5/Exp/#11181" class="Function Operator">≈</a> <a id="11203" href="/lia/part5/Exp/#11203" class="Bound">f</a> <a id="11205" class="Symbol">=</a> <a id="11207" class="Symbol">∀</a> <a id="11209" href="/lia/part5/Exp/#11209" class="Bound">c</a> <a id="11211" href="/lia/part5/Exp/#11211" class="Bound">x</a> <a id="11213" href="/lia/part5/Exp/#11213" class="Bound">ϱ</a> <a id="11215" class="Symbol">→</a> <a id="11217" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11219" href="/lia/part5/Exp/#11209" class="Bound">c</a> <a id="11221" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="11224" href="/lia/part5/Exp/#11211" class="Bound">x</a> <a id="11226" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="11228" href="/lia/part5/Exp/#11199" class="Bound">e</a> <a id="11230" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="11232" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11234" href="/lia/part5/Exp/#11213" class="Bound">ϱ</a> <a id="11236" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11238" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11240" href="/lia/part5/Exp/#11209" class="Bound">c</a> <a id="11242" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="11245" href="/lia/part5/Exp/#11211" class="Bound">x</a> <a id="11247" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="11249" href="/lia/part5/Exp/#11203" class="Bound">f</a> <a id="11251" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="11253" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11255" href="/lia/part5/Exp/#11213" class="Bound">ϱ</a></pre>

<p>There is nothing else beside the numerical value an expression has.</p>

<pre class="Agda"><a id="full-abstraction-1"></a><a id="11335" href="/lia/part5/Exp/#11335" class="Function">full-abstraction-1</a> <a id="11354" class="Symbol">:</a> <a id="11356" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11358" href="/lia/part5/Exp/#11181" class="Function Operator">≈</a> <a id="11360" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11362" class="Symbol">→</a> <a id="11364" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="11367" href="/lia/part5/Exp/#11367" class="Bound">ϱ</a> <a id="11369" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="11371" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11373" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11375" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11377" href="/lia/part5/Exp/#11367" class="Bound">ϱ</a> <a id="11379" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11381" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11383" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11385" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11387" href="/lia/part5/Exp/#11367" class="Bound">ϱ</a>
<a id="11389" href="/lia/part5/Exp/#11335" class="Function">full-abstraction-1</a> <a id="11408" href="/lia/part5/Exp/#11408" class="Bound">e≈f</a> <a id="11412" href="/lia/part5/Exp/#11412" class="Bound">ϱ</a> <a id="11414" class="Symbol">=</a> <a id="11416" href="/lia/part5/Exp/#11408" class="Bound">e≈f</a> <a id="11420" class="Symbol">(</a><a id="11421" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="11423" href="/lia/part5/Exp/#557" class="Function">x₀</a><a id="11425" class="Symbol">)</a> <a id="11427" href="/lia/part5/Exp/#557" class="Function">x₀</a> <a id="11430" href="/lia/part5/Exp/#11412" class="Bound">ϱ</a>

<a id="full-abstraction-2"></a><a id="11433" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11452" class="Symbol">:</a> <a id="11454" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="11457" href="/lia/part5/Exp/#11457" class="Bound">ϱ</a> <a id="11459" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="11461" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11463" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11465" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11467" href="/lia/part5/Exp/#11457" class="Bound">ϱ</a> <a id="11469" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11471" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="11473" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="11475" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="11477" href="/lia/part5/Exp/#11457" class="Bound">ϱ</a> <a id="11479" class="Symbol">→</a> <a id="11481" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="11483" href="/lia/part5/Exp/#11181" class="Function Operator">≈</a> <a id="11485" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="11488" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11507" href="/lia/part5/Exp/#11507" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11515" class="Symbol">(</a><a id="11516" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="11518" href="/lia/part5/Exp/#11518" class="Bound">n</a><a id="11519" class="Symbol">)</a> <a id="11521" href="/lia/part5/Exp/#11521" class="Bound">x</a> <a id="11523" href="/lia/part5/Exp/#11523" class="Bound">ϱ</a> <a id="11525" class="Symbol">=</a> <a id="11527" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11533" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11552" href="/lia/part5/Exp/#11552" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11560" class="Symbol">(</a><a id="11561" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="11563" href="/lia/part5/Exp/#11563" class="Bound">y</a><a id="11564" class="Symbol">)</a> <a id="11566" href="/lia/part5/Exp/#11566" class="Bound">x</a> <a id="11568" href="/lia/part5/Exp/#11568" class="Bound">ϱ</a>
  <a id="11572" class="Keyword">with</a> <a id="11577" href="/lia/part5/Exp/#11566" class="Bound">x</a> <a id="11579" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="11582" href="/lia/part5/Exp/#11563" class="Bound">y</a>
<a id="11584" class="Symbol">...</a> <a id="11588" class="Symbol">|</a> <a id="11590" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="11594" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11599" class="Symbol">=</a> <a id="11601" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11609" class="Bound">ϱ</a>
<a id="11611" class="Symbol">...</a> <a id="11615" class="Symbol">|</a> <a id="11617" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="11620" class="Symbol">_</a> <a id="11622" class="Symbol">=</a> <a id="11624" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11630" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11649" class="Symbol">{</a><a id="11650" href="/lia/part5/Exp/#11650" class="Bound">e</a><a id="11651" class="Symbol">}</a> <a id="11653" class="Symbol">{</a><a id="11654" href="/lia/part5/Exp/#11654" class="Bound">f</a><a id="11655" class="Symbol">}</a> <a id="11657" href="/lia/part5/Exp/#11657" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11665" class="Symbol">(</a><a id="11666" href="/lia/part5/Exp/#11666" class="Bound">c</a> <a id="11668" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="11670" href="/lia/part5/Exp/#11670" class="Bound">d</a><a id="11671" class="Symbol">)</a> <a id="11673" href="/lia/part5/Exp/#11673" class="Bound">x</a> <a id="11675" href="/lia/part5/Exp/#11675" class="Bound">ϱ</a>
  <a id="11679" class="Keyword">rewrite</a> <a id="11687" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11706" class="Symbol">{</a><a id="11707" href="/lia/part5/Exp/#11650" class="Bound">e</a><a id="11708" class="Symbol">}</a> <a id="11710" class="Symbol">{</a><a id="11711" href="/lia/part5/Exp/#11654" class="Bound">f</a><a id="11712" class="Symbol">}</a> <a id="11714" href="/lia/part5/Exp/#11657" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11722" href="/lia/part5/Exp/#11666" class="Bound">c</a> <a id="11724" href="/lia/part5/Exp/#11673" class="Bound">x</a> <a id="11726" href="/lia/part5/Exp/#11675" class="Bound">ϱ</a> <a id="11728" class="Symbol">|</a>
          <a id="11740" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11759" class="Symbol">{</a><a id="11760" href="/lia/part5/Exp/#11650" class="Bound">e</a><a id="11761" class="Symbol">}</a> <a id="11763" class="Symbol">{</a><a id="11764" href="/lia/part5/Exp/#11654" class="Bound">f</a><a id="11765" class="Symbol">}</a> <a id="11767" href="/lia/part5/Exp/#11657" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11775" href="/lia/part5/Exp/#11670" class="Bound">d</a> <a id="11777" href="/lia/part5/Exp/#11673" class="Bound">x</a> <a id="11779" href="/lia/part5/Exp/#11675" class="Bound">ϱ</a> <a id="11781" class="Symbol">=</a> <a id="11783" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11789" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11808" class="Symbol">{</a><a id="11809" href="/lia/part5/Exp/#11809" class="Bound">e</a><a id="11810" class="Symbol">}</a> <a id="11812" class="Symbol">{</a><a id="11813" href="/lia/part5/Exp/#11813" class="Bound">f</a><a id="11814" class="Symbol">}</a> <a id="11816" href="/lia/part5/Exp/#11816" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11824" class="Symbol">(</a><a id="11825" href="/lia/part5/Exp/#11825" class="Bound">c</a> <a id="11827" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="11829" href="/lia/part5/Exp/#11829" class="Bound">d</a><a id="11830" class="Symbol">)</a> <a id="11832" href="/lia/part5/Exp/#11832" class="Bound">x</a> <a id="11834" href="/lia/part5/Exp/#11834" class="Bound">ϱ</a>
  <a id="11838" class="Keyword">rewrite</a> <a id="11846" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11865" class="Symbol">{</a><a id="11866" href="/lia/part5/Exp/#11809" class="Bound">e</a><a id="11867" class="Symbol">}</a> <a id="11869" class="Symbol">{</a><a id="11870" href="/lia/part5/Exp/#11813" class="Bound">f</a><a id="11871" class="Symbol">}</a> <a id="11873" href="/lia/part5/Exp/#11816" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11881" href="/lia/part5/Exp/#11825" class="Bound">c</a> <a id="11883" href="/lia/part5/Exp/#11832" class="Bound">x</a> <a id="11885" href="/lia/part5/Exp/#11834" class="Bound">ϱ</a> <a id="11887" class="Symbol">|</a>
          <a id="11899" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11918" class="Symbol">{</a><a id="11919" href="/lia/part5/Exp/#11809" class="Bound">e</a><a id="11920" class="Symbol">}</a> <a id="11922" class="Symbol">{</a><a id="11923" href="/lia/part5/Exp/#11813" class="Bound">f</a><a id="11924" class="Symbol">}</a> <a id="11926" href="/lia/part5/Exp/#11816" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11934" href="/lia/part5/Exp/#11829" class="Bound">d</a> <a id="11936" href="/lia/part5/Exp/#11832" class="Bound">x</a> <a id="11938" href="/lia/part5/Exp/#11834" class="Bound">ϱ</a> <a id="11940" class="Symbol">=</a> <a id="11942" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="11948" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="11967" class="Symbol">{</a><a id="11968" href="/lia/part5/Exp/#11968" class="Bound">e</a><a id="11969" class="Symbol">}</a> <a id="11971" class="Symbol">{</a><a id="11972" href="/lia/part5/Exp/#11972" class="Bound">f</a><a id="11973" class="Symbol">}</a> <a id="11975" href="/lia/part5/Exp/#11975" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="11983" class="Symbol">(</a><a id="11984" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="11988" href="/lia/part5/Exp/#11988" class="Bound">y</a> <a id="11990" href="/lia/part5/Exp/#11990" class="Bound">c</a> <a id="11992" href="/lia/part5/Exp/#11992" class="Bound">d</a><a id="11993" class="Symbol">)</a> <a id="11995" href="/lia/part5/Exp/#11995" class="Bound">x</a> <a id="11997" href="/lia/part5/Exp/#11997" class="Bound">ϱ</a>
  <a id="12001" class="Keyword">with</a> <a id="12006" href="/lia/part5/Exp/#11995" class="Bound">x</a> <a id="12008" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="12011" href="/lia/part5/Exp/#11988" class="Bound">y</a>
<a id="12013" class="Symbol">...</a> <a id="12017" class="Symbol">|</a> <a id="12019" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="12023" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="12030" class="Keyword">rewrite</a> <a id="12038" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="12057" class="Symbol">{</a><a id="12058" class="Bound">e</a><a id="12059" class="Symbol">}</a> <a id="12061" class="Symbol">{</a><a id="12062" class="Bound">f</a><a id="12063" class="Symbol">}</a> <a id="12065" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12073" class="Bound">c</a> <a id="12075" class="Bound">y</a> <a id="12077" class="Bound">ϱ</a> <a id="12079" class="Symbol">=</a> <a id="12081" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="12086" class="Symbol">...</a> <a id="12090" class="Symbol">|</a> <a id="12092" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="12095" class="Symbol">_</a>
  <a id="12099" class="Keyword">rewrite</a> <a id="12107" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="12126" class="Symbol">{</a><a id="12127" class="Bound">e</a><a id="12128" class="Symbol">}</a> <a id="12130" class="Symbol">{</a><a id="12131" class="Bound">f</a><a id="12132" class="Symbol">}</a> <a id="12134" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12142" class="Bound">c</a> <a id="12144" class="Bound">x</a> <a id="12146" class="Bound">ϱ</a> <a id="12148" class="Symbol">|</a>
          <a id="12160" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a> <a id="12179" class="Symbol">{</a><a id="12180" class="Bound">e</a><a id="12181" class="Symbol">}</a> <a id="12183" class="Symbol">{</a><a id="12184" class="Bound">f</a><a id="12185" class="Symbol">}</a> <a id="12187" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="12195" class="Bound">d</a> <a id="12197" class="Bound">x</a> <a id="12199" class="Symbol">(</a><a id="12200" class="Bound">ϱ</a> <a id="12202" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="12204" class="Bound">y</a> <a id="12206" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="12208" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="12210" class="Bound">c</a> <a id="12212" href="/lia/part5/Exp/#6399" class="Function Operator">A[</a> <a id="12215" class="Bound">x</a> <a id="12217" href="/lia/part5/Exp/#6399" class="Function Operator">↦</a> <a id="12219" class="Bound">f</a> <a id="12221" href="/lia/part5/Exp/#6399" class="Function Operator">]</a> <a id="12223" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="12225" class="Bound">ϱ</a> <a id="12227" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="12228" class="Symbol">)</a> <a id="12230" class="Symbol">=</a> <a id="12232" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="full-abstraction"></a><a id="12238" href="/lia/part5/Exp/#12238" class="Function">full-abstraction</a> <a id="12255" class="Symbol">:</a> <a id="12257" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12259" href="/lia/part5/Exp/#11181" class="Function Operator">≈</a> <a id="12261" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12263" href="/lia/part0/Logic/#3145" class="Function Operator">↔</a> <a id="12265" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="12268" href="/lia/part5/Exp/#12268" class="Bound">ϱ</a> <a id="12270" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="12272" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="12274" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12276" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="12278" href="/lia/part5/Exp/#12268" class="Bound">ϱ</a> <a id="12280" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12282" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="12285" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12287" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="12289" href="/lia/part5/Exp/#12268" class="Bound">ϱ</a>
<a id="12291" href="/lia/part5/Exp/#12238" class="Function">full-abstraction</a> <a id="12308" class="Symbol">=</a> <a id="12310" href="/lia/part5/Exp/#11335" class="Function">full-abstraction-1</a> <a id="12329" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="12331" href="/lia/part5/Exp/#11433" class="Function">full-abstraction-2</a></pre>

<h1 id="small-steps-operational-semantics">
<a class="anchor" href="#small-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h1>

<h2 id="global-environment">
<a class="anchor" href="#global-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global environment</h2>

<p>We use global environments and eager semantics.</p>

<pre class="Agda"><a id="12468" class="Keyword">infix</a> <a id="12474" class="Number">4</a> <a id="12476" href="/lia/part5/Exp/#12487" class="Datatype Operator">_⊢_↝_</a>
<a id="12482" class="Keyword">data</a> <a id="_⊢_↝_"></a><a id="12487" href="/lia/part5/Exp/#12487" class="Datatype Operator">_⊢_↝_</a> <a id="12493" class="Symbol">:</a> <a id="12495" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="12499" class="Symbol">→</a> <a id="12501" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="12506" class="Symbol">→</a> <a id="12508" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="12513" class="Symbol">→</a> <a id="12515" class="PrimitiveType">Set</a> <a id="12519" class="Keyword">where</a>

  <a id="_⊢_↝_.↝-Var"></a><a id="12528" href="/lia/part5/Exp/#12528" class="InductiveConstructor">↝-Var</a> <a id="12534" class="Symbol">:</a> <a id="12536" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12538" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12540" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="12542" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="12544" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12546" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12548" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12550" href="/lia/part5/Exp/#605" class="Generalizable">x</a>

  <a id="_⊢_↝_.↝-Add-stop"></a><a id="12555" href="/lia/part5/Exp/#12555" class="InductiveConstructor">↝-Add-stop</a> <a id="12566" class="Symbol">:</a>
    <a id="12572" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12574" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12576" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12578" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12580" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12582" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12584" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="12586" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12588" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12590" class="Symbol">(</a><a id="12591" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12593" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="12596" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="12597" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Add-left"></a><a id="12602" href="/lia/part5/Exp/#12602" class="InductiveConstructor">↝-Add-left</a> <a id="12613" class="Symbol">:</a>
    <a id="12619" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12621" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12623" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12625" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12627" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12630" class="Symbol">→</a>
    <a id="12636" class="Comment">------------------</a>
    <a id="12659" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12661" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12663" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12665" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12667" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12669" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12671" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12674" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12676" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Add-right"></a><a id="12681" href="/lia/part5/Exp/#12681" class="InductiveConstructor">↝-Add-right</a> <a id="12693" class="Symbol">:</a>
    <a id="12699" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12701" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12703" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12705" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12707" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="12710" class="Symbol">→</a>
    <a id="12716" class="Comment">------------------</a>
    <a id="12739" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12741" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12743" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12745" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12747" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12749" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12751" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12753" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="12755" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Mul-stop"></a><a id="12761" href="/lia/part5/Exp/#12761" class="InductiveConstructor">↝-Mul-stop</a> <a id="12772" class="Symbol">:</a>
    <a id="12778" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12780" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12782" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12784" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12786" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12788" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12790" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="12792" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12794" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12796" class="Symbol">(</a><a id="12797" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="12799" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="12802" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="12803" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Mul-left"></a><a id="12808" href="/lia/part5/Exp/#12808" class="InductiveConstructor">↝-Mul-left</a> <a id="12819" class="Symbol">:</a>
    <a id="12825" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12827" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12829" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12831" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12833" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12836" class="Symbol">→</a>
    <a id="12842" class="Comment">------------------</a>
    <a id="12865" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12867" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12869" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12871" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12873" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12875" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12877" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="12880" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12882" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Mul-right"></a><a id="12887" href="/lia/part5/Exp/#12887" class="InductiveConstructor">↝-Mul-right</a> <a id="12899" class="Symbol">:</a>
    <a id="12905" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12907" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12909" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12911" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12913" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="12916" class="Symbol">→</a>
    <a id="12922" class="Comment">------------------</a>
    <a id="12945" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12947" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12949" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12951" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12953" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="12955" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="12957" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="12959" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="12961" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-stop"></a><a id="12967" href="/lia/part5/Exp/#12967" class="InductiveConstructor">↝-Let-stop</a> <a id="12978" class="Symbol">:</a>
    <a id="12984" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="12986" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="12988" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="12992" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="12994" class="Symbol">(</a><a id="12995" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="12997" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="12998" class="Symbol">)</a> <a id="13000" class="Symbol">(</a><a id="13001" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13003" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="13004" class="Symbol">)</a> <a id="13006" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13008" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13010" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_⊢_↝_.↝-Let-1"></a><a id="13015" href="/lia/part5/Exp/#13015" class="InductiveConstructor">↝-Let-1</a> <a id="13023" class="Symbol">:</a>
    <a id="13029" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13031" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="13033" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13035" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="13037" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="13039" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="13041" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="13043" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13045" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13047" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="13050" class="Symbol">→</a>
    <a id="13056" class="Comment">----------------------------------</a>
    <a id="13095" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13097" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="13099" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13103" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13105" class="Symbol">(</a><a id="13106" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13108" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="13109" class="Symbol">)</a> <a id="13111" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13113" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13115" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13119" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13121" class="Symbol">(</a><a id="13122" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="13124" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="13125" class="Symbol">)</a> <a id="13127" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-2"></a><a id="13133" href="/lia/part5/Exp/#13133" class="InductiveConstructor">↝-Let-2</a> <a id="13141" class="Symbol">:</a>
    <a id="13147" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13149" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="13151" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13153" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13155" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="13158" class="Symbol">→</a>
    <a id="13164" class="Comment">--------------------------</a>
    <a id="13195" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13197" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="13199" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13203" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13205" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13207" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13209" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13211" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="13215" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="13217" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="13220" href="/lia/part5/Exp/#971" class="Generalizable">f</a></pre>

<h3 id="preservation">Preservation</h3>

<pre class="Agda"><a id="preservation"></a><a id="13249" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13262" class="Symbol">:</a>
  <a id="13266" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13268" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="13270" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13272" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="13274" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13276" class="Symbol">→</a>
  <a id="13280" class="Comment">-----------------</a>
  <a id="13300" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="13302" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13304" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="13306" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13308" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="13310" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="13312" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="13314" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="13316" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="13319" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13332" href="/lia/part5/Exp/#12528" class="InductiveConstructor">↝-Var</a> <a id="13338" class="Symbol">=</a> <a id="13340" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13346" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13359" href="/lia/part5/Exp/#12555" class="InductiveConstructor">↝-Add-stop</a> <a id="13370" class="Symbol">=</a> <a id="13372" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13377" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13390" class="Symbol">(</a><a id="13391" href="/lia/part5/Exp/#12602" class="InductiveConstructor">↝-Add-left</a> <a id="13402" href="/lia/part5/Exp/#13402" class="Bound">step</a><a id="13406" class="Symbol">)</a> <a id="13408" class="Keyword">rewrite</a> <a id="13416" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13429" href="/lia/part5/Exp/#13402" class="Bound">step</a> <a id="13434" class="Symbol">=</a> <a id="13436" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13441" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13454" class="Symbol">(</a><a id="13455" href="/lia/part5/Exp/#12681" class="InductiveConstructor">↝-Add-right</a> <a id="13467" href="/lia/part5/Exp/#13467" class="Bound">step</a><a id="13471" class="Symbol">)</a> <a id="13473" class="Keyword">rewrite</a> <a id="13481" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13494" href="/lia/part5/Exp/#13467" class="Bound">step</a> <a id="13499" class="Symbol">=</a> <a id="13501" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13507" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13520" href="/lia/part5/Exp/#12761" class="InductiveConstructor">↝-Mul-stop</a> <a id="13531" class="Symbol">=</a> <a id="13533" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13538" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13551" class="Symbol">(</a><a id="13552" href="/lia/part5/Exp/#12808" class="InductiveConstructor">↝-Mul-left</a> <a id="13563" href="/lia/part5/Exp/#13563" class="Bound">step</a><a id="13567" class="Symbol">)</a> <a id="13569" class="Keyword">rewrite</a> <a id="13577" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13590" href="/lia/part5/Exp/#13563" class="Bound">step</a> <a id="13595" class="Symbol">=</a> <a id="13597" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13602" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13615" class="Symbol">(</a><a id="13616" href="/lia/part5/Exp/#12887" class="InductiveConstructor">↝-Mul-right</a> <a id="13628" href="/lia/part5/Exp/#13628" class="Bound">step</a><a id="13632" class="Symbol">)</a> <a id="13634" class="Keyword">rewrite</a> <a id="13642" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13655" href="/lia/part5/Exp/#13628" class="Bound">step</a> <a id="13660" class="Symbol">=</a> <a id="13662" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="13668" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13681" href="/lia/part5/Exp/#12967" class="InductiveConstructor">↝-Let-stop</a> <a id="13692" class="Symbol">=</a> <a id="13694" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13699" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13712" class="Symbol">(</a><a id="13713" href="/lia/part5/Exp/#13015" class="InductiveConstructor">↝-Let-1</a> <a id="13721" href="/lia/part5/Exp/#13721" class="Bound">step</a><a id="13725" class="Symbol">)</a> <a id="13727" class="Keyword">rewrite</a> <a id="13735" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13748" href="/lia/part5/Exp/#13721" class="Bound">step</a> <a id="13753" class="Symbol">=</a> <a id="13755" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="13760" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13773" class="Symbol">(</a><a id="13774" href="/lia/part5/Exp/#13133" class="InductiveConstructor">↝-Let-2</a> <a id="13782" href="/lia/part5/Exp/#13782" class="Bound">step</a><a id="13786" class="Symbol">)</a> <a id="13788" class="Keyword">rewrite</a> <a id="13796" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="13809" href="/lia/part5/Exp/#13782" class="Bound">step</a> <a id="13814" class="Symbol">=</a> <a id="13816" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="transitive-closure">Transitive closure</h3>

<p>We define the transitive closure of the small-step operational
semantics.</p>

<pre class="Agda"><a id="13929" class="Keyword">data</a> <a id="_⊢_↝*_"></a><a id="13934" href="/lia/part5/Exp/#13934" class="Datatype Operator">_⊢_↝*_</a> <a id="13941" class="Symbol">:</a> <a id="13943" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="13947" class="Symbol">→</a> <a id="13949" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="13954" class="Symbol">→</a> <a id="13956" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="13961" class="Symbol">→</a> <a id="13963" class="PrimitiveType">Set</a> <a id="13967" class="Keyword">where</a>

    <a id="_⊢_↝*_.stop"></a><a id="13978" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="13983" class="Symbol">:</a> <a id="13985" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="13987" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="13989" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="13991" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="13994" href="/lia/part5/Exp/#966" class="Generalizable">e</a>

    <a id="_⊢_↝*_.one"></a><a id="14001" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="14005" class="Symbol">:</a> <a id="14007" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14009" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="14011" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14013" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="14015" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14017" class="Symbol">→</a>
          <a id="14029" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14031" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14033" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14035" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14038" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="14040" class="Symbol">→</a>
          <a id="14052" class="Comment">----------</a>
          <a id="14073" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14075" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14077" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14079" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14082" href="/lia/part5/Exp/#976" class="Generalizable">g</a></pre>

<p>We can indeed show that <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> is transitive with a standard
induction.</p>

<pre class="Agda"><a id="↝*-trans"></a><a id="14168" href="/lia/part5/Exp/#14168" class="Function">↝*-trans</a> <a id="14177" class="Symbol">:</a>
  <a id="14181" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14183" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14185" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14187" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14190" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14192" class="Symbol">→</a>
  <a id="14196" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14198" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14200" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14202" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14205" href="/lia/part5/Exp/#976" class="Generalizable">g</a> <a id="14207" class="Symbol">→</a>
  <a id="14211" class="Comment">----------</a>
  <a id="14224" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14226" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14228" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14230" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14233" href="/lia/part5/Exp/#976" class="Generalizable">g</a>

<a id="14236" href="/lia/part5/Exp/#14168" class="Function">↝*-trans</a> <a id="14245" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="14250" href="/lia/part5/Exp/#14250" class="Bound">δ</a> <a id="14252" class="Symbol">=</a> <a id="14254" href="/lia/part5/Exp/#14250" class="Bound">δ</a>
<a id="14256" href="/lia/part5/Exp/#14168" class="Function">↝*-trans</a> <a id="14265" class="Symbol">(</a><a id="14266" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="14270" href="/lia/part5/Exp/#14270" class="Bound">step</a> <a id="14275" href="/lia/part5/Exp/#14275" class="Bound">δ₁</a><a id="14277" class="Symbol">)</a> <a id="14279" href="/lia/part5/Exp/#14279" class="Bound">δ₂</a> <a id="14282" class="Symbol">=</a> <a id="14284" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="14288" href="/lia/part5/Exp/#14270" class="Bound">step</a> <a id="14293" class="Symbol">(</a><a id="14294" href="/lia/part5/Exp/#14168" class="Function">↝*-trans</a> <a id="14303" href="/lia/part5/Exp/#14275" class="Bound">δ₁</a> <a id="14306" href="/lia/part5/Exp/#14279" class="Bound">δ₂</a><a id="14308" class="Symbol">)</a></pre>

<p>An easy induction based on <a href="#preservation"><code class="language-plaintext highlighter-rouge">preservation</code></a> shows that
the denotational semantics is preserved by the transitive closure of the
small-step operational semantics.</p>

<pre class="Agda"><a id="preservation*"></a><a id="14484" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="14498" class="Symbol">:</a>
  <a id="14502" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14504" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14506" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14508" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14511" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14513" class="Symbol">→</a>
  <a id="14517" class="Comment">-----------------</a>
  <a id="14537" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14539" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14541" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14543" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14545" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14547" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14549" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="14551" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14553" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="14556" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="14570" class="Symbol">{</a><a id="14571" href="/lia/part5/Exp/#14571" class="Bound">ϱ</a><a id="14572" class="Symbol">}</a> <a id="14574" class="Symbol">{</a><a id="14575" href="/lia/part5/Exp/#14575" class="Bound">e</a><a id="14576" class="Symbol">}</a> <a id="14578" class="Symbol">{</a><a id="14579" class="DottedPattern Symbol">.</a><a id="14580" href="/lia/part5/Exp/#14575" class="DottedPattern Bound">e</a><a id="14581" class="Symbol">}</a> <a id="14583" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="14588" class="Symbol">=</a> <a id="14590" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="14595" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="14609" class="Symbol">{</a><a id="14610" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a><a id="14611" class="Symbol">}</a> <a id="14613" class="Symbol">{</a><a id="14614" href="/lia/part5/Exp/#14614" class="Bound">e</a><a id="14615" class="Symbol">}</a> <a id="14617" class="Symbol">{</a><a id="14618" href="/lia/part5/Exp/#14618" class="Bound">g</a><a id="14619" class="Symbol">}</a> <a id="14621" class="Symbol">(</a><a id="14622" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="14626" class="Symbol">{</a><a id="14627" class="Argument">f</a> <a id="14629" class="Symbol">=</a> <a id="14631" href="/lia/part5/Exp/#14631" class="Bound">f</a><a id="14632" class="Symbol">}</a> <a id="14634" href="/lia/part5/Exp/#14634" class="Bound">step</a> <a id="14639" href="/lia/part5/Exp/#14639" class="Bound">der</a><a id="14642" class="Symbol">)</a> <a id="14644" class="Symbol">=</a>
    <a id="14650" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
        <a id="14664" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14666" href="/lia/part5/Exp/#14614" class="Bound">e</a> <a id="14668" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14670" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a> <a id="14672" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="14675" href="/lia/part5/Exp/#13249" class="Function">preservation</a> <a id="14688" class="Symbol">{</a><a id="14689" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a><a id="14690" class="Symbol">}</a> <a id="14692" class="Symbol">{</a><a id="14693" href="/lia/part5/Exp/#14614" class="Bound">e</a><a id="14694" class="Symbol">}</a> <a id="14696" class="Symbol">{</a><a id="14697" href="/lia/part5/Exp/#14631" class="Bound">f</a><a id="14698" class="Symbol">}</a> <a id="14700" href="/lia/part5/Exp/#14634" class="Bound">step</a> <a id="14705" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="14715" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14717" href="/lia/part5/Exp/#14631" class="Bound">f</a> <a id="14719" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14721" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a> <a id="14723" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="14726" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="14740" class="Symbol">{</a><a id="14741" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a><a id="14742" class="Symbol">}</a> <a id="14744" class="Symbol">{</a><a id="14745" href="/lia/part5/Exp/#14631" class="Bound">f</a><a id="14746" class="Symbol">}</a> <a id="14748" class="Symbol">{</a><a id="14749" href="/lia/part5/Exp/#14618" class="Bound">g</a><a id="14750" class="Symbol">}</a> <a id="14752" href="/lia/part5/Exp/#14639" class="Bound">der</a> <a id="14756" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="14766" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14768" href="/lia/part5/Exp/#14618" class="Bound">g</a> <a id="14770" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14772" href="/lia/part5/Exp/#14610" class="Bound">ϱ</a>
    <a id="14778" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a></pre>

<p>This immediately implies that whenever the small-step semantics
terminates producing a number <code class="language-plaintext highlighter-rouge">m</code>, then this is the right result.</p>

<pre class="Agda"><a id="↝*-agree-⟦⟧"></a><a id="14920" href="/lia/part5/Exp/#14920" class="Function">↝*-agree-⟦⟧</a> <a id="14932" class="Symbol">:</a>
  <a id="14936" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="14938" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="14940" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14942" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="14945" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="14947" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="14949" class="Symbol">→</a>
  <a id="14953" class="Comment">--------------</a>
  <a id="14970" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="14972" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14974" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="14976" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="14978" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="14980" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

<a id="14983" href="/lia/part5/Exp/#14920" class="Function">↝*-agree-⟦⟧</a> <a id="14995" href="/lia/part5/Exp/#14995" class="Bound">der</a> <a id="14999" class="Symbol">=</a> <a id="15001" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="15005" class="Symbol">(</a><a id="15006" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="15020" href="/lia/part5/Exp/#14995" class="Bound">der</a><a id="15023" class="Symbol">)</a></pre>

<h3 id="deterministic-values">Deterministic values</h3>

<p>Notice that small-step semantics is a non-deterministic relation: In
general there may be several ways to reduce an expression (as witnessed
by the rules <code class="language-plaintext highlighter-rouge">↝-Add-left</code> and <code class="language-plaintext highlighter-rouge">↝-Add-right</code> for instance).</p>

<p>However, as an immediate consequence of preservation we have that if two
numerical values are eventually produced, then they necessarily are the
same number.</p>

<pre class="Agda"><a id="↝*-det"></a><a id="15420" href="/lia/part5/Exp/#15420" class="Function">↝*-det</a> <a id="15427" class="Symbol">:</a>
  <a id="15431" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15433" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15435" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15437" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15440" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="15444" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="15446" class="Symbol">→</a>
  <a id="15450" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15452" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15454" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15456" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15459" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="15463" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="15465" class="Symbol">→</a>
  <a id="15469" class="Comment">-----------------</a>
  <a id="15489" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="15491" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="15493" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

<a id="15496" href="/lia/part5/Exp/#15420" class="Function">↝*-det</a> <a id="15503" href="/lia/part5/Exp/#15503" class="Bound">der1</a> <a id="15508" href="/lia/part5/Exp/#15508" class="Bound">der2</a> <a id="15513" class="Keyword">rewrite</a> <a id="15521" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="15525" class="Symbol">(</a><a id="15526" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="15540" href="/lia/part5/Exp/#15503" class="Bound">der1</a><a id="15544" class="Symbol">)</a> <a id="15546" class="Symbol">|</a> <a id="15548" href="/lia/part5/Exp/#14484" class="Function">preservation*</a> <a id="15562" href="/lia/part5/Exp/#15508" class="Bound">der2</a> <a id="15567" class="Symbol">=</a> <a id="15569" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h3 id="congruence">Congruence</h3>

<p>We show that the transitive closure <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> respects subexpressions.</p>

<pre class="Agda"><a id="add-cong-1"></a><a id="15670" href="/lia/part5/Exp/#15670" class="Function">add-cong-1</a> <a id="15681" class="Symbol">:</a>
  <a id="15685" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15687" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15689" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15691" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15694" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="15697" class="Symbol">→</a>
  <a id="15701" class="Comment">-------------------</a>
  <a id="15723" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15725" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15727" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15729" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15731" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15733" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15736" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="15739" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15741" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="15744" href="/lia/part5/Exp/#15670" class="Function">add-cong-1</a> <a id="15755" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="15760" class="Symbol">=</a> <a id="15762" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="15767" href="/lia/part5/Exp/#15670" class="Function">add-cong-1</a> <a id="15778" class="Symbol">(</a><a id="15779" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="15783" href="/lia/part5/Exp/#15783" class="Bound">x</a> <a id="15785" href="/lia/part5/Exp/#15785" class="Bound">d</a><a id="15786" class="Symbol">)</a> <a id="15788" class="Symbol">=</a> <a id="15790" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="15794" class="Symbol">(</a><a id="15795" href="/lia/part5/Exp/#12602" class="InductiveConstructor">↝-Add-left</a> <a id="15806" href="/lia/part5/Exp/#15783" class="Bound">x</a><a id="15807" class="Symbol">)</a> <a id="15809" class="Symbol">(</a><a id="15810" href="/lia/part5/Exp/#15670" class="Function">add-cong-1</a> <a id="15821" href="/lia/part5/Exp/#15785" class="Bound">d</a><a id="15822" class="Symbol">)</a>

<a id="add-cong-2"></a><a id="15825" href="/lia/part5/Exp/#15825" class="Function">add-cong-2</a> <a id="15836" class="Symbol">:</a>
  <a id="15840" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15842" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15844" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15846" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15849" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="15852" class="Symbol">→</a>
  <a id="15856" class="Comment">-------------------</a>
  <a id="15878" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15880" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="15882" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15884" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15886" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="15888" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="15891" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="15893" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="15895" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="15899" href="/lia/part5/Exp/#15825" class="Function">add-cong-2</a> <a id="15910" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="15915" class="Symbol">=</a> <a id="15917" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="15922" href="/lia/part5/Exp/#15825" class="Function">add-cong-2</a> <a id="15933" class="Symbol">(</a><a id="15934" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="15938" href="/lia/part5/Exp/#15938" class="Bound">x</a> <a id="15940" href="/lia/part5/Exp/#15940" class="Bound">d</a><a id="15941" class="Symbol">)</a> <a id="15943" class="Symbol">=</a> <a id="15945" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="15949" class="Symbol">(</a><a id="15950" href="/lia/part5/Exp/#12681" class="InductiveConstructor">↝-Add-right</a> <a id="15962" href="/lia/part5/Exp/#15938" class="Bound">x</a><a id="15963" class="Symbol">)</a> <a id="15965" class="Symbol">(</a><a id="15966" href="/lia/part5/Exp/#15825" class="Function">add-cong-2</a> <a id="15977" href="/lia/part5/Exp/#15940" class="Bound">d</a><a id="15978" class="Symbol">)</a>

<a id="mul-cong-1"></a><a id="15981" href="/lia/part5/Exp/#15981" class="Function">mul-cong-1</a> <a id="15992" class="Symbol">:</a>
  <a id="15996" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="15998" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16000" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16002" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16005" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16008" class="Symbol">→</a>
  <a id="16012" class="Comment">-------------------</a>
  <a id="16034" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16036" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16038" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16040" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16042" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16044" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16047" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16050" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16052" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="16055" href="/lia/part5/Exp/#15981" class="Function">mul-cong-1</a> <a id="16066" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="16071" class="Symbol">=</a> <a id="16073" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="16078" href="/lia/part5/Exp/#15981" class="Function">mul-cong-1</a> <a id="16089" class="Symbol">(</a><a id="16090" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16094" href="/lia/part5/Exp/#16094" class="Bound">x</a> <a id="16096" href="/lia/part5/Exp/#16096" class="Bound">d</a><a id="16097" class="Symbol">)</a> <a id="16099" class="Symbol">=</a> <a id="16101" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16105" class="Symbol">(</a><a id="16106" href="/lia/part5/Exp/#12808" class="InductiveConstructor">↝-Mul-left</a> <a id="16117" href="/lia/part5/Exp/#16094" class="Bound">x</a><a id="16118" class="Symbol">)</a> <a id="16120" class="Symbol">(</a><a id="16121" href="/lia/part5/Exp/#15981" class="Function">mul-cong-1</a> <a id="16132" href="/lia/part5/Exp/#16096" class="Bound">d</a><a id="16133" class="Symbol">)</a>

<a id="mul-cong-2"></a><a id="16136" href="/lia/part5/Exp/#16136" class="Function">mul-cong-2</a> <a id="16147" class="Symbol">:</a>
  <a id="16151" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16153" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16155" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16157" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16160" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="16163" class="Symbol">→</a>
  <a id="16167" class="Comment">-------------------</a>
  <a id="16189" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16191" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16193" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16195" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16197" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16199" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16202" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16204" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="16206" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="16210" href="/lia/part5/Exp/#16136" class="Function">mul-cong-2</a> <a id="16221" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="16226" class="Symbol">=</a> <a id="16228" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="16233" href="/lia/part5/Exp/#16136" class="Function">mul-cong-2</a> <a id="16244" class="Symbol">(</a><a id="16245" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16249" href="/lia/part5/Exp/#16249" class="Bound">x</a> <a id="16251" href="/lia/part5/Exp/#16251" class="Bound">d</a><a id="16252" class="Symbol">)</a> <a id="16254" class="Symbol">=</a> <a id="16256" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16260" class="Symbol">(</a><a id="16261" href="/lia/part5/Exp/#12887" class="InductiveConstructor">↝-Mul-right</a> <a id="16273" href="/lia/part5/Exp/#16249" class="Bound">x</a><a id="16274" class="Symbol">)</a> <a id="16276" class="Symbol">(</a><a id="16277" href="/lia/part5/Exp/#16136" class="Function">mul-cong-2</a> <a id="16288" href="/lia/part5/Exp/#16251" class="Bound">d</a><a id="16289" class="Symbol">)</a>

<a id="let-cong-1"></a><a id="16292" href="/lia/part5/Exp/#16292" class="Function">let-cong-1</a> <a id="16303" class="Symbol">:</a>
  <a id="16307" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16309" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16311" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16313" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16316" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16319" class="Symbol">→</a>
  <a id="16323" class="Comment">----------------------------</a>
  <a id="16354" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16356" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16358" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16362" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16364" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="16366" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16368" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16371" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16375" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16377" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="16380" href="/lia/part5/Exp/#971" class="Generalizable">f</a>

<a id="16383" href="/lia/part5/Exp/#16292" class="Function">let-cong-1</a> <a id="16394" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="16399" class="Symbol">=</a> <a id="16401" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="16406" href="/lia/part5/Exp/#16292" class="Function">let-cong-1</a> <a id="16417" class="Symbol">(</a><a id="16418" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16422" href="/lia/part5/Exp/#16422" class="Bound">x</a> <a id="16424" href="/lia/part5/Exp/#16424" class="Bound">d</a><a id="16425" class="Symbol">)</a> <a id="16427" class="Symbol">=</a> <a id="16429" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16433" class="Symbol">(</a><a id="16434" href="/lia/part5/Exp/#13133" class="InductiveConstructor">↝-Let-2</a> <a id="16442" href="/lia/part5/Exp/#16422" class="Bound">x</a><a id="16443" class="Symbol">)</a> <a id="16445" class="Symbol">(</a><a id="16446" href="/lia/part5/Exp/#16292" class="Function">let-cong-1</a> <a id="16457" href="/lia/part5/Exp/#16424" class="Bound">d</a><a id="16458" class="Symbol">)</a>

<a id="let-cong-2"></a><a id="16461" href="/lia/part5/Exp/#16461" class="Function">let-cong-2</a> <a id="16472" class="Symbol">:</a>
  <a id="16476" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16478" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="16480" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16482" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="16484" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="16486" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="16488" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16490" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16492" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16495" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="16498" class="Symbol">→</a>
  <a id="16502" class="Comment">-----------------------------------</a>
  <a id="16540" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="16542" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16544" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16548" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16550" class="Symbol">(</a><a id="16551" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="16553" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="16554" class="Symbol">)</a> <a id="16556" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="16558" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16561" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="16565" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="16567" class="Symbol">(</a><a id="16568" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="16570" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="16571" class="Symbol">)</a> <a id="16573" href="/lia/part5/Exp/#973" class="Generalizable">f′</a>

<a id="16577" href="/lia/part5/Exp/#16461" class="Function">let-cong-2</a> <a id="16588" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="16593" class="Symbol">=</a> <a id="16595" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>
<a id="16600" href="/lia/part5/Exp/#16461" class="Function">let-cong-2</a> <a id="16611" class="Symbol">(</a><a id="16612" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16616" href="/lia/part5/Exp/#16616" class="Bound">x</a> <a id="16618" href="/lia/part5/Exp/#16618" class="Bound">d</a><a id="16619" class="Symbol">)</a> <a id="16621" class="Symbol">=</a> <a id="16623" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="16627" class="Symbol">(</a><a id="16628" href="/lia/part5/Exp/#13015" class="InductiveConstructor">↝-Let-1</a> <a id="16636" href="/lia/part5/Exp/#16616" class="Bound">x</a><a id="16637" class="Symbol">)</a> <a id="16639" class="Symbol">(</a><a id="16640" href="/lia/part5/Exp/#16461" class="Function">let-cong-2</a> <a id="16651" href="/lia/part5/Exp/#16618" class="Bound">d</a><a id="16652" class="Symbol">)</a></pre>

<h3 id="relational-reasoning">Relational reasoning</h3>

<p>We introduce some syntactic sugaring to conveniently write chains of
small steps.</p>

<pre class="Agda"><a id="16772" class="Keyword">infixr</a> <a id="16779" class="Number">2</a> <a id="16781" href="/lia/part5/Exp/#16819" class="Function Operator">_↝*⟨⟩_</a> <a id="16788" href="/lia/part5/Exp/#16886" class="Function Operator">_↝*⟨_⟩_</a> <a id="16796" href="/lia/part5/Exp/#16989" class="Function Operator">_↝⟨_⟩_</a> 
<a id="16804" class="Keyword">infix</a>  <a id="16811" class="Number">3</a> <a id="16813" href="/lia/part5/Exp/#17096" class="Function Operator">_↝*∎</a>

<a id="_↝*⟨⟩_"></a><a id="16819" href="/lia/part5/Exp/#16819" class="Function Operator">_↝*⟨⟩_</a> <a id="16826" class="Symbol">:</a> <a id="16828" class="Symbol">∀</a> <a id="16830" class="Symbol">{</a><a id="16831" href="/lia/part5/Exp/#16831" class="Bound">ϱ</a><a id="16832" class="Symbol">}</a> <a id="16834" href="/lia/part5/Exp/#16834" class="Bound">e</a> <a id="16836" class="Symbol">{</a><a id="16837" href="/lia/part5/Exp/#16837" class="Bound">f</a><a id="16838" class="Symbol">}</a> <a id="16840" class="Symbol">→</a> <a id="16842" href="/lia/part5/Exp/#16831" class="Bound">ϱ</a> <a id="16844" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16846" href="/lia/part5/Exp/#16834" class="Bound">e</a> <a id="16848" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16851" href="/lia/part5/Exp/#16837" class="Bound">f</a> <a id="16853" class="Symbol">→</a> <a id="16855" href="/lia/part5/Exp/#16831" class="Bound">ϱ</a> <a id="16857" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16859" href="/lia/part5/Exp/#16834" class="Bound">e</a> <a id="16861" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16864" href="/lia/part5/Exp/#16837" class="Bound">f</a>
<a id="16866" href="/lia/part5/Exp/#16866" class="Bound">e</a> <a id="16868" href="/lia/part5/Exp/#16819" class="Function Operator">↝*⟨⟩</a> <a id="16873" href="/lia/part5/Exp/#16873" class="Bound">e↝*f</a> <a id="16878" class="Symbol">=</a> <a id="16880" href="/lia/part5/Exp/#16873" class="Bound">e↝*f</a>

<a id="_↝*⟨_⟩_"></a><a id="16886" href="/lia/part5/Exp/#16886" class="Function Operator">_↝*⟨_⟩_</a> <a id="16894" class="Symbol">:</a> <a id="16896" class="Symbol">∀</a> <a id="16898" class="Symbol">{</a><a id="16899" href="/lia/part5/Exp/#16899" class="Bound">ϱ</a><a id="16900" class="Symbol">}</a> <a id="16902" href="/lia/part5/Exp/#16902" class="Bound">e</a> <a id="16904" class="Symbol">{</a><a id="16905" href="/lia/part5/Exp/#16905" class="Bound">f</a> <a id="16907" href="/lia/part5/Exp/#16907" class="Bound">g</a><a id="16908" class="Symbol">}</a> <a id="16910" class="Symbol">→</a> <a id="16912" href="/lia/part5/Exp/#16899" class="Bound">ϱ</a> <a id="16914" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16916" href="/lia/part5/Exp/#16902" class="Bound">e</a> <a id="16918" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16921" href="/lia/part5/Exp/#16905" class="Bound">f</a> <a id="16923" class="Symbol">→</a> <a id="16925" href="/lia/part5/Exp/#16899" class="Bound">ϱ</a> <a id="16927" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16929" href="/lia/part5/Exp/#16905" class="Bound">f</a> <a id="16931" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16934" href="/lia/part5/Exp/#16907" class="Bound">g</a> <a id="16936" class="Symbol">→</a> <a id="16938" href="/lia/part5/Exp/#16899" class="Bound">ϱ</a> <a id="16940" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="16942" href="/lia/part5/Exp/#16902" class="Bound">e</a> <a id="16944" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="16947" href="/lia/part5/Exp/#16907" class="Bound">g</a>
<a id="16949" href="/lia/part5/Exp/#16949" class="Bound">e</a> <a id="16951" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="16955" href="/lia/part5/Exp/#16955" class="Bound">e↝*f</a> <a id="16960" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a> <a id="16962" href="/lia/part5/Exp/#16962" class="Bound">f↝*g</a> <a id="16967" class="Symbol">=</a> <a id="16969" href="/lia/part5/Exp/#14168" class="Function">↝*-trans</a> <a id="16978" href="/lia/part5/Exp/#16955" class="Bound">e↝*f</a> <a id="16983" href="/lia/part5/Exp/#16962" class="Bound">f↝*g</a>

<a id="_↝⟨_⟩_"></a><a id="16989" href="/lia/part5/Exp/#16989" class="Function Operator">_↝⟨_⟩_</a> <a id="16996" class="Symbol">:</a> <a id="16998" class="Symbol">∀</a> <a id="17000" class="Symbol">{</a><a id="17001" href="/lia/part5/Exp/#17001" class="Bound">ϱ</a><a id="17002" class="Symbol">}</a> <a id="17004" href="/lia/part5/Exp/#17004" class="Bound">e</a> <a id="17006" class="Symbol">{</a><a id="17007" href="/lia/part5/Exp/#17007" class="Bound">f</a> <a id="17009" href="/lia/part5/Exp/#17009" class="Bound">g</a><a id="17010" class="Symbol">}</a> <a id="17012" class="Symbol">→</a> <a id="17014" href="/lia/part5/Exp/#17001" class="Bound">ϱ</a> <a id="17016" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="17018" href="/lia/part5/Exp/#17004" class="Bound">e</a> <a id="17020" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="17022" href="/lia/part5/Exp/#17007" class="Bound">f</a> <a id="17024" class="Symbol">→</a> <a id="17026" href="/lia/part5/Exp/#17001" class="Bound">ϱ</a> <a id="17028" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="17030" href="/lia/part5/Exp/#17007" class="Bound">f</a> <a id="17032" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="17035" href="/lia/part5/Exp/#17009" class="Bound">g</a> <a id="17037" class="Symbol">→</a> <a id="17039" href="/lia/part5/Exp/#17001" class="Bound">ϱ</a> <a id="17041" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="17043" href="/lia/part5/Exp/#17004" class="Bound">e</a> <a id="17045" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="17048" href="/lia/part5/Exp/#17009" class="Bound">g</a>
<a id="17050" href="/lia/part5/Exp/#17050" class="Bound">e</a> <a id="17052" href="/lia/part5/Exp/#16989" class="Function Operator">↝⟨</a> <a id="17055" href="/lia/part5/Exp/#17055" class="Bound">e↝f</a> <a id="17059" href="/lia/part5/Exp/#16989" class="Function Operator">⟩</a> <a id="17061" href="/lia/part5/Exp/#17061" class="Bound">f↝*g</a> <a id="17066" class="Symbol">=</a> <a id="17068" href="/lia/part5/Exp/#17050" class="Bound">e</a> <a id="17070" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="17074" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="17078" href="/lia/part5/Exp/#17055" class="Bound">e↝f</a> <a id="17082" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a> <a id="17087" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a> <a id="17089" href="/lia/part5/Exp/#17061" class="Bound">f↝*g</a> 

<a id="_↝*∎"></a><a id="17096" href="/lia/part5/Exp/#17096" class="Function Operator">_↝*∎</a> <a id="17101" class="Symbol">:</a> <a id="17103" class="Symbol">∀</a> <a id="17105" href="/lia/part5/Exp/#17105" class="Bound">e</a> <a id="17107" class="Symbol">→</a> <a id="17109" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="17111" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="17113" href="/lia/part5/Exp/#17105" class="Bound">e</a> <a id="17115" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="17118" href="/lia/part5/Exp/#17105" class="Bound">e</a>
<a id="17120" href="/lia/part5/Exp/#17120" class="Bound">e</a> <a id="17122" href="/lia/part5/Exp/#17096" class="Function Operator">↝*∎</a> <a id="17126" class="Symbol">=</a> <a id="17128" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a></pre>

<h3 id="exercise-termination-weak-normalisation">
<strong>Exercise</strong>: Termination (Weak normalisation)</h3>

<p>So far we have shown that the small-step semantics produces the right
result, <em>if it produces any result at all</em>. In fact, an operational
semantics that never reaches a Numerical value trivially satisfies this
condition.</p>

<p>We prove that the small step operational semantics can always reache
some numerical value after a finite number of steps. In other word, we
prove below that the rewrite is <em>weakly normalising</em>.</p>

<pre class="Agda"><a id="weak-normalisation"></a><a id="17611" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17630" class="Symbol">:</a> <a id="17632" class="Symbol">∀</a> <a id="17634" href="/lia/part5/Exp/#17634" class="Bound">e</a> <a id="17636" class="Symbol">→</a> <a id="17638" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="17640" href="/lia/part5/Exp/#13934" class="Datatype Operator">⊢</a> <a id="17642" href="/lia/part5/Exp/#17634" class="Bound">e</a> <a id="17644" href="/lia/part5/Exp/#13934" class="Datatype Operator">↝*</a> <a id="17647" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17649" class="Symbol">(</a><a id="17650" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17652" href="/lia/part5/Exp/#17634" class="Bound">e</a> <a id="17654" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17656" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a><a id="17657" class="Symbol">)</a>

<a id="17660" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17679" class="Symbol">(</a><a id="17680" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17682" href="/lia/part5/Exp/#17682" class="Bound">n</a><a id="17683" class="Symbol">)</a> <a id="17685" class="Symbol">=</a> <a id="17687" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>

<a id="17693" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17712" class="Symbol">(</a><a id="17713" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="17715" href="/lia/part5/Exp/#17715" class="Bound">x</a><a id="17716" class="Symbol">)</a> <a id="17718" class="Symbol">=</a> <a id="17720" href="/lia/part5/Exp/#14001" class="InductiveConstructor">one</a> <a id="17724" href="/lia/part5/Exp/#12528" class="InductiveConstructor">↝-Var</a> <a id="17730" href="/lia/part5/Exp/#13978" class="InductiveConstructor">stop</a>

<a id="17736" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17755" class="Symbol">{</a><a id="17756" href="/lia/part5/Exp/#17756" class="Bound">ϱ</a><a id="17757" class="Symbol">}</a> <a id="17759" class="Symbol">(</a><a id="17760" href="/lia/part5/Exp/#17760" class="Bound">e</a> <a id="17762" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17764" href="/lia/part5/Exp/#17764" class="Bound">f</a><a id="17765" class="Symbol">)</a>
  <a id="17769" class="Keyword">with</a> <a id="17774" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17793" href="/lia/part5/Exp/#17760" class="Bound">e</a> <a id="17795" class="Symbol">|</a> <a id="17797" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="17816" href="/lia/part5/Exp/#17764" class="Bound">f</a>
<a id="17818" class="Symbol">...</a> <a id="17822" class="Symbol">|</a> <a id="17824" href="/lia/part5/Exp/#17824" class="Bound">de</a> <a id="17827" class="Symbol">|</a> <a id="17829" href="/lia/part5/Exp/#17829" class="Bound">df</a> <a id="17832" class="Symbol">=</a> 
  <a id="17837" class="Bound">e</a> <a id="17839" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17841" class="Bound">f</a> <a id="17843" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="17847" href="/lia/part5/Exp/#15670" class="Function">add-cong-1</a> <a id="17858" href="/lia/part5/Exp/#17824" class="Bound">de</a> <a id="17861" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
  <a id="17865" class="Symbol">(</a><a id="17866" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17868" class="Symbol">(</a><a id="17869" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17871" class="Bound">e</a> <a id="17873" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17875" class="Bound">ϱ</a><a id="17876" class="Symbol">))</a> <a id="17879" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17881" class="Bound">f</a> <a id="17883" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="17887" href="/lia/part5/Exp/#15825" class="Function">add-cong-2</a> <a id="17898" href="/lia/part5/Exp/#17829" class="Bound">df</a> <a id="17901" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
  <a id="17905" class="Symbol">(</a><a id="17906" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17908" class="Symbol">(</a><a id="17909" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17911" class="Bound">e</a> <a id="17913" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17915" class="Bound">ϱ</a><a id="17916" class="Symbol">))</a> <a id="17919" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="17921" class="Symbol">(</a><a id="17922" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17924" class="Symbol">(</a><a id="17925" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17927" class="Bound">f</a> <a id="17929" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17931" class="Bound">ϱ</a><a id="17932" class="Symbol">))</a> <a id="17935" href="/lia/part5/Exp/#16989" class="Function Operator">↝⟨</a> <a id="17938" href="/lia/part5/Exp/#12555" class="InductiveConstructor">↝-Add-stop</a> <a id="17949" href="/lia/part5/Exp/#16989" class="Function Operator">⟩</a>
  <a id="17953" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="17955" class="Symbol">(</a><a id="17956" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17958" class="Bound">e</a> <a id="17960" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17962" class="Bound">ϱ</a> <a id="17964" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="17967" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="17969" class="Bound">f</a> <a id="17971" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="17973" class="Bound">ϱ</a><a id="17974" class="Symbol">)</a>
  <a id="17978" href="/lia/part5/Exp/#17096" class="Function Operator">↝*∎</a>

<a id="17983" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18002" class="Symbol">{</a><a id="18003" href="/lia/part5/Exp/#18003" class="Bound">ϱ</a><a id="18004" class="Symbol">}</a> <a id="18006" class="Symbol">(</a><a id="18007" href="/lia/part5/Exp/#18007" class="Bound">e</a> <a id="18009" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18011" href="/lia/part5/Exp/#18011" class="Bound">f</a><a id="18012" class="Symbol">)</a>
  <a id="18016" class="Keyword">with</a> <a id="18021" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18040" href="/lia/part5/Exp/#18007" class="Bound">e</a> <a id="18042" class="Symbol">|</a> <a id="18044" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18063" href="/lia/part5/Exp/#18011" class="Bound">f</a>
<a id="18065" class="Symbol">...</a> <a id="18069" class="Symbol">|</a> <a id="18071" href="/lia/part5/Exp/#18071" class="Bound">de</a> <a id="18074" class="Symbol">|</a> <a id="18076" href="/lia/part5/Exp/#18076" class="Bound">df</a> <a id="18079" class="Symbol">=</a> 
  <a id="18084" class="Bound">e</a> <a id="18086" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18088" class="Bound">f</a> <a id="18090" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="18094" href="/lia/part5/Exp/#15981" class="Function">mul-cong-1</a> <a id="18105" href="/lia/part5/Exp/#18071" class="Bound">de</a> <a id="18108" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
  <a id="18112" class="Symbol">(</a><a id="18113" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18115" class="Symbol">(</a><a id="18116" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18118" class="Bound">e</a> <a id="18120" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18122" class="Bound">ϱ</a><a id="18123" class="Symbol">))</a> <a id="18126" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18128" class="Bound">f</a> <a id="18130" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="18134" href="/lia/part5/Exp/#16136" class="Function">mul-cong-2</a> <a id="18145" href="/lia/part5/Exp/#18076" class="Bound">df</a> <a id="18148" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
  <a id="18152" class="Symbol">(</a><a id="18153" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18155" class="Symbol">(</a><a id="18156" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18158" class="Bound">e</a> <a id="18160" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18162" class="Bound">ϱ</a><a id="18163" class="Symbol">))</a> <a id="18166" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="18168" class="Symbol">(</a><a id="18169" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18171" class="Symbol">(</a><a id="18172" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18174" class="Bound">f</a> <a id="18176" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18178" class="Bound">ϱ</a><a id="18179" class="Symbol">))</a> <a id="18182" href="/lia/part5/Exp/#16989" class="Function Operator">↝⟨</a> <a id="18185" href="/lia/part5/Exp/#12761" class="InductiveConstructor">↝-Mul-stop</a> <a id="18196" href="/lia/part5/Exp/#16989" class="Function Operator">⟩</a>
  <a id="18200" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18202" class="Symbol">(</a><a id="18203" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18205" class="Bound">e</a> <a id="18207" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18209" class="Bound">ϱ</a> <a id="18211" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="18214" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18216" class="Bound">f</a> <a id="18218" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18220" class="Bound">ϱ</a><a id="18221" class="Symbol">)</a>
  <a id="18225" href="/lia/part5/Exp/#17096" class="Function Operator">↝*∎</a>

<a id="18230" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18249" class="Symbol">{</a><a id="18250" href="/lia/part5/Exp/#18250" class="Bound">ϱ</a><a id="18251" class="Symbol">}</a> <a id="18253" class="Symbol">(</a><a id="18254" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18258" href="/lia/part5/Exp/#18258" class="Bound">x</a> <a id="18260" href="/lia/part5/Exp/#18260" class="Bound">e</a> <a id="18262" href="/lia/part5/Exp/#18262" class="Bound">f</a><a id="18263" class="Symbol">)</a>
  <a id="18267" class="Keyword">with</a> <a id="18272" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18291" href="/lia/part5/Exp/#18260" class="Bound">e</a> <a id="18293" class="Symbol">|</a> <a id="18295" href="/lia/part5/Exp/#17611" class="Function">weak-normalisation</a> <a id="18314" href="/lia/part5/Exp/#18262" class="Bound">f</a>
<a id="18316" class="Symbol">...</a> <a id="18320" class="Symbol">|</a> <a id="18322" href="/lia/part5/Exp/#18322" class="Bound">de</a> <a id="18325" class="Symbol">|</a> <a id="18327" href="/lia/part5/Exp/#18327" class="Bound">df</a> <a id="18330" class="Symbol">=</a>
    <a id="18336" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18340" class="Bound">x</a> <a id="18342" class="Bound">e</a> <a id="18344" class="Bound">f</a> <a id="18346" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="18350" href="/lia/part5/Exp/#16292" class="Function">let-cong-1</a> <a id="18361" href="/lia/part5/Exp/#18322" class="Bound">de</a> <a id="18364" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
    <a id="18370" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18374" class="Bound">x</a> <a id="18376" class="Symbol">(</a><a id="18377" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18379" class="Symbol">(</a><a id="18380" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18382" class="Bound">e</a> <a id="18384" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18386" class="Bound">ϱ</a><a id="18387" class="Symbol">))</a> <a id="18390" class="Bound">f</a> <a id="18392" href="/lia/part5/Exp/#16886" class="Function Operator">↝*⟨</a> <a id="18396" href="/lia/part5/Exp/#16461" class="Function">let-cong-2</a> <a id="18407" href="/lia/part5/Exp/#18327" class="Bound">df</a> <a id="18410" href="/lia/part5/Exp/#16886" class="Function Operator">⟩</a>
    <a id="18416" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="18420" class="Bound">x</a> <a id="18422" class="Symbol">(</a><a id="18423" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18425" class="Symbol">(</a><a id="18426" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18428" class="Bound">e</a> <a id="18430" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18432" class="Bound">ϱ</a><a id="18433" class="Symbol">))</a> <a id="18436" class="Symbol">(</a><a id="18437" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18439" class="Symbol">(</a><a id="18440" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18442" class="Bound">f</a> <a id="18444" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18446" class="Symbol">(</a><a id="18447" class="Bound">ϱ</a> <a id="18449" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="18451" class="Bound">x</a> <a id="18453" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="18455" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18457" class="Bound">e</a> <a id="18459" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18461" class="Bound">ϱ</a> <a id="18463" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="18464" class="Symbol">)))</a>
        <a id="18476" href="/lia/part5/Exp/#16989" class="Function Operator">↝⟨</a> <a id="18479" href="/lia/part5/Exp/#12967" class="InductiveConstructor">↝-Let-stop</a> <a id="18490" href="/lia/part5/Exp/#16989" class="Function Operator">⟩</a>
    <a id="18496" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="18498" class="Symbol">(</a><a id="18499" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18501" class="Bound">f</a> <a id="18503" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18505" class="Symbol">(</a><a id="18506" class="Bound">ϱ</a> <a id="18508" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="18510" class="Bound">x</a> <a id="18512" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="18514" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="18516" class="Bound">e</a> <a id="18518" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="18520" class="Bound">ϱ</a> <a id="18522" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="18523" class="Symbol">))</a>
    <a id="18530" href="/lia/part5/Exp/#17096" class="Function Operator">↝*∎</a></pre>

<h3 id="exercise-strong-normalisation">
<strong>Exercise</strong>: Strong normalisation</h3>

<p>The termination property above is also called <em>weak normalisation</em>,
which means that there exists a finite reduction sequence <code class="language-plaintext highlighter-rouge">e ↝* f</code>
reaching a normal form (i.e. a value) <code class="language-plaintext highlighter-rouge">f ≡ Num m</code>. We show below even
<em>strong normalisation</em>, namely, <em>every</em> reduction sequence starting from
<code class="language-plaintext highlighter-rouge">e</code> is finite.</p>

<p>To this end, we introduce a notion of <em>size</em> of arithmetic expressions.</p>

<pre class="Agda"><a id="size"></a><a id="18950" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="18955" class="Symbol">:</a> <a id="18957" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="18962" class="Symbol">→</a> <a id="18964" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="18966" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="18971" class="Symbol">(</a><a id="18972" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="18976" href="/lia/part5/Exp/#18976" class="Bound">x</a><a id="18977" class="Symbol">)</a> <a id="18979" class="Symbol">=</a> <a id="18981" class="Number">0</a>
<a id="18983" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="18988" class="Symbol">(</a><a id="18989" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="18993" href="/lia/part5/Exp/#18993" class="Bound">x</a><a id="18994" class="Symbol">)</a> <a id="18996" class="Symbol">=</a> <a id="18998" class="Number">1</a>
<a id="19000" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19005" class="Symbol">(</a><a id="19006" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="19010" href="/lia/part5/Exp/#19010" class="Bound">e</a> <a id="19012" href="/lia/part5/Exp/#19012" class="Bound">f</a><a id="19013" class="Symbol">)</a> <a id="19015" class="Symbol">=</a> <a id="19017" class="Number">1</a> <a id="19019" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19022" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19027" href="/lia/part5/Exp/#19010" class="Bound">e</a> <a id="19029" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19032" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19037" href="/lia/part5/Exp/#19012" class="Bound">f</a>
<a id="19039" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19044" class="Symbol">(</a><a id="19045" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="19049" href="/lia/part5/Exp/#19049" class="Bound">e</a> <a id="19051" href="/lia/part5/Exp/#19051" class="Bound">f</a><a id="19052" class="Symbol">)</a> <a id="19054" class="Symbol">=</a> <a id="19056" class="Number">1</a> <a id="19058" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19061" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19066" href="/lia/part5/Exp/#19049" class="Bound">e</a> <a id="19068" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19071" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19076" href="/lia/part5/Exp/#19051" class="Bound">f</a>
<a id="19078" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19083" class="Symbol">(</a><a id="19084" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="19088" href="/lia/part5/Exp/#19088" class="Bound">x</a> <a id="19090" href="/lia/part5/Exp/#19090" class="Bound">e</a> <a id="19092" href="/lia/part5/Exp/#19092" class="Bound">f</a><a id="19093" class="Symbol">)</a> <a id="19095" class="Symbol">=</a> <a id="19097" class="Number">1</a> <a id="19099" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19102" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19107" href="/lia/part5/Exp/#19090" class="Bound">e</a> <a id="19109" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="19112" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19117" href="/lia/part5/Exp/#19092" class="Bound">f</a></pre>

<p>In the lemma below we show that the size of an expression strictly
decreases at each step, which implies strong normalisation.</p>

<pre class="Agda"><a id="size-down"></a><a id="19256" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19266" class="Symbol">:</a>
  <a id="19270" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="19272" href="/lia/part5/Exp/#12487" class="Datatype Operator">⊢</a> <a id="19274" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="19276" href="/lia/part5/Exp/#12487" class="Datatype Operator">↝</a> <a id="19278" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="19280" class="Symbol">→</a>
  <a id="19284" class="Comment">---------------</a>
  <a id="19302" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19307" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="19309" href="/lia/part0/Naturals/#1318" class="Function Operator">&gt;</a> <a id="19311" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19316" href="/lia/part5/Exp/#971" class="Generalizable">f</a>
  
<a id="19321" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19331" href="/lia/part5/Exp/#12528" class="InductiveConstructor">↝-Var</a> <a id="19337" class="Symbol">=</a> <a id="19339" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19343" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>

<a id="19348" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19358" href="/lia/part5/Exp/#12555" class="InductiveConstructor">↝-Add-stop</a> <a id="19369" class="Symbol">=</a> <a id="19371" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19375" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19379" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19389" class="Symbol">(</a><a id="19390" href="/lia/part5/Exp/#12602" class="InductiveConstructor">↝-Add-left</a> <a id="19401" href="/lia/part5/Exp/#19401" class="Bound">δ</a><a id="19402" class="Symbol">)</a> <a id="19404" class="Symbol">=</a> <a id="19406" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19410" class="Symbol">(</a><a id="19411" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="19420" class="Symbol">(</a><a id="19421" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19431" href="/lia/part5/Exp/#19401" class="Bound">δ</a><a id="19432" class="Symbol">))</a>
<a id="19435" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19445" class="Symbol">{</a><a id="19446" class="Argument">e</a> <a id="19448" class="Symbol">=</a> <a id="19450" href="/lia/part5/Exp/#19450" class="Bound">e</a> <a id="19452" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="19454" class="Symbol">_}</a> <a id="19457" class="Symbol">(</a><a id="19458" href="/lia/part5/Exp/#12681" class="InductiveConstructor">↝-Add-right</a> <a id="19470" href="/lia/part5/Exp/#19470" class="Bound">δ</a><a id="19471" class="Symbol">)</a> <a id="19473" class="Symbol">=</a> <a id="19475" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19479" class="Symbol">(</a><a id="19480" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="19490" class="Symbol">{</a><a id="19491" class="Argument">n</a> <a id="19493" class="Symbol">=</a> <a id="19495" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19500" href="/lia/part5/Exp/#19450" class="Bound">e</a><a id="19501" class="Symbol">}</a> <a id="19503" class="Symbol">(</a><a id="19504" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19514" href="/lia/part5/Exp/#19470" class="Bound">δ</a><a id="19515" class="Symbol">))</a>

<a id="19519" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19529" href="/lia/part5/Exp/#12761" class="InductiveConstructor">↝-Mul-stop</a> <a id="19540" class="Symbol">=</a> <a id="19542" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19546" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19550" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19560" class="Symbol">(</a><a id="19561" href="/lia/part5/Exp/#12808" class="InductiveConstructor">↝-Mul-left</a> <a id="19572" href="/lia/part5/Exp/#19572" class="Bound">δ</a><a id="19573" class="Symbol">)</a> <a id="19575" class="Symbol">=</a> <a id="19577" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19581" class="Symbol">(</a><a id="19582" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="19591" class="Symbol">(</a><a id="19592" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19602" href="/lia/part5/Exp/#19572" class="Bound">δ</a><a id="19603" class="Symbol">))</a>
<a id="19606" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19616" class="Symbol">{</a><a id="19617" class="Argument">e</a> <a id="19619" class="Symbol">=</a> <a id="19621" href="/lia/part5/Exp/#19621" class="Bound">e</a> <a id="19623" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="19625" class="Symbol">_}</a> <a id="19628" class="Symbol">(</a><a id="19629" href="/lia/part5/Exp/#12887" class="InductiveConstructor">↝-Mul-right</a> <a id="19641" href="/lia/part5/Exp/#19641" class="Bound">δ</a><a id="19642" class="Symbol">)</a> <a id="19644" class="Symbol">=</a> <a id="19646" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19650" class="Symbol">(</a><a id="19651" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="19661" class="Symbol">{</a><a id="19662" class="Argument">n</a> <a id="19664" class="Symbol">=</a> <a id="19666" href="/lia/part5/Exp/#18950" class="Function">size</a> <a id="19671" href="/lia/part5/Exp/#19621" class="Bound">e</a><a id="19672" class="Symbol">}</a> <a id="19674" class="Symbol">(</a><a id="19675" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19685" href="/lia/part5/Exp/#19641" class="Bound">δ</a><a id="19686" class="Symbol">))</a>

<a id="19690" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19700" href="/lia/part5/Exp/#12967" class="InductiveConstructor">↝-Let-stop</a> <a id="19711" class="Symbol">=</a> <a id="19713" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19717" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="19721" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19731" class="Symbol">(</a><a id="19732" href="/lia/part5/Exp/#13015" class="InductiveConstructor">↝-Let-1</a> <a id="19740" href="/lia/part5/Exp/#19740" class="Bound">δ</a><a id="19741" class="Symbol">)</a> <a id="19743" class="Symbol">=</a> <a id="19745" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19749" class="Symbol">(</a><a id="19750" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19760" href="/lia/part5/Exp/#19740" class="Bound">δ</a><a id="19761" class="Symbol">)</a>
<a id="19763" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19773" class="Symbol">(</a><a id="19774" href="/lia/part5/Exp/#13133" class="InductiveConstructor">↝-Let-2</a> <a id="19782" href="/lia/part5/Exp/#19782" class="Bound">δ</a><a id="19783" class="Symbol">)</a> <a id="19785" class="Symbol">=</a> <a id="19787" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="19791" class="Symbol">(</a><a id="19792" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="19801" class="Symbol">(</a><a id="19802" href="/lia/part5/Exp/#19256" class="Function">size-down</a> <a id="19812" href="/lia/part5/Exp/#19782" class="Bound">δ</a><a id="19813" class="Symbol">))</a></pre>

<p>In the two “right” cases we need to give some extra hint for one
implicit parameter.</p>

<h2 id="local-environments">
<a class="anchor" href="#local-environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Local environments</h2>

<p>An alternative way to deal with the environment is to use it in a local
way. However this causes troubles. The naive way to write the derivation
rules is incorrect:</p>

<pre class="Agda"><a id="20100" class="Keyword">infix</a> <a id="20106" class="Number">4</a> <a id="20108" href="/lia/part5/Exp/#20121" class="Datatype Operator">_,_↝_,_</a>
<a id="20116" class="Keyword">data</a> <a id="_,_↝_,_"></a><a id="20121" href="/lia/part5/Exp/#20121" class="Datatype Operator">_,_↝_,_</a> <a id="20129" class="Symbol">:</a> <a id="20131" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20136" class="Symbol">→</a> <a id="20138" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20142" class="Symbol">→</a> <a id="20144" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20149" class="Symbol">→</a> <a id="20151" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20155" class="Symbol">→</a> <a id="20157" class="PrimitiveType">Set</a> <a id="20161" class="Keyword">where</a>

  <a id="_,_↝_,_.↝-Var"></a><a id="20170" href="/lia/part5/Exp/#20170" class="InductiveConstructor">↝-Var</a> <a id="20176" class="Symbol">:</a> <a id="20178" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="20180" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20182" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20184" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20186" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20188" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20190" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20192" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20194" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20196" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-stop"></a><a id="20201" href="/lia/part5/Exp/#20201" class="InductiveConstructor">↝-Add-stop</a> <a id="20212" class="Symbol">:</a>
    <a id="20218" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20220" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20222" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20224" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20226" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="20228" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20230" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20232" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20234" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20236" class="Symbol">(</a><a id="20237" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20239" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="20242" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="20243" class="Symbol">)</a> <a id="20245" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20247" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Add-left"></a><a id="20252" href="/lia/part5/Exp/#20252" class="InductiveConstructor">↝-Add-left</a> <a id="20263" class="Symbol">:</a>
    <a id="20269" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20271" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20273" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20275" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20277" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20280" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20282" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20285" class="Symbol">→</a>
    <a id="20291" class="Comment">-----------------------</a>
    <a id="20319" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20321" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20323" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20325" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20327" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20329" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20331" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20334" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20336" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20338" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20340" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Add-right"></a><a id="20346" href="/lia/part5/Exp/#20346" class="InductiveConstructor">↝-Add-right</a> <a id="20358" class="Symbol">:</a>
    <a id="20364" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20366" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20368" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20370" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20372" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20375" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20377" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20380" class="Symbol">→</a>
    <a id="20386" class="Comment">------------------</a>
    <a id="20409" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20411" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20413" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20415" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20417" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20419" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20421" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20423" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="20425" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20428" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20430" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-stop"></a><a id="20436" href="/lia/part5/Exp/#20436" class="InductiveConstructor">↝-Let-stop</a> <a id="20447" class="Symbol">:</a>
    <a id="20453" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20457" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20459" class="Symbol">(</a><a id="20460" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20462" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20463" class="Symbol">)</a> <a id="20465" class="Symbol">(</a><a id="20466" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20468" href="/lia/part5/Exp/#991" class="Generalizable">n</a><a id="20469" class="Symbol">)</a> <a id="20471" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20473" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20475" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20477" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20479" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="20481" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20483" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>

  <a id="_,_↝_,_.↝-Let-1"></a><a id="20488" href="/lia/part5/Exp/#20488" class="InductiveConstructor">↝-Let-1</a> <a id="20496" class="Symbol">:</a>
    <a id="20502" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20504" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20506" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20508" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="20510" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20512" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="20514" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="20516" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="20518" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20520" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20523" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20525" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20528" class="Symbol">→</a>
    <a id="20534" class="Comment">---------------------------------------</a>
    <a id="20578" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20582" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20584" class="Symbol">(</a><a id="20585" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20587" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20588" class="Symbol">)</a> <a id="20590" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20592" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20594" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20596" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20598" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20602" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20604" class="Symbol">(</a><a id="20605" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="20607" href="/lia/part5/Exp/#989" class="Generalizable">m</a><a id="20608" class="Symbol">)</a> <a id="20610" href="/lia/part5/Exp/#973" class="Generalizable">f′</a> <a id="20613" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20615" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a>

  <a id="_,_↝_,_.↝-Let-2"></a><a id="20621" href="/lia/part5/Exp/#20621" class="InductiveConstructor">↝-Let-2</a> <a id="20629" class="Symbol">:</a>
    <a id="20635" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20637" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20639" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20641" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20643" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20646" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20648" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a> <a id="20651" class="Symbol">→</a>
    <a id="20657" class="Comment">------------------------------</a>
    <a id="20692" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20696" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20698" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="20700" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20702" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20704" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20706" href="/lia/part5/Exp/#20121" class="Datatype Operator">↝</a> <a id="20708" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="20712" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="20714" href="/lia/part5/Exp/#968" class="Generalizable">e′</a> <a id="20717" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="20719" href="/lia/part5/Exp/#20121" class="Datatype Operator">,</a> <a id="20721" href="/lia/part5/Exp/#1577" class="Generalizable">ϱ′</a></pre>

<p>One option would be to add a new construct in the language
<code class="language-plaintext highlighter-rouge">e then x is n</code> to save and restore the previous value of <code class="language-plaintext highlighter-rouge">x</code>.</p>

<h1 id="big-steps-operational-semantics">
<a class="anchor" href="#big-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Big-steps operational semantics</h1>

<pre class="Agda"><a id="20891" class="Keyword">infix</a> <a id="20897" class="Number">4</a> <a id="20899" href="/lia/part5/Exp/#20910" class="Datatype Operator">_,_⇒_</a>
<a id="20905" class="Keyword">data</a> <a id="_,_⇒_"></a><a id="20910" href="/lia/part5/Exp/#20910" class="Datatype Operator">_,_⇒_</a> <a id="20916" class="Symbol">:</a> <a id="20918" href="/lia/part5/Exp/#775" class="Datatype">AExp</a> <a id="20923" class="Symbol">→</a> <a id="20925" href="/lia/part5/Exp/#1539" class="Function">Env</a> <a id="20929" class="Symbol">→</a> <a id="20931" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="20933" class="Symbol">→</a> <a id="20935" class="PrimitiveType">Set</a> <a id="20939" class="Keyword">where</a>

  <a id="_,_⇒_.⇒-Num"></a><a id="20948" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a> <a id="20954" class="Symbol">:</a>
    <a id="20960" class="Comment">-------------</a>
    <a id="20978" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="20982" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="20984" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="20986" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="20988" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="20990" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Var"></a><a id="20995" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a> <a id="21001" class="Symbol">:</a>
    <a id="21007" class="Comment">---------------</a>
    <a id="21027" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="21031" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21033" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21035" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21037" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21039" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21041" href="/lia/part5/Exp/#605" class="Generalizable">x</a>

  <a id="_,_⇒_.⇒-Add"></a><a id="21046" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="21052" class="Symbol">:</a>
    <a id="21058" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21060" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21062" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21064" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21066" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21068" class="Symbol">→</a>
    <a id="21074" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21076" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21078" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21080" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21082" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21084" class="Symbol">→</a>
    <a id="21090" class="Comment">------------------</a>
    <a id="21113" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21115" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21117" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21119" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21121" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21123" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21125" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21127" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="21130" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Mul"></a><a id="21135" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="21141" class="Symbol">:</a>
    <a id="21147" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21149" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21151" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21153" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21155" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21157" class="Symbol">→</a>
    <a id="21163" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21165" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21167" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21169" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21171" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21173" class="Symbol">→</a>
    <a id="21179" class="Comment">------------------</a>
    <a id="21202" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21204" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21206" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21208" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21210" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21212" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21214" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21216" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="21219" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Let"></a><a id="21224" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="21230" class="Symbol">:</a>
    <a id="21236" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21238" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21240" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21242" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21244" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21246" class="Symbol">→</a>
    <a id="21252" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21254" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21256" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21258" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21260" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21262" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21264" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="21266" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21268" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21270" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="21272" class="Symbol">→</a>
    <a id="21278" class="Comment">---------------------</a>
    <a id="21304" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21308" href="/lia/part5/Exp/#605" class="Generalizable">x</a> <a id="21310" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="21312" href="/lia/part5/Exp/#971" class="Generalizable">f</a> <a id="21314" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21316" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="21318" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21320" href="/lia/part5/Exp/#991" class="Generalizable">n</a></pre>

<p>Example derivation:</p>

<pre class="Agda"><a id="x0"></a><a id="21352" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21355" class="Symbol">=</a> <a id="21357" class="Number">0</a>
<a id="e0"></a><a id="21359" href="/lia/part5/Exp/#21359" class="Function">e0</a> <a id="21362" class="Symbol">=</a> <a id="21364" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21368" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21371" class="Symbol">(</a><a id="21372" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21374" class="Number">2</a> <a id="21376" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21378" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21380" class="Number">3</a><a id="21381" class="Symbol">)</a> <a id="21383" class="Symbol">(</a><a id="21384" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21386" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21389" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21391" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21393" class="Number">2</a><a id="21394" class="Symbol">)</a> 

<a id="21398" href="/lia/part5/Exp/#21398" class="Function">_</a> <a id="21400" class="Symbol">:</a> <a id="21402" href="/lia/part5/Exp/#21359" class="Function">e0</a> <a id="21405" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21407" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21410" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21412" class="Number">10</a>
<a id="21415" class="Symbol">_</a> <a id="21417" class="Symbol">=</a> <a id="21419" href="/lia/part0/TList/#253" class="InductiveConstructor">BEGIN</a>
    <a id="21429" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21434" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21436" class="Number">2</a> <a id="21438" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21440" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21443" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21445" class="Number">2</a>                               <a id="21477" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21480" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a>
    <a id="21490" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21495" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21497" class="Number">3</a> <a id="21499" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21501" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21504" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21506" class="Number">3</a>                               <a id="21538" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21541" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a>
    <a id="21551" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21556" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21558" class="Number">2</a> <a id="21560" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21562" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21564" class="Number">3</a> <a id="21566" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21568" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21571" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21573" class="Number">5</a>                         <a id="21599" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21605" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="21611" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21614" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21619" class="Number">1</a> <a id="21621" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21623" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="21633" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21638" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21640" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21643" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21645" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21648" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21650" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21653" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21655" class="Number">5</a> <a id="21657" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21659" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21661" class="Number">5</a>                   <a id="21681" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21684" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a>
    <a id="21694" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="21699" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21701" class="Number">2</a> <a id="21703" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21705" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21708" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21710" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21713" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21715" class="Number">5</a> <a id="21717" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21719" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21721" class="Number">2</a>                    <a id="21742" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="21745" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a>
    <a id="21755" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21760" class="Symbol">(</a><a id="21761" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21763" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21766" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21768" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21770" class="Number">2</a><a id="21771" class="Symbol">)</a> <a id="21773" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21775" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21778" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="21780" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21783" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="21785" class="Number">5</a> <a id="21787" href="/lia/part0/Functions/#570" class="Function Operator">]</a> <a id="21789" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21791" class="Number">10</a>          <a id="21803" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21809" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="21815" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21818" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21823" class="Number">1</a> <a id="21825" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21827" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="21837" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="21842" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="21846" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21849" class="Symbol">(</a><a id="21850" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21852" class="Number">2</a> <a id="21854" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="21856" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21858" class="Number">3</a><a id="21859" class="Symbol">)</a> <a id="21861" class="Symbol">(</a><a id="21862" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="21864" href="/lia/part5/Exp/#21352" class="Function">x0</a> <a id="21867" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="21869" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="21871" class="Number">2</a><a id="21872" class="Symbol">)</a> <a id="21874" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="21876" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="21879" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="21881" class="Number">10</a>  <a id="21885" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="21891" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="21897" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="21900" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="21905" class="Number">3</a> <a id="21907" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="21909" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>
    <a id="21918" href="/lia/part0/TList/#1233" class="Function">END</a></pre>

<h2 id="evaluator-interpreter">
<a class="anchor" href="#evaluator-interpreter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluator (interpreter)</h2>

<p>Luckily we can automatically produce the derivations as in the previous
example.</p>

<pre class="Agda"><a id="eval"></a><a id="22041" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22046" class="Symbol">:</a> <a id="22048" class="Symbol">∀</a> <a id="22050" href="/lia/part5/Exp/#22050" class="Bound">e</a> <a id="22052" href="/lia/part5/Exp/#22052" class="Bound">ϱ</a> <a id="22054" class="Symbol">→</a> <a id="22056" href="/lia/part0/Logic/#461" class="Function">∃[</a> <a id="22059" href="/lia/part5/Exp/#22059" class="Bound">n</a> <a id="22061" href="/lia/part0/Logic/#461" class="Function">]</a> <a id="22063" href="/lia/part5/Exp/#22050" class="Bound">e</a> <a id="22065" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="22067" href="/lia/part5/Exp/#22052" class="Bound">ϱ</a> <a id="22069" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="22071" href="/lia/part5/Exp/#22059" class="Bound">n</a>

<a id="22074" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22079" class="Symbol">(</a><a id="22080" href="/lia/part5/Exp/#1207" class="InductiveConstructor Operator">$</a> <a id="22082" href="/lia/part5/Exp/#22082" class="Bound">n</a><a id="22083" class="Symbol">)</a> <a id="22085" href="/lia/part5/Exp/#22085" class="Bound">ϱ</a> <a id="22087" class="Symbol">=</a> <a id="22089" href="/lia/part5/Exp/#22082" class="Bound">n</a> <a id="22091" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22093" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a>

<a id="22100" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22105" class="Symbol">(</a><a id="22106" href="/lia/part5/Exp/#1228" class="InductiveConstructor Operator">`</a> <a id="22108" href="/lia/part5/Exp/#22108" class="Bound">x</a><a id="22109" class="Symbol">)</a> <a id="22111" href="/lia/part5/Exp/#22111" class="Bound">ϱ</a> <a id="22113" class="Symbol">=</a> <a id="22115" href="/lia/part5/Exp/#22111" class="Bound">ϱ</a> <a id="22117" href="/lia/part5/Exp/#22108" class="Bound">x</a> <a id="22119" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22121" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a>

<a id="22128" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22133" class="Symbol">(</a><a id="22134" href="/lia/part5/Exp/#22134" class="Bound">e</a> <a id="22136" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="22138" href="/lia/part5/Exp/#22138" class="Bound">f</a><a id="22139" class="Symbol">)</a> <a id="22141" href="/lia/part5/Exp/#22141" class="Bound">ϱ</a>
  <a id="22145" class="Keyword">with</a> <a id="22150" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22155" href="/lia/part5/Exp/#22134" class="Bound">e</a> <a id="22157" href="/lia/part5/Exp/#22141" class="Bound">ϱ</a> <a id="22159" class="Symbol">|</a> <a id="22161" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22166" href="/lia/part5/Exp/#22138" class="Bound">f</a> <a id="22168" href="/lia/part5/Exp/#22141" class="Bound">ϱ</a>
<a id="22170" class="Symbol">...</a> <a id="22174" class="Symbol">|</a> <a id="22176" href="/lia/part5/Exp/#22176" class="Bound">m</a> <a id="22178" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22180" href="/lia/part5/Exp/#22180" class="Bound">δ</a> <a id="22182" class="Symbol">|</a> <a id="22184" href="/lia/part5/Exp/#22184" class="Bound">n</a> <a id="22186" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22188" href="/lia/part5/Exp/#22188" class="Bound">σ</a> <a id="22190" class="Symbol">=</a> <a id="22192" href="/lia/part5/Exp/#22176" class="Bound">m</a> <a id="22194" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="22197" href="/lia/part5/Exp/#22184" class="Bound">n</a> <a id="22199" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22201" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="22207" href="/lia/part5/Exp/#22180" class="Bound">δ</a> <a id="22209" href="/lia/part5/Exp/#22188" class="Bound">σ</a>

<a id="22212" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22217" class="Symbol">(</a><a id="22218" href="/lia/part5/Exp/#22218" class="Bound">e</a> <a id="22220" href="/lia/part5/Exp/#1275" class="InductiveConstructor Operator">·</a> <a id="22222" href="/lia/part5/Exp/#22222" class="Bound">f</a><a id="22223" class="Symbol">)</a> <a id="22225" href="/lia/part5/Exp/#22225" class="Bound">ϱ</a>
  <a id="22229" class="Keyword">with</a> <a id="22234" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22239" href="/lia/part5/Exp/#22218" class="Bound">e</a> <a id="22241" href="/lia/part5/Exp/#22225" class="Bound">ϱ</a> <a id="22243" class="Symbol">|</a> <a id="22245" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22250" href="/lia/part5/Exp/#22222" class="Bound">f</a> <a id="22252" href="/lia/part5/Exp/#22225" class="Bound">ϱ</a>
<a id="22254" class="Symbol">...</a> <a id="22258" class="Symbol">|</a> <a id="22260" href="/lia/part5/Exp/#22260" class="Bound">m</a> <a id="22262" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22264" href="/lia/part5/Exp/#22264" class="Bound">δ</a> <a id="22266" class="Symbol">|</a> <a id="22268" href="/lia/part5/Exp/#22268" class="Bound">n</a> <a id="22270" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22272" href="/lia/part5/Exp/#22272" class="Bound">σ</a> <a id="22274" class="Symbol">=</a> <a id="22276" href="/lia/part5/Exp/#22260" class="Bound">m</a> <a id="22278" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="22281" href="/lia/part5/Exp/#22268" class="Bound">n</a> <a id="22283" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22285" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="22291" href="/lia/part5/Exp/#22264" class="Bound">δ</a> <a id="22293" href="/lia/part5/Exp/#22272" class="Bound">σ</a>

<a id="22296" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22301" class="Symbol">(</a><a id="22302" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="22306" href="/lia/part5/Exp/#22306" class="Bound">x</a> <a id="22308" href="/lia/part5/Exp/#22308" class="Bound">e</a> <a id="22310" href="/lia/part5/Exp/#22310" class="Bound">f</a><a id="22311" class="Symbol">)</a> <a id="22313" href="/lia/part5/Exp/#22313" class="Bound">ϱ</a>
  <a id="22317" class="Keyword">with</a> <a id="22322" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22327" href="/lia/part5/Exp/#22308" class="Bound">e</a> <a id="22329" href="/lia/part5/Exp/#22313" class="Bound">ϱ</a>
<a id="22331" class="Symbol">...</a> <a id="22335" class="Symbol">|</a> <a id="22337" href="/lia/part5/Exp/#22337" class="Bound">m</a> <a id="22339" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22341" href="/lia/part5/Exp/#22341" class="Bound">δ</a> 
  <a id="22346" class="Keyword">with</a> <a id="22351" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22356" class="Bound">f</a> <a id="22358" class="Symbol">(</a><a id="22359" class="Bound">ϱ</a> <a id="22361" href="/lia/part0/Functions/#570" class="Function Operator">[</a> <a id="22363" class="Bound">x</a> <a id="22365" href="/lia/part0/Functions/#570" class="Function Operator">↦</a> <a id="22367" href="/lia/part5/Exp/#22337" class="Bound">m</a> <a id="22369" href="/lia/part0/Functions/#570" class="Function Operator">]</a><a id="22370" class="Symbol">)</a>
<a id="22372" class="Symbol">...</a> <a id="22376" class="Symbol">|</a> <a id="22378" href="/lia/part5/Exp/#22378" class="Bound">n</a> <a id="22380" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22382" href="/lia/part5/Exp/#22382" class="Bound">σ</a> <a id="22384" class="Symbol">=</a> <a id="22386" href="/lia/part5/Exp/#22378" class="Bound">n</a> <a id="22388" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="22390" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="22396" class="Bound">δ</a> <a id="22398" href="/lia/part5/Exp/#22382" class="Bound">σ</a></pre>
<pre class="Agda"><a id="22409" href="/lia/part5/Exp/#22409" class="Function">_</a> <a id="22411" class="Symbol">:</a> <a id="22413" href="/lia/part5/Exp/#21359" class="Function">e0</a> <a id="22416" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="22418" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a> <a id="22421" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="22423" class="Number">10</a>
<a id="22426" class="Symbol">_</a> <a id="22428" class="Symbol">=</a> <a id="22430" href="/lia/part0/Logic/#431" class="Field">dsnd</a> <a id="22435" class="Symbol">(</a><a id="22436" href="/lia/part5/Exp/#22041" class="Function">eval</a> <a id="22441" href="/lia/part5/Exp/#21359" class="Function">e0</a> <a id="22444" href="/lia/part5/Exp/#1710" class="Function">ϱ₀</a><a id="22446" class="Symbol">)</a></pre>

<h2 id="evaluation-is-deterministic">
<a class="anchor" href="#evaluation-is-deterministic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation is deterministic</h2>

<pre class="Agda"><a id="⇒-det"></a><a id="22489" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22495" class="Symbol">:</a>
  <a id="22499" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="22501" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="22503" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="22505" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="22507" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="22509" class="Symbol">→</a>
  <a id="22513" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="22515" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="22517" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="22519" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="22521" href="/lia/part5/Exp/#991" class="Generalizable">n</a> <a id="22523" class="Symbol">→</a>
  <a id="22527" class="Comment">-----------</a>
  <a id="22541" href="/lia/part5/Exp/#989" class="Generalizable">m</a> <a id="22543" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="22545" href="/lia/part5/Exp/#991" class="Generalizable">n</a>

<a id="22548" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22554" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a> <a id="22560" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a> <a id="22566" class="Symbol">=</a> <a id="22568" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22573" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22579" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a> <a id="22585" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a> <a id="22591" class="Symbol">=</a> <a id="22593" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22598" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22604" class="Symbol">(</a><a id="22605" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="22611" href="/lia/part5/Exp/#22611" class="Bound">x</a> <a id="22613" href="/lia/part5/Exp/#22613" class="Bound">x₁</a><a id="22615" class="Symbol">)</a> <a id="22617" class="Symbol">(</a><a id="22618" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="22624" href="/lia/part5/Exp/#22624" class="Bound">y</a> <a id="22626" href="/lia/part5/Exp/#22626" class="Bound">y₁</a><a id="22628" class="Symbol">)</a>
    <a id="22634" class="Keyword">with</a> <a id="22639" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22645" href="/lia/part5/Exp/#22611" class="Bound">x</a> <a id="22647" href="/lia/part5/Exp/#22624" class="Bound">y</a> <a id="22649" class="Symbol">|</a> <a id="22651" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22657" href="/lia/part5/Exp/#22613" class="Bound">x₁</a> <a id="22660" href="/lia/part5/Exp/#22626" class="Bound">y₁</a>
<a id="22663" class="Symbol">...</a> <a id="22667" class="Symbol">|</a> <a id="22669" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22674" class="Symbol">|</a> <a id="22676" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22681" class="Symbol">=</a> <a id="22683" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22688" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22694" class="Symbol">(</a><a id="22695" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="22701" href="/lia/part5/Exp/#22701" class="Bound">x</a> <a id="22703" href="/lia/part5/Exp/#22703" class="Bound">x₁</a><a id="22705" class="Symbol">)</a> <a id="22707" class="Symbol">(</a><a id="22708" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="22714" href="/lia/part5/Exp/#22714" class="Bound">y</a> <a id="22716" href="/lia/part5/Exp/#22716" class="Bound">y₁</a><a id="22718" class="Symbol">)</a>
    <a id="22724" class="Keyword">with</a> <a id="22729" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22735" href="/lia/part5/Exp/#22701" class="Bound">x</a> <a id="22737" href="/lia/part5/Exp/#22714" class="Bound">y</a> <a id="22739" class="Symbol">|</a> <a id="22741" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22747" href="/lia/part5/Exp/#22703" class="Bound">x₁</a> <a id="22750" href="/lia/part5/Exp/#22716" class="Bound">y₁</a>
<a id="22753" class="Symbol">...</a> <a id="22757" class="Symbol">|</a> <a id="22759" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22764" class="Symbol">|</a> <a id="22766" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22771" class="Symbol">=</a> <a id="22773" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="22778" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22784" class="Symbol">(</a><a id="22785" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="22791" href="/lia/part5/Exp/#22791" class="Bound">⇒₁-e</a> <a id="22796" href="/lia/part5/Exp/#22796" class="Bound">⇒₁-f</a><a id="22800" class="Symbol">)</a> <a id="22802" class="Symbol">(</a><a id="22803" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="22809" href="/lia/part5/Exp/#22809" class="Bound">⇒₂-e</a> <a id="22814" href="/lia/part5/Exp/#22814" class="Bound">⇒₂-f</a><a id="22818" class="Symbol">)</a>
    <a id="22824" class="Keyword">with</a> <a id="22829" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22835" href="/lia/part5/Exp/#22791" class="Bound">⇒₁-e</a> <a id="22840" href="/lia/part5/Exp/#22809" class="Bound">⇒₂-e</a>
<a id="22845" class="Symbol">...</a> <a id="22849" class="Symbol">|</a> <a id="22851" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="22860" class="Keyword">with</a> <a id="22865" href="/lia/part5/Exp/#22489" class="Function">⇒-det</a> <a id="22871" class="Bound">⇒₁-f</a> <a id="22876" class="Bound">⇒₂-f</a>
<a id="22881" class="Symbol">...</a> <a id="22885" class="Symbol">|</a> <a id="22887" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="22892" class="Symbol">=</a> <a id="22894" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Note that in the <code class="language-plaintext highlighter-rouge">⇒-Let</code> case we cannot perform the two
with-abstractions in parallel because in order to apply the second one
<code class="language-plaintext highlighter-rouge">⇒-det ⇒₁-f ⇒₂-f</code> we need the result of the first one.</p>

<h2 id="agreement-of-the-semantics">
<a class="anchor" href="#agreement-of-the-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of the semantics</h2>

<p>The following lemma shows that the big-steps operational semantics
agrees with the denotational semantics.</p>

<pre class="Agda"><a id="⇒-agree-⟦⟧"></a><a id="23230" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23241" class="Symbol">:</a> <a id="23243" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="23245" href="/lia/part5/Exp/#20910" class="Datatype Operator">,</a> <a id="23247" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a> <a id="23249" href="/lia/part5/Exp/#20910" class="Datatype Operator">⇒</a> <a id="23251" href="/lia/part5/Exp/#2315" class="Function Operator">⟦</a> <a id="23253" href="/lia/part5/Exp/#966" class="Generalizable">e</a> <a id="23255" href="/lia/part5/Exp/#2315" class="Function Operator">⟧</a> <a id="23257" href="/lia/part5/Exp/#1575" class="Generalizable">ϱ</a>
<a id="23259" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23270" class="Symbol">{</a><a id="23271" href="/lia/part5/Exp/#794" class="InductiveConstructor">Num</a> <a id="23275" href="/lia/part5/Exp/#23275" class="Bound">x</a><a id="23276" class="Symbol">}</a> <a id="23278" class="Symbol">=</a> <a id="23280" href="/lia/part5/Exp/#20948" class="InductiveConstructor">⇒-Num</a>
<a id="23286" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23297" class="Symbol">{</a><a id="23298" href="/lia/part5/Exp/#817" class="InductiveConstructor">Var</a> <a id="23302" href="/lia/part5/Exp/#23302" class="Bound">x</a><a id="23303" class="Symbol">}</a> <a id="23305" class="Symbol">=</a> <a id="23307" href="/lia/part5/Exp/#20995" class="InductiveConstructor">⇒-Var</a>
<a id="23313" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23324" class="Symbol">{</a><a id="23325" href="/lia/part5/Exp/#846" class="InductiveConstructor">Add</a> <a id="23329" href="/lia/part5/Exp/#23329" class="Bound">e</a> <a id="23331" href="/lia/part5/Exp/#23331" class="Bound">e₁</a><a id="23333" class="Symbol">}</a> <a id="23335" class="Symbol">=</a> <a id="23337" href="/lia/part5/Exp/#21046" class="InductiveConstructor">⇒-Add</a> <a id="23343" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23354" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> 
<a id="23366" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23377" class="Symbol">{</a><a id="23378" href="/lia/part5/Exp/#874" class="InductiveConstructor">Mul</a> <a id="23382" href="/lia/part5/Exp/#23382" class="Bound">e</a> <a id="23384" href="/lia/part5/Exp/#23384" class="Bound">e₁</a><a id="23386" class="Symbol">}</a> <a id="23388" class="Symbol">=</a> <a id="23390" href="/lia/part5/Exp/#21135" class="InductiveConstructor">⇒-Mul</a> <a id="23396" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23407" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> 
<a id="23419" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23430" class="Symbol">{</a><a id="23431" href="/lia/part5/Exp/#902" class="InductiveConstructor">Let</a> <a id="23435" href="/lia/part5/Exp/#23435" class="Bound">x</a> <a id="23437" href="/lia/part5/Exp/#23437" class="Bound">e</a> <a id="23439" href="/lia/part5/Exp/#23439" class="Bound">f</a><a id="23440" class="Symbol">}</a> <a id="23442" class="Symbol">=</a> <a id="23444" href="/lia/part5/Exp/#21224" class="InductiveConstructor">⇒-Let</a> <a id="23450" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a> <a id="23461" href="/lia/part5/Exp/#23230" class="Function">⇒-agree-⟦⟧</a></pre>

<h1 id="binary-numbers">
<a class="anchor" href="#binary-numbers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary numbers</h1>

<h2 id="lsd">
<a class="anchor" href="#lsd" aria-hidden="true"><span class="octicon octicon-link"></span></a>LSD</h2>

<pre class="Agda"><a id="23507" class="Keyword">data</a> <a id="LSD"></a><a id="23512" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a> <a id="23516" class="Symbol">:</a> <a id="23518" class="PrimitiveType">Set</a> <a id="23522" class="Keyword">where</a>
  <a id="LSD.$"></a><a id="23530" href="/lia/part5/Exp/#23530" class="InductiveConstructor">$</a> <a id="23532" class="Symbol">:</a> <a id="23534" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a>
  <a id="LSD._𝟬"></a><a id="23540" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">_𝟬</a> <a id="23543" class="Symbol">:</a> <a id="23545" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a> <a id="23549" class="Symbol">→</a> <a id="23551" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a>
  <a id="LSD._𝟭"></a><a id="23557" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">_𝟭</a> <a id="23560" class="Symbol">:</a> <a id="23562" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a> <a id="23566" class="Symbol">→</a> <a id="23568" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a></pre>

<p>Semantics according to least significant digit (LSD)</p>

<pre class="Agda"><a id="LSD⟦_⟧"></a><a id="23635" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦_⟧</a> <a id="23642" class="Symbol">:</a> <a id="23644" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a> <a id="23648" class="Symbol">→</a> <a id="23650" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="23652" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23657" href="/lia/part5/Exp/#23530" class="InductiveConstructor">$</a> <a id="23659" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a> <a id="23661" class="Symbol">=</a> <a id="23663" class="Number">0</a>
<a id="23665" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23670" href="/lia/part5/Exp/#23670" class="Bound">x</a> <a id="23672" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">𝟬</a> <a id="23674" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a> <a id="23676" class="Symbol">=</a> <a id="23678" class="Number">2</a> <a id="23680" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23683" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23688" href="/lia/part5/Exp/#23670" class="Bound">x</a> <a id="23690" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a>
<a id="23692" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23697" href="/lia/part5/Exp/#23697" class="Bound">x</a> <a id="23699" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">𝟭</a> <a id="23701" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a> <a id="23703" class="Symbol">=</a> <a id="23705" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23709" class="Symbol">(</a><a id="23710" class="Number">2</a> <a id="23712" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="23715" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23720" href="/lia/part5/Exp/#23697" class="Bound">x</a> <a id="23722" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a><a id="23723" class="Symbol">)</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="23744" href="/lia/part5/Exp/#23744" class="Function">_</a> <a id="23746" class="Symbol">:</a> <a id="23748" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="23753" href="/lia/part5/Exp/#23530" class="InductiveConstructor">$</a> <a id="23755" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">𝟬</a> <a id="23757" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">𝟭</a> <a id="23759" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">𝟭</a> <a id="23761" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">𝟬</a> <a id="23763" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a> <a id="23765" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="23767" class="Number">6</a>
<a id="23769" class="Symbol">_</a> <a id="23771" class="Symbol">=</a> <a id="23773" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="msd">
<a class="anchor" href="#msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>MSD</h2>

<pre class="Agda"><a id="23795" class="Keyword">data</a> <a id="MSD"></a><a id="23800" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a> <a id="23804" class="Symbol">:</a> <a id="23806" class="PrimitiveType">Set</a> <a id="23810" class="Keyword">where</a>
  <a id="MSD.$"></a><a id="23818" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="23820" class="Symbol">:</a> <a id="23822" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a>
  <a id="MSD.𝟬_"></a><a id="23828" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬_</a> <a id="23831" class="Symbol">:</a> <a id="23833" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a> <a id="23837" class="Symbol">→</a> <a id="23839" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a>
  <a id="MSD.𝟭_"></a><a id="23845" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭_</a> <a id="23848" class="Symbol">:</a> <a id="23850" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a> <a id="23854" class="Symbol">→</a> <a id="23856" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a></pre>

<p>Semantics according to most significant digit (MSD). This won’t work:</p>

<pre class="Agda"><a id="23940" class="Comment">-- MSD⟦_⟧ : MSD → ℕ</a>
<a id="23960" class="Comment">-- MSD⟦ x ⟧ = {!   !}</a></pre>

<p>A possible solution: Additionally remember the number of digits (second
component).</p>

<pre class="Agda"><a id="MSD⟦_⟧"></a><a id="24076" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦_⟧</a> <a id="24083" class="Symbol">:</a> <a id="24085" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a> <a id="24089" class="Symbol">→</a> <a id="24091" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="24093" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="24095" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="24097" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24102" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="24104" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="24106" class="Symbol">=</a> <a id="24108" class="Number">0</a> <a id="24110" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24112" class="Number">0</a>
<a id="24114" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24119" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24121" href="/lia/part5/Exp/#24121" class="Bound">x</a> <a id="24123" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a>
  <a id="24127" class="Keyword">with</a> <a id="24132" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24137" href="/lia/part5/Exp/#24121" class="Bound">x</a> <a id="24139" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a>
<a id="24141" class="Symbol">...</a> <a id="24145" class="Symbol">|</a> <a id="24147" href="/lia/part5/Exp/#24147" class="Bound">n</a> <a id="24149" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24151" href="/lia/part5/Exp/#24151" class="Bound">k</a> <a id="24153" class="Symbol">=</a> <a id="24155" href="/lia/part5/Exp/#24147" class="Bound">n</a> <a id="24157" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24159" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24163" href="/lia/part5/Exp/#24151" class="Bound">k</a>

<a id="24166" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24171" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24173" href="/lia/part5/Exp/#24173" class="Bound">x</a> <a id="24175" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a>
  <a id="24179" class="Keyword">with</a> <a id="24184" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24189" href="/lia/part5/Exp/#24173" class="Bound">x</a> <a id="24191" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a>
<a id="24193" class="Symbol">...</a> <a id="24197" class="Symbol">|</a> <a id="24199" href="/lia/part5/Exp/#24199" class="Bound">n</a> <a id="24201" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24203" href="/lia/part5/Exp/#24203" class="Bound">k</a> <a id="24205" class="Symbol">=</a> <a id="24207" href="/lia/part5/Exp/#24199" class="Bound">n</a> <a id="24209" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24212" class="Number">2</a> <a id="24214" href="/lia/part0/Naturals/#8913" class="Function Operator">^</a> <a id="24216" href="/lia/part5/Exp/#24203" class="Bound">k</a> <a id="24218" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24220" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24224" href="/lia/part5/Exp/#24203" class="Bound">k</a></pre>

<p>Example:</p>

<pre class="Agda"><a id="24245" href="/lia/part5/Exp/#24245" class="Function">_</a> <a id="24247" class="Symbol">:</a> <a id="24249" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24254" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24256" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24258" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24260" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24262" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="24264" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="24266" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24268" class="Number">6</a> <a id="24270" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24272" class="Number">4</a> 
<a id="24275" class="Symbol">_</a> <a id="24277" class="Symbol">=</a> <a id="24279" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="agreement-of-lsd-and-msd">
<a class="anchor" href="#agreement-of-lsd-and-msd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of LSD and MSD</h2>

<pre class="Agda"><a id="push-𝟬"></a><a id="24322" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="push-𝟭"></a><a id="24329" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24336" class="Symbol">:</a> <a id="24338" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a> <a id="24342" class="Symbol">→</a> <a id="24344" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a>
<a id="24348" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24355" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="24357" class="Symbol">=</a> <a id="24359" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24361" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a>
<a id="24363" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24370" class="Symbol">(</a><a id="24371" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24373" href="/lia/part5/Exp/#24373" class="Bound">x</a><a id="24374" class="Symbol">)</a> <a id="24376" class="Symbol">=</a> <a id="24378" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24380" class="Symbol">(</a><a id="24381" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24388" href="/lia/part5/Exp/#24373" class="Bound">x</a><a id="24389" class="Symbol">)</a>
<a id="24391" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24398" class="Symbol">(</a><a id="24399" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24401" href="/lia/part5/Exp/#24401" class="Bound">x</a><a id="24402" class="Symbol">)</a> <a id="24404" class="Symbol">=</a> <a id="24406" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24408" class="Symbol">(</a><a id="24409" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24416" href="/lia/part5/Exp/#24401" class="Bound">x</a><a id="24417" class="Symbol">)</a>

<a id="24420" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24427" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="24429" class="Symbol">=</a> <a id="24431" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24433" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a>
<a id="24435" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24442" class="Symbol">(</a><a id="24443" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24445" href="/lia/part5/Exp/#24445" class="Bound">x</a><a id="24446" class="Symbol">)</a> <a id="24448" class="Symbol">=</a> <a id="24450" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24452" class="Symbol">(</a><a id="24453" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24460" href="/lia/part5/Exp/#24445" class="Bound">x</a><a id="24461" class="Symbol">)</a>
<a id="24463" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24470" class="Symbol">(</a><a id="24471" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24473" href="/lia/part5/Exp/#24473" class="Bound">x</a><a id="24474" class="Symbol">)</a> <a id="24476" class="Symbol">=</a> <a id="24478" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24480" class="Symbol">(</a><a id="24481" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="24488" href="/lia/part5/Exp/#24473" class="Bound">x</a><a id="24489" class="Symbol">)</a>

<a id="24492" class="Comment">-- this type was copied-pasted and abstracted from the goal in push-𝟬-lemma  before the last rewrite</a>
<a id="aux-𝟬"></a><a id="24593" href="/lia/part5/Exp/#24593" class="Function">aux-𝟬</a> <a id="24599" class="Symbol">:</a> <a id="24601" class="Symbol">∀</a> <a id="24603" href="/lia/part5/Exp/#24603" class="Bound">m</a> <a id="24605" href="/lia/part5/Exp/#24605" class="Bound">n</a> <a id="24607" class="Symbol">→</a> <a id="24609" href="/lia/part5/Exp/#24603" class="Bound">m</a> <a id="24611" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24614" class="Symbol">(</a><a id="24615" href="/lia/part5/Exp/#24603" class="Bound">m</a> <a id="24617" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24620" class="Number">0</a><a id="24621" class="Symbol">)</a> <a id="24623" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24626" class="Symbol">(</a><a id="24627" href="/lia/part5/Exp/#24605" class="Bound">n</a> <a id="24629" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24632" class="Symbol">(</a><a id="24633" href="/lia/part5/Exp/#24605" class="Bound">n</a> <a id="24635" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24638" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="24642" class="Symbol">))</a> <a id="24645" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24647" href="/lia/part5/Exp/#24603" class="Bound">m</a> <a id="24649" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24652" href="/lia/part5/Exp/#24605" class="Bound">n</a> <a id="24654" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24657" class="Symbol">(</a><a id="24658" href="/lia/part5/Exp/#24603" class="Bound">m</a> <a id="24660" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24663" href="/lia/part5/Exp/#24605" class="Bound">n</a> <a id="24665" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24668" class="Number">0</a><a id="24669" class="Symbol">)</a>
<a id="24671" href="/lia/part5/Exp/#24593" class="Function">aux-𝟬</a> <a id="24677" class="Symbol">=</a> <a id="24679" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟬-lemma"></a><a id="24688" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24701" class="Symbol">:</a> <a id="24703" class="Symbol">∀</a> <a id="24705" href="/lia/part5/Exp/#24705" class="Bound">x</a> <a id="24707" class="Symbol">→</a> <a id="24709" class="Keyword">let</a> <a id="24713" href="/lia/part5/Exp/#24713" class="Bound">n</a> <a id="24715" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24717" href="/lia/part5/Exp/#24717" class="Bound">k</a> <a id="24719" class="Symbol">=</a> <a id="24721" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24726" href="/lia/part5/Exp/#24705" class="Bound">x</a> <a id="24728" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="24730" class="Keyword">in</a> <a id="24733" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24738" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="24745" href="/lia/part5/Exp/#24705" class="Bound">x</a> <a id="24747" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="24749" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="24751" class="Number">2</a> <a id="24753" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="24756" href="/lia/part5/Exp/#24713" class="Bound">n</a> <a id="24758" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24760" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24764" href="/lia/part5/Exp/#24717" class="Bound">k</a>
<a id="24766" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24779" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="24781" class="Symbol">=</a> <a id="24783" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24788" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24801" class="Symbol">(</a><a id="24802" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="24804" href="/lia/part5/Exp/#24804" class="Bound">x</a><a id="24805" class="Symbol">)</a> <a id="24807" class="Keyword">rewrite</a> <a id="24815" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24828" href="/lia/part5/Exp/#24804" class="Bound">x</a> <a id="24830" class="Symbol">=</a> <a id="24832" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="24837" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24850" class="Symbol">(</a><a id="24851" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="24853" href="/lia/part5/Exp/#24853" class="Bound">x</a><a id="24854" class="Symbol">)</a>
  <a id="24858" class="Keyword">rewrite</a> <a id="24866" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="24879" href="/lia/part5/Exp/#24853" class="Bound">x</a> <a id="24881" class="Symbol">|</a>
          <a id="24893" href="/lia/part5/Exp/#24593" class="Function">aux-𝟬</a> <a id="24899" class="Symbol">(</a><a id="24900" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="24904" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24909" href="/lia/part5/Exp/#24853" class="Bound">x</a> <a id="24911" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a><a id="24912" class="Symbol">)</a> <a id="24914" class="Symbol">(</a><a id="24915" class="Number">2</a> <a id="24917" href="/lia/part0/Naturals/#8913" class="Function Operator">^</a> <a id="24919" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="24923" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="24928" href="/lia/part5/Exp/#24853" class="Bound">x</a> <a id="24930" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a><a id="24931" class="Symbol">)</a> <a id="24933" class="Symbol">=</a> <a id="24935" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="aux-𝟭"></a><a id="24941" href="/lia/part5/Exp/#24941" class="Function">aux-𝟭</a> <a id="24947" class="Symbol">:</a> <a id="24949" class="Symbol">∀</a> <a id="24951" href="/lia/part5/Exp/#24951" class="Bound">m</a> <a id="24953" href="/lia/part5/Exp/#24953" class="Bound">n</a> <a id="24955" class="Symbol">→</a> <a id="24957" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24961" class="Symbol">(</a><a id="24962" href="/lia/part5/Exp/#24951" class="Bound">m</a> <a id="24964" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24967" class="Symbol">(</a><a id="24968" href="/lia/part5/Exp/#24951" class="Bound">m</a> <a id="24970" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24973" class="Number">0</a><a id="24974" class="Symbol">)</a> <a id="24976" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24979" class="Symbol">(</a><a id="24980" href="/lia/part5/Exp/#24953" class="Bound">n</a> <a id="24982" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24985" class="Symbol">(</a><a id="24986" href="/lia/part5/Exp/#24953" class="Bound">n</a> <a id="24988" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="24991" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="24995" class="Symbol">)))</a> <a id="24999" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25001" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25005" class="Symbol">(</a><a id="25006" href="/lia/part5/Exp/#24951" class="Bound">m</a> <a id="25008" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25011" href="/lia/part5/Exp/#24953" class="Bound">n</a> <a id="25013" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25016" class="Symbol">(</a><a id="25017" href="/lia/part5/Exp/#24951" class="Bound">m</a> <a id="25019" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25022" href="/lia/part5/Exp/#24953" class="Bound">n</a> <a id="25024" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="25027" class="Number">0</a><a id="25028" class="Symbol">))</a>
<a id="25031" href="/lia/part5/Exp/#24941" class="Function">aux-𝟭</a> <a id="25037" class="Symbol">=</a> <a id="25039" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="push-𝟭-lemma"></a><a id="25048" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25061" class="Symbol">:</a> <a id="25063" class="Symbol">∀</a> <a id="25065" href="/lia/part5/Exp/#25065" class="Bound">x</a> <a id="25067" class="Symbol">→</a> <a id="25069" class="Keyword">let</a> <a id="25073" href="/lia/part5/Exp/#25073" class="Bound">n</a> <a id="25075" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25077" href="/lia/part5/Exp/#25077" class="Bound">k</a> <a id="25079" class="Symbol">=</a> <a id="25081" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="25086" href="/lia/part5/Exp/#25065" class="Bound">x</a> <a id="25088" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="25090" class="Keyword">in</a> <a id="25093" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="25098" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="25105" href="/lia/part5/Exp/#25065" class="Bound">x</a> <a id="25107" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a> <a id="25109" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25111" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25115" class="Symbol">(</a><a id="25116" class="Number">2</a> <a id="25118" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="25121" href="/lia/part5/Exp/#25073" class="Bound">n</a><a id="25122" class="Symbol">)</a> <a id="25124" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25126" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25130" href="/lia/part5/Exp/#25077" class="Bound">k</a>
<a id="25132" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25145" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a> <a id="25147" class="Symbol">=</a> <a id="25149" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="25154" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25167" class="Symbol">(</a><a id="25168" href="/lia/part5/Exp/#23828" class="InductiveConstructor Operator">𝟬</a> <a id="25170" href="/lia/part5/Exp/#25170" class="Bound">x</a><a id="25171" class="Symbol">)</a> <a id="25173" class="Keyword">rewrite</a> <a id="25181" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25194" href="/lia/part5/Exp/#25170" class="Bound">x</a> <a id="25196" class="Symbol">=</a> <a id="25198" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="25203" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25216" class="Symbol">(</a><a id="25217" href="/lia/part5/Exp/#23845" class="InductiveConstructor Operator">𝟭</a> <a id="25219" href="/lia/part5/Exp/#25219" class="Bound">x</a><a id="25220" class="Symbol">)</a>
  <a id="25224" class="Keyword">rewrite</a> <a id="25232" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25245" href="/lia/part5/Exp/#25219" class="Bound">x</a> <a id="25247" class="Symbol">|</a>
          <a id="25259" href="/lia/part5/Exp/#24941" class="Function">aux-𝟭</a> <a id="25265" class="Symbol">(</a><a id="25266" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="25270" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="25275" href="/lia/part5/Exp/#25219" class="Bound">x</a> <a id="25277" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a><a id="25278" class="Symbol">)</a> <a id="25280" class="Symbol">(</a><a id="25281" class="Number">2</a> <a id="25283" href="/lia/part0/Naturals/#8913" class="Function Operator">^</a> <a id="25285" href="/lia/part0/Logic/#1866" class="Field">snd</a> <a id="25289" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="25294" href="/lia/part5/Exp/#25219" class="Bound">x</a> <a id="25296" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a><a id="25297" class="Symbol">)</a> <a id="25299" class="Symbol">=</a> <a id="25301" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="LSD2MSD"></a><a id="25307" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25315" class="Symbol">:</a> <a id="25317" href="/lia/part5/Exp/#23512" class="Datatype">LSD</a> <a id="25321" class="Symbol">→</a> <a id="25323" href="/lia/part5/Exp/#23800" class="Datatype">MSD</a>
<a id="25327" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25335" href="/lia/part5/Exp/#23530" class="InductiveConstructor">$</a> <a id="25337" class="Symbol">=</a> <a id="25339" href="/lia/part5/Exp/#23818" class="InductiveConstructor">$</a>
<a id="25341" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25349" class="Symbol">(</a><a id="25350" href="/lia/part5/Exp/#25350" class="Bound">x</a> <a id="25352" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">𝟬</a><a id="25353" class="Symbol">)</a> <a id="25355" class="Symbol">=</a> <a id="25357" href="/lia/part5/Exp/#24322" class="Function">push-𝟬</a> <a id="25364" class="Symbol">(</a><a id="25365" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25373" href="/lia/part5/Exp/#25350" class="Bound">x</a><a id="25374" class="Symbol">)</a>
<a id="25376" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25384" class="Symbol">(</a><a id="25385" href="/lia/part5/Exp/#25385" class="Bound">x</a> <a id="25387" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">𝟭</a><a id="25388" class="Symbol">)</a> <a id="25390" class="Symbol">=</a> <a id="25392" href="/lia/part5/Exp/#24329" class="Function">push-𝟭</a> <a id="25399" class="Symbol">(</a><a id="25400" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25408" href="/lia/part5/Exp/#25385" class="Bound">x</a><a id="25409" class="Symbol">)</a> 

<a id="LSD-MSD-agree"></a><a id="25413" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25427" class="Symbol">:</a> <a id="25429" class="Symbol">∀</a> <a id="25431" href="/lia/part5/Exp/#25431" class="Bound">x</a> <a id="25433" class="Symbol">→</a> <a id="25435" href="/lia/part5/Exp/#23635" class="Function Operator">LSD⟦</a> <a id="25440" href="/lia/part5/Exp/#25431" class="Bound">x</a> <a id="25442" href="/lia/part5/Exp/#23635" class="Function Operator">⟧</a> <a id="25444" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25446" href="/lia/part0/Logic/#1854" class="Field">fst</a> <a id="25450" href="/lia/part5/Exp/#24076" class="Function Operator">MSD⟦</a> <a id="25455" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25463" href="/lia/part5/Exp/#25431" class="Bound">x</a> <a id="25465" href="/lia/part5/Exp/#24076" class="Function Operator">⟧</a>

<a id="25468" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25482" href="/lia/part5/Exp/#23530" class="InductiveConstructor">$</a> <a id="25484" class="Symbol">=</a> <a id="25486" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="25492" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25506" class="Symbol">(</a><a id="25507" href="/lia/part5/Exp/#25507" class="Bound">x</a> <a id="25509" href="/lia/part5/Exp/#23540" class="InductiveConstructor Operator">𝟬</a><a id="25510" class="Symbol">)</a>
  <a id="25514" class="Keyword">with</a> <a id="25519" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25533" href="/lia/part5/Exp/#25507" class="Bound">x</a>
<a id="25535" class="Symbol">...</a> <a id="25539" class="Symbol">|</a> <a id="25541" href="/lia/part5/Exp/#25541" class="Bound">ind</a>
  <a id="25547" class="Keyword">rewrite</a> <a id="25555" href="/lia/part5/Exp/#24688" class="Function">push-𝟬-lemma</a> <a id="25568" class="Symbol">(</a><a id="25569" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25577" class="Bound">x</a><a id="25578" class="Symbol">)</a> <a id="25580" class="Symbol">|</a>
          <a id="25592" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="25596" href="/lia/part5/Exp/#25541" class="Bound">ind</a> <a id="25600" class="Symbol">=</a> <a id="25602" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="25608" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25622" class="Symbol">(</a><a id="25623" href="/lia/part5/Exp/#25623" class="Bound">x</a> <a id="25625" href="/lia/part5/Exp/#23557" class="InductiveConstructor Operator">𝟭</a><a id="25626" class="Symbol">)</a>
  <a id="25630" class="Keyword">with</a> <a id="25635" href="/lia/part5/Exp/#25413" class="Function">LSD-MSD-agree</a> <a id="25649" href="/lia/part5/Exp/#25623" class="Bound">x</a>
<a id="25651" class="Symbol">...</a> <a id="25655" class="Symbol">|</a> <a id="25657" href="/lia/part5/Exp/#25657" class="Bound">ind</a>
  <a id="25663" class="Keyword">rewrite</a> <a id="25671" href="/lia/part5/Exp/#25048" class="Function">push-𝟭-lemma</a> <a id="25684" class="Symbol">(</a><a id="25685" href="/lia/part5/Exp/#25307" class="Function">LSD2MSD</a> <a id="25693" class="Bound">x</a><a id="25694" class="Symbol">)</a> <a id="25696" class="Symbol">|</a>
          <a id="25708" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="25712" href="/lia/part5/Exp/#25657" class="Bound">ind</a> <a id="25716" class="Symbol">=</a> <a id="25718" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="binary-expressions">
<a class="anchor" href="#binary-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary expressions</h1>

<h2 id="syntax">
<a class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>

<pre class="Agda"><a id="25765" class="Keyword">infix</a> <a id="25771" class="Number">30</a> <a id="25774" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">_𝟬</a> <a id="25777" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">_𝟭</a>

<a id="25781" class="Keyword">data</a> <a id="Bin"></a><a id="25786" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25790" class="Symbol">:</a> <a id="25792" class="PrimitiveType">Set</a> <a id="25796" class="Keyword">where</a>
  <a id="Bin.$"></a><a id="25804" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="25806" class="Symbol">:</a> <a id="25808" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a>
  <a id="Bin._𝟬"></a><a id="25814" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">_𝟬</a> <a id="25817" class="Symbol">:</a> <a id="25819" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25823" class="Symbol">→</a> <a id="25825" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a>
  <a id="Bin._𝟭"></a><a id="25831" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">_𝟭</a> <a id="25834" class="Symbol">:</a> <a id="25836" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25840" class="Symbol">→</a> <a id="25842" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a>
  <a id="Bin.Add"></a><a id="25848" href="/lia/part5/Exp/#25848" class="InductiveConstructor">Add</a> <a id="25852" class="Symbol">:</a> <a id="25854" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25858" class="Symbol">→</a> <a id="25860" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25864" class="Symbol">→</a> <a id="25866" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a>

<a id="25871" class="Keyword">pattern</a> <a id="_+_"></a><a id="25879" href="/lia/part5/Exp/#25879" class="InductiveConstructor Operator">_+_</a> <a id="25883" href="/lia/part5/Exp/#25893" class="Bound">x</a> <a id="25885" href="/lia/part5/Exp/#25895" class="Bound">y</a> <a id="25887" class="Symbol">=</a> <a id="25889" class="InductiveConstructor">Add</a> <a id="25893" href="/lia/part5/Exp/#25893" class="Bound">x</a> <a id="25895" href="/lia/part5/Exp/#25895" class="Bound">y</a>

<a id="25898" class="Keyword">private</a>
  <a id="25908" class="Keyword">variable</a>
    <a id="25921" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="25923" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="25926" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="25928" href="/lia/part5/Exp/#25928" class="Generalizable">b′</a> <a id="25931" class="Symbol">:</a> <a id="25933" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a></pre>

<h2 id="denotational-semantics-1">
<a class="anchor" href="#denotational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h2>

<pre class="Agda"><a id="25973" class="Keyword">private</a> <a id="⟦_⟧"></a><a id="25981" href="/lia/part5/Exp/#25981" class="Function Operator">⟦_⟧</a> <a id="25985" class="Symbol">:</a> <a id="25987" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="25991" class="Symbol">→</a> <a id="25993" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="25995" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="25997" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="25999" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26001" class="Symbol">=</a> <a id="26003" class="Number">0</a>
<a id="26005" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26007" href="/lia/part5/Exp/#26007" class="Bound">a</a> <a id="26009" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26011" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26013" class="Symbol">=</a> <a id="26015" class="Number">2</a> <a id="26017" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="26020" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26022" href="/lia/part5/Exp/#26007" class="Bound">a</a> <a id="26024" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a>
<a id="26026" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26028" href="/lia/part5/Exp/#26028" class="Bound">a</a> <a id="26030" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26032" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26034" class="Symbol">=</a> <a id="26036" class="Number">1</a> <a id="26038" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26041" class="Number">2</a> <a id="26043" href="/lia/part5/Exp/#201" class="Primitive Operator">·ℕ</a> <a id="26046" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26048" href="/lia/part5/Exp/#26028" class="Bound">a</a> <a id="26050" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a>
<a id="26052" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26054" href="/lia/part5/Exp/#26054" class="Bound">a</a> <a id="26056" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26058" href="/lia/part5/Exp/#26058" class="Bound">b</a> <a id="26060" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26062" class="Symbol">=</a> <a id="26064" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26066" href="/lia/part5/Exp/#26054" class="Bound">a</a> <a id="26068" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26070" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="26073" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26075" href="/lia/part5/Exp/#26058" class="Bound">b</a> <a id="26077" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a></pre>

<h2 id="small-steps-operational-semantics-1">
<a class="anchor" href="#small-steps-operational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h2>

<pre class="Agda"><a id="26126" class="Keyword">infix</a> <a id="26132" class="Number">4</a> <a id="26134" href="/lia/part5/Exp/#26143" class="Datatype Operator">_↝_</a>
<a id="26138" class="Keyword">data</a> <a id="_↝_"></a><a id="26143" href="/lia/part5/Exp/#26143" class="Datatype Operator">_↝_</a> <a id="26147" class="Symbol">:</a> <a id="26149" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="26153" class="Symbol">→</a> <a id="26155" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="26159" class="Symbol">→</a> <a id="26161" class="PrimitiveType">Set</a> <a id="26165" class="Keyword">where</a>

  <a id="_↝_.↝𝟬"></a><a id="26174" href="/lia/part5/Exp/#26174" class="InductiveConstructor">↝𝟬</a> <a id="26177" class="Symbol">:</a> <a id="26179" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26181" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26183" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26186" class="Symbol">→</a>
       <a id="26195" class="Comment">----------</a>
       <a id="26213" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26215" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26217" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26219" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26222" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝𝟭"></a><a id="26227" href="/lia/part5/Exp/#26227" class="InductiveConstructor">↝𝟭</a> <a id="26230" class="Symbol">:</a> <a id="26232" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26234" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26236" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26239" class="Symbol">→</a>
       <a id="26248" class="Comment">----------</a>
       <a id="26266" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26268" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26270" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26272" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26275" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝$L"></a><a id="26280" href="/lia/part5/Exp/#26280" class="InductiveConstructor">↝$L</a> <a id="26284" class="Symbol">:</a> <a id="26286" class="Comment">---------</a>
        <a id="26304" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="26306" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26308" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26310" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26312" href="/lia/part5/Exp/#25921" class="Generalizable">a</a>

  <a id="_↝_.↝$R"></a><a id="26317" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$R</a> <a id="26321" class="Symbol">:</a> <a id="26323" class="Comment">---------</a>
        <a id="26341" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26343" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26345" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="26347" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26349" href="/lia/part5/Exp/#25921" class="Generalizable">a</a>

  <a id="_↝_.↝+L"></a><a id="26354" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝+L</a> <a id="26358" class="Symbol">:</a> <a id="26360" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26362" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26364" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26367" class="Symbol">→</a>
        <a id="26377" class="Comment">--------------</a>
        <a id="26400" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26402" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26404" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26406" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26408" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26411" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26413" href="/lia/part5/Exp/#25926" class="Generalizable">b</a>

  <a id="_↝_.↝+R"></a><a id="26418" href="/lia/part5/Exp/#26418" class="InductiveConstructor">↝+R</a> <a id="26422" class="Symbol">:</a> <a id="26424" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26426" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26428" href="/lia/part5/Exp/#25928" class="Generalizable">b′</a> <a id="26431" class="Symbol">→</a>
        <a id="26441" class="Comment">--------------</a>
        <a id="26464" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26466" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26468" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26470" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26472" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26474" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26476" href="/lia/part5/Exp/#25928" class="Generalizable">b′</a>
        
  <a id="_↝_.↝+𝟬𝟬"></a><a id="26490" href="/lia/part5/Exp/#26490" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="26495" class="Symbol">:</a> <a id="26497" class="Comment">---------------------</a>
         <a id="26528" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26530" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26532" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26534" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26536" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26538" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26540" class="Symbol">(</a><a id="26541" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26543" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26545" href="/lia/part5/Exp/#25926" class="Generalizable">b</a><a id="26546" class="Symbol">)</a> <a id="26548" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝+𝟬𝟭"></a><a id="26553" href="/lia/part5/Exp/#26553" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="26558" class="Symbol">:</a> <a id="26560" class="Comment">---------------------</a>
         <a id="26591" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26593" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26595" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26597" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26599" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26601" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26603" class="Symbol">(</a><a id="26604" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26606" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26608" href="/lia/part5/Exp/#25926" class="Generalizable">b</a><a id="26609" class="Symbol">)</a> <a id="26611" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟬"></a><a id="26616" href="/lia/part5/Exp/#26616" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="26621" class="Symbol">:</a> <a id="26623" class="Comment">---------------------</a>
         <a id="26654" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26656" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26658" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26660" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26662" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="26664" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26666" class="Symbol">(</a><a id="26667" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26669" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26671" href="/lia/part5/Exp/#25926" class="Generalizable">b</a><a id="26672" class="Symbol">)</a> <a id="26674" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟭"></a><a id="26679" href="/lia/part5/Exp/#26679" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="26684" class="Symbol">:</a> <a id="26686" class="Comment">----------------------------</a>
         <a id="26724" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26726" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26728" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26730" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26732" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="26734" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26736" class="Symbol">(</a><a id="26737" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26739" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26741" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="26743" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="26745" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="26747" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="26748" class="Symbol">)</a> <a id="26750" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a></pre>

<h2 id="agreement">
<a class="anchor" href="#agreement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement</h2>

<pre class="Agda"><a id="agree"></a><a id="26776" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26782" class="Symbol">:</a> <a id="26784" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26786" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="26788" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26791" class="Symbol">→</a>
        <a id="26801" class="Comment">--------------</a>
        <a id="26824" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26826" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="26828" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="26830" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="26832" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="26834" href="/lia/part5/Exp/#25923" class="Generalizable">a′</a> <a id="26837" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a>

<a id="26840" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26846" class="Symbol">(</a><a id="26847" href="/lia/part5/Exp/#26174" class="InductiveConstructor">↝𝟬</a> <a id="26850" href="/lia/part5/Exp/#26850" class="Bound">e↝e'</a><a id="26854" class="Symbol">)</a> <a id="26856" class="Keyword">rewrite</a> <a id="26864" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26870" href="/lia/part5/Exp/#26850" class="Bound">e↝e'</a> <a id="26875" class="Symbol">=</a> <a id="26877" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26882" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26888" class="Symbol">(</a><a id="26889" href="/lia/part5/Exp/#26227" class="InductiveConstructor">↝𝟭</a> <a id="26892" href="/lia/part5/Exp/#26892" class="Bound">e↝e'</a><a id="26896" class="Symbol">)</a> <a id="26898" class="Keyword">rewrite</a> <a id="26906" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26912" href="/lia/part5/Exp/#26892" class="Bound">e↝e'</a> <a id="26917" class="Symbol">=</a> <a id="26919" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26924" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26930" href="/lia/part5/Exp/#26280" class="InductiveConstructor">↝$L</a> <a id="26934" class="Symbol">=</a> <a id="26936" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="26941" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26947" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$R</a> <a id="26951" class="Symbol">=</a> <a id="26953" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="26959" class="Symbol">_</a>
<a id="26961" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26967" class="Symbol">(</a><a id="26968" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝+L</a> <a id="26972" href="/lia/part5/Exp/#26972" class="Bound">e↝e'</a><a id="26976" class="Symbol">)</a> <a id="26978" class="Keyword">rewrite</a> <a id="26986" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="26992" href="/lia/part5/Exp/#26972" class="Bound">e↝e'</a> <a id="26997" class="Symbol">=</a> <a id="26999" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="27004" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27010" class="Symbol">(</a><a id="27011" href="/lia/part5/Exp/#26418" class="InductiveConstructor">↝+R</a> <a id="27015" href="/lia/part5/Exp/#27015" class="Bound">e↝e'</a><a id="27019" class="Symbol">)</a> <a id="27021" class="Keyword">rewrite</a> <a id="27029" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27035" href="/lia/part5/Exp/#27015" class="Bound">e↝e'</a> <a id="27040" class="Symbol">=</a> <a id="27042" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="27047" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27053" class="Symbol">(</a><a id="27054" href="/lia/part5/Exp/#26490" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="27059" class="Symbol">{</a><a id="27060" href="/lia/part5/Exp/#27060" class="Bound">a</a><a id="27061" class="Symbol">}</a> <a id="27063" class="Symbol">{</a><a id="27064" href="/lia/part5/Exp/#27064" class="Bound">b</a><a id="27065" class="Symbol">})</a> <a id="27068" class="Symbol">=</a> <a id="27070" href="/lia/part5/Exp/#27097" class="Function">magic</a> <a id="27076" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27078" href="/lia/part5/Exp/#27060" class="Bound">a</a> <a id="27080" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27082" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27084" href="/lia/part5/Exp/#27064" class="Bound">b</a> <a id="27086" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27088" class="Keyword">where</a>

  <a id="27097" href="/lia/part5/Exp/#27097" class="Function">magic</a> <a id="27103" class="Symbol">:</a> <a id="27105" class="Symbol">∀</a> <a id="27107" href="/lia/part5/Exp/#27107" class="Bound">a</a> <a id="27109" href="/lia/part5/Exp/#27109" class="Bound">b</a> <a id="27111" class="Symbol">→</a> <a id="27113" href="/lia/part5/Exp/#27107" class="Bound">a</a> <a id="27115" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27118" class="Symbol">(</a><a id="27119" href="/lia/part5/Exp/#27107" class="Bound">a</a> <a id="27121" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27124" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="27128" class="Symbol">)</a> <a id="27130" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27133" class="Symbol">(</a><a id="27134" href="/lia/part5/Exp/#27109" class="Bound">b</a> <a id="27136" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27139" class="Symbol">(</a><a id="27140" href="/lia/part5/Exp/#27109" class="Bound">b</a> <a id="27142" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27145" class="Number">0</a><a id="27146" class="Symbol">))</a> <a id="27149" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27151" href="/lia/part5/Exp/#27107" class="Bound">a</a> <a id="27153" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27156" href="/lia/part5/Exp/#27109" class="Bound">b</a> <a id="27158" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27161" class="Symbol">(</a><a id="27162" href="/lia/part5/Exp/#27107" class="Bound">a</a> <a id="27164" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27167" href="/lia/part5/Exp/#27109" class="Bound">b</a> <a id="27169" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27172" class="Number">0</a><a id="27173" class="Symbol">)</a>
  <a id="27177" href="/lia/part5/Exp/#27097" class="Function">magic</a> <a id="27183" class="Symbol">=</a> <a id="27185" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="27194" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27200" class="Symbol">(</a><a id="27201" href="/lia/part5/Exp/#26553" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="27206" class="Symbol">{</a><a id="27207" href="/lia/part5/Exp/#27207" class="Bound">a</a><a id="27208" class="Symbol">}</a> <a id="27210" class="Symbol">{</a><a id="27211" href="/lia/part5/Exp/#27211" class="Bound">b</a><a id="27212" class="Symbol">})</a> <a id="27215" class="Symbol">=</a> <a id="27217" href="/lia/part5/Exp/#27250" class="Function">magic</a> <a id="27223" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27225" href="/lia/part5/Exp/#27207" class="Bound">a</a> <a id="27227" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27229" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27231" href="/lia/part5/Exp/#27211" class="Bound">b</a> <a id="27233" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27235" class="Keyword">where</a>
    
    <a id="27250" href="/lia/part5/Exp/#27250" class="Function">magic</a> <a id="27256" class="Symbol">:</a> <a id="27258" class="Symbol">∀</a> <a id="27260" href="/lia/part5/Exp/#27260" class="Bound">a</a> <a id="27262" href="/lia/part5/Exp/#27262" class="Bound">b</a> <a id="27264" class="Symbol">→</a> <a id="27266" href="/lia/part5/Exp/#27260" class="Bound">a</a> <a id="27268" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27271" class="Symbol">(</a><a id="27272" href="/lia/part5/Exp/#27260" class="Bound">a</a> <a id="27274" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27277" class="Number">0</a><a id="27278" class="Symbol">)</a> <a id="27280" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27283" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27287" class="Symbol">(</a><a id="27288" href="/lia/part5/Exp/#27262" class="Bound">b</a> <a id="27290" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27293" class="Symbol">(</a><a id="27294" href="/lia/part5/Exp/#27262" class="Bound">b</a> <a id="27296" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27299" class="Number">0</a><a id="27300" class="Symbol">))</a> <a id="27303" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27305" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27309" class="Symbol">(</a><a id="27310" href="/lia/part5/Exp/#27260" class="Bound">a</a> <a id="27312" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27315" href="/lia/part5/Exp/#27262" class="Bound">b</a> <a id="27317" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27320" class="Symbol">(</a><a id="27321" href="/lia/part5/Exp/#27260" class="Bound">a</a> <a id="27323" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27326" href="/lia/part5/Exp/#27262" class="Bound">b</a> <a id="27328" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27331" class="Number">0</a><a id="27332" class="Symbol">))</a>
    <a id="27339" href="/lia/part5/Exp/#27250" class="Function">magic</a> <a id="27345" class="Symbol">=</a> <a id="27347" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="27356" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27362" class="Symbol">(</a><a id="27363" href="/lia/part5/Exp/#26616" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="27368" class="Symbol">{</a><a id="27369" href="/lia/part5/Exp/#27369" class="Bound">a</a><a id="27370" class="Symbol">}</a> <a id="27372" class="Symbol">{</a><a id="27373" href="/lia/part5/Exp/#27373" class="Bound">b</a><a id="27374" class="Symbol">})</a> <a id="27377" class="Symbol">=</a> <a id="27379" href="/lia/part5/Exp/#27412" class="Function">magic</a> <a id="27385" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27387" href="/lia/part5/Exp/#27369" class="Bound">a</a> <a id="27389" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27391" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27393" href="/lia/part5/Exp/#27373" class="Bound">b</a> <a id="27395" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27397" class="Keyword">where</a>
    
    <a id="27412" href="/lia/part5/Exp/#27412" class="Function">magic</a> <a id="27418" class="Symbol">:</a> <a id="27420" class="Symbol">∀</a> <a id="27422" href="/lia/part5/Exp/#27422" class="Bound">a</a> <a id="27424" href="/lia/part5/Exp/#27424" class="Bound">b</a> <a id="27426" class="Symbol">→</a> <a id="27428" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27432" class="Symbol">(</a><a id="27433" href="/lia/part5/Exp/#27422" class="Bound">a</a> <a id="27435" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27438" class="Symbol">(</a><a id="27439" href="/lia/part5/Exp/#27422" class="Bound">a</a> <a id="27441" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27444" class="Number">0</a><a id="27445" class="Symbol">)</a> <a id="27447" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27450" class="Symbol">(</a><a id="27451" href="/lia/part5/Exp/#27424" class="Bound">b</a> <a id="27453" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27456" class="Symbol">(</a><a id="27457" href="/lia/part5/Exp/#27424" class="Bound">b</a> <a id="27459" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27462" class="Number">0</a><a id="27463" class="Symbol">)))</a> <a id="27467" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27469" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27473" class="Symbol">(</a><a id="27474" href="/lia/part5/Exp/#27422" class="Bound">a</a> <a id="27476" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27479" href="/lia/part5/Exp/#27424" class="Bound">b</a> <a id="27481" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27484" class="Symbol">(</a><a id="27485" href="/lia/part5/Exp/#27422" class="Bound">a</a> <a id="27487" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27490" href="/lia/part5/Exp/#27424" class="Bound">b</a> <a id="27492" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27495" class="Number">0</a><a id="27496" class="Symbol">))</a>
    <a id="27503" href="/lia/part5/Exp/#27412" class="Function">magic</a> <a id="27509" class="Symbol">=</a> <a id="27511" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>
    
<a id="27524" href="/lia/part5/Exp/#26776" class="Function">agree</a> <a id="27530" class="Symbol">(</a><a id="27531" href="/lia/part5/Exp/#26679" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="27536" class="Symbol">{</a><a id="27537" href="/lia/part5/Exp/#27537" class="Bound">a</a><a id="27538" class="Symbol">}</a> <a id="27540" class="Symbol">{</a><a id="27541" href="/lia/part5/Exp/#27541" class="Bound">b</a><a id="27542" class="Symbol">})</a> <a id="27545" class="Symbol">=</a> <a id="27547" href="/lia/part5/Exp/#27574" class="Function">magic</a> <a id="27553" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27555" href="/lia/part5/Exp/#27537" class="Bound">a</a> <a id="27557" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27559" href="/lia/part5/Exp/#25981" class="Function Operator">⟦</a> <a id="27561" href="/lia/part5/Exp/#27541" class="Bound">b</a> <a id="27563" href="/lia/part5/Exp/#25981" class="Function Operator">⟧</a> <a id="27565" class="Keyword">where</a>

  <a id="27574" href="/lia/part5/Exp/#27574" class="Function">magic</a> <a id="27580" class="Symbol">:</a> <a id="27582" class="Symbol">∀</a> <a id="27584" href="/lia/part5/Exp/#27584" class="Bound">a</a> <a id="27586" href="/lia/part5/Exp/#27586" class="Bound">b</a> <a id="27588" class="Symbol">→</a> <a id="27590" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27594" class="Symbol">(</a><a id="27595" href="/lia/part5/Exp/#27584" class="Bound">a</a> <a id="27597" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27600" class="Symbol">(</a><a id="27601" href="/lia/part5/Exp/#27584" class="Bound">a</a> <a id="27603" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27606" class="Number">0</a><a id="27607" class="Symbol">)</a> <a id="27609" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27612" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="27616" class="Symbol">(</a><a id="27617" href="/lia/part5/Exp/#27586" class="Bound">b</a> <a id="27619" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27622" class="Symbol">(</a><a id="27623" href="/lia/part5/Exp/#27586" class="Bound">b</a> <a id="27625" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27628" class="Number">0</a><a id="27629" class="Symbol">)))</a> <a id="27633" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="27635" href="/lia/part5/Exp/#27584" class="Bound">a</a> <a id="27637" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27640" href="/lia/part5/Exp/#27586" class="Bound">b</a> <a id="27642" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27645" class="Number">1</a> <a id="27647" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27650" class="Symbol">(</a><a id="27651" href="/lia/part5/Exp/#27584" class="Bound">a</a> <a id="27653" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27656" href="/lia/part5/Exp/#27586" class="Bound">b</a> <a id="27658" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27661" class="Number">1</a> <a id="27663" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27666" class="Number">0</a><a id="27667" class="Symbol">)</a>
  <a id="27671" href="/lia/part5/Exp/#27574" class="Function">magic</a> <a id="27677" class="Symbol">=</a> <a id="27679" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a></pre>

<h2 id="strong-normalisation-first-proof">
<a class="anchor" href="#strong-normalisation-first-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (first proof)</h2>

<pre class="Agda"><a id="binSize"></a><a id="27735" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27743" class="Symbol">:</a> <a id="27745" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="27749" class="Symbol">→</a> <a id="27751" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="27753" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27761" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="27763" class="Symbol">=</a> <a id="27765" class="Number">0</a>
<a id="27767" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27775" class="Symbol">(</a><a id="27776" href="/lia/part5/Exp/#27776" class="Bound">a</a> <a id="27778" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="27779" class="Symbol">)</a> <a id="27781" class="Symbol">=</a> <a id="27783" class="Number">1</a> <a id="27785" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27788" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27796" href="/lia/part5/Exp/#27776" class="Bound">a</a>
<a id="27798" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27806" class="Symbol">(</a><a id="27807" href="/lia/part5/Exp/#27807" class="Bound">a</a> <a id="27809" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="27810" class="Symbol">)</a> <a id="27812" class="Symbol">=</a> <a id="27814" class="Number">1</a> <a id="27816" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27819" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27827" href="/lia/part5/Exp/#27807" class="Bound">a</a>
<a id="27829" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27837" class="Symbol">(</a><a id="27838" href="/lia/part5/Exp/#27838" class="Bound">a</a> <a id="27840" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="27842" href="/lia/part5/Exp/#27842" class="Bound">b</a><a id="27843" class="Symbol">)</a> <a id="27845" class="Symbol">=</a> <a id="27847" class="Number">1</a> <a id="27849" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27852" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27860" href="/lia/part5/Exp/#27838" class="Bound">a</a> <a id="27862" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="27865" href="/lia/part5/Exp/#27735" class="Function">binSize</a> <a id="27873" href="/lia/part5/Exp/#27842" class="Bound">b</a>

<a id="27876" class="Comment">-- transitive closure</a>
<a id="27898" class="Comment">-- infix 4 _↝*_</a>
<a id="27914" class="Comment">-- data _↝*_ : Bin → Bin → Set where</a>
<a id="27951" class="Comment">--     stop : ∀ {a} → a ↝* a</a>
<a id="27980" class="Comment">--     one : ∀ {a b g} → a ↝ b → b ↝* g → a ↝* g</a>

<a id="28030" class="Comment">-- strong normalisation</a>
<a id="28054" class="Comment">-- we define a measure that is strictly decreasing on each computation step</a>

<a id="μ"></a><a id="28131" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28133" class="Symbol">:</a> <a id="28135" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="28139" class="Symbol">→</a> <a id="28141" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="28143" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28145" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="28147" class="Symbol">=</a> <a id="28149" class="Number">0</a>
<a id="28151" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28153" class="Symbol">(</a><a id="28154" href="/lia/part5/Exp/#28154" class="Bound">a</a> <a id="28156" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="28157" class="Symbol">)</a> <a id="28159" class="Symbol">=</a> <a id="28161" class="Number">2</a> <a id="28163" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28166" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28168" href="/lia/part5/Exp/#28154" class="Bound">a</a>
<a id="28170" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28172" class="Symbol">(</a><a id="28173" href="/lia/part5/Exp/#28173" class="Bound">a</a> <a id="28175" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="28176" class="Symbol">)</a> <a id="28178" class="Symbol">=</a> <a id="28180" class="Number">4</a> <a id="28182" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28185" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28187" href="/lia/part5/Exp/#28173" class="Bound">a</a>
<a id="28189" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28191" class="Symbol">(</a><a id="28192" href="/lia/part5/Exp/#28192" class="Bound">a</a> <a id="28194" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="28196" href="/lia/part5/Exp/#28196" class="Bound">b</a><a id="28197" class="Symbol">)</a> <a id="28199" class="Symbol">=</a> <a id="28201" class="Number">1</a> <a id="28203" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28206" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28208" href="/lia/part5/Exp/#28192" class="Bound">a</a> <a id="28210" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="28213" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28215" href="/lia/part5/Exp/#28196" class="Bound">b</a>

<a id="μ-wf"></a><a id="28218" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28223" class="Symbol">:</a> <a id="28225" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="28227" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="28229" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="28231" class="Symbol">→</a>
       <a id="28240" class="Comment">---------</a>
       <a id="28257" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28259" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="28261" href="/lia/part0/Naturals/#1314" class="Function Operator">&lt;</a> <a id="28263" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28265" href="/lia/part5/Exp/#25921" class="Generalizable">a</a>

<a id="28268" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28273" class="Symbol">(</a><a id="28274" href="/lia/part5/Exp/#26174" class="InductiveConstructor">↝𝟬</a> <a id="28277" href="/lia/part5/Exp/#28277" class="Bound">e↝f</a><a id="28280" class="Symbol">)</a> <a id="28282" class="Keyword">with</a> <a id="28287" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28292" href="/lia/part5/Exp/#28277" class="Bound">e↝f</a>
<a id="28296" class="Symbol">...</a> <a id="28300" class="Symbol">|</a> <a id="28302" href="/lia/part5/Exp/#28302" class="Bound">μf&lt;μe</a> <a id="28308" class="Symbol">=</a> <a id="28310" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28314" class="Symbol">(</a><a id="28315" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28319" href="/lia/part5/Exp/#28302" class="Bound">μf&lt;μe</a><a id="28324" class="Symbol">)</a>

<a id="28327" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28332" class="Symbol">(</a><a id="28333" href="/lia/part5/Exp/#26227" class="InductiveConstructor">↝𝟭</a> <a id="28336" href="/lia/part5/Exp/#28336" class="Bound">e↝f</a><a id="28339" class="Symbol">)</a> <a id="28341" class="Keyword">with</a> <a id="28346" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28351" href="/lia/part5/Exp/#28336" class="Bound">e↝f</a>
<a id="28355" class="Symbol">...</a> <a id="28359" class="Symbol">|</a> <a id="28361" href="/lia/part5/Exp/#28361" class="Bound">μf&lt;μe</a> <a id="28367" class="Symbol">=</a> <a id="28369" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28373" class="Symbol">(</a><a id="28374" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28378" class="Symbol">(</a><a id="28379" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28383" class="Symbol">(</a><a id="28384" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28388" href="/lia/part5/Exp/#28361" class="Bound">μf&lt;μe</a><a id="28393" class="Symbol">)))</a>

<a id="28398" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28403" href="/lia/part5/Exp/#26280" class="InductiveConstructor">↝$L</a> <a id="28407" class="Symbol">=</a> <a id="28409" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="28417" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28422" class="DottedPattern Symbol">.{</a><a id="28424" href="/lia/part5/Exp/#28432" class="DottedPattern Bound">a</a> <a id="28426" href="/lia/part5/Exp/#1249" class="DottedPattern InductiveConstructor Operator">+</a> <a id="28428" href="/lia/part5/Exp/#25804" class="DottedPattern InductiveConstructor">$</a><a id="28429" class="DottedPattern Symbol">}</a> <a id="28431" class="Symbol">{</a><a id="28432" href="/lia/part5/Exp/#28432" class="Bound">a</a><a id="28433" class="Symbol">}</a> <a id="28435" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$R</a> <a id="28439" class="Keyword">rewrite</a> <a id="28447" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="28453" class="Symbol">(</a><a id="28454" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28456" href="/lia/part5/Exp/#28432" class="Bound">a</a><a id="28457" class="Symbol">)</a> <a id="28459" class="Symbol">=</a> <a id="28461" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="28469" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28474" class="Symbol">(</a><a id="28475" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝+L</a> <a id="28479" href="/lia/part5/Exp/#28479" class="Bound">e↝e'</a><a id="28483" class="Symbol">)</a> <a id="28485" class="Keyword">with</a> <a id="28490" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28495" href="/lia/part5/Exp/#28479" class="Bound">e↝e'</a>
<a id="28500" class="Symbol">...</a> <a id="28504" class="Symbol">|</a> <a id="28506" href="/lia/part5/Exp/#28506" class="Bound">μe'&lt;μe</a> <a id="28513" class="Symbol">=</a> <a id="28515" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28519" class="Symbol">(</a><a id="28520" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="28529" href="/lia/part5/Exp/#28506" class="Bound">μe'&lt;μe</a><a id="28535" class="Symbol">)</a>

<a id="28538" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28543" class="Symbol">(</a><a id="28544" href="/lia/part5/Exp/#26418" class="InductiveConstructor">↝+R</a> <a id="28548" href="/lia/part5/Exp/#28548" class="Bound">f↝f'</a><a id="28552" class="Symbol">)</a> <a id="28554" class="Keyword">with</a> <a id="28559" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28564" href="/lia/part5/Exp/#28548" class="Bound">f↝f'</a>
<a id="28569" class="Symbol">...</a> <a id="28573" class="Symbol">|</a> <a id="28575" href="/lia/part5/Exp/#28575" class="Bound">μf'&lt;μf</a> <a id="28582" class="Symbol">=</a> <a id="28584" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28588" class="Symbol">(</a><a id="28589" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="28599" href="/lia/part5/Exp/#28575" class="Bound">μf'&lt;μf</a><a id="28605" class="Symbol">)</a>

<a id="28608" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28613" class="Symbol">{</a><a id="28614" href="/lia/part5/Exp/#28614" class="Bound">a</a><a id="28615" class="Symbol">}</a> <a id="28617" class="Symbol">{</a><a id="28618" href="/lia/part5/Exp/#28618" class="Bound">b</a><a id="28619" class="Symbol">}</a> <a id="28621" href="/lia/part5/Exp/#26490" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="28626" class="Symbol">=</a> <a id="28628" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28632" class="Symbol">(</a><a id="28633" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28637" class="Symbol">(</a><a id="28638" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28642" class="Symbol">(</a><a id="28643" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="28653" href="/lia/part0/Naturals/#3515" class="Function">n&lt;suc2n</a><a id="28660" class="Symbol">)))</a>

<a id="28665" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28670" href="/lia/part5/Exp/#28670" class="Bound">a</a><a id="28671" class="Symbol">@{</a><a id="28673" href="/lia/part5/Exp/#25848" class="InductiveConstructor">Add</a> <a id="28677" class="Symbol">(</a><a id="28678" href="/lia/part5/Exp/#28678" class="Bound">a₁</a> <a id="28681" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="28682" class="Symbol">)</a> <a id="28684" class="Symbol">(</a><a id="28685" href="/lia/part5/Exp/#28685" class="Bound">b₁</a> <a id="28688" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="28689" class="Symbol">)}</a> <a id="28692" class="Symbol">{</a><a id="28693" href="/lia/part5/Exp/#28693" class="Bound">b</a><a id="28694" class="Symbol">}</a> <a id="28696" href="/lia/part5/Exp/#26553" class="InductiveConstructor">↝+𝟬𝟭</a>
  <a id="28703" class="Keyword">rewrite</a>
    <a id="28715" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="28721" class="Symbol">(</a><a id="28722" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28724" href="/lia/part5/Exp/#28670" class="Bound">a</a><a id="28725" class="Symbol">)</a> <a id="28727" class="Symbol">|</a>
    <a id="28733" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="28739" class="Symbol">(</a><a id="28740" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28742" href="/lia/part5/Exp/#28693" class="Bound">b</a><a id="28743" class="Symbol">)</a> <a id="28745" class="Symbol">|</a>
    <a id="28751" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="28761" class="Symbol">{</a><a id="28762" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28764" href="/lia/part5/Exp/#28678" class="Bound">a₁</a><a id="28766" class="Symbol">}</a> <a id="28768" class="Symbol">{</a><a id="28769" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28773" class="Symbol">(</a><a id="28774" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28778" class="Symbol">(</a><a id="28779" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28783" class="Symbol">(</a><a id="28784" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28786" href="/lia/part5/Exp/#28685" class="Bound">b₁</a><a id="28788" class="Symbol">)))}</a> <a id="28793" class="Symbol">|</a>
    <a id="28799" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="28809" class="Symbol">{</a><a id="28810" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28812" href="/lia/part5/Exp/#28678" class="Bound">a₁</a><a id="28814" class="Symbol">}</a> <a id="28816" class="Symbol">{</a><a id="28817" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28821" class="Symbol">(</a><a id="28822" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28826" class="Symbol">(</a><a id="28827" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28829" href="/lia/part5/Exp/#28685" class="Bound">b₁</a><a id="28831" class="Symbol">))}</a> <a id="28835" class="Symbol">|</a>
    <a id="28841" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="28851" class="Symbol">{</a><a id="28852" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28854" href="/lia/part5/Exp/#28678" class="Bound">a₁</a><a id="28856" class="Symbol">}</a> <a id="28858" class="Symbol">{</a><a id="28859" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="28863" class="Symbol">(</a><a id="28864" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28866" href="/lia/part5/Exp/#28685" class="Bound">b₁</a><a id="28868" class="Symbol">)}</a> <a id="28871" class="Symbol">|</a>
    <a id="28877" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="28887" class="Symbol">{</a><a id="28888" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28890" href="/lia/part5/Exp/#28678" class="Bound">a₁</a><a id="28892" class="Symbol">}</a> <a id="28894" class="Symbol">{</a><a id="28895" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="28897" href="/lia/part5/Exp/#28685" class="Bound">b₁</a><a id="28899" class="Symbol">}</a>
  <a id="28903" class="Symbol">=</a> <a id="28905" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28909" class="Symbol">(</a><a id="28910" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28914" class="Symbol">(</a><a id="28915" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28919" class="Symbol">(</a><a id="28920" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28924" class="Symbol">(</a><a id="28925" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28929" class="Symbol">(</a><a id="28930" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="28934" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="28940" class="Symbol">)))))</a>

<a id="28947" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="28952" href="/lia/part5/Exp/#28952" class="Bound">a</a><a id="28953" class="Symbol">@{</a><a id="28955" href="/lia/part5/Exp/#25848" class="InductiveConstructor">Add</a> <a id="28959" class="Symbol">(</a><a id="28960" href="/lia/part5/Exp/#28960" class="Bound">a₁</a> <a id="28963" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="28964" class="Symbol">)</a> <a id="28966" class="Symbol">(</a><a id="28967" href="/lia/part5/Exp/#28967" class="Bound">b₁</a> <a id="28970" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="28971" class="Symbol">)}</a> <a id="28974" class="Symbol">{</a><a id="28975" href="/lia/part5/Exp/#28975" class="Bound">b</a><a id="28976" class="Symbol">}</a> <a id="28978" href="/lia/part5/Exp/#26616" class="InductiveConstructor">↝+𝟭𝟬</a>
  <a id="28985" class="Keyword">rewrite</a>
    <a id="28997" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="29003" class="Symbol">(</a><a id="29004" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29006" href="/lia/part5/Exp/#28952" class="Bound">a</a><a id="29007" class="Symbol">)</a> <a id="29009" class="Symbol">|</a>
    <a id="29015" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="29021" class="Symbol">(</a><a id="29022" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29024" href="/lia/part5/Exp/#28975" class="Bound">b</a><a id="29025" class="Symbol">)</a> <a id="29027" class="Symbol">|</a>
    <a id="29033" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="29043" class="Symbol">{</a><a id="29044" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29046" href="/lia/part5/Exp/#28960" class="Bound">a₁</a><a id="29048" class="Symbol">}</a> <a id="29050" class="Symbol">{</a><a id="29051" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29055" class="Symbol">(</a><a id="29056" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29058" href="/lia/part5/Exp/#28967" class="Bound">b₁</a><a id="29060" class="Symbol">)}</a> <a id="29063" class="Symbol">|</a>
    <a id="29069" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="29079" class="Symbol">{</a><a id="29080" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29082" href="/lia/part5/Exp/#28960" class="Bound">a₁</a><a id="29084" class="Symbol">}</a> <a id="29086" class="Symbol">{</a><a id="29087" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29089" href="/lia/part5/Exp/#28967" class="Bound">b₁</a><a id="29091" class="Symbol">}</a>
  <a id="29095" class="Symbol">=</a> <a id="29097" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29101" class="Symbol">(</a><a id="29102" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29106" class="Symbol">(</a><a id="29107" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29111" class="Symbol">(</a><a id="29112" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29116" class="Symbol">(</a><a id="29117" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29121" class="Symbol">(</a><a id="29122" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="29126" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="29132" class="Symbol">)))))</a>

<a id="29139" href="/lia/part5/Exp/#28218" class="Function">μ-wf</a> <a id="29144" href="/lia/part5/Exp/#29144" class="Bound">a</a><a id="29145" class="Symbol">@{</a><a id="29147" href="/lia/part5/Exp/#25848" class="InductiveConstructor">Add</a> <a id="29151" class="Symbol">(</a><a id="29152" href="/lia/part5/Exp/#29152" class="Bound">a₁</a> <a id="29155" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="29156" class="Symbol">)</a> <a id="29158" class="Symbol">(</a><a id="29159" href="/lia/part5/Exp/#29159" class="Bound">b₁</a> <a id="29162" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="29163" class="Symbol">)}</a> <a id="29166" class="Symbol">{</a><a id="29167" href="/lia/part5/Exp/#29167" class="Bound">b</a><a id="29168" class="Symbol">}</a> <a id="29170" href="/lia/part5/Exp/#26679" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="29175" class="Symbol">=</a> <a id="29177" href="/lia/part5/Exp/#29349" class="Function">goal</a> <a id="29182" class="Keyword">where</a>

  <a id="29191" href="/lia/part5/Exp/#29191" class="Function">magic</a> <a id="29197" class="Symbol">:</a> <a id="29199" class="Symbol">∀</a> <a id="29201" href="/lia/part5/Exp/#29201" class="Bound">a</a> <a id="29203" href="/lia/part5/Exp/#29203" class="Bound">b</a> <a id="29205" class="Symbol">→</a>
      <a id="29213" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29217" class="Symbol">(</a><a id="29218" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29222" class="Symbol">(</a><a id="29223" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29227" class="Symbol">(</a><a id="29228" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29232" class="Symbol">(</a><a id="29233" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29237" class="Symbol">(</a><a id="29238" href="/lia/part5/Exp/#29201" class="Bound">a</a> <a id="29240" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29243" href="/lia/part5/Exp/#29203" class="Bound">b</a> <a id="29245" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29248" class="Number">4</a><a id="29249" class="Symbol">)))))</a> <a id="29255" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a>
      <a id="29263" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29267" class="Symbol">(</a><a id="29268" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29272" class="Symbol">(</a><a id="29273" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29277" class="Symbol">(</a><a id="29278" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29282" class="Symbol">(</a><a id="29283" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29287" class="Symbol">(</a><a id="29288" href="/lia/part5/Exp/#29201" class="Bound">a</a> <a id="29290" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29293" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29297" class="Symbol">(</a><a id="29298" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29302" class="Symbol">(</a><a id="29303" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29307" class="Symbol">(</a><a id="29308" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29312" href="/lia/part5/Exp/#29203" class="Bound">b</a><a id="29313" class="Symbol">))))))))</a>
  <a id="29324" href="/lia/part5/Exp/#29191" class="Function">magic</a> <a id="29330" class="Symbol">=</a> <a id="29332" class="Symbol">{! solve-∀ !}</a>

  <a id="29349" href="/lia/part5/Exp/#29349" class="Function">goal</a> <a id="29354" class="Symbol">:</a> <a id="29356" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29360" class="Symbol">(</a><a id="29361" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29365" class="Symbol">(</a><a id="29366" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29370" class="Symbol">(</a><a id="29371" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29375" class="Symbol">(</a><a id="29376" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29380" class="Symbol">(</a><a id="29381" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29383" href="/lia/part5/Exp/#29152" class="Bound">a₁</a> <a id="29386" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29389" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29391" href="/lia/part5/Exp/#29159" class="Bound">b₁</a> <a id="29394" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29397" class="Number">4</a><a id="29398" class="Symbol">)))))</a> <a id="29404" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a>
         <a id="29416" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29420" class="Symbol">(</a><a id="29421" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29425" class="Symbol">(</a><a id="29426" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29430" class="Symbol">(</a><a id="29431" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29435" class="Symbol">(</a><a id="29436" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29440" class="Symbol">(</a><a id="29441" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29443" href="/lia/part5/Exp/#29152" class="Bound">a₁</a> <a id="29446" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29449" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29453" class="Symbol">(</a><a id="29454" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29458" class="Symbol">(</a><a id="29459" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29463" class="Symbol">(</a><a id="29464" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="29468" class="Symbol">(</a><a id="29469" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29471" href="/lia/part5/Exp/#29159" class="Bound">b₁</a><a id="29473" class="Symbol">)))))))))</a>
  <a id="29485" href="/lia/part5/Exp/#29349" class="Function">goal</a> <a id="29490" class="Keyword">rewrite</a> <a id="29498" href="/lia/part5/Exp/#29191" class="Function">magic</a> <a id="29504" class="Symbol">(</a><a id="29505" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29507" href="/lia/part5/Exp/#29152" class="Bound">a₁</a><a id="29509" class="Symbol">)</a> <a id="29511" class="Symbol">(</a><a id="29512" href="/lia/part5/Exp/#28131" class="Function">μ</a> <a id="29514" href="/lia/part5/Exp/#29159" class="Bound">b₁</a><a id="29516" class="Symbol">)</a> <a id="29518" class="Symbol">=</a> <a id="29520" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<h2 id="strong-normalisation-second-proof">
<a class="anchor" href="#strong-normalisation-second-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (second proof)</h2>

<p>We prove strong normalisation by well-founded induction on a
lexicograpic order.</p>

<pre class="Agda"><a id="zeroes"></a><a id="29658" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="ones"></a><a id="29665" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="dollars"></a><a id="29670" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29678" class="Symbol">:</a> <a id="29680" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="29684" class="Symbol">→</a> <a id="29686" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="29689" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29696" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="29698" class="Symbol">=</a> <a id="29700" class="Number">0</a>
<a id="29702" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29709" class="Symbol">(</a><a id="29710" href="/lia/part5/Exp/#29710" class="Bound">a</a> <a id="29712" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="29713" class="Symbol">)</a> <a id="29715" class="Symbol">=</a> <a id="29717" class="Number">1</a> <a id="29719" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29722" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29729" href="/lia/part5/Exp/#29710" class="Bound">a</a>
<a id="29731" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29738" class="Symbol">(</a><a id="29739" href="/lia/part5/Exp/#29739" class="Bound">a</a> <a id="29741" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="29742" class="Symbol">)</a> <a id="29744" class="Symbol">=</a> <a id="29746" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29753" href="/lia/part5/Exp/#29739" class="Bound">a</a>
<a id="29755" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29762" class="Symbol">(</a><a id="29763" href="/lia/part5/Exp/#29763" class="Bound">a</a> <a id="29765" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29767" href="/lia/part5/Exp/#29767" class="Bound">b</a><a id="29768" class="Symbol">)</a> <a id="29770" class="Symbol">=</a> <a id="29772" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29779" href="/lia/part5/Exp/#29763" class="Bound">a</a> <a id="29781" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29784" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="29791" href="/lia/part5/Exp/#29767" class="Bound">b</a>

<a id="29794" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29799" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="29801" class="Symbol">=</a> <a id="29803" class="Number">0</a>
<a id="29805" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29810" class="Symbol">(</a><a id="29811" href="/lia/part5/Exp/#29811" class="Bound">a</a> <a id="29813" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="29814" class="Symbol">)</a> <a id="29816" class="Symbol">=</a> <a id="29818" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29823" href="/lia/part5/Exp/#29811" class="Bound">a</a>
<a id="29825" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29830" class="Symbol">(</a><a id="29831" href="/lia/part5/Exp/#29831" class="Bound">a</a> <a id="29833" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="29834" class="Symbol">)</a> <a id="29836" class="Symbol">=</a> <a id="29838" class="Number">1</a> <a id="29840" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29843" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29848" href="/lia/part5/Exp/#29831" class="Bound">a</a>
<a id="29850" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29855" class="Symbol">(</a><a id="29856" href="/lia/part5/Exp/#29856" class="Bound">a</a> <a id="29858" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29860" href="/lia/part5/Exp/#29860" class="Bound">b</a><a id="29861" class="Symbol">)</a> <a id="29863" class="Symbol">=</a> <a id="29865" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29870" href="/lia/part5/Exp/#29856" class="Bound">a</a> <a id="29872" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29875" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="29880" href="/lia/part5/Exp/#29860" class="Bound">b</a>

<a id="29883" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29891" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="29893" class="Symbol">=</a> <a id="29895" class="Number">1</a>
<a id="29897" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29905" class="Symbol">(</a><a id="29906" href="/lia/part5/Exp/#29906" class="Bound">a</a> <a id="29908" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="29909" class="Symbol">)</a> <a id="29911" class="Symbol">=</a> <a id="29913" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29921" href="/lia/part5/Exp/#29906" class="Bound">a</a>
<a id="29923" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29931" class="Symbol">(</a><a id="29932" href="/lia/part5/Exp/#29932" class="Bound">a</a> <a id="29934" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="29935" class="Symbol">)</a> <a id="29937" class="Symbol">=</a> <a id="29939" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29947" href="/lia/part5/Exp/#29932" class="Bound">a</a>
<a id="29949" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29957" class="Symbol">(</a><a id="29958" href="/lia/part5/Exp/#29958" class="Bound">a</a> <a id="29960" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="29962" href="/lia/part5/Exp/#29962" class="Bound">b</a><a id="29963" class="Symbol">)</a> <a id="29965" class="Symbol">=</a> <a id="29967" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29975" href="/lia/part5/Exp/#29958" class="Bound">a</a> <a id="29977" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="29980" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="29988" href="/lia/part5/Exp/#29962" class="Bound">b</a>

<a id="Triple"></a><a id="29991" href="/lia/part5/Exp/#29991" class="Function">Triple</a> <a id="29998" class="Symbol">=</a> <a id="30000" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="30002" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="30004" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="30006" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="30008" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="triple"></a><a id="30011" href="/lia/part5/Exp/#30011" class="Function">triple</a> <a id="30018" class="Symbol">:</a> <a id="30020" href="/lia/part5/Exp/#25786" class="Datatype">Bin</a> <a id="30024" class="Symbol">→</a> <a id="30026" href="/lia/part5/Exp/#29991" class="Function">Triple</a>
<a id="30033" href="/lia/part5/Exp/#30011" class="Function">triple</a> <a id="30040" href="/lia/part5/Exp/#30040" class="Bound">a</a> <a id="30042" class="Symbol">=</a> <a id="30044" class="Symbol">(</a><a id="30045" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="30050" href="/lia/part5/Exp/#30040" class="Bound">a</a> <a id="30052" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30054" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="30061" href="/lia/part5/Exp/#30040" class="Bound">a</a> <a id="30063" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30065" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="30073" href="/lia/part5/Exp/#30040" class="Bound">a</a><a id="30074" class="Symbol">)</a>

<a id="_≺_"></a><a id="30077" href="/lia/part5/Exp/#30077" class="Function Operator">_≺_</a> <a id="30081" class="Symbol">:</a> <a id="30083" href="/lia/part5/Exp/#29991" class="Function">Triple</a> <a id="30090" class="Symbol">→</a> <a id="30092" href="/lia/part5/Exp/#29991" class="Function">Triple</a> <a id="30099" class="Symbol">→</a> <a id="30101" class="PrimitiveType">Set</a>
<a id="30105" href="/lia/part5/Exp/#30077" class="Function Operator">_≺_</a> <a id="30109" class="Symbol">=</a> <a id="30111" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="30115" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="30120" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="30124" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="30129" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a>

<a id="wf-≺"></a><a id="30134" href="/lia/part5/Exp/#30134" class="Function">wf-≺</a> <a id="30139" class="Symbol">:</a> <a id="30141" href="/lia/part0/WellFounded/#548" class="Function">WellFounded</a> <a id="30153" href="/lia/part5/Exp/#30077" class="Function Operator">_≺_</a>
<a id="30157" href="/lia/part5/Exp/#30134" class="Function">wf-≺</a> <a id="30162" class="Symbol">=</a> <a id="30164" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="30171" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="30176" class="Symbol">(</a><a id="30177" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="30184" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="30189" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a><a id="30193" class="Symbol">)</a>

<a id="triple-mon"></a><a id="30196" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30207" class="Symbol">:</a> <a id="30209" href="/lia/part5/Exp/#25921" class="Generalizable">a</a> <a id="30211" href="/lia/part5/Exp/#26143" class="Datatype Operator">↝</a> <a id="30213" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="30215" class="Symbol">→</a>
             <a id="30230" class="Comment">-------------------</a>
             <a id="30263" href="/lia/part5/Exp/#30011" class="Function">triple</a> <a id="30270" href="/lia/part5/Exp/#25926" class="Generalizable">b</a> <a id="30272" href="/lia/part5/Exp/#30077" class="Function Operator">≺</a> <a id="30274" href="/lia/part5/Exp/#30011" class="Function">triple</a> <a id="30281" href="/lia/part5/Exp/#25921" class="Generalizable">a</a>
             
<a id="30297" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30308" class="Symbol">(</a><a id="30309" href="/lia/part5/Exp/#26174" class="InductiveConstructor">↝𝟬</a> <a id="30312" href="/lia/part5/Exp/#30312" class="Bound">δ</a><a id="30313" class="Symbol">)</a> <a id="30315" class="Keyword">with</a> <a id="30320" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30331" href="/lia/part5/Exp/#30312" class="Bound">δ</a>
<a id="30333" class="Symbol">...</a> <a id="30337" class="Symbol">|</a> <a id="30339" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30344" href="/lia/part5/Exp/#30344" class="Bound">1s</a> <a id="30347" class="Symbol">=</a> <a id="30349" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30354" href="/lia/part5/Exp/#30344" class="Bound">1s</a>
<a id="30357" class="Symbol">...</a> <a id="30361" class="Symbol">|</a> <a id="30363" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30369" class="Symbol">(</a><a id="30370" href="/lia/part5/Exp/#30370" class="Bound">1s</a> <a id="30373" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30375" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30380" href="/lia/part5/Exp/#30380" class="Bound">0s</a><a id="30382" class="Symbol">)</a> <a id="30384" class="Symbol">=</a> <a id="30386" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30392" class="Symbol">(</a><a id="30393" href="/lia/part5/Exp/#30370" class="Bound">1s</a> <a id="30396" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30398" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30403" class="Symbol">(</a><a id="30404" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="30408" href="/lia/part5/Exp/#30380" class="Bound">0s</a><a id="30410" class="Symbol">))</a>
<a id="30413" class="Symbol">...</a> <a id="30417" class="Symbol">|</a> <a id="30419" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30425" class="Symbol">(</a><a id="30426" href="/lia/part5/Exp/#30426" class="Bound">1s</a> <a id="30429" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30431" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30437" class="Symbol">(</a><a id="30438" href="/lia/part5/Exp/#30438" class="Bound">0s</a> <a id="30441" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30443" href="/lia/part5/Exp/#30443" class="Bound">$s</a><a id="30445" class="Symbol">))</a> <a id="30448" class="Symbol">=</a> <a id="30450" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30456" class="Symbol">(</a><a id="30457" href="/lia/part5/Exp/#30426" class="Bound">1s</a> <a id="30460" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30462" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30468" class="Symbol">(</a><a id="30469" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30474" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30478" href="/lia/part5/Exp/#30438" class="Bound">0s</a> <a id="30481" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30483" href="/lia/part5/Exp/#30443" class="Bound">$s</a><a id="30485" class="Symbol">))</a>

<a id="30489" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30500" class="Symbol">(</a><a id="30501" href="/lia/part5/Exp/#26227" class="InductiveConstructor">↝𝟭</a> <a id="30504" href="/lia/part5/Exp/#30504" class="Bound">δ</a><a id="30505" class="Symbol">)</a> <a id="30507" class="Keyword">with</a> <a id="30512" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30523" href="/lia/part5/Exp/#30504" class="Bound">δ</a>
<a id="30525" class="Symbol">...</a> <a id="30529" class="Symbol">|</a> <a id="30531" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30536" href="/lia/part5/Exp/#30536" class="Bound">1s</a> <a id="30539" class="Symbol">=</a> <a id="30541" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30546" class="Symbol">(</a><a id="30547" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="30551" href="/lia/part5/Exp/#30536" class="Bound">1s</a><a id="30553" class="Symbol">)</a>
<a id="30555" class="Symbol">...</a> <a id="30559" class="Symbol">|</a> <a id="30561" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30567" class="Symbol">(</a><a id="30568" href="/lia/part5/Exp/#30568" class="Bound">1s</a> <a id="30571" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30573" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30578" href="/lia/part5/Exp/#30578" class="Bound">0s</a><a id="30580" class="Symbol">)</a> <a id="30582" class="Symbol">=</a> <a id="30584" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30590" class="Symbol">(</a><a id="30591" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30596" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30600" href="/lia/part5/Exp/#30568" class="Bound">1s</a> <a id="30603" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30605" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30610" href="/lia/part5/Exp/#30578" class="Bound">0s</a><a id="30612" class="Symbol">)</a>
<a id="30614" class="Symbol">...</a> <a id="30618" class="Symbol">|</a> <a id="30620" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30626" class="Symbol">(</a><a id="30627" href="/lia/part5/Exp/#30627" class="Bound">1s</a> <a id="30630" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30632" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30638" class="Symbol">(</a><a id="30639" href="/lia/part5/Exp/#30639" class="Bound">0s</a> <a id="30642" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30644" href="/lia/part5/Exp/#30644" class="Bound">$s</a><a id="30646" class="Symbol">))</a> <a id="30649" class="Symbol">=</a> <a id="30651" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30657" class="Symbol">(</a><a id="30658" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="30663" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="30667" href="/lia/part5/Exp/#30627" class="Bound">1s</a> <a id="30670" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30672" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30678" class="Symbol">(</a><a id="30679" href="/lia/part5/Exp/#30639" class="Bound">0s</a> <a id="30682" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30684" href="/lia/part5/Exp/#30644" class="Bound">$s</a><a id="30686" class="Symbol">))</a>

<a id="30690" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30701" class="Symbol">{</a><a id="30702" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a> <a id="30704" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="30706" href="/lia/part5/Exp/#30706" class="Bound">b</a><a id="30707" class="Symbol">}</a> <a id="30709" href="/lia/part5/Exp/#26280" class="InductiveConstructor">↝$L</a> <a id="30713" class="Symbol">=</a> <a id="30715" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30721" class="Symbol">(</a><a id="30722" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30727" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30729" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30735" class="Symbol">(</a><a id="30736" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30741" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30743" href="/lia/part0/Naturals/#1490" class="Function">n&lt;sucn</a><a id="30749" class="Symbol">))</a>

<a id="30753" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30764" class="Symbol">{</a><a id="30765" href="/lia/part5/Exp/#30765" class="Bound">b</a> <a id="30767" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="30769" href="/lia/part5/Exp/#25804" class="InductiveConstructor">$</a><a id="30770" class="Symbol">}</a> <a id="30772" href="/lia/part5/Exp/#26317" class="InductiveConstructor">↝$R</a>
  <a id="30778" class="Keyword">rewrite</a>
    <a id="30790" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="30796" class="Symbol">(</a><a id="30797" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="30802" href="/lia/part5/Exp/#30765" class="Bound">b</a><a id="30803" class="Symbol">)</a> <a id="30805" class="Symbol">|</a>
    <a id="30811" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="30817" class="Symbol">(</a><a id="30818" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="30825" href="/lia/part5/Exp/#30765" class="Bound">b</a><a id="30826" class="Symbol">)</a> <a id="30828" class="Symbol">|</a>
    <a id="30834" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="30844" class="Symbol">{</a><a id="30845" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="30853" href="/lia/part5/Exp/#30765" class="Bound">b</a><a id="30854" class="Symbol">}</a> <a id="30856" class="Symbol">{</a><a id="30857" class="Number">0</a><a id="30858" class="Symbol">}</a> <a id="30860" class="Symbol">|</a>
    <a id="30866" href="/lia/part0/Naturals/#5443" class="Function">n+0≡n</a> <a id="30872" class="Symbol">(</a><a id="30873" href="/lia/part5/Exp/#29670" class="Function">dollars</a> <a id="30881" href="/lia/part5/Exp/#30765" class="Bound">b</a><a id="30882" class="Symbol">)</a> <a id="30884" class="Symbol">=</a> <a id="30886" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30892" class="Symbol">(</a><a id="30893" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30898" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30900" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="30906" class="Symbol">(</a><a id="30907" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="30912" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="30914" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="30920" class="Symbol">))</a>

<a id="30924" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30935" class="Symbol">(</a><a id="30936" href="/lia/part5/Exp/#26354" class="InductiveConstructor">↝+L</a> <a id="30940" href="/lia/part5/Exp/#30940" class="Bound">δ</a><a id="30941" class="Symbol">)</a> <a id="30943" class="Keyword">with</a> <a id="30948" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="30959" href="/lia/part5/Exp/#30940" class="Bound">δ</a>
<a id="30961" class="Symbol">...</a> <a id="30965" class="Symbol">|</a> <a id="30967" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30972" href="/lia/part5/Exp/#30972" class="Bound">1s</a> <a id="30975" class="Symbol">=</a> <a id="30977" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="30982" class="Symbol">(</a><a id="30983" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="30992" href="/lia/part5/Exp/#30972" class="Bound">1s</a><a id="30994" class="Symbol">)</a>
<a id="30996" class="Symbol">...</a> <a id="31000" class="Symbol">|</a> <a id="31002" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31008" class="Symbol">(</a><a id="31009" href="/lia/part5/Exp/#31009" class="Bound">1s</a> <a id="31012" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31014" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31019" href="/lia/part5/Exp/#31019" class="Bound">0s</a><a id="31021" class="Symbol">)</a> <a id="31023" class="Keyword">rewrite</a> <a id="31031" href="/lia/part5/Exp/#31009" class="Bound">1s</a> <a id="31034" class="Symbol">=</a> <a id="31036" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31042" class="Symbol">(</a><a id="31043" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31048" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31050" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31055" class="Symbol">(</a><a id="31056" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="31065" href="/lia/part5/Exp/#31019" class="Bound">0s</a><a id="31067" class="Symbol">))</a>
<a id="31070" class="Symbol">...</a> <a id="31074" class="Symbol">|</a> <a id="31076" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31082" class="Symbol">(</a><a id="31083" href="/lia/part5/Exp/#31083" class="Bound">1s</a> <a id="31086" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31088" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31094" class="Symbol">(</a><a id="31095" href="/lia/part5/Exp/#31095" class="Bound">0s</a> <a id="31098" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31100" href="/lia/part5/Exp/#31100" class="Bound">$s</a><a id="31102" class="Symbol">))</a> <a id="31105" class="Keyword">rewrite</a> <a id="31113" href="/lia/part5/Exp/#31083" class="Bound">1s</a> <a id="31116" class="Symbol">|</a> <a id="31118" href="/lia/part5/Exp/#31095" class="Bound">0s</a> <a id="31121" class="Symbol">=</a> <a id="31123" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31129" class="Symbol">(</a><a id="31130" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31135" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31137" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31143" class="Symbol">(</a><a id="31144" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31149" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31151" href="/lia/part0/Naturals/#7585" class="Function">&lt;-+-left</a> <a id="31160" href="/lia/part5/Exp/#31100" class="Bound">$s</a><a id="31162" class="Symbol">))</a>

<a id="31166" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31177" class="Symbol">(</a><a id="31178" href="/lia/part5/Exp/#26418" class="InductiveConstructor">↝+R</a> <a id="31182" href="/lia/part5/Exp/#31182" class="Bound">δ</a><a id="31183" class="Symbol">)</a> <a id="31185" class="Keyword">with</a> <a id="31190" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31201" href="/lia/part5/Exp/#31182" class="Bound">δ</a>
<a id="31203" class="Symbol">...</a> <a id="31207" class="Symbol">|</a> <a id="31209" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31214" href="/lia/part5/Exp/#31214" class="Bound">1s</a> <a id="31217" class="Symbol">=</a> <a id="31219" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31224" class="Symbol">(</a><a id="31225" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="31235" href="/lia/part5/Exp/#31214" class="Bound">1s</a><a id="31237" class="Symbol">)</a>
<a id="31239" class="Symbol">...</a> <a id="31243" class="Symbol">|</a> <a id="31245" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31251" class="Symbol">(</a><a id="31252" href="/lia/part5/Exp/#31252" class="Bound">1s</a> <a id="31255" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31257" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31262" href="/lia/part5/Exp/#31262" class="Bound">0s</a><a id="31264" class="Symbol">)</a> <a id="31266" class="Keyword">rewrite</a> <a id="31274" href="/lia/part5/Exp/#31252" class="Bound">1s</a> <a id="31277" class="Symbol">|</a> <a id="31279" href="/lia/part5/Exp/#31252" class="Bound">1s</a> <a id="31282" class="Symbol">=</a> <a id="31284" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31290" class="Symbol">(</a><a id="31291" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31296" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31298" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31303" class="Symbol">(</a><a id="31304" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="31314" href="/lia/part5/Exp/#31262" class="Bound">0s</a><a id="31316" class="Symbol">))</a>
<a id="31319" class="Symbol">...</a> <a id="31323" class="Symbol">|</a> <a id="31325" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31331" class="Symbol">(</a><a id="31332" href="/lia/part5/Exp/#31332" class="Bound">1s</a> <a id="31335" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31337" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31343" class="Symbol">(</a><a id="31344" href="/lia/part5/Exp/#31344" class="Bound">0s</a> <a id="31347" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31349" href="/lia/part5/Exp/#31349" class="Bound">$s</a><a id="31351" class="Symbol">))</a> <a id="31354" class="Keyword">rewrite</a> <a id="31362" href="/lia/part5/Exp/#31332" class="Bound">1s</a> <a id="31365" class="Symbol">|</a> <a id="31367" href="/lia/part5/Exp/#31332" class="Bound">1s</a> <a id="31370" class="Symbol">|</a> <a id="31372" href="/lia/part5/Exp/#31344" class="Bound">0s</a> <a id="31375" class="Symbol">=</a> <a id="31377" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31383" class="Symbol">(</a><a id="31384" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31389" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31391" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31397" class="Symbol">(</a><a id="31398" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31403" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31405" href="/lia/part0/Naturals/#7638" class="Function">&lt;-+-right</a> <a id="31415" href="/lia/part5/Exp/#31349" class="Bound">$s</a><a id="31417" class="Symbol">))</a>

<a id="31421" class="Comment">-- number of zeroes goes down</a>
<a id="31451" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31462" class="Symbol">{</a><a id="31463" href="/lia/part5/Exp/#31463" class="Bound">a</a> <a id="31465" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="31467" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31469" href="/lia/part5/Exp/#31469" class="Bound">b</a> <a id="31471" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="31472" class="Symbol">}</a> <a id="31474" href="/lia/part5/Exp/#26490" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="31479" class="Keyword">rewrite</a> <a id="31487" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="31497" class="Symbol">{</a><a id="31498" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="31505" href="/lia/part5/Exp/#31463" class="Bound">a</a><a id="31506" class="Symbol">}</a> <a id="31508" class="Symbol">{</a><a id="31509" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="31516" href="/lia/part5/Exp/#31469" class="Bound">b</a><a id="31517" class="Symbol">}</a> <a id="31519" class="Symbol">=</a> <a id="31521" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31527" class="Symbol">(</a> <a id="31529" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31534" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31536" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31541" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31547" class="Symbol">)</a>

<a id="31550" class="Comment">-- number of zeroes goes down</a>
<a id="31580" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31591" class="Symbol">{</a><a id="31592" href="/lia/part5/Exp/#31592" class="Bound">a</a> <a id="31594" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a> <a id="31596" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31598" href="/lia/part5/Exp/#31598" class="Bound">b</a> <a id="31600" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="31601" class="Symbol">}</a> <a id="31603" href="/lia/part5/Exp/#26553" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="31608" class="Keyword">rewrite</a> <a id="31616" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="31626" class="Symbol">{</a><a id="31627" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="31632" href="/lia/part5/Exp/#31592" class="Bound">a</a><a id="31633" class="Symbol">}</a> <a id="31635" class="Symbol">{</a><a id="31636" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="31641" href="/lia/part5/Exp/#31598" class="Bound">b</a><a id="31642" class="Symbol">}</a> <a id="31644" class="Symbol">=</a> <a id="31646" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31652" class="Symbol">(</a> <a id="31654" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31659" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31661" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31666" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31672" class="Symbol">)</a>

<a id="31675" class="Comment">-- number of zeroes goes down</a>
<a id="31705" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31716" class="Symbol">{</a><a id="31717" href="/lia/part5/Exp/#31717" class="Bound">a</a> <a id="31719" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="31721" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31723" href="/lia/part5/Exp/#31723" class="Bound">b</a> <a id="31725" href="/lia/part5/Exp/#25814" class="InductiveConstructor Operator">𝟬</a><a id="31726" class="Symbol">}</a> <a id="31728" href="/lia/part5/Exp/#26616" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="31733" class="Keyword">rewrite</a> <a id="31741" href="/lia/part0/Naturals/#5610" class="Function">suc-lemma</a> <a id="31751" class="Symbol">{</a><a id="31752" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="31759" href="/lia/part5/Exp/#31717" class="Bound">a</a><a id="31760" class="Symbol">}</a> <a id="31762" class="Symbol">{</a><a id="31763" href="/lia/part5/Exp/#29658" class="Function">zeroes</a> <a id="31770" href="/lia/part5/Exp/#31723" class="Bound">b</a><a id="31771" class="Symbol">}</a> <a id="31773" class="Symbol">=</a> <a id="31775" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="31781" class="Symbol">(</a> <a id="31783" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="31788" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="31790" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31795" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="31801" class="Symbol">)</a>

<a id="31804" class="Comment">-- number of ones goes down</a>
<a id="31832" href="/lia/part5/Exp/#30196" class="Function">triple-mon</a> <a id="31843" class="Symbol">{</a><a id="31844" href="/lia/part5/Exp/#31844" class="Bound">a</a> <a id="31846" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a> <a id="31848" href="/lia/part5/Exp/#1249" class="InductiveConstructor Operator">+</a> <a id="31850" href="/lia/part5/Exp/#31850" class="Bound">b</a> <a id="31852" href="/lia/part5/Exp/#25831" class="InductiveConstructor Operator">𝟭</a><a id="31853" class="Symbol">}</a> <a id="31855" href="/lia/part5/Exp/#26679" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="31860" class="Symbol">=</a> <a id="31862" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="31867" href="/lia/part5/Exp/#31959" class="Function">goal</a> <a id="31872" class="Keyword">where</a>

  <a id="31881" href="/lia/part5/Exp/#31881" class="Function">have</a> <a id="31886" class="Symbol">:</a> <a id="31888" class="Symbol">∀</a> <a id="31890" href="/lia/part5/Exp/#31890" class="Bound">a</a> <a id="31892" href="/lia/part5/Exp/#31892" class="Bound">b</a> <a id="31894" class="Symbol">→</a> <a id="31896" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31900" class="Symbol">(</a><a id="31901" href="/lia/part5/Exp/#31890" class="Bound">a</a> <a id="31903" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31906" href="/lia/part5/Exp/#31892" class="Bound">b</a> <a id="31908" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31911" class="Number">1</a><a id="31912" class="Symbol">)</a> <a id="31914" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="31916" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31920" class="Symbol">(</a><a id="31921" href="/lia/part5/Exp/#31890" class="Bound">a</a> <a id="31923" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31926" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31930" href="/lia/part5/Exp/#31892" class="Bound">b</a><a id="31931" class="Symbol">)</a>
  <a id="31935" href="/lia/part5/Exp/#31881" class="Function">have</a> <a id="31940" class="Symbol">=</a> <a id="31942" class="Symbol">{! solve-∀ !}</a>

  <a id="31959" href="/lia/part5/Exp/#31959" class="Function">goal</a> <a id="31964" class="Symbol">:</a> <a id="31966" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="31970" class="Symbol">(</a><a id="31971" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="31976" href="/lia/part5/Exp/#31844" class="Bound">a</a> <a id="31978" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31981" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="31986" href="/lia/part5/Exp/#31850" class="Bound">b</a> <a id="31988" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="31991" class="Number">1</a><a id="31992" class="Symbol">)</a> <a id="31994" href="/lia/part5/Exp/#214" class="Datatype Operator">≤ℕ</a> <a id="31997" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="32001" class="Symbol">(</a><a id="32002" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="32007" href="/lia/part5/Exp/#31844" class="Bound">a</a> <a id="32009" href="/lia/part5/Exp/#188" class="Primitive Operator">+ℕ</a> <a id="32012" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="32016" class="Symbol">(</a><a id="32017" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="32022" href="/lia/part5/Exp/#31850" class="Bound">b</a><a id="32023" class="Symbol">))</a>
  <a id="32028" href="/lia/part5/Exp/#31959" class="Function">goal</a> <a id="32033" class="Keyword">rewrite</a> <a id="32041" href="/lia/part5/Exp/#31881" class="Function">have</a> <a id="32046" class="Symbol">(</a><a id="32047" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="32052" href="/lia/part5/Exp/#31844" class="Bound">a</a><a id="32053" class="Symbol">)</a> <a id="32055" class="Symbol">(</a><a id="32056" href="/lia/part5/Exp/#29665" class="Function">ones</a> <a id="32061" href="/lia/part5/Exp/#31850" class="Bound">b</a><a id="32062" class="Symbol">)</a> <a id="32064" class="Symbol">=</a> <a id="32066" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<div id="refs">

  <h1 id="references">
<a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

</div>

<h1 id="solutions">
<a class="anchor" href="#solutions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Solutions</h1>

<div class="solutionbox">

  <h6 id="exercise-BExp-semantics-solution">Solution to <a href="#exercise-BExp-semantics" title="Exercise %g">Exercise %g</a>
</h6>

  <p>We proceed by structural induction on Boolan expressions.</p>

  <pre class="Agda"><a id="2994" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="2997" href="/lia/part5/Exp/#2023" class="InductiveConstructor">tt</a> <a id="3000" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3002" href="/lia/part5/Exp/#3002" class="Bound">ρ</a> <a id="3004" class="Symbol">=</a> <a id="3006" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="3009" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3012" href="/lia/part5/Exp/#2035" class="InductiveConstructor">ff</a> <a id="3015" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3017" href="/lia/part5/Exp/#3017" class="Bound">ρ</a> <a id="3019" class="Symbol">=</a> <a id="3021" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a>
<a id="3024" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3027" href="/lia/part5/Exp/#2213" class="InductiveConstructor Operator">¬</a> <a id="3029" href="/lia/part5/Exp/#3029" class="Bound">b</a> <a id="3031" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3033" href="/lia/part5/Exp/#3033" class="Bound">ρ</a> <a id="3035" class="Symbol">=</a> <a id="3037" href="/lia/part0/Booleans/#1098" class="Function Operator">¬𝔹</a> <a id="3040" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3043" href="/lia/part5/Exp/#3029" class="Bound">b</a> <a id="3045" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3047" href="/lia/part5/Exp/#3033" class="Bound">ρ</a>
<a id="3049" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3052" href="/lia/part5/Exp/#3052" class="Bound">b</a> <a id="3054" href="/lia/part5/Exp/#2154" class="InductiveConstructor Operator">∨</a> <a id="3056" href="/lia/part5/Exp/#3056" class="Bound">c</a> <a id="3058" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3060" href="/lia/part5/Exp/#3060" class="Bound">ρ</a> <a id="3062" class="Symbol">=</a> <a id="3064" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3067" href="/lia/part5/Exp/#3052" class="Bound">b</a> <a id="3069" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3071" href="/lia/part5/Exp/#3060" class="Bound">ρ</a> <a id="3073" href="/lia/part0/Booleans/#1040" class="Function Operator">∨𝔹</a> <a id="3076" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3079" href="/lia/part5/Exp/#3056" class="Bound">c</a> <a id="3081" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3083" href="/lia/part5/Exp/#3060" class="Bound">ρ</a>
<a id="3085" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3088" href="/lia/part5/Exp/#3088" class="Bound">b</a> <a id="3090" href="/lia/part5/Exp/#2183" class="InductiveConstructor Operator">∧</a> <a id="3092" href="/lia/part5/Exp/#3092" class="Bound">c</a> <a id="3094" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3096" href="/lia/part5/Exp/#3096" class="Bound">ρ</a> <a id="3098" class="Symbol">=</a> <a id="3100" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3103" href="/lia/part5/Exp/#3088" class="Bound">b</a> <a id="3105" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3107" href="/lia/part5/Exp/#3096" class="Bound">ρ</a> <a id="3109" href="/lia/part0/Booleans/#982" class="Function Operator">∧𝔹</a> <a id="3112" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3115" href="/lia/part5/Exp/#3092" class="Bound">c</a> <a id="3117" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3119" href="/lia/part5/Exp/#3096" class="Bound">ρ</a>
<a id="3121" href="/lia/part5/Exp/#2783" class="Function Operator">B⟦</a> <a id="3124" href="/lia/part5/Exp/#3124" class="Bound">e</a> <a id="3126" href="/lia/part5/Exp/#2234" class="InductiveConstructor Operator">≤</a> <a id="3128" href="/lia/part5/Exp/#3128" class="Bound">f</a> <a id="3130" href="/lia/part5/Exp/#2783" class="Function Operator">⟧</a> <a id="3132" href="/lia/part5/Exp/#3132" class="Bound">ρ</a>
  <a id="3136" class="Keyword">with</a> <a id="3141" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="3144" href="/lia/part5/Exp/#3124" class="Bound">e</a> <a id="3146" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="3148" href="/lia/part5/Exp/#3132" class="Bound">ρ</a> <a id="3150" href="/lia/part0/Naturals/#1135" class="Function Operator">≤?</a> <a id="3153" href="/lia/part5/Exp/#2476" class="Function Operator">A⟦</a> <a id="3156" href="/lia/part5/Exp/#3128" class="Bound">f</a> <a id="3158" href="/lia/part5/Exp/#2476" class="Function Operator">⟧</a> <a id="3160" href="/lia/part5/Exp/#3132" class="Bound">ρ</a>
<a id="3162" class="Symbol">...</a> <a id="3166" class="Symbol">|</a> <a id="3168" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="3172" class="Symbol">_</a> <a id="3174" class="Symbol">=</a> <a id="3176" href="/lia/part0/Booleans/#284" class="InductiveConstructor">tt</a>
<a id="3179" class="Symbol">...</a> <a id="3183" class="Symbol">|</a> <a id="3185" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="3188" class="Symbol">_</a> <a id="3190" class="Symbol">=</a> <a id="3192" href="/lia/part0/Booleans/#275" class="InductiveConstructor">ff</a></pre>

  <p><span class="hidden">∎</span> <span class="right-aligned">∎</span></p>

</div>

<hr>

    </div>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/Exp.lagda.md">Source</a>
        
        
        
    </p>
</header>

    <p class="p-name"> Last-modified: Jan  9 13:28:09 2021 </p>
  </article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/lia/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Logic in Agda</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Lorenzo Clemente</li>
          <li><a class="u-email" href="mailto:clementelorenzo@gmail.com">clementelorenzo@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/lclem"><svg class="svg-icon"><use xlink:href="/lia/assets/minima-social-icons.svg#github"></use></svg> <span class="username">lclem</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>

<!-- Parse the Latex divs with Katex
<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex, {displayMode: false});
  });
  
  $("script[type='math/tex; mode=display']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
  });
</script>
-->

<script type="text/javascript" src="/lia/assets/hidebox.js"></script>
</body>

</html>
