<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arithmetic expressions 🚧 | Logic in Agda</title><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Arithmetic expressions 🚧" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<meta property="og:description" content="Propositional and fist-order logic developed with the proof assistant Agda." />
<link rel="canonical" href="/lia/part5/AExp/" />
<meta property="og:url" content="/lia/part5/AExp/" />
<meta property="og:site_name" content="Logic in Agda" />
<script type="application/ld+json">
{"url":"/lia/part5/AExp/","description":"Propositional and fist-order logic developed with the proof assistant Agda.","@type":"WebPage","headline":"Arithmetic expressions 🚧","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/lia/assets/main.css">

  <!-- <link rel="stylesheet" href="/lia/assets/custom.css"> --><!-- Mathjax Support -->
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.js"></script>

<script type="text/x-thebe-config">
  {
    bootstrap: true,
    requestKernel: true,
    runAllCells: false,
    selector: "[data-executable]",
    predefinedOutput: false,
    codeMirrorConfig: {
        //theme: "idea",
        language: "agda",
        readOnly: false,
        lineNumbers: true,
        keyMap: "default",
//        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
    },
    kernelOptions: {
        name: "agda",
        kernelName: "agda",
        path: "src/",
        loadFromStore: true,
        persistent: false,
        // notebook server configuration; not needed with binder
        serverSettings: {
              baseUrl: "http://127.0.0.1:8888",
              token: "test-secret",
            },
    },
    binderOptions: {
      repo: "lclem/lia", // need to put here the actual github repo (if it is a fork)
      ref: "main",
      binderUrl: "https://mybinder.org",
      repoProvider: "github",
      savedSession: {
        enabled: true,
        maxAge: 86400, // the max age in seconds to consider re-using a session
        storagePrefix: "thebe-binder-lia-"
      },
    },
  }
</script>

<!-- <script type="text/javascript" src="https://unpkg.com/thebelab@latest"></script> -->

<!-- our own version of the thebe library: -->
<script type="text/javascript" src="/lia/thebe/lib/index.js"></script>

<!-- highlighting for Agda -->
<script src="/lia/codemirror-agda/lib/index.js"></script>

</head>
<body><header class="site-header" id="site-header">

    <div class="wrapper">

        <a class="site-title" href="/lia/">Logic in Agda</a>

        <nav class="site-nav">
            <!-- <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span> -->

            <div class="trigger">
                <a class="page-link" href="/lia/part0/index/">Part 0</a>
                <a class="page-link" href="/lia/part1/index/">Part 1</a>
                <a class="page-link" href="/lia/part2/index/">Part 2</a>
                <a class="page-link" href="/lia/part3/index/">Part 3</a>
                <a class="page-link" href="/lia/part4/index/">Part 4</a>
                <a class="page-link" href="/lia/part5/index/">Part 5</a>

                <span class="kernel-status">
                    <button class="kernel-status-button" onclick="kernel_status_clicked()" title="kernel status"></button>
                    <span id="kernel-messages" class="kernel-messages"></span>
                </span>

                <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;">
                    <!-- display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; -->
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                    <div>
                        <label for="username" style="color: white;">User:</label>
                        <input type="text" placeholder="github username" id="username" name="username">
                        <label for="password" style="color: white;">Password:</label>
                        <input type="password" placeholder="password" id="password" name="password">
                    </div>
                    <div>
                        <label for="loadFromStore" style="color: white;">Load code from browser store:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="loadFromStore" name="loadFromStore">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="baseUrl" style="color: white;">Base URL:</label>
                        <input type="text" placeholder="baseUrl" id="baseUrl" name="baseUrl" value="http://127.0.0.1:8888">
                        <label for="token" style="color: white;">Token:</label>
                        <input type="text" placeholder="token" id="token" name="token" value="test-secret">
                    </div>
                    <div>
                        <label for="useBinder" style="color: white;">Use binder:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="useBinder" name="useBinder">
                            <span class="slider round"></span>
                        </label>
                        <label for="savedSession" style="color: white;">Reuse session:</label>
                        <label class="switch" style="vertical-align: middle; margin: 10px;">
                            <input type="checkbox" id="savedSession" name="savedSession">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div>
                        <label for="repository" style="color: white;">Github repo:</label>
                        <input type="text" placeholder="repository" id="repository" name="repository" value="">

                        <label for="ref" style="color: white;">Branch:</label>
                        <input type="text" placeholder="ref" id="ref" name="ref" value="main">

                        <label for="binderUrl" style="color: white;">Binder URL:</label>                        
                        <input type="text" placeholder="binderUrl" id="binderUrl" name="binderUrl" value="https://mybinder.org">
                    </div>
                </div>

                <span class="control-container" id="control-container">
                    <svg class="progress-ring" id="progress-ring" width="30" height="30" title="exercise progress" onclick="kernel_status_clicked()">
                        <circle
                            id="progress-circle"
                            class="progress-ring__circle"
                            stroke="black"
                            stroke-width="2.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                        <circle
                            stroke="lightgray"
                            stroke-width="0.5"
                            fill="transparent"
                            r="14"
                            cx="15"
                            cy="15"/>
                    </svg>
                    <div id="connection_options" class="options sidebar" style="text-align: left; line-height: normal; max-width: 800px; padding: 10px; border-radius: 15px;"></div>
                    <span class="progress-text" id="progress-text" onclick="kernel_status_clicked()"> 0/0 </span>

                    <span id="controls" class="controls">
                        <svg version="1.1" id="run-all" class="run-all" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="15" height="15" viewBox="0 0 163.861 163.861" style="enable-background:new 0 0 163.861 163.861;"
                            xml:space="preserve">
                            <g>
                                <path d="M34.857,3.613C20.084-4.861,8.107,2.081,8.107,19.106v125.637c0,17.042,11.977,23.975,26.75,15.509L144.67,97.275
                                    c14.778-8.477,14.778-22.211,0-30.686L34.857,3.613z"/>
                            </g>
                        </svg>
                    </span>
                </span>
            </div>

            <style>
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 40px;
                    height: 20px;
                }

                /* Hide default HTML checkbox */
                .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }

                /* The slider */
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 2px;
                    /* right: 4px; */
                    bottom: 2px;
                    top: 2px;
                    background-color: white;
                    -webkit-transition: .4s;
                    transition: .4s;
                }

                input:checked + .slider {
                    background-color: #2196F3;
                }

                input:focus + .slider {
                    box-shadow: 0 0 1px #2196F3;
                }

                input:checked + .slider:before {
                    -webkit-transform: translateX(18px);
                    -ms-transform: translateX(18px);
                    transform: translateX(18px);
                }

                /* Rounded sliders */
                .slider.round {
                    border-radius: 30px;
                }

                .slider.round:before {
                border-radius: 50%;
                }

                .sidebar input[type=text] {
                    padding: 6px;
                    margin-top: 8px;
                    /* font-size: 17px; */
                    border: none;
                    /* width: 150px; */
                }

                .sidebar {
                    /* height: 100%; */
                    width: 0;
                    position: fixed;
                    z-index: 1000;
                    top: 0;
                    right: 20px;
                    background-color: rgba(17, 17, 17, 0.637);
                    /* overflow-x: hidden; */
                    transition: 0.5s;
                    padding-top: 60px;
                    display: none;
                    margin-top: 60px;
                }

                .sidebar .closebtn {
                    position: absolute;
                    color: white;
                    top: 0;
                    right: 10px;
                    font-size: 24px;
                    margin-left: 20px;
                }

                .progress-ring, .run-all {
                    vertical-align: middle;
                }

                .control-container {
                    transition: all .2s ease-in-out;
                }

                .controls {
                    display: none;
                    opacity: 0;
                    margin-right: 10px;
                    transition: all .5s ease-in-out;
                }

                .run-all:hover {
                    filter: brightness(135%);
                }

                .progress-ring__circle {
                    transition: 0.35s stroke-dashoffset;
                    transform: rotate(-90deg);
                    transform-origin: 50% 50%;
                    visibility: hidden;
                }

                .progress-text {
                    position: relative;
                    top: 0;
                    left: -25px;
                    font-size: 8px;
                    vertical-align: middle;
                    align-self: center;
                }

                .progress-text:hover, .progress-ring:hover, .progress-ring__circle:hover, .run-all {
                    cursor: pointer;
                }
            </style>

            <script>

                //  var storedUsername = localStorage.getItem("username");
                //  localStorage.setItem("username", storedUsername.value);
            
                function doStore(input, key) {

                    if(input.type == "checkbox") {
                        var checked = localStorage.getItem(key);

                        if (checked == "yes") {
                            localStorage.setItem(key, "no");
                        }
                        else {
                            localStorage.setItem(key, "yes");
                        }

                        console.info("checked: ", localStorage.getItem(key));
                    }
                    else {
                        console.info("value: ", input.value);
                        localStorage.setItem(key, input.value);
                    }
                }

                function persistInput(input) {
                    var key = "input-" + input.id;
                    var storedValue = localStorage.getItem(key);
                
                    console.info("Persisting input: ", input);
                
                    // if there is a stored value, use it
                    if (storedValue) {

                        if(input.type != "password") {
                            console.info("restoring value ", storedValue, " for ", input);
                        }

                        if(input.type == "checkbox") {
                            if(storedValue=="yes") {
                                input.setAttribute("checked", "");
                            }
                            else {
                                input.removeAttribute("checked");
                            }
                        }
                        else {
                            input.value = storedValue;
                        }
                    }
                    // if there is no stored value, store the current value
                    else {
                        doStore(input, key);
                    }

                    input.addEventListener('input', function () {
                        console.info("input changed: key = ", key, "; value = ", input);
                        doStore(input, key);
                    });
                    }
                
                    persistInput(document.getElementById("username"));
                    persistInput(document.getElementById("password"));

                    persistInput(document.getElementById("loadFromStore"));

                    persistInput(document.getElementById("baseUrl"));
                    persistInput(document.getElementById("token"));

                    persistInput(document.getElementById("useBinder"));
                    persistInput(document.getElementById("savedSession"));
                    persistInput(document.getElementById("repository"));
                    persistInput(document.getElementById("ref"));
                    persistInput(document.getElementById("binderUrl"));

                    // init
                    document.getElementById("connection_options").style.display = "none";

                    function kernel_status_clicked() {
                
                        console.info("Clicked kernel status");

                        document.getElementById("kernel-messages").style.display = "none";

                        document.getElementById("connection_options").style.width = "750px";
                        document.getElementById("connection_options").style.display = "block";
                        //document.getElementById("header").style.marginLeft = "250px";

                    }

                    function closeNav() {

                        document.getElementById("kernel-messages").style.display = "inline";

                        document.getElementById("connection_options").style.width = "0";
                        document.getElementById("connection_options").style.display = "none";
                        //document.getElementById("header").style.marginLeft= "0";
                    }

                var prevScrollpos = window.pageYOffset;
                var header = document.getElementById("site-header");
                var boxShadow = header.style.boxShadow;

                window.onscroll = function() {
                    var currentScrollPos = window.pageYOffset;
                    // detect scroll down
                    if (prevScrollpos > currentScrollPos) {
                        header.style.top = "0";
                        header.style.boxShadow = boxShadow;
                        prevScrollpos = currentScrollPos;
                    } else if (prevScrollpos <= currentScrollPos) {
                        header.style.top = "-55px";
                        header.style.boxShadow = "none"
                        prevScrollpos = currentScrollPos;
                    }
                }

            let control_container = document.getElementById("control-container");
            let controls = document.getElementById("controls");

            control_container.addEventListener("mouseenter", function(event) {
                controls.style.display = "inline";
//                controls.style.visibility = "visible";
                controls.style.opacity = 1;
                console.info("mouseenter");
            }, false);

            control_container.addEventListener("mouseleave", function(event) {
                // controls.style.visibility = "hidden";
                // controls.style.display = "none";
                controls.style.opacity = 0;
                console.info("mouseleave");
            }, false);

            </script>
            
        </nav>

    </div>

</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

    <header class="post-header">
        <h1 class="post-title">Arithmetic expressions 🚧</h1>
    </header>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/AExp.lagda.md">Source</a>
        
        
        
    </p>
</header>

  
    <div class="post-content">
        <h2>Contents</h2>    
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#arithmetic-expressions">Arithmetic expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#variables">Variables</a></li>
<li class="toc-entry toc-h2"><a href="#syntax-of-expressions">Syntax of expressions</a></li>
<li class="toc-entry toc-h2"><a href="#environments">Environments</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#denotational-semantics">Denotational semantics</a></li>
<li class="toc-entry toc-h1"><a href="#small-steps-operational-semantics">Small-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#preservation">Preservation</a></li>
<li class="toc-entry toc-h2"><a href="#transitive-closure">Transitive closure</a></li>
<li class="toc-entry toc-h2"><a href="#deterministic-values">Deterministic values</a></li>
<li class="toc-entry toc-h2"><a href="#congruence">Congruence</a></li>
<li class="toc-entry toc-h2"><a href="#relational-reasoning">Relational reasoning</a></li>
<li class="toc-entry toc-h2"><a href="#exercise-termination-weak-normalisation">Exercise: Termination (Weak normalisation)</a></li>
<li class="toc-entry toc-h2"><a href="#exercise-strong-normalisation">Exercise: Strong normalisation</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#big-steps-operational-semantics">Big-steps operational semantics</a>
<ul>
<li class="toc-entry toc-h2"><a href="#evaluator-interpreter">Evaluator (interpreter)</a></li>
<li class="toc-entry toc-h2"><a href="#evaluation-is-deterministic">Evaluation is deterministic</a></li>
<li class="toc-entry toc-h2"><a href="#agreement-of-the-semantics">Agreement of the semantics</a></li>
<li class="toc-entry toc-h2"><a href="#contextual-equivalence">Contextual equivalence</a></li>
<li class="toc-entry toc-h2"><a href="#substitution-facts">Substitution facts</a></li>
<li class="toc-entry toc-h2"><a href="#substitution-lemma">Substitution lemma</a></li>
<li class="toc-entry toc-h2"><a href="#full-abstraction">Full abstraction</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#binary-expressions">Binary expressions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#syntax">Syntax</a></li>
<li class="toc-entry toc-h2"><a href="#denotational-semantics-1">Denotational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#small-steps-operational-semantics-1">Small-steps operational semantics</a></li>
<li class="toc-entry toc-h2"><a href="#agreement">Agreement</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-first-proof">Strong normalisation (first proof)</a></li>
<li class="toc-entry toc-h2"><a href="#strong-normalisation-second-proof">Strong normalisation (second proof)</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#references">References</a></li>
</ul><pre class="Agda"><a id="48" class="Symbol">{-#</a> <a id="52" class="Keyword">OPTIONS</a> <a id="60" class="Pragma">--allow-unsolved-metas</a> <a id="83" class="Symbol">#-}</a>
<a id="87" class="Keyword">module</a> <a id="94" href="/lia/part5/AExp/" class="Module">part5.AExp</a> <a id="105" class="Keyword">where</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="/lia/part0/index/" class="Module">part0.index</a> <a id="135" class="Keyword">hiding</a> <a id="142" class="Symbol">(</a><a id="143" href="/lia/part0/Naturals/#6954" class="Datatype">AExp</a><a id="147" class="Symbol">;</a> <a id="149" href="/lia/part0/Naturals/#7065" class="Function Operator">A⟦_⟧</a><a id="153" class="Symbol">;</a> <a id="155" href="/lia/part0/List/#23605" class="Function Operator">_≈_</a><a id="158" class="Symbol">)</a> <a id="160" class="Keyword">renaming</a> <a id="169" class="Symbol">(</a><a id="170" href="/lia/part0/Naturals/#266" class="Primitive Operator">_+_</a> <a id="174" class="Symbol">to</a> <a id="Nat._+_"></a><a id="177" href="/lia/part5/AExp/#177" class="Primitive Operator">_+ℕ_</a><a id="181" class="Symbol">;</a> <a id="183" href="/lia/part0/Naturals/#288" class="Primitive Operator">_*_</a> <a id="187" class="Symbol">to</a> <a id="Nat._*_"></a><a id="190" href="/lia/part5/AExp/#190" class="Primitive Operator">_·ℕ_</a><a id="194" class="Symbol">)</a> <a id="196" class="Keyword">public</a></pre>

<h1 id="arithmetic-expressions">
<a class="anchor" href="#arithmetic-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arithmetic expressions</h1>

<p>We develop an eager denotational and operational semantics for a simple
language of arithmetic expressions, and we prove that they agree.</p>

<h2 id="variables">
<a class="anchor" href="#variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variables</h2>

<p>We represent <em>variable names</em> as natural Number. Any countable domain
with decidable equality (such as strings) would work here</p>

<pre class="Agda"><a id="VarName"></a><a id="520" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="528" class="Symbol">=</a> <a id="530" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="x₀"></a><a id="533" href="/lia/part5/AExp/#533" class="Function">x₀</a> <a id="536" class="Symbol">:</a> <a id="538" href="/lia/part5/AExp/#520" class="Function">VarName</a>
<a id="546" href="/lia/part5/AExp/#533" class="Function">x₀</a> <a id="549" class="Symbol">=</a> <a id="551" class="Number">0</a>

<a id="554" class="Keyword">private</a> <a id="562" class="Keyword">variable</a> <a id="571" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="573" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="575" href="/lia/part5/AExp/#575" class="Generalizable">z</a> <a id="577" class="Symbol">:</a> <a id="579" href="/lia/part5/AExp/#520" class="Function">VarName</a></pre>

<h2 id="syntax-of-expressions">
<a class="anchor" href="#syntax-of-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax of expressions</h2>

<p>We define a minimalistic language of arithmetic expressions comprising
variables and a let assignment construct.</p>

<pre class="Agda"><a id="736" class="Keyword">data</a> <a id="AExp"></a><a id="741" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="746" class="Symbol">:</a> <a id="748" class="PrimitiveType">Set</a> <a id="752" class="Keyword">where</a>
  <a id="AExp.Num"></a><a id="760" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="764" class="Symbol">:</a> <a id="766" class="Symbol">(</a><a id="767" href="/lia/part5/AExp/#767" class="Bound">n</a> <a id="769" class="Symbol">:</a> <a id="771" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="772" class="Symbol">)</a> <a id="774" class="Symbol">→</a> <a id="776" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
  <a id="AExp.Var"></a><a id="783" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="787" class="Symbol">:</a> <a id="789" class="Symbol">(</a><a id="790" href="/lia/part5/AExp/#790" class="Bound">x</a> <a id="792" class="Symbol">:</a> <a id="794" href="/lia/part5/AExp/#520" class="Function">VarName</a><a id="801" class="Symbol">)</a> <a id="803" class="Symbol">→</a> <a id="805" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
  <a id="AExp.Add"></a><a id="812" href="/lia/part5/AExp/#812" class="InductiveConstructor">Add</a> <a id="816" class="Symbol">:</a> <a id="818" class="Symbol">(</a><a id="819" href="/lia/part5/AExp/#819" class="Bound">e</a> <a id="821" href="/lia/part5/AExp/#821" class="Bound">f</a> <a id="823" class="Symbol">:</a> <a id="825" href="/lia/part5/AExp/#741" class="Datatype">AExp</a><a id="829" class="Symbol">)</a> <a id="831" class="Symbol">→</a> <a id="833" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
  <a id="AExp.Mul"></a><a id="840" href="/lia/part5/AExp/#840" class="InductiveConstructor">Mul</a> <a id="844" class="Symbol">:</a> <a id="846" class="Symbol">(</a><a id="847" href="/lia/part5/AExp/#847" class="Bound">e</a> <a id="849" href="/lia/part5/AExp/#849" class="Bound">f</a> <a id="851" class="Symbol">:</a> <a id="853" href="/lia/part5/AExp/#741" class="Datatype">AExp</a><a id="857" class="Symbol">)</a> <a id="859" class="Symbol">→</a> <a id="861" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
  <a id="AExp.Let"></a><a id="868" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="872" class="Symbol">:</a> <a id="874" class="Symbol">(</a><a id="875" href="/lia/part5/AExp/#875" class="Bound">x</a> <a id="877" class="Symbol">:</a> <a id="879" href="/lia/part5/AExp/#520" class="Function">VarName</a><a id="886" class="Symbol">)</a> <a id="888" class="Symbol">(</a><a id="889" href="/lia/part5/AExp/#889" class="Bound">e</a> <a id="891" href="/lia/part5/AExp/#891" class="Bound">f</a> <a id="893" class="Symbol">:</a> <a id="895" href="/lia/part5/AExp/#741" class="Datatype">AExp</a><a id="899" class="Symbol">)</a> <a id="901" class="Symbol">→</a> <a id="903" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>

<a id="909" class="Keyword">private</a>
  <a id="919" class="Keyword">variable</a>
    <a id="932" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="934" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="937" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="939" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="942" href="/lia/part5/AExp/#942" class="Generalizable">g</a> <a id="944" class="Symbol">:</a> <a id="946" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
    <a id="955" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="957" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="959" class="Symbol">:</a> <a id="961" href="/lia/part0/Naturals/#301" class="Function">ℕ</a></pre>

<p>For example, the following expression adds one to a variable (called
10). This is pure syntax so far, no calculation is being performed.</p>

<pre class="Agda"><a id="add-one"></a><a id="1110" href="/lia/part5/AExp/#1110" class="Function">add-one</a> <a id="1118" class="Symbol">:</a> <a id="1120" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
<a id="1125" href="/lia/part5/AExp/#1110" class="Function">add-one</a> <a id="1133" class="Symbol">=</a> <a id="1135" href="/lia/part5/AExp/#812" class="InductiveConstructor">Add</a> <a id="1139" class="Symbol">(</a><a id="1140" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="1144" class="Number">10</a><a id="1146" class="Symbol">)</a> <a id="1148" class="Symbol">(</a><a id="1149" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="1153" class="Number">1</a><a id="1154" class="Symbol">)</a></pre>
<pre class="Agda"><a id="1165" class="Keyword">pattern</a> <a id="$_"></a><a id="1173" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$_</a> <a id="1176" href="/lia/part5/AExp/#1184" class="Bound">n</a> <a id="1178" class="Symbol">=</a> <a id="1180" class="InductiveConstructor">Num</a> <a id="1184" href="/lia/part5/AExp/#1184" class="Bound">n</a>
<a id="1186" class="Keyword">pattern</a> <a id="`_"></a><a id="1194" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`_</a> <a id="1197" href="/lia/part5/AExp/#1205" class="Bound">x</a> <a id="1199" class="Symbol">=</a> <a id="1201" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="1205" href="/lia/part5/AExp/#1205" class="Bound">x</a>
<a id="1207" class="Keyword">pattern</a> <a id="_+_"></a><a id="1215" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">_+_</a> <a id="1219" href="/lia/part5/AExp/#1229" class="Bound">x</a> <a id="1221" href="/lia/part5/AExp/#1231" class="Bound">y</a> <a id="1223" class="Symbol">=</a> <a id="1225" href="/lia/part5/AExp/#812" class="InductiveConstructor">Add</a> <a id="1229" href="/lia/part5/AExp/#1229" class="Bound">x</a> <a id="1231" href="/lia/part5/AExp/#1231" class="Bound">y</a>
<a id="1233" class="Keyword">pattern</a> <a id="_·_"></a><a id="1241" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">_·_</a> <a id="1245" href="/lia/part5/AExp/#1255" class="Bound">x</a> <a id="1247" href="/lia/part5/AExp/#1257" class="Bound">y</a> <a id="1249" class="Symbol">=</a> <a id="1251" href="/lia/part5/AExp/#840" class="InductiveConstructor">Mul</a> <a id="1255" href="/lia/part5/AExp/#1255" class="Bound">x</a> <a id="1257" href="/lia/part5/AExp/#1257" class="Bound">y</a>

<a id="1260" class="Keyword">infix</a> <a id="1266" class="Number">50</a> <a id="1269" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$_</a> <a id="1272" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`_</a>
<a id="1275" class="Keyword">infixr</a> <a id="1282" class="Number">30</a> <a id="1285" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">_·_</a>
<a id="1289" class="Keyword">infixl</a> <a id="1296" class="Number">25</a> <a id="1299" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">_+_</a></pre>
<pre class="Agda"><a id="add-one′"></a><a id="1312" href="/lia/part5/AExp/#1312" class="Function">add-one′</a> <a id="1321" class="Symbol">:</a> <a id="1323" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>
<a id="1328" href="/lia/part5/AExp/#1312" class="Function">add-one′</a> <a id="1337" class="Symbol">=</a> <a id="1339" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="1341" class="Number">10</a> <a id="1344" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="1346" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="1348" class="Number">1</a></pre>

<h2 id="environments">
<a class="anchor" href="#environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environments</h2>

<p>In order to represent the value of free variables, we use environments.</p>

<pre class="Agda"><a id="Env"></a><a id="1449" href="/lia/part5/AExp/#1449" class="Function">Env</a> <a id="1453" class="Symbol">=</a> <a id="1455" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="1463" class="Symbol">→</a> <a id="1465" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="1468" class="Keyword">private</a> <a id="1476" class="Keyword">variable</a> <a id="1485" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="1487" class="Symbol">:</a> <a id="1489" href="/lia/part5/AExp/#1449" class="Function">Env</a></pre>

<p>The following environment assigns value <code class="language-plaintext highlighter-rouge">200</code> to the variable named
<code class="language-plaintext highlighter-rouge">10</code>, and value <code class="language-plaintext highlighter-rouge">40</code> to every other variable.</p>

<pre class="Agda"><a id="ϱ0"></a><a id="1617" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="1620" class="Symbol">:</a> <a id="1622" href="/lia/part5/AExp/#1449" class="Function">Env</a>
<a id="1626" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="1629" class="Number">10</a> <a id="1632" class="Symbol">=</a> <a id="1634" class="Number">200</a>
<a id="1638" href="/lia/part5/AExp/#1617" class="CatchallClause Function">ϱ0</a><a id="1640" class="CatchallClause"> </a><a id="1641" class="CatchallClause Symbol">_</a> <a id="1643" class="Symbol">=</a> <a id="1645" class="Number">40</a></pre>

<h1 id="denotational-semantics">
<a class="anchor" href="#denotational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h1>

<pre class="Agda"><a id="1683" class="Keyword">infix</a> <a id="1689" class="Number">15</a> <a id="1692" href="/lia/part5/AExp/#1711" class="Function Operator">⟦_⟧_</a> <a id="1697" href="/lia/part5/AExp/#1872" class="Function Operator">A⟦_⟧_</a>
<a id="1703" class="Keyword">private</a> <a id="⟦_⟧_"></a><a id="1711" href="/lia/part5/AExp/#1711" class="Function Operator">⟦_⟧_</a> <a id="1716" class="Symbol">:</a> <a id="1718" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="1723" class="Symbol">→</a> <a id="1725" href="/lia/part5/AExp/#1449" class="Function">Env</a> <a id="1729" class="Symbol">→</a> <a id="1731" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="1733" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1735" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="1737" href="/lia/part5/AExp/#1737" class="Bound">n</a> <a id="1739" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1741" href="/lia/part5/AExp/#1741" class="Bound">ϱ</a> <a id="1743" class="Symbol">=</a> <a id="1745" href="/lia/part5/AExp/#1737" class="Bound">n</a>
<a id="1747" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1749" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="1751" href="/lia/part5/AExp/#1751" class="Bound">x</a> <a id="1753" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1755" href="/lia/part5/AExp/#1755" class="Bound">ϱ</a> <a id="1757" class="Symbol">=</a> <a id="1759" href="/lia/part5/AExp/#1755" class="Bound">ϱ</a> <a id="1761" href="/lia/part5/AExp/#1751" class="Bound">x</a>
<a id="1763" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1765" href="/lia/part5/AExp/#1765" class="Bound">e</a> <a id="1767" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="1769" href="/lia/part5/AExp/#1769" class="Bound">f</a> <a id="1771" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1773" href="/lia/part5/AExp/#1773" class="Bound">ϱ</a> <a id="1775" class="Symbol">=</a> <a id="1777" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1779" href="/lia/part5/AExp/#1765" class="Bound">e</a> <a id="1781" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1783" href="/lia/part5/AExp/#1773" class="Bound">ϱ</a> <a id="1785" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="1788" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1790" href="/lia/part5/AExp/#1769" class="Bound">f</a> <a id="1792" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1794" href="/lia/part5/AExp/#1773" class="Bound">ϱ</a>
<a id="1796" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1798" href="/lia/part5/AExp/#1798" class="Bound">e</a> <a id="1800" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="1802" href="/lia/part5/AExp/#1802" class="Bound">f</a> <a id="1804" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1806" href="/lia/part5/AExp/#1806" class="Bound">ϱ</a> <a id="1808" class="Symbol">=</a> <a id="1810" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1812" href="/lia/part5/AExp/#1798" class="Bound">e</a> <a id="1814" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1816" href="/lia/part5/AExp/#1806" class="Bound">ϱ</a> <a id="1818" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="1821" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1823" href="/lia/part5/AExp/#1802" class="Bound">f</a> <a id="1825" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1827" href="/lia/part5/AExp/#1806" class="Bound">ϱ</a>
<a id="1829" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1831" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="1835" href="/lia/part5/AExp/#1835" class="Bound">x</a> <a id="1837" href="/lia/part5/AExp/#1837" class="Bound">e</a> <a id="1839" href="/lia/part5/AExp/#1839" class="Bound">f</a> <a id="1841" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1843" href="/lia/part5/AExp/#1843" class="Bound">ϱ</a> <a id="1845" class="Symbol">=</a> <a id="1847" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1849" href="/lia/part5/AExp/#1839" class="Bound">f</a> <a id="1851" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1853" href="/lia/part5/AExp/#1843" class="Bound">ϱ</a> <a id="1855" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="1857" href="/lia/part5/AExp/#1835" class="Bound">x</a> <a id="1859" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="1861" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="1863" href="/lia/part5/AExp/#1837" class="Bound">e</a> <a id="1865" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="1867" href="/lia/part5/AExp/#1843" class="Bound">ϱ</a> <a id="1869" href="/lia/part0/Functions/#568" class="Function Operator">]</a>

<a id="A⟦_⟧_"></a><a id="1872" href="/lia/part5/AExp/#1872" class="Function Operator">A⟦_⟧_</a> <a id="1878" class="Symbol">=</a> <a id="1880" href="/lia/part5/AExp/#1711" class="Function Operator">⟦_⟧_</a></pre>

<p>With our denotational semantics for expressions we can check (by
computation) the value of concrete expressions.</p>

<pre class="Agda"><a id="2008" href="/lia/part5/AExp/#2008" class="Function">_</a> <a id="2010" class="Symbol">:</a> <a id="2012" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="2014" href="/lia/part5/AExp/#1110" class="Function">add-one</a> <a id="2022" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="2024" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="2027" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2029" class="Number">201</a>
<a id="2033" class="Symbol">_</a> <a id="2035" class="Symbol">=</a> <a id="2037" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h1 id="small-steps-operational-semantics">
<a class="anchor" href="#small-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h1>

<p>We use global environments and eager semantics.</p>

<pre class="Agda"><a id="2137" class="Keyword">infix</a> <a id="2143" class="Number">4</a> <a id="2145" href="/lia/part5/AExp/#2156" class="Datatype Operator">_⊢_↝_</a>
<a id="2151" class="Keyword">data</a> <a id="_⊢_↝_"></a><a id="2156" href="/lia/part5/AExp/#2156" class="Datatype Operator">_⊢_↝_</a> <a id="2162" class="Symbol">:</a> <a id="2164" href="/lia/part5/AExp/#1449" class="Function">Env</a> <a id="2168" class="Symbol">→</a> <a id="2170" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="2175" class="Symbol">→</a> <a id="2177" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="2182" class="Symbol">→</a> <a id="2184" class="PrimitiveType">Set</a> <a id="2188" class="Keyword">where</a>

  <a id="_⊢_↝_.↝-Var"></a><a id="2197" href="/lia/part5/AExp/#2197" class="InductiveConstructor">↝-Var</a> <a id="2203" class="Symbol">:</a> <a id="2205" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2207" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2209" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="2211" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2213" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2215" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2217" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2219" href="/lia/part5/AExp/#571" class="Generalizable">x</a>

  <a id="_⊢_↝_.↝-Add-stop"></a><a id="2224" href="/lia/part5/AExp/#2224" class="InductiveConstructor">↝-Add-stop</a> <a id="2235" class="Symbol">:</a>
    <a id="2241" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2243" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2245" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2247" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="2249" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="2251" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2253" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="2255" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2257" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2259" class="Symbol">(</a><a id="2260" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="2262" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="2265" href="/lia/part5/AExp/#957" class="Generalizable">n</a><a id="2266" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Add-left"></a><a id="2271" href="/lia/part5/AExp/#2271" class="InductiveConstructor">↝-Add-left</a> <a id="2282" class="Symbol">:</a>
    <a id="2288" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2290" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2292" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2294" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2296" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2299" class="Symbol">→</a>
    <a id="2305" class="Comment">------------------</a>
    <a id="2328" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2330" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2332" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2334" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="2336" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2338" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2340" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2343" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="2345" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Add-right"></a><a id="2350" href="/lia/part5/AExp/#2350" class="InductiveConstructor">↝-Add-right</a> <a id="2362" class="Symbol">:</a>
    <a id="2368" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2370" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2372" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2374" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2376" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="2379" class="Symbol">→</a>
    <a id="2385" class="Comment">------------------</a>
    <a id="2408" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2410" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2412" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2414" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="2416" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2418" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2420" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2422" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="2424" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Mul-stop"></a><a id="2430" href="/lia/part5/AExp/#2430" class="InductiveConstructor">↝-Mul-stop</a> <a id="2441" class="Symbol">:</a>
    <a id="2447" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2449" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2451" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2453" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="2455" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="2457" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2459" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="2461" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2463" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2465" class="Symbol">(</a><a id="2466" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="2468" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="2471" href="/lia/part5/AExp/#957" class="Generalizable">n</a><a id="2472" class="Symbol">)</a>

  <a id="_⊢_↝_.↝-Mul-left"></a><a id="2477" href="/lia/part5/AExp/#2477" class="InductiveConstructor">↝-Mul-left</a> <a id="2488" class="Symbol">:</a>
    <a id="2494" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2496" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2498" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2500" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2502" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2505" class="Symbol">→</a>
    <a id="2511" class="Comment">------------------</a>
    <a id="2534" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2536" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2538" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2540" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="2542" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2544" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2546" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2549" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="2551" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

  <a id="_⊢_↝_.↝-Mul-right"></a><a id="2556" href="/lia/part5/AExp/#2556" class="InductiveConstructor">↝-Mul-right</a> <a id="2568" class="Symbol">:</a>
    <a id="2574" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2576" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2578" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2580" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2582" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="2585" class="Symbol">→</a>
    <a id="2591" class="Comment">------------------</a>
    <a id="2614" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2616" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2618" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2620" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="2622" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2624" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2626" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2628" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="2630" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-stop"></a><a id="2636" href="/lia/part5/AExp/#2636" class="InductiveConstructor">↝-Let-stop</a> <a id="2647" class="Symbol">:</a>
    <a id="2653" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2655" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2657" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="2661" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2663" class="Symbol">(</a><a id="2664" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2666" href="/lia/part5/AExp/#955" class="Generalizable">m</a><a id="2667" class="Symbol">)</a> <a id="2669" class="Symbol">(</a><a id="2670" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2672" href="/lia/part5/AExp/#957" class="Generalizable">n</a><a id="2673" class="Symbol">)</a> <a id="2675" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2677" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2679" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

  <a id="_⊢_↝_.↝-Let-1"></a><a id="2684" href="/lia/part5/AExp/#2684" class="InductiveConstructor">↝-Let-1</a> <a id="2692" class="Symbol">:</a>
    <a id="2698" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2700" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="2702" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2704" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="2706" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="2708" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="2710" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2712" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2714" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2716" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="2719" class="Symbol">→</a>
    <a id="2725" class="Comment">----------------------------------</a>
    <a id="2764" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2766" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2768" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="2772" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2774" class="Symbol">(</a><a id="2775" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2777" href="/lia/part5/AExp/#955" class="Generalizable">m</a><a id="2778" class="Symbol">)</a> <a id="2780" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2782" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2784" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="2788" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2790" class="Symbol">(</a><a id="2791" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="2793" href="/lia/part5/AExp/#955" class="Generalizable">m</a><a id="2794" class="Symbol">)</a> <a id="2796" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

  <a id="_⊢_↝_.↝-Let-2"></a><a id="2802" href="/lia/part5/AExp/#2802" class="InductiveConstructor">↝-Let-2</a> <a id="2810" class="Symbol">:</a>
    <a id="2816" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2818" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2820" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2822" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2824" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2827" class="Symbol">→</a>
    <a id="2833" class="Comment">--------------------------</a>
    <a id="2864" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2866" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2868" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="2872" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2874" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2876" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2878" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2880" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="2884" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="2886" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="2889" href="/lia/part5/AExp/#937" class="Generalizable">f</a></pre>

<h2 id="preservation">
<a class="anchor" href="#preservation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preservation</h2>

<pre class="Agda"><a id="preservation"></a><a id="2917" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="2930" class="Symbol">:</a>
  <a id="2934" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2936" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="2938" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2940" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="2942" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2944" class="Symbol">→</a>
  <a id="2948" class="Comment">-----------------</a>
  <a id="2968" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="2970" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="2972" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="2974" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="2976" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2978" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="2980" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="2982" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="2984" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a>

<a id="2987" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3000" href="/lia/part5/AExp/#2197" class="InductiveConstructor">↝-Var</a> <a id="3006" class="Symbol">=</a> <a id="3008" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="3014" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3027" href="/lia/part5/AExp/#2224" class="InductiveConstructor">↝-Add-stop</a> <a id="3038" class="Symbol">=</a> <a id="3040" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3045" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3058" class="Symbol">(</a><a id="3059" href="/lia/part5/AExp/#2271" class="InductiveConstructor">↝-Add-left</a> <a id="3070" href="/lia/part5/AExp/#3070" class="Bound">step</a><a id="3074" class="Symbol">)</a> <a id="3076" class="Keyword">rewrite</a> <a id="3084" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3097" href="/lia/part5/AExp/#3070" class="Bound">step</a> <a id="3102" class="Symbol">=</a> <a id="3104" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3109" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3122" class="Symbol">(</a><a id="3123" href="/lia/part5/AExp/#2350" class="InductiveConstructor">↝-Add-right</a> <a id="3135" href="/lia/part5/AExp/#3135" class="Bound">step</a><a id="3139" class="Symbol">)</a> <a id="3141" class="Keyword">rewrite</a> <a id="3149" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3162" href="/lia/part5/AExp/#3135" class="Bound">step</a> <a id="3167" class="Symbol">=</a> <a id="3169" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="3175" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3188" href="/lia/part5/AExp/#2430" class="InductiveConstructor">↝-Mul-stop</a> <a id="3199" class="Symbol">=</a> <a id="3201" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3206" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3219" class="Symbol">(</a><a id="3220" href="/lia/part5/AExp/#2477" class="InductiveConstructor">↝-Mul-left</a> <a id="3231" href="/lia/part5/AExp/#3231" class="Bound">step</a><a id="3235" class="Symbol">)</a> <a id="3237" class="Keyword">rewrite</a> <a id="3245" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3258" href="/lia/part5/AExp/#3231" class="Bound">step</a> <a id="3263" class="Symbol">=</a> <a id="3265" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3270" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3283" class="Symbol">(</a><a id="3284" href="/lia/part5/AExp/#2556" class="InductiveConstructor">↝-Mul-right</a> <a id="3296" href="/lia/part5/AExp/#3296" class="Bound">step</a><a id="3300" class="Symbol">)</a> <a id="3302" class="Keyword">rewrite</a> <a id="3310" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3323" href="/lia/part5/AExp/#3296" class="Bound">step</a> <a id="3328" class="Symbol">=</a> <a id="3330" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="3336" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3349" href="/lia/part5/AExp/#2636" class="InductiveConstructor">↝-Let-stop</a> <a id="3360" class="Symbol">=</a> <a id="3362" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3367" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3380" class="Symbol">(</a><a id="3381" href="/lia/part5/AExp/#2684" class="InductiveConstructor">↝-Let-1</a> <a id="3389" href="/lia/part5/AExp/#3389" class="Bound">step</a><a id="3393" class="Symbol">)</a> <a id="3395" class="Keyword">rewrite</a> <a id="3403" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3416" href="/lia/part5/AExp/#3389" class="Bound">step</a> <a id="3421" class="Symbol">=</a> <a id="3423" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3428" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3441" class="Symbol">(</a><a id="3442" href="/lia/part5/AExp/#2802" class="InductiveConstructor">↝-Let-2</a> <a id="3450" href="/lia/part5/AExp/#3450" class="Bound">step</a><a id="3454" class="Symbol">)</a> <a id="3456" class="Keyword">rewrite</a> <a id="3464" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="3477" href="/lia/part5/AExp/#3450" class="Bound">step</a> <a id="3482" class="Symbol">=</a> <a id="3484" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="transitive-closure">
<a class="anchor" href="#transitive-closure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transitive closure</h2>

<p>We define the transitive closure of the small-step operational
semantics.</p>

<pre class="Agda"><a id="3596" class="Keyword">data</a> <a id="_⊢_↝*_"></a><a id="3601" href="/lia/part5/AExp/#3601" class="Datatype Operator">_⊢_↝*_</a> <a id="3608" class="Symbol">:</a> <a id="3610" href="/lia/part5/AExp/#1449" class="Function">Env</a> <a id="3614" class="Symbol">→</a> <a id="3616" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="3621" class="Symbol">→</a> <a id="3623" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="3628" class="Symbol">→</a> <a id="3630" class="PrimitiveType">Set</a> <a id="3634" class="Keyword">where</a>

    <a id="_⊢_↝*_.stop"></a><a id="3645" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="3650" class="Symbol">:</a> <a id="3652" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3654" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3656" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="3658" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3661" href="/lia/part5/AExp/#932" class="Generalizable">e</a>

    <a id="_⊢_↝*_.one"></a><a id="3668" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="3672" class="Symbol">:</a> <a id="3674" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3676" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="3678" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="3680" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="3682" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="3684" class="Symbol">→</a>
          <a id="3696" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3698" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3700" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="3702" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3705" href="/lia/part5/AExp/#942" class="Generalizable">g</a> <a id="3707" class="Symbol">→</a>
          <a id="3719" class="Comment">----------</a>
          <a id="3740" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3742" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3744" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="3746" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3749" href="/lia/part5/AExp/#942" class="Generalizable">g</a></pre>

<p>We can indeed show that <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> is transitive with a standard
induction.</p>

<pre class="Agda"><a id="↝*-trans"></a><a id="3835" href="/lia/part5/AExp/#3835" class="Function">↝*-trans</a> <a id="3844" class="Symbol">:</a>
  <a id="3848" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3850" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3852" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="3854" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3857" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="3859" class="Symbol">→</a>
  <a id="3863" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3865" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3867" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="3869" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3872" href="/lia/part5/AExp/#942" class="Generalizable">g</a> <a id="3874" class="Symbol">→</a>
  <a id="3878" class="Comment">----------</a>
  <a id="3891" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="3893" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="3895" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="3897" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="3900" href="/lia/part5/AExp/#942" class="Generalizable">g</a>

<a id="3903" href="/lia/part5/AExp/#3835" class="Function">↝*-trans</a> <a id="3912" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="3917" href="/lia/part5/AExp/#3917" class="Bound">δ</a> <a id="3919" class="Symbol">=</a> <a id="3921" href="/lia/part5/AExp/#3917" class="Bound">δ</a>
<a id="3923" href="/lia/part5/AExp/#3835" class="Function">↝*-trans</a> <a id="3932" class="Symbol">(</a><a id="3933" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="3937" href="/lia/part5/AExp/#3937" class="Bound">step</a> <a id="3942" href="/lia/part5/AExp/#3942" class="Bound">δ₁</a><a id="3944" class="Symbol">)</a> <a id="3946" href="/lia/part5/AExp/#3946" class="Bound">δ₂</a> <a id="3949" class="Symbol">=</a> <a id="3951" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="3955" href="/lia/part5/AExp/#3937" class="Bound">step</a> <a id="3960" class="Symbol">(</a><a id="3961" href="/lia/part5/AExp/#3835" class="Function">↝*-trans</a> <a id="3970" href="/lia/part5/AExp/#3942" class="Bound">δ₁</a> <a id="3973" href="/lia/part5/AExp/#3946" class="Bound">δ₂</a><a id="3975" class="Symbol">)</a></pre>

<p>An easy induction based on <a href="#preservation"><code class="language-plaintext highlighter-rouge">preservation</code></a> shows that
the denotational semantics is preserved by the transitive closure of the
small-step operational semantics.</p>

<pre class="Agda"><a id="preservation*"></a><a id="4151" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="4165" class="Symbol">:</a>
  <a id="4169" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="4171" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="4173" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="4175" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="4178" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="4180" class="Symbol">→</a>
  <a id="4184" class="Comment">-----------------</a>
  <a id="4204" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4206" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="4208" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4210" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="4212" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4214" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4216" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="4218" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4220" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a>

<a id="4223" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="4237" class="Symbol">{</a><a id="4238" href="/lia/part5/AExp/#4238" class="Bound">ϱ</a><a id="4239" class="Symbol">}</a> <a id="4241" class="Symbol">{</a><a id="4242" href="/lia/part5/AExp/#4242" class="Bound">e</a><a id="4243" class="Symbol">}</a> <a id="4245" class="Symbol">{</a><a id="4246" class="DottedPattern Symbol">.</a><a id="4247" href="/lia/part5/AExp/#4242" class="DottedPattern Bound">e</a><a id="4248" class="Symbol">}</a> <a id="4250" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="4255" class="Symbol">=</a> <a id="4257" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="4262" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="4276" class="Symbol">{</a><a id="4277" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a><a id="4278" class="Symbol">}</a> <a id="4280" class="Symbol">{</a><a id="4281" href="/lia/part5/AExp/#4281" class="Bound">e</a><a id="4282" class="Symbol">}</a> <a id="4284" class="Symbol">{</a><a id="4285" href="/lia/part5/AExp/#4285" class="Bound">g</a><a id="4286" class="Symbol">}</a> <a id="4288" class="Symbol">(</a><a id="4289" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="4293" class="Symbol">{</a><a id="4294" class="Argument">f</a> <a id="4296" class="Symbol">=</a> <a id="4298" href="/lia/part5/AExp/#4298" class="Bound">f</a><a id="4299" class="Symbol">}</a> <a id="4301" href="/lia/part5/AExp/#4301" class="Bound">step</a> <a id="4306" href="/lia/part5/AExp/#4306" class="Bound">der</a><a id="4309" class="Symbol">)</a> <a id="4311" class="Symbol">=</a>
    <a id="4317" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
        <a id="4331" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4333" href="/lia/part5/AExp/#4281" class="Bound">e</a> <a id="4335" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4337" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a> <a id="4339" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="4342" href="/lia/part5/AExp/#2917" class="Function">preservation</a> <a id="4355" class="Symbol">{</a><a id="4356" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a><a id="4357" class="Symbol">}</a> <a id="4359" class="Symbol">{</a><a id="4360" href="/lia/part5/AExp/#4281" class="Bound">e</a><a id="4361" class="Symbol">}</a> <a id="4363" class="Symbol">{</a><a id="4364" href="/lia/part5/AExp/#4298" class="Bound">f</a><a id="4365" class="Symbol">}</a> <a id="4367" href="/lia/part5/AExp/#4301" class="Bound">step</a> <a id="4372" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="4382" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4384" href="/lia/part5/AExp/#4298" class="Bound">f</a> <a id="4386" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4388" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a> <a id="4390" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="4393" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="4407" class="Symbol">{</a><a id="4408" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a><a id="4409" class="Symbol">}</a> <a id="4411" class="Symbol">{</a><a id="4412" href="/lia/part5/AExp/#4298" class="Bound">f</a><a id="4413" class="Symbol">}</a> <a id="4415" class="Symbol">{</a><a id="4416" href="/lia/part5/AExp/#4285" class="Bound">g</a><a id="4417" class="Symbol">}</a> <a id="4419" href="/lia/part5/AExp/#4306" class="Bound">der</a> <a id="4423" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
        <a id="4433" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4435" href="/lia/part5/AExp/#4285" class="Bound">g</a> <a id="4437" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4439" href="/lia/part5/AExp/#4277" class="Bound">ϱ</a>
    <a id="4445" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a></pre>

<p>This immediately implies that whenever the small-step semantics
terminates producing a number <code class="language-plaintext highlighter-rouge">m</code>, then this is the right result.</p>

<pre class="Agda"><a id="↝*-agree-⟦⟧"></a><a id="4587" href="/lia/part5/AExp/#4587" class="Function">↝*-agree-⟦⟧</a> <a id="4599" class="Symbol">:</a>
  <a id="4603" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="4605" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="4607" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="4609" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="4612" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="4614" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="4616" class="Symbol">→</a>
  <a id="4620" class="Comment">--------------</a>
  <a id="4637" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="4639" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4641" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="4643" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="4645" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="4647" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a>

<a id="4650" href="/lia/part5/AExp/#4587" class="Function">↝*-agree-⟦⟧</a> <a id="4662" href="/lia/part5/AExp/#4662" class="Bound">der</a> <a id="4666" class="Symbol">=</a> <a id="4668" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="4672" class="Symbol">(</a><a id="4673" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="4687" href="/lia/part5/AExp/#4662" class="Bound">der</a><a id="4690" class="Symbol">)</a></pre>

<h2 id="deterministic-values">
<a class="anchor" href="#deterministic-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deterministic values</h2>

<p>Notice that small-step semantics is a non-deterministic relation: In
general there may be several ways to reduce an expression (as witnessed
by the rules <code class="language-plaintext highlighter-rouge">↝-Add-left</code> and <code class="language-plaintext highlighter-rouge">↝-Add-right</code> for instance).</p>

<p>However, as an immediate consequence of preservation we have that if two
numerical values are eventually produced, then they necessarily are the
same number.</p>

<pre class="Agda"><a id="↝*-det"></a><a id="5086" href="/lia/part5/AExp/#5086" class="Function">↝*-det</a> <a id="5093" class="Symbol">:</a>
  <a id="5097" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5099" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5101" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5103" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5106" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="5110" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="5112" class="Symbol">→</a>
  <a id="5116" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5118" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5120" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5122" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5125" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="5129" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="5131" class="Symbol">→</a>
  <a id="5135" class="Comment">-----------------</a>
  <a id="5155" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="5157" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5159" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

<a id="5162" href="/lia/part5/AExp/#5086" class="Function">↝*-det</a> <a id="5169" href="/lia/part5/AExp/#5169" class="Bound">der1</a> <a id="5174" href="/lia/part5/AExp/#5174" class="Bound">der2</a> <a id="5179" class="Keyword">rewrite</a> <a id="5187" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="5191" class="Symbol">(</a><a id="5192" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="5206" href="/lia/part5/AExp/#5169" class="Bound">der1</a><a id="5210" class="Symbol">)</a> <a id="5212" class="Symbol">|</a> <a id="5214" href="/lia/part5/AExp/#4151" class="Function">preservation*</a> <a id="5228" href="/lia/part5/AExp/#5174" class="Bound">der2</a> <a id="5233" class="Symbol">=</a> <a id="5235" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<h2 id="congruence">
<a class="anchor" href="#congruence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Congruence</h2>

<p>We show that the transitive closure <code class="language-plaintext highlighter-rouge">_⊢_↝*_</code> respects subexpressions.</p>

<pre class="Agda"><a id="add-cong-1"></a><a id="5335" href="/lia/part5/AExp/#5335" class="Function">add-cong-1</a> <a id="5346" class="Symbol">:</a>
  <a id="5350" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5352" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5354" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5356" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5359" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="5362" class="Symbol">→</a>
  <a id="5366" class="Comment">-------------------</a>
  <a id="5388" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5390" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5392" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5394" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="5396" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5398" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5401" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="5404" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="5406" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

<a id="5409" href="/lia/part5/AExp/#5335" class="Function">add-cong-1</a> <a id="5420" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="5425" class="Symbol">=</a> <a id="5427" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="5432" href="/lia/part5/AExp/#5335" class="Function">add-cong-1</a> <a id="5443" class="Symbol">(</a><a id="5444" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5448" href="/lia/part5/AExp/#5448" class="Bound">x</a> <a id="5450" href="/lia/part5/AExp/#5450" class="Bound">d</a><a id="5451" class="Symbol">)</a> <a id="5453" class="Symbol">=</a> <a id="5455" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5459" class="Symbol">(</a><a id="5460" href="/lia/part5/AExp/#2271" class="InductiveConstructor">↝-Add-left</a> <a id="5471" href="/lia/part5/AExp/#5448" class="Bound">x</a><a id="5472" class="Symbol">)</a> <a id="5474" class="Symbol">(</a><a id="5475" href="/lia/part5/AExp/#5335" class="Function">add-cong-1</a> <a id="5486" href="/lia/part5/AExp/#5450" class="Bound">d</a><a id="5487" class="Symbol">)</a>

<a id="add-cong-2"></a><a id="5490" href="/lia/part5/AExp/#5490" class="Function">add-cong-2</a> <a id="5501" class="Symbol">:</a>
  <a id="5505" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5507" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5509" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5511" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5514" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="5517" class="Symbol">→</a>
  <a id="5521" class="Comment">-------------------</a>
  <a id="5543" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5545" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5547" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5549" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="5551" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5553" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5556" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5558" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="5560" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

<a id="5564" href="/lia/part5/AExp/#5490" class="Function">add-cong-2</a> <a id="5575" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="5580" class="Symbol">=</a> <a id="5582" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="5587" href="/lia/part5/AExp/#5490" class="Function">add-cong-2</a> <a id="5598" class="Symbol">(</a><a id="5599" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5603" href="/lia/part5/AExp/#5603" class="Bound">x</a> <a id="5605" href="/lia/part5/AExp/#5605" class="Bound">d</a><a id="5606" class="Symbol">)</a> <a id="5608" class="Symbol">=</a> <a id="5610" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5614" class="Symbol">(</a><a id="5615" href="/lia/part5/AExp/#2350" class="InductiveConstructor">↝-Add-right</a> <a id="5627" href="/lia/part5/AExp/#5603" class="Bound">x</a><a id="5628" class="Symbol">)</a> <a id="5630" class="Symbol">(</a><a id="5631" href="/lia/part5/AExp/#5490" class="Function">add-cong-2</a> <a id="5642" href="/lia/part5/AExp/#5605" class="Bound">d</a><a id="5643" class="Symbol">)</a>

<a id="mul-cong-1"></a><a id="5646" href="/lia/part5/AExp/#5646" class="Function">mul-cong-1</a> <a id="5657" class="Symbol">:</a>
  <a id="5661" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5663" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5665" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5667" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5670" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="5673" class="Symbol">→</a>
  <a id="5677" class="Comment">-------------------</a>
  <a id="5699" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5701" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5703" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5705" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="5707" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5709" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5712" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="5715" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="5717" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

<a id="5720" href="/lia/part5/AExp/#5646" class="Function">mul-cong-1</a> <a id="5731" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="5736" class="Symbol">=</a> <a id="5738" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="5743" href="/lia/part5/AExp/#5646" class="Function">mul-cong-1</a> <a id="5754" class="Symbol">(</a><a id="5755" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5759" href="/lia/part5/AExp/#5759" class="Bound">x</a> <a id="5761" href="/lia/part5/AExp/#5761" class="Bound">d</a><a id="5762" class="Symbol">)</a> <a id="5764" class="Symbol">=</a> <a id="5766" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5770" class="Symbol">(</a><a id="5771" href="/lia/part5/AExp/#2477" class="InductiveConstructor">↝-Mul-left</a> <a id="5782" href="/lia/part5/AExp/#5759" class="Bound">x</a><a id="5783" class="Symbol">)</a> <a id="5785" class="Symbol">(</a><a id="5786" href="/lia/part5/AExp/#5646" class="Function">mul-cong-1</a> <a id="5797" href="/lia/part5/AExp/#5761" class="Bound">d</a><a id="5798" class="Symbol">)</a>

<a id="mul-cong-2"></a><a id="5801" href="/lia/part5/AExp/#5801" class="Function">mul-cong-2</a> <a id="5812" class="Symbol">:</a>
  <a id="5816" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5818" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5820" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5822" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5825" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="5828" class="Symbol">→</a>
  <a id="5832" class="Comment">-------------------</a>
  <a id="5854" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5856" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5858" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5860" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="5862" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="5864" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5867" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5869" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="5871" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

<a id="5875" href="/lia/part5/AExp/#5801" class="Function">mul-cong-2</a> <a id="5886" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="5891" class="Symbol">=</a> <a id="5893" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="5898" href="/lia/part5/AExp/#5801" class="Function">mul-cong-2</a> <a id="5909" class="Symbol">(</a><a id="5910" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5914" href="/lia/part5/AExp/#5914" class="Bound">x</a> <a id="5916" href="/lia/part5/AExp/#5916" class="Bound">d</a><a id="5917" class="Symbol">)</a> <a id="5919" class="Symbol">=</a> <a id="5921" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="5925" class="Symbol">(</a><a id="5926" href="/lia/part5/AExp/#2556" class="InductiveConstructor">↝-Mul-right</a> <a id="5938" href="/lia/part5/AExp/#5914" class="Bound">x</a><a id="5939" class="Symbol">)</a> <a id="5941" class="Symbol">(</a><a id="5942" href="/lia/part5/AExp/#5801" class="Function">mul-cong-2</a> <a id="5953" href="/lia/part5/AExp/#5916" class="Bound">d</a><a id="5954" class="Symbol">)</a>

<a id="let-cong-1"></a><a id="5957" href="/lia/part5/AExp/#5957" class="Function">let-cong-1</a> <a id="5968" class="Symbol">:</a>
  <a id="5972" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="5974" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="5976" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="5978" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="5981" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="5984" class="Symbol">→</a>
  <a id="5988" class="Comment">----------------------------</a>
  <a id="6019" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="6021" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6023" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="6027" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="6029" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="6031" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="6033" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6036" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="6040" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="6042" href="/lia/part5/AExp/#934" class="Generalizable">e′</a> <a id="6045" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

<a id="6048" href="/lia/part5/AExp/#5957" class="Function">let-cong-1</a> <a id="6059" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="6064" class="Symbol">=</a> <a id="6066" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="6071" href="/lia/part5/AExp/#5957" class="Function">let-cong-1</a> <a id="6082" class="Symbol">(</a><a id="6083" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="6087" href="/lia/part5/AExp/#6087" class="Bound">x</a> <a id="6089" href="/lia/part5/AExp/#6089" class="Bound">d</a><a id="6090" class="Symbol">)</a> <a id="6092" class="Symbol">=</a> <a id="6094" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="6098" class="Symbol">(</a><a id="6099" href="/lia/part5/AExp/#2802" class="InductiveConstructor">↝-Let-2</a> <a id="6107" href="/lia/part5/AExp/#6087" class="Bound">x</a><a id="6108" class="Symbol">)</a> <a id="6110" class="Symbol">(</a><a id="6111" href="/lia/part5/AExp/#5957" class="Function">let-cong-1</a> <a id="6122" href="/lia/part5/AExp/#6089" class="Bound">d</a><a id="6123" class="Symbol">)</a>

<a id="let-cong-2"></a><a id="6126" href="/lia/part5/AExp/#6126" class="Function">let-cong-2</a> <a id="6137" class="Symbol">:</a>
  <a id="6141" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="6143" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="6145" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="6147" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="6149" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="6151" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="6153" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6155" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="6157" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6160" href="/lia/part5/AExp/#939" class="Generalizable">f′</a> <a id="6163" class="Symbol">→</a>
  <a id="6167" class="Comment">-----------------------------------</a>
  <a id="6205" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="6207" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6209" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="6213" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="6215" class="Symbol">(</a><a id="6216" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="6218" href="/lia/part5/AExp/#955" class="Generalizable">m</a><a id="6219" class="Symbol">)</a> <a id="6221" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="6223" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6226" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="6230" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="6232" class="Symbol">(</a><a id="6233" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="6235" href="/lia/part5/AExp/#955" class="Generalizable">m</a><a id="6236" class="Symbol">)</a> <a id="6238" href="/lia/part5/AExp/#939" class="Generalizable">f′</a>

<a id="6242" href="/lia/part5/AExp/#6126" class="Function">let-cong-2</a> <a id="6253" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="6258" class="Symbol">=</a> <a id="6260" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>
<a id="6265" href="/lia/part5/AExp/#6126" class="Function">let-cong-2</a> <a id="6276" class="Symbol">(</a><a id="6277" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="6281" href="/lia/part5/AExp/#6281" class="Bound">x</a> <a id="6283" href="/lia/part5/AExp/#6283" class="Bound">d</a><a id="6284" class="Symbol">)</a> <a id="6286" class="Symbol">=</a> <a id="6288" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="6292" class="Symbol">(</a><a id="6293" href="/lia/part5/AExp/#2684" class="InductiveConstructor">↝-Let-1</a> <a id="6301" href="/lia/part5/AExp/#6281" class="Bound">x</a><a id="6302" class="Symbol">)</a> <a id="6304" class="Symbol">(</a><a id="6305" href="/lia/part5/AExp/#6126" class="Function">let-cong-2</a> <a id="6316" href="/lia/part5/AExp/#6283" class="Bound">d</a><a id="6317" class="Symbol">)</a></pre>

<h2 id="relational-reasoning">
<a class="anchor" href="#relational-reasoning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relational reasoning</h2>

<p>We introduce some syntactic sugaring to conveniently write chains of
small steps.</p>

<pre class="Agda"><a id="6436" class="Keyword">infixr</a> <a id="6443" class="Number">2</a> <a id="6445" href="/lia/part5/AExp/#6483" class="Function Operator">_↝*⟨⟩_</a> <a id="6452" href="/lia/part5/AExp/#6550" class="Function Operator">_↝*⟨_⟩_</a> <a id="6460" href="/lia/part5/AExp/#6653" class="Function Operator">_↝⟨_⟩_</a> 
<a id="6468" class="Keyword">infix</a>  <a id="6475" class="Number">3</a> <a id="6477" href="/lia/part5/AExp/#6760" class="Function Operator">_↝*∎</a>

<a id="_↝*⟨⟩_"></a><a id="6483" href="/lia/part5/AExp/#6483" class="Function Operator">_↝*⟨⟩_</a> <a id="6490" class="Symbol">:</a> <a id="6492" class="Symbol">∀</a> <a id="6494" class="Symbol">{</a><a id="6495" href="/lia/part5/AExp/#6495" class="Bound">ϱ</a><a id="6496" class="Symbol">}</a> <a id="6498" href="/lia/part5/AExp/#6498" class="Bound">e</a> <a id="6500" class="Symbol">{</a><a id="6501" href="/lia/part5/AExp/#6501" class="Bound">f</a><a id="6502" class="Symbol">}</a> <a id="6504" class="Symbol">→</a> <a id="6506" href="/lia/part5/AExp/#6495" class="Bound">ϱ</a> <a id="6508" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6510" href="/lia/part5/AExp/#6498" class="Bound">e</a> <a id="6512" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6515" href="/lia/part5/AExp/#6501" class="Bound">f</a> <a id="6517" class="Symbol">→</a> <a id="6519" href="/lia/part5/AExp/#6495" class="Bound">ϱ</a> <a id="6521" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6523" href="/lia/part5/AExp/#6498" class="Bound">e</a> <a id="6525" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6528" href="/lia/part5/AExp/#6501" class="Bound">f</a>
<a id="6530" href="/lia/part5/AExp/#6530" class="Bound">e</a> <a id="6532" href="/lia/part5/AExp/#6483" class="Function Operator">↝*⟨⟩</a> <a id="6537" href="/lia/part5/AExp/#6537" class="Bound">e↝*f</a> <a id="6542" class="Symbol">=</a> <a id="6544" href="/lia/part5/AExp/#6537" class="Bound">e↝*f</a>

<a id="_↝*⟨_⟩_"></a><a id="6550" href="/lia/part5/AExp/#6550" class="Function Operator">_↝*⟨_⟩_</a> <a id="6558" class="Symbol">:</a> <a id="6560" class="Symbol">∀</a> <a id="6562" class="Symbol">{</a><a id="6563" href="/lia/part5/AExp/#6563" class="Bound">ϱ</a><a id="6564" class="Symbol">}</a> <a id="6566" href="/lia/part5/AExp/#6566" class="Bound">e</a> <a id="6568" class="Symbol">{</a><a id="6569" href="/lia/part5/AExp/#6569" class="Bound">f</a> <a id="6571" href="/lia/part5/AExp/#6571" class="Bound">g</a><a id="6572" class="Symbol">}</a> <a id="6574" class="Symbol">→</a> <a id="6576" href="/lia/part5/AExp/#6563" class="Bound">ϱ</a> <a id="6578" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6580" href="/lia/part5/AExp/#6566" class="Bound">e</a> <a id="6582" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6585" href="/lia/part5/AExp/#6569" class="Bound">f</a> <a id="6587" class="Symbol">→</a> <a id="6589" href="/lia/part5/AExp/#6563" class="Bound">ϱ</a> <a id="6591" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6593" href="/lia/part5/AExp/#6569" class="Bound">f</a> <a id="6595" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6598" href="/lia/part5/AExp/#6571" class="Bound">g</a> <a id="6600" class="Symbol">→</a> <a id="6602" href="/lia/part5/AExp/#6563" class="Bound">ϱ</a> <a id="6604" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6606" href="/lia/part5/AExp/#6566" class="Bound">e</a> <a id="6608" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6611" href="/lia/part5/AExp/#6571" class="Bound">g</a>
<a id="6613" href="/lia/part5/AExp/#6613" class="Bound">e</a> <a id="6615" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="6619" href="/lia/part5/AExp/#6619" class="Bound">e↝*f</a> <a id="6624" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a> <a id="6626" href="/lia/part5/AExp/#6626" class="Bound">f↝*g</a> <a id="6631" class="Symbol">=</a> <a id="6633" href="/lia/part5/AExp/#3835" class="Function">↝*-trans</a> <a id="6642" href="/lia/part5/AExp/#6619" class="Bound">e↝*f</a> <a id="6647" href="/lia/part5/AExp/#6626" class="Bound">f↝*g</a>

<a id="_↝⟨_⟩_"></a><a id="6653" href="/lia/part5/AExp/#6653" class="Function Operator">_↝⟨_⟩_</a> <a id="6660" class="Symbol">:</a> <a id="6662" class="Symbol">∀</a> <a id="6664" class="Symbol">{</a><a id="6665" href="/lia/part5/AExp/#6665" class="Bound">ϱ</a><a id="6666" class="Symbol">}</a> <a id="6668" href="/lia/part5/AExp/#6668" class="Bound">e</a> <a id="6670" class="Symbol">{</a><a id="6671" href="/lia/part5/AExp/#6671" class="Bound">f</a> <a id="6673" href="/lia/part5/AExp/#6673" class="Bound">g</a><a id="6674" class="Symbol">}</a> <a id="6676" class="Symbol">→</a> <a id="6678" href="/lia/part5/AExp/#6665" class="Bound">ϱ</a> <a id="6680" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="6682" href="/lia/part5/AExp/#6668" class="Bound">e</a> <a id="6684" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="6686" href="/lia/part5/AExp/#6671" class="Bound">f</a> <a id="6688" class="Symbol">→</a> <a id="6690" href="/lia/part5/AExp/#6665" class="Bound">ϱ</a> <a id="6692" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6694" href="/lia/part5/AExp/#6671" class="Bound">f</a> <a id="6696" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6699" href="/lia/part5/AExp/#6673" class="Bound">g</a> <a id="6701" class="Symbol">→</a> <a id="6703" href="/lia/part5/AExp/#6665" class="Bound">ϱ</a> <a id="6705" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6707" href="/lia/part5/AExp/#6668" class="Bound">e</a> <a id="6709" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6712" href="/lia/part5/AExp/#6673" class="Bound">g</a>
<a id="6714" href="/lia/part5/AExp/#6714" class="Bound">e</a> <a id="6716" href="/lia/part5/AExp/#6653" class="Function Operator">↝⟨</a> <a id="6719" href="/lia/part5/AExp/#6719" class="Bound">e↝f</a> <a id="6723" href="/lia/part5/AExp/#6653" class="Function Operator">⟩</a> <a id="6725" href="/lia/part5/AExp/#6725" class="Bound">f↝*g</a> <a id="6730" class="Symbol">=</a> <a id="6732" href="/lia/part5/AExp/#6714" class="Bound">e</a> <a id="6734" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="6738" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="6742" href="/lia/part5/AExp/#6719" class="Bound">e↝f</a> <a id="6746" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a> <a id="6751" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a> <a id="6753" href="/lia/part5/AExp/#6725" class="Bound">f↝*g</a> 

<a id="_↝*∎"></a><a id="6760" href="/lia/part5/AExp/#6760" class="Function Operator">_↝*∎</a> <a id="6765" class="Symbol">:</a> <a id="6767" class="Symbol">∀</a> <a id="6769" href="/lia/part5/AExp/#6769" class="Bound">e</a> <a id="6771" class="Symbol">→</a> <a id="6773" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="6775" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="6777" href="/lia/part5/AExp/#6769" class="Bound">e</a> <a id="6779" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="6782" href="/lia/part5/AExp/#6769" class="Bound">e</a>
<a id="6784" href="/lia/part5/AExp/#6784" class="Bound">e</a> <a id="6786" href="/lia/part5/AExp/#6760" class="Function Operator">↝*∎</a> <a id="6790" class="Symbol">=</a> <a id="6792" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a></pre>

<h2 id="exercise-termination-weak-normalisation">
<a class="anchor" href="#exercise-termination-weak-normalisation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Exercise</strong>: Termination (Weak normalisation)</h2>

<p>So far we have shown that the small-step semantics produces the right
result, <em>if it produces any result at all</em>. In fact, an operational
semantics that never reaches a Numerical value trivially satisfies this
condition.</p>

<p>We prove that the small step operational semantics can always reache
some numerical value after a finite number of steps. In other word, we
prove below that the rewrite is <em>weakly normalising</em>.</p>

<pre class="Agda"><a id="weak-normalisation"></a><a id="7274" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7293" class="Symbol">:</a> <a id="7295" class="Symbol">∀</a> <a id="7297" href="/lia/part5/AExp/#7297" class="Bound">e</a> <a id="7299" class="Symbol">→</a> <a id="7301" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="7303" href="/lia/part5/AExp/#3601" class="Datatype Operator">⊢</a> <a id="7305" href="/lia/part5/AExp/#7297" class="Bound">e</a> <a id="7307" href="/lia/part5/AExp/#3601" class="Datatype Operator">↝*</a> <a id="7310" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7312" class="Symbol">(</a><a id="7313" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7315" href="/lia/part5/AExp/#7297" class="Bound">e</a> <a id="7317" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7319" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a><a id="7320" class="Symbol">)</a>

<a id="7323" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7342" class="Symbol">(</a><a id="7343" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7345" href="/lia/part5/AExp/#7345" class="Bound">n</a><a id="7346" class="Symbol">)</a> <a id="7348" class="Symbol">=</a> <a id="7350" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>

<a id="7356" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7375" class="Symbol">(</a><a id="7376" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="7378" href="/lia/part5/AExp/#7378" class="Bound">x</a><a id="7379" class="Symbol">)</a> <a id="7381" class="Symbol">=</a> <a id="7383" href="/lia/part5/AExp/#3668" class="InductiveConstructor">one</a> <a id="7387" href="/lia/part5/AExp/#2197" class="InductiveConstructor">↝-Var</a> <a id="7393" href="/lia/part5/AExp/#3645" class="InductiveConstructor">stop</a>

<a id="7399" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7418" class="Symbol">{</a><a id="7419" href="/lia/part5/AExp/#7419" class="Bound">ϱ</a><a id="7420" class="Symbol">}</a> <a id="7422" class="Symbol">(</a><a id="7423" href="/lia/part5/AExp/#7423" class="Bound">e</a> <a id="7425" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="7427" href="/lia/part5/AExp/#7427" class="Bound">f</a><a id="7428" class="Symbol">)</a>
  <a id="7432" class="Keyword">with</a> <a id="7437" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7456" href="/lia/part5/AExp/#7423" class="Bound">e</a> <a id="7458" class="Symbol">|</a> <a id="7460" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7479" href="/lia/part5/AExp/#7427" class="Bound">f</a>
<a id="7481" class="Symbol">...</a> <a id="7485" class="Symbol">|</a> <a id="7487" href="/lia/part5/AExp/#7487" class="Bound">de</a> <a id="7490" class="Symbol">|</a> <a id="7492" href="/lia/part5/AExp/#7492" class="Bound">df</a> <a id="7495" class="Symbol">=</a> 
  <a id="7500" class="Bound">e</a> <a id="7502" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="7504" class="Bound">f</a> <a id="7506" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="7510" href="/lia/part5/AExp/#5335" class="Function">add-cong-1</a> <a id="7521" href="/lia/part5/AExp/#7487" class="Bound">de</a> <a id="7524" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
  <a id="7528" class="Symbol">(</a><a id="7529" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7531" class="Symbol">(</a><a id="7532" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7534" class="Bound">e</a> <a id="7536" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7538" class="Bound">ϱ</a><a id="7539" class="Symbol">))</a> <a id="7542" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="7544" class="Bound">f</a> <a id="7546" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="7550" href="/lia/part5/AExp/#5490" class="Function">add-cong-2</a> <a id="7561" href="/lia/part5/AExp/#7492" class="Bound">df</a> <a id="7564" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
  <a id="7568" class="Symbol">(</a><a id="7569" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7571" class="Symbol">(</a><a id="7572" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7574" class="Bound">e</a> <a id="7576" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7578" class="Bound">ϱ</a><a id="7579" class="Symbol">))</a> <a id="7582" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="7584" class="Symbol">(</a><a id="7585" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7587" class="Symbol">(</a><a id="7588" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7590" class="Bound">f</a> <a id="7592" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7594" class="Bound">ϱ</a><a id="7595" class="Symbol">))</a> <a id="7598" href="/lia/part5/AExp/#6653" class="Function Operator">↝⟨</a> <a id="7601" href="/lia/part5/AExp/#2224" class="InductiveConstructor">↝-Add-stop</a> <a id="7612" href="/lia/part5/AExp/#6653" class="Function Operator">⟩</a>
  <a id="7616" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7618" class="Symbol">(</a><a id="7619" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7621" class="Bound">e</a> <a id="7623" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7625" class="Bound">ϱ</a> <a id="7627" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="7630" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7632" class="Bound">f</a> <a id="7634" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7636" class="Bound">ϱ</a><a id="7637" class="Symbol">)</a>
  <a id="7641" href="/lia/part5/AExp/#6760" class="Function Operator">↝*∎</a>

<a id="7646" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7665" class="Symbol">{</a><a id="7666" href="/lia/part5/AExp/#7666" class="Bound">ϱ</a><a id="7667" class="Symbol">}</a> <a id="7669" class="Symbol">(</a><a id="7670" href="/lia/part5/AExp/#7670" class="Bound">e</a> <a id="7672" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="7674" href="/lia/part5/AExp/#7674" class="Bound">f</a><a id="7675" class="Symbol">)</a>
  <a id="7679" class="Keyword">with</a> <a id="7684" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7703" href="/lia/part5/AExp/#7670" class="Bound">e</a> <a id="7705" class="Symbol">|</a> <a id="7707" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7726" href="/lia/part5/AExp/#7674" class="Bound">f</a>
<a id="7728" class="Symbol">...</a> <a id="7732" class="Symbol">|</a> <a id="7734" href="/lia/part5/AExp/#7734" class="Bound">de</a> <a id="7737" class="Symbol">|</a> <a id="7739" href="/lia/part5/AExp/#7739" class="Bound">df</a> <a id="7742" class="Symbol">=</a> 
  <a id="7747" class="Bound">e</a> <a id="7749" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="7751" class="Bound">f</a> <a id="7753" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="7757" href="/lia/part5/AExp/#5646" class="Function">mul-cong-1</a> <a id="7768" href="/lia/part5/AExp/#7734" class="Bound">de</a> <a id="7771" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
  <a id="7775" class="Symbol">(</a><a id="7776" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7778" class="Symbol">(</a><a id="7779" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7781" class="Bound">e</a> <a id="7783" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7785" class="Bound">ϱ</a><a id="7786" class="Symbol">))</a> <a id="7789" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="7791" class="Bound">f</a> <a id="7793" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="7797" href="/lia/part5/AExp/#5801" class="Function">mul-cong-2</a> <a id="7808" href="/lia/part5/AExp/#7739" class="Bound">df</a> <a id="7811" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
  <a id="7815" class="Symbol">(</a><a id="7816" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7818" class="Symbol">(</a><a id="7819" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7821" class="Bound">e</a> <a id="7823" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7825" class="Bound">ϱ</a><a id="7826" class="Symbol">))</a> <a id="7829" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="7831" class="Symbol">(</a><a id="7832" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7834" class="Symbol">(</a><a id="7835" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7837" class="Bound">f</a> <a id="7839" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7841" class="Bound">ϱ</a><a id="7842" class="Symbol">))</a> <a id="7845" href="/lia/part5/AExp/#6653" class="Function Operator">↝⟨</a> <a id="7848" href="/lia/part5/AExp/#2430" class="InductiveConstructor">↝-Mul-stop</a> <a id="7859" href="/lia/part5/AExp/#6653" class="Function Operator">⟩</a>
  <a id="7863" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="7865" class="Symbol">(</a><a id="7866" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7868" class="Bound">e</a> <a id="7870" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7872" class="Bound">ϱ</a> <a id="7874" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="7877" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="7879" class="Bound">f</a> <a id="7881" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="7883" class="Bound">ϱ</a><a id="7884" class="Symbol">)</a>
  <a id="7888" href="/lia/part5/AExp/#6760" class="Function Operator">↝*∎</a>

<a id="7893" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7912" class="Symbol">{</a><a id="7913" href="/lia/part5/AExp/#7913" class="Bound">ϱ</a><a id="7914" class="Symbol">}</a> <a id="7916" class="Symbol">(</a><a id="7917" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="7921" href="/lia/part5/AExp/#7921" class="Bound">x</a> <a id="7923" href="/lia/part5/AExp/#7923" class="Bound">e</a> <a id="7925" href="/lia/part5/AExp/#7925" class="Bound">f</a><a id="7926" class="Symbol">)</a>
  <a id="7930" class="Keyword">with</a> <a id="7935" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7954" href="/lia/part5/AExp/#7923" class="Bound">e</a> <a id="7956" class="Symbol">|</a> <a id="7958" href="/lia/part5/AExp/#7274" class="Function">weak-normalisation</a> <a id="7977" href="/lia/part5/AExp/#7925" class="Bound">f</a>
<a id="7979" class="Symbol">...</a> <a id="7983" class="Symbol">|</a> <a id="7985" href="/lia/part5/AExp/#7985" class="Bound">de</a> <a id="7988" class="Symbol">|</a> <a id="7990" href="/lia/part5/AExp/#7990" class="Bound">df</a> <a id="7993" class="Symbol">=</a>
    <a id="7999" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="8003" class="Bound">x</a> <a id="8005" class="Bound">e</a> <a id="8007" class="Bound">f</a> <a id="8009" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="8013" href="/lia/part5/AExp/#5957" class="Function">let-cong-1</a> <a id="8024" href="/lia/part5/AExp/#7985" class="Bound">de</a> <a id="8027" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
    <a id="8033" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="8037" class="Bound">x</a> <a id="8039" class="Symbol">(</a><a id="8040" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="8042" class="Symbol">(</a><a id="8043" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8045" class="Bound">e</a> <a id="8047" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8049" class="Bound">ϱ</a><a id="8050" class="Symbol">))</a> <a id="8053" class="Bound">f</a> <a id="8055" href="/lia/part5/AExp/#6550" class="Function Operator">↝*⟨</a> <a id="8059" href="/lia/part5/AExp/#6126" class="Function">let-cong-2</a> <a id="8070" href="/lia/part5/AExp/#7990" class="Bound">df</a> <a id="8073" href="/lia/part5/AExp/#6550" class="Function Operator">⟩</a>
    <a id="8079" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="8083" class="Bound">x</a> <a id="8085" class="Symbol">(</a><a id="8086" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="8088" class="Symbol">(</a><a id="8089" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8091" class="Bound">e</a> <a id="8093" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8095" class="Bound">ϱ</a><a id="8096" class="Symbol">))</a> <a id="8099" class="Symbol">(</a><a id="8100" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="8102" class="Symbol">(</a><a id="8103" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8105" class="Bound">f</a> <a id="8107" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8109" class="Symbol">(</a><a id="8110" class="Bound">ϱ</a> <a id="8112" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="8114" class="Bound">x</a> <a id="8116" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="8118" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8120" class="Bound">e</a> <a id="8122" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8124" class="Bound">ϱ</a> <a id="8126" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="8127" class="Symbol">)))</a>
        <a id="8139" href="/lia/part5/AExp/#6653" class="Function Operator">↝⟨</a> <a id="8142" href="/lia/part5/AExp/#2636" class="InductiveConstructor">↝-Let-stop</a> <a id="8153" href="/lia/part5/AExp/#6653" class="Function Operator">⟩</a>
    <a id="8159" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="8161" class="Symbol">(</a><a id="8162" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8164" class="Bound">f</a> <a id="8166" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8168" class="Symbol">(</a><a id="8169" class="Bound">ϱ</a> <a id="8171" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="8173" class="Bound">x</a> <a id="8175" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="8177" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="8179" class="Bound">e</a> <a id="8181" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="8183" class="Bound">ϱ</a> <a id="8185" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="8186" class="Symbol">))</a>
    <a id="8193" href="/lia/part5/AExp/#6760" class="Function Operator">↝*∎</a></pre>

<h2 id="exercise-strong-normalisation">
<a class="anchor" href="#exercise-strong-normalisation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Exercise</strong>: Strong normalisation</h2>

<p>The termination property above is also called <em>weak normalisation</em>,
which means that there exists a finite reduction sequence <code class="language-plaintext highlighter-rouge">e ↝* f</code>
reaching a normal form (i.e. a value) <code class="language-plaintext highlighter-rouge">f ≡ Num m</code>. We show below even
<em>strong normalisation</em>, namely, <em>every</em> reduction sequence starting from
<code class="language-plaintext highlighter-rouge">e</code> is finite.</p>

<p>To this end, we introduce a notion of <em>size</em> of arithmetic expressions.</p>

<pre class="Agda"><a id="size"></a><a id="8612" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8617" class="Symbol">:</a> <a id="8619" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="8624" class="Symbol">→</a> <a id="8626" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="8628" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8633" class="Symbol">(</a><a id="8634" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="8638" href="/lia/part5/AExp/#8638" class="Bound">x</a><a id="8639" class="Symbol">)</a> <a id="8641" class="Symbol">=</a> <a id="8643" class="Number">0</a>
<a id="8645" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8650" class="Symbol">(</a><a id="8651" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="8655" href="/lia/part5/AExp/#8655" class="Bound">x</a><a id="8656" class="Symbol">)</a> <a id="8658" class="Symbol">=</a> <a id="8660" class="Number">1</a>
<a id="8662" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8667" class="Symbol">(</a><a id="8668" href="/lia/part5/AExp/#812" class="InductiveConstructor">Add</a> <a id="8672" href="/lia/part5/AExp/#8672" class="Bound">e</a> <a id="8674" href="/lia/part5/AExp/#8674" class="Bound">f</a><a id="8675" class="Symbol">)</a> <a id="8677" class="Symbol">=</a> <a id="8679" class="Number">1</a> <a id="8681" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8684" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8689" href="/lia/part5/AExp/#8672" class="Bound">e</a> <a id="8691" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8694" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8699" href="/lia/part5/AExp/#8674" class="Bound">f</a>
<a id="8701" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8706" class="Symbol">(</a><a id="8707" href="/lia/part5/AExp/#840" class="InductiveConstructor">Mul</a> <a id="8711" href="/lia/part5/AExp/#8711" class="Bound">e</a> <a id="8713" href="/lia/part5/AExp/#8713" class="Bound">f</a><a id="8714" class="Symbol">)</a> <a id="8716" class="Symbol">=</a> <a id="8718" class="Number">1</a> <a id="8720" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8723" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8728" href="/lia/part5/AExp/#8711" class="Bound">e</a> <a id="8730" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8733" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8738" href="/lia/part5/AExp/#8713" class="Bound">f</a>
<a id="8740" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8745" class="Symbol">(</a><a id="8746" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="8750" href="/lia/part5/AExp/#8750" class="Bound">x</a> <a id="8752" href="/lia/part5/AExp/#8752" class="Bound">e</a> <a id="8754" href="/lia/part5/AExp/#8754" class="Bound">f</a><a id="8755" class="Symbol">)</a> <a id="8757" class="Symbol">=</a> <a id="8759" class="Number">1</a> <a id="8761" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8764" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8769" href="/lia/part5/AExp/#8752" class="Bound">e</a> <a id="8771" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="8774" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8779" href="/lia/part5/AExp/#8754" class="Bound">f</a></pre>

<p>In the lemma below we show that the size of an expression strictly
decreases at each step, which implies strong normalisation.</p>

<pre class="Agda"><a id="size-down"></a><a id="8918" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="8928" class="Symbol">:</a>
  <a id="8932" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="8934" href="/lia/part5/AExp/#2156" class="Datatype Operator">⊢</a> <a id="8936" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="8938" href="/lia/part5/AExp/#2156" class="Datatype Operator">↝</a> <a id="8940" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="8942" class="Symbol">→</a>
  <a id="8946" class="Comment">---------------</a>
  <a id="8964" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8969" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="8971" href="/lia/part0/Naturals/#1318" class="Function Operator">&gt;</a> <a id="8973" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="8978" href="/lia/part5/AExp/#937" class="Generalizable">f</a>
  
<a id="8983" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="8993" href="/lia/part5/AExp/#2197" class="InductiveConstructor">↝-Var</a> <a id="8999" class="Symbol">=</a> <a id="9001" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9005" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>

<a id="9010" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9020" href="/lia/part5/AExp/#2224" class="InductiveConstructor">↝-Add-stop</a> <a id="9031" class="Symbol">=</a> <a id="9033" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9037" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="9041" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9051" class="Symbol">(</a><a id="9052" href="/lia/part5/AExp/#2271" class="InductiveConstructor">↝-Add-left</a> <a id="9063" href="/lia/part5/AExp/#9063" class="Bound">δ</a><a id="9064" class="Symbol">)</a> <a id="9066" class="Symbol">=</a> <a id="9068" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9072" class="Symbol">(</a><a id="9073" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="9082" class="Symbol">(</a><a id="9083" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9093" href="/lia/part5/AExp/#9063" class="Bound">δ</a><a id="9094" class="Symbol">))</a>
<a id="9097" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9107" class="Symbol">{</a><a id="9108" class="Argument">e</a> <a id="9110" class="Symbol">=</a> <a id="9112" href="/lia/part5/AExp/#9112" class="Bound">e</a> <a id="9114" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="9116" class="Symbol">_}</a> <a id="9119" class="Symbol">(</a><a id="9120" href="/lia/part5/AExp/#2350" class="InductiveConstructor">↝-Add-right</a> <a id="9132" href="/lia/part5/AExp/#9132" class="Bound">δ</a><a id="9133" class="Symbol">)</a> <a id="9135" class="Symbol">=</a> <a id="9137" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9141" class="Symbol">(</a><a id="9142" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="9152" class="Symbol">{</a><a id="9153" class="Argument">n</a> <a id="9155" class="Symbol">=</a> <a id="9157" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="9162" href="/lia/part5/AExp/#9112" class="Bound">e</a><a id="9163" class="Symbol">}</a> <a id="9165" class="Symbol">(</a><a id="9166" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9176" href="/lia/part5/AExp/#9132" class="Bound">δ</a><a id="9177" class="Symbol">))</a>

<a id="9181" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9191" href="/lia/part5/AExp/#2430" class="InductiveConstructor">↝-Mul-stop</a> <a id="9202" class="Symbol">=</a> <a id="9204" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9208" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="9212" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9222" class="Symbol">(</a><a id="9223" href="/lia/part5/AExp/#2477" class="InductiveConstructor">↝-Mul-left</a> <a id="9234" href="/lia/part5/AExp/#9234" class="Bound">δ</a><a id="9235" class="Symbol">)</a> <a id="9237" class="Symbol">=</a> <a id="9239" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9243" class="Symbol">(</a><a id="9244" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="9253" class="Symbol">(</a><a id="9254" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9264" href="/lia/part5/AExp/#9234" class="Bound">δ</a><a id="9265" class="Symbol">))</a>
<a id="9268" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9278" class="Symbol">{</a><a id="9279" class="Argument">e</a> <a id="9281" class="Symbol">=</a> <a id="9283" href="/lia/part5/AExp/#9283" class="Bound">e</a> <a id="9285" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="9287" class="Symbol">_}</a> <a id="9290" class="Symbol">(</a><a id="9291" href="/lia/part5/AExp/#2556" class="InductiveConstructor">↝-Mul-right</a> <a id="9303" href="/lia/part5/AExp/#9303" class="Bound">δ</a><a id="9304" class="Symbol">)</a> <a id="9306" class="Symbol">=</a> <a id="9308" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9312" class="Symbol">(</a><a id="9313" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="9323" class="Symbol">{</a><a id="9324" class="Argument">n</a> <a id="9326" class="Symbol">=</a> <a id="9328" href="/lia/part5/AExp/#8612" class="Function">size</a> <a id="9333" href="/lia/part5/AExp/#9283" class="Bound">e</a><a id="9334" class="Symbol">}</a> <a id="9336" class="Symbol">(</a><a id="9337" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9347" href="/lia/part5/AExp/#9303" class="Bound">δ</a><a id="9348" class="Symbol">))</a>

<a id="9352" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9362" href="/lia/part5/AExp/#2636" class="InductiveConstructor">↝-Let-stop</a> <a id="9373" class="Symbol">=</a> <a id="9375" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9379" href="/lia/part0/Naturals/#833" class="InductiveConstructor">0≤n</a>
<a id="9383" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9393" class="Symbol">(</a><a id="9394" href="/lia/part5/AExp/#2684" class="InductiveConstructor">↝-Let-1</a> <a id="9402" href="/lia/part5/AExp/#9402" class="Bound">δ</a><a id="9403" class="Symbol">)</a> <a id="9405" class="Symbol">=</a> <a id="9407" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9411" class="Symbol">(</a><a id="9412" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9422" href="/lia/part5/AExp/#9402" class="Bound">δ</a><a id="9423" class="Symbol">)</a>
<a id="9425" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9435" class="Symbol">(</a><a id="9436" href="/lia/part5/AExp/#2802" class="InductiveConstructor">↝-Let-2</a> <a id="9444" href="/lia/part5/AExp/#9444" class="Bound">δ</a><a id="9445" class="Symbol">)</a> <a id="9447" class="Symbol">=</a> <a id="9449" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="9453" class="Symbol">(</a><a id="9454" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="9463" class="Symbol">(</a><a id="9464" href="/lia/part5/AExp/#8918" class="Function">size-down</a> <a id="9474" href="/lia/part5/AExp/#9444" class="Bound">δ</a><a id="9475" class="Symbol">))</a></pre>

<p>In the two “right” cases we need to give some extra hint for one
implicit parameter.</p>

<h1 id="big-steps-operational-semantics">
<a class="anchor" href="#big-steps-operational-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Big-steps operational semantics</h1>

<pre class="Agda"><a id="9608" class="Keyword">infix</a> <a id="9614" class="Number">4</a> <a id="9616" href="/lia/part5/AExp/#9627" class="Datatype Operator">_,_⇒_</a>
<a id="9622" class="Keyword">data</a> <a id="_,_⇒_"></a><a id="9627" href="/lia/part5/AExp/#9627" class="Datatype Operator">_,_⇒_</a> <a id="9633" class="Symbol">:</a> <a id="9635" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="9640" class="Symbol">→</a> <a id="9642" href="/lia/part5/AExp/#1449" class="Function">Env</a> <a id="9646" class="Symbol">→</a> <a id="9648" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="9650" class="Symbol">→</a> <a id="9652" class="PrimitiveType">Set</a> <a id="9656" class="Keyword">where</a>

  <a id="_,_⇒_.⇒-Num"></a><a id="9665" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a> <a id="9671" class="Symbol">:</a>
    <a id="9677" class="Comment">-------------</a>
    <a id="9695" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="9699" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="9701" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9703" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9705" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9707" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Var"></a><a id="9712" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a> <a id="9718" class="Symbol">:</a>
    <a id="9724" class="Comment">---------------</a>
    <a id="9744" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="9748" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="9750" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9752" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9754" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9756" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9758" href="/lia/part5/AExp/#571" class="Generalizable">x</a>

  <a id="_,_⇒_.⇒-Add"></a><a id="9763" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="9769" class="Symbol">:</a>
    <a id="9775" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="9777" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9779" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9781" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9783" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9785" class="Symbol">→</a>
    <a id="9791" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="9793" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9795" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9797" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9799" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="9801" class="Symbol">→</a>
    <a id="9807" class="Comment">------------------</a>
    <a id="9830" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="9832" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="9834" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="9836" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9838" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9840" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9842" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9844" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="9847" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Mul"></a><a id="9852" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="9858" class="Symbol">:</a>
    <a id="9864" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="9866" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9868" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9870" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9872" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9874" class="Symbol">→</a>
    <a id="9880" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="9882" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9884" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9886" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9888" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="9890" class="Symbol">→</a>
    <a id="9896" class="Comment">------------------</a>
    <a id="9919" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="9921" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="9923" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="9925" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9927" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9929" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9931" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9933" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="9936" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

  <a id="_,_⇒_.⇒-Let"></a><a id="9941" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="9947" class="Symbol">:</a>
    <a id="9953" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="9955" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9957" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9959" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9961" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9963" class="Symbol">→</a>
    <a id="9969" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="9971" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="9973" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="9975" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="9977" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="9979" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="9981" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="9983" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="9985" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="9987" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="9989" class="Symbol">→</a>
    <a id="9995" class="Comment">---------------------</a>
    <a id="10021" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="10025" href="/lia/part5/AExp/#571" class="Generalizable">x</a> <a id="10027" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="10029" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="10031" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10033" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="10035" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10037" href="/lia/part5/AExp/#957" class="Generalizable">n</a></pre>

<p>Example derivation:</p>

<pre class="Agda"><a id="x0"></a><a id="10069" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10072" class="Symbol">=</a> <a id="10074" class="Number">0</a>
<a id="e0"></a><a id="10076" href="/lia/part5/AExp/#10076" class="Function">e0</a> <a id="10079" class="Symbol">=</a> <a id="10081" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="10085" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10088" class="Symbol">(</a><a id="10089" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10091" class="Number">2</a> <a id="10093" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="10095" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10097" class="Number">3</a><a id="10098" class="Symbol">)</a> <a id="10100" class="Symbol">(</a><a id="10101" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="10103" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10106" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="10108" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10110" class="Number">2</a><a id="10111" class="Symbol">)</a> 

<a id="10115" href="/lia/part5/AExp/#10115" class="Function">_</a> <a id="10117" class="Symbol">:</a> <a id="10119" href="/lia/part5/AExp/#10076" class="Function">e0</a> <a id="10122" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10124" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10127" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10129" class="Number">10</a>
<a id="10132" class="Symbol">_</a> <a id="10134" class="Symbol">=</a> <a id="10136" href="/lia/part0/TList/#253" class="InductiveConstructor">BEGIN</a>
    <a id="10146" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="10151" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10153" class="Number">2</a> <a id="10155" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10157" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10160" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10162" class="Number">2</a>                               <a id="10194" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="10197" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a>
    <a id="10207" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="10212" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10214" class="Number">3</a> <a id="10216" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10218" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10221" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10223" class="Number">3</a>                               <a id="10255" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="10258" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a>
    <a id="10268" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="10273" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10275" class="Number">2</a> <a id="10277" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="10279" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10281" class="Number">3</a> <a id="10283" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10285" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10288" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10290" class="Number">5</a>                         <a id="10316" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="10322" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="10328" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="10331" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="10336" class="Number">1</a> <a id="10338" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="10340" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="10350" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="10355" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="10357" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10360" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10362" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10365" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="10367" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10370" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="10372" class="Number">5</a> <a id="10374" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="10376" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10378" class="Number">5</a>                   <a id="10398" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="10401" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a>
    <a id="10411" href="/lia/part0/TList/#637" class="Function Operator">have</a> <a id="10416" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10418" class="Number">2</a> <a id="10420" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10422" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10425" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="10427" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10430" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="10432" class="Number">5</a> <a id="10434" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="10436" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10438" class="Number">2</a>                    <a id="10459" href="/lia/part0/TList/#637" class="Function Operator">by</a> <a id="10462" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a>
    <a id="10472" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="10477" class="Symbol">(</a><a id="10478" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="10480" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10483" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="10485" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10487" class="Number">2</a><a id="10488" class="Symbol">)</a> <a id="10490" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10492" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10495" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="10497" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10500" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="10502" class="Number">5</a> <a id="10504" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="10506" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10508" class="Number">10</a>          <a id="10520" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="10526" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="10532" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="10535" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="10540" class="Number">1</a> <a id="10542" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="10544" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>

    <a id="10554" href="/lia/part0/TList/#741" class="Function Operator">have</a> <a id="10559" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="10563" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10566" class="Symbol">(</a><a id="10567" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10569" class="Number">2</a> <a id="10571" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="10573" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10575" class="Number">3</a><a id="10576" class="Symbol">)</a> <a id="10578" class="Symbol">(</a><a id="10579" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="10581" href="/lia/part5/AExp/#10069" class="Function">x0</a> <a id="10584" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="10586" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10588" class="Number">2</a><a id="10589" class="Symbol">)</a> <a id="10591" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10593" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="10596" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10598" class="Number">10</a>  <a id="10602" href="/lia/part0/TList/#741" class="Function Operator">apply</a> <a id="10608" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="10614" href="/lia/part0/TList/#741" class="Function Operator">at</a> <a id="10617" href="/lia/part0/TList/#1635" class="Function">back</a> <a id="10622" class="Number">3</a> <a id="10624" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="10626" href="/lia/part0/List/#8022" class="InductiveConstructor">here</a>
    <a id="10635" href="/lia/part0/TList/#1233" class="Function">END</a></pre>

<h2 id="evaluator-interpreter">
<a class="anchor" href="#evaluator-interpreter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluator (interpreter)</h2>

<p>Luckily we can automatically produce the derivations as in the previous
example.</p>

<pre class="Agda"><a id="eval"></a><a id="10758" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10763" class="Symbol">:</a> <a id="10765" class="Symbol">∀</a> <a id="10767" href="/lia/part5/AExp/#10767" class="Bound">e</a> <a id="10769" href="/lia/part5/AExp/#10769" class="Bound">ϱ</a> <a id="10771" class="Symbol">→</a> <a id="10773" href="/lia/part0/Logic/#461" class="Function">∃[</a> <a id="10776" href="/lia/part5/AExp/#10776" class="Bound">n</a> <a id="10778" href="/lia/part0/Logic/#461" class="Function">]</a> <a id="10780" href="/lia/part5/AExp/#10767" class="Bound">e</a> <a id="10782" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="10784" href="/lia/part5/AExp/#10769" class="Bound">ϱ</a> <a id="10786" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="10788" href="/lia/part5/AExp/#10776" class="Bound">n</a>

<a id="10791" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10796" class="Symbol">(</a><a id="10797" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="10799" href="/lia/part5/AExp/#10799" class="Bound">n</a><a id="10800" class="Symbol">)</a> <a id="10802" href="/lia/part5/AExp/#10802" class="Bound">ϱ</a> <a id="10804" class="Symbol">=</a> <a id="10806" href="/lia/part5/AExp/#10799" class="Bound">n</a> <a id="10808" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10810" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a>

<a id="10817" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10822" class="Symbol">(</a><a id="10823" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="10825" href="/lia/part5/AExp/#10825" class="Bound">x</a><a id="10826" class="Symbol">)</a> <a id="10828" href="/lia/part5/AExp/#10828" class="Bound">ϱ</a> <a id="10830" class="Symbol">=</a> <a id="10832" href="/lia/part5/AExp/#10828" class="Bound">ϱ</a> <a id="10834" href="/lia/part5/AExp/#10825" class="Bound">x</a> <a id="10836" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10838" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a>

<a id="10845" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10850" class="Symbol">(</a><a id="10851" href="/lia/part5/AExp/#10851" class="Bound">e</a> <a id="10853" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="10855" href="/lia/part5/AExp/#10855" class="Bound">f</a><a id="10856" class="Symbol">)</a> <a id="10858" href="/lia/part5/AExp/#10858" class="Bound">ϱ</a>
  <a id="10862" class="Keyword">with</a> <a id="10867" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10872" href="/lia/part5/AExp/#10851" class="Bound">e</a> <a id="10874" href="/lia/part5/AExp/#10858" class="Bound">ϱ</a> <a id="10876" class="Symbol">|</a> <a id="10878" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10883" href="/lia/part5/AExp/#10855" class="Bound">f</a> <a id="10885" href="/lia/part5/AExp/#10858" class="Bound">ϱ</a>
<a id="10887" class="Symbol">...</a> <a id="10891" class="Symbol">|</a> <a id="10893" href="/lia/part5/AExp/#10893" class="Bound">m</a> <a id="10895" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10897" href="/lia/part5/AExp/#10897" class="Bound">δ</a> <a id="10899" class="Symbol">|</a> <a id="10901" href="/lia/part5/AExp/#10901" class="Bound">n</a> <a id="10903" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10905" href="/lia/part5/AExp/#10905" class="Bound">σ</a> <a id="10907" class="Symbol">=</a> <a id="10909" href="/lia/part5/AExp/#10893" class="Bound">m</a> <a id="10911" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="10914" href="/lia/part5/AExp/#10901" class="Bound">n</a> <a id="10916" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10918" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="10924" href="/lia/part5/AExp/#10897" class="Bound">δ</a> <a id="10926" href="/lia/part5/AExp/#10905" class="Bound">σ</a>

<a id="10929" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10934" class="Symbol">(</a><a id="10935" href="/lia/part5/AExp/#10935" class="Bound">e</a> <a id="10937" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="10939" href="/lia/part5/AExp/#10939" class="Bound">f</a><a id="10940" class="Symbol">)</a> <a id="10942" href="/lia/part5/AExp/#10942" class="Bound">ϱ</a>
  <a id="10946" class="Keyword">with</a> <a id="10951" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10956" href="/lia/part5/AExp/#10935" class="Bound">e</a> <a id="10958" href="/lia/part5/AExp/#10942" class="Bound">ϱ</a> <a id="10960" class="Symbol">|</a> <a id="10962" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="10967" href="/lia/part5/AExp/#10939" class="Bound">f</a> <a id="10969" href="/lia/part5/AExp/#10942" class="Bound">ϱ</a>
<a id="10971" class="Symbol">...</a> <a id="10975" class="Symbol">|</a> <a id="10977" href="/lia/part5/AExp/#10977" class="Bound">m</a> <a id="10979" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10981" href="/lia/part5/AExp/#10981" class="Bound">δ</a> <a id="10983" class="Symbol">|</a> <a id="10985" href="/lia/part5/AExp/#10985" class="Bound">n</a> <a id="10987" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="10989" href="/lia/part5/AExp/#10989" class="Bound">σ</a> <a id="10991" class="Symbol">=</a> <a id="10993" href="/lia/part5/AExp/#10977" class="Bound">m</a> <a id="10995" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="10998" href="/lia/part5/AExp/#10985" class="Bound">n</a> <a id="11000" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="11002" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="11008" href="/lia/part5/AExp/#10981" class="Bound">δ</a> <a id="11010" href="/lia/part5/AExp/#10989" class="Bound">σ</a>

<a id="11013" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="11018" class="Symbol">(</a><a id="11019" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="11023" href="/lia/part5/AExp/#11023" class="Bound">x</a> <a id="11025" href="/lia/part5/AExp/#11025" class="Bound">e</a> <a id="11027" href="/lia/part5/AExp/#11027" class="Bound">f</a><a id="11028" class="Symbol">)</a> <a id="11030" href="/lia/part5/AExp/#11030" class="Bound">ϱ</a>
  <a id="11034" class="Keyword">with</a> <a id="11039" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="11044" href="/lia/part5/AExp/#11025" class="Bound">e</a> <a id="11046" href="/lia/part5/AExp/#11030" class="Bound">ϱ</a>
<a id="11048" class="Symbol">...</a> <a id="11052" class="Symbol">|</a> <a id="11054" href="/lia/part5/AExp/#11054" class="Bound">m</a> <a id="11056" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="11058" href="/lia/part5/AExp/#11058" class="Bound">δ</a> 
  <a id="11063" class="Keyword">with</a> <a id="11068" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="11073" class="Bound">f</a> <a id="11075" class="Symbol">(</a><a id="11076" class="Bound">ϱ</a> <a id="11078" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="11080" class="Bound">x</a> <a id="11082" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="11084" href="/lia/part5/AExp/#11054" class="Bound">m</a> <a id="11086" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="11087" class="Symbol">)</a>
<a id="11089" class="Symbol">...</a> <a id="11093" class="Symbol">|</a> <a id="11095" href="/lia/part5/AExp/#11095" class="Bound">n</a> <a id="11097" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="11099" href="/lia/part5/AExp/#11099" class="Bound">σ</a> <a id="11101" class="Symbol">=</a> <a id="11103" href="/lia/part5/AExp/#11095" class="Bound">n</a> <a id="11105" href="/lia/part0/Logic/#396" class="InductiveConstructor Operator">,</a> <a id="11107" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="11113" class="Bound">δ</a> <a id="11115" href="/lia/part5/AExp/#11099" class="Bound">σ</a></pre>
<pre class="Agda"><a id="11126" href="/lia/part5/AExp/#11126" class="Function">_</a> <a id="11128" class="Symbol">:</a> <a id="11130" href="/lia/part5/AExp/#10076" class="Function">e0</a> <a id="11133" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="11135" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a> <a id="11138" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="11140" class="Number">10</a>
<a id="11143" class="Symbol">_</a> <a id="11145" class="Symbol">=</a> <a id="11147" href="/lia/part0/Logic/#431" class="Field">dsnd</a> <a id="11152" class="Symbol">(</a><a id="11153" href="/lia/part5/AExp/#10758" class="Function">eval</a> <a id="11158" href="/lia/part5/AExp/#10076" class="Function">e0</a> <a id="11161" href="/lia/part5/AExp/#1617" class="Function">ϱ0</a><a id="11163" class="Symbol">)</a></pre>

<h2 id="evaluation-is-deterministic">
<a class="anchor" href="#evaluation-is-deterministic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation is deterministic</h2>

<pre class="Agda"><a id="⇒-det"></a><a id="11206" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11212" class="Symbol">:</a>
  <a id="11216" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="11218" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="11220" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="11222" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="11224" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="11226" class="Symbol">→</a>
  <a id="11230" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="11232" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="11234" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="11236" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="11238" href="/lia/part5/AExp/#957" class="Generalizable">n</a> <a id="11240" class="Symbol">→</a>
  <a id="11244" class="Comment">-----------</a>
  <a id="11258" href="/lia/part5/AExp/#955" class="Generalizable">m</a> <a id="11260" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="11262" href="/lia/part5/AExp/#957" class="Generalizable">n</a>

<a id="11265" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11271" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a> <a id="11277" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a> <a id="11283" class="Symbol">=</a> <a id="11285" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11290" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11296" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a> <a id="11302" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a> <a id="11308" class="Symbol">=</a> <a id="11310" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11315" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11321" class="Symbol">(</a><a id="11322" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="11328" href="/lia/part5/AExp/#11328" class="Bound">x</a> <a id="11330" href="/lia/part5/AExp/#11330" class="Bound">x₁</a><a id="11332" class="Symbol">)</a> <a id="11334" class="Symbol">(</a><a id="11335" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="11341" href="/lia/part5/AExp/#11341" class="Bound">y</a> <a id="11343" href="/lia/part5/AExp/#11343" class="Bound">y₁</a><a id="11345" class="Symbol">)</a>
    <a id="11351" class="Keyword">with</a> <a id="11356" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11362" href="/lia/part5/AExp/#11328" class="Bound">x</a> <a id="11364" href="/lia/part5/AExp/#11341" class="Bound">y</a> <a id="11366" class="Symbol">|</a> <a id="11368" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11374" href="/lia/part5/AExp/#11330" class="Bound">x₁</a> <a id="11377" href="/lia/part5/AExp/#11343" class="Bound">y₁</a>
<a id="11380" class="Symbol">...</a> <a id="11384" class="Symbol">|</a> <a id="11386" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11391" class="Symbol">|</a> <a id="11393" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11398" class="Symbol">=</a> <a id="11400" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11405" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11411" class="Symbol">(</a><a id="11412" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="11418" href="/lia/part5/AExp/#11418" class="Bound">x</a> <a id="11420" href="/lia/part5/AExp/#11420" class="Bound">x₁</a><a id="11422" class="Symbol">)</a> <a id="11424" class="Symbol">(</a><a id="11425" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="11431" href="/lia/part5/AExp/#11431" class="Bound">y</a> <a id="11433" href="/lia/part5/AExp/#11433" class="Bound">y₁</a><a id="11435" class="Symbol">)</a>
    <a id="11441" class="Keyword">with</a> <a id="11446" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11452" href="/lia/part5/AExp/#11418" class="Bound">x</a> <a id="11454" href="/lia/part5/AExp/#11431" class="Bound">y</a> <a id="11456" class="Symbol">|</a> <a id="11458" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11464" href="/lia/part5/AExp/#11420" class="Bound">x₁</a> <a id="11467" href="/lia/part5/AExp/#11433" class="Bound">y₁</a>
<a id="11470" class="Symbol">...</a> <a id="11474" class="Symbol">|</a> <a id="11476" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11481" class="Symbol">|</a> <a id="11483" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11488" class="Symbol">=</a> <a id="11490" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="11495" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11501" class="Symbol">(</a><a id="11502" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="11508" href="/lia/part5/AExp/#11508" class="Bound">⇒₁-e</a> <a id="11513" href="/lia/part5/AExp/#11513" class="Bound">⇒₁-f</a><a id="11517" class="Symbol">)</a> <a id="11519" class="Symbol">(</a><a id="11520" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="11526" href="/lia/part5/AExp/#11526" class="Bound">⇒₂-e</a> <a id="11531" href="/lia/part5/AExp/#11531" class="Bound">⇒₂-f</a><a id="11535" class="Symbol">)</a>
    <a id="11541" class="Keyword">with</a> <a id="11546" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11552" href="/lia/part5/AExp/#11508" class="Bound">⇒₁-e</a> <a id="11557" href="/lia/part5/AExp/#11526" class="Bound">⇒₂-e</a>
<a id="11562" class="Symbol">...</a> <a id="11566" class="Symbol">|</a> <a id="11568" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="11577" class="Keyword">with</a> <a id="11582" href="/lia/part5/AExp/#11206" class="Function">⇒-det</a> <a id="11588" class="Bound">⇒₁-f</a> <a id="11593" class="Bound">⇒₂-f</a>
<a id="11598" class="Symbol">...</a> <a id="11602" class="Symbol">|</a> <a id="11604" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="11609" class="Symbol">=</a> <a id="11611" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a></pre>

<p>Note that in the <code class="language-plaintext highlighter-rouge">⇒-Let</code> case we cannot perform the two
with-abstractions in parallel because in order to apply the second one
<code class="language-plaintext highlighter-rouge">⇒-det ⇒₁-f ⇒₂-f</code> we need the result of the first one.</p>

<h2 id="agreement-of-the-semantics">
<a class="anchor" href="#agreement-of-the-semantics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement of the semantics</h2>

<p>The following lemma shows that the big-steps operational semantics
agrees with the denotational semantics.</p>

<pre class="Agda"><a id="⇒-agree-⟦⟧"></a><a id="11947" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="11958" class="Symbol">:</a> <a id="11960" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="11962" href="/lia/part5/AExp/#9627" class="Datatype Operator">,</a> <a id="11964" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a> <a id="11966" href="/lia/part5/AExp/#9627" class="Datatype Operator">⇒</a> <a id="11968" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="11970" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="11972" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="11974" href="/lia/part5/AExp/#1485" class="Generalizable">ϱ</a>
<a id="11976" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="11987" class="Symbol">{</a><a id="11988" href="/lia/part5/AExp/#760" class="InductiveConstructor">Num</a> <a id="11992" href="/lia/part5/AExp/#11992" class="Bound">x</a><a id="11993" class="Symbol">}</a> <a id="11995" class="Symbol">=</a> <a id="11997" href="/lia/part5/AExp/#9665" class="InductiveConstructor">⇒-Num</a>
<a id="12003" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12014" class="Symbol">{</a><a id="12015" href="/lia/part5/AExp/#783" class="InductiveConstructor">Var</a> <a id="12019" href="/lia/part5/AExp/#12019" class="Bound">x</a><a id="12020" class="Symbol">}</a> <a id="12022" class="Symbol">=</a> <a id="12024" href="/lia/part5/AExp/#9712" class="InductiveConstructor">⇒-Var</a>
<a id="12030" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12041" class="Symbol">{</a><a id="12042" href="/lia/part5/AExp/#812" class="InductiveConstructor">Add</a> <a id="12046" href="/lia/part5/AExp/#12046" class="Bound">e</a> <a id="12048" href="/lia/part5/AExp/#12048" class="Bound">e₁</a><a id="12050" class="Symbol">}</a> <a id="12052" class="Symbol">=</a> <a id="12054" href="/lia/part5/AExp/#9763" class="InductiveConstructor">⇒-Add</a> <a id="12060" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12071" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> 
<a id="12083" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12094" class="Symbol">{</a><a id="12095" href="/lia/part5/AExp/#840" class="InductiveConstructor">Mul</a> <a id="12099" href="/lia/part5/AExp/#12099" class="Bound">e</a> <a id="12101" href="/lia/part5/AExp/#12101" class="Bound">e₁</a><a id="12103" class="Symbol">}</a> <a id="12105" class="Symbol">=</a> <a id="12107" href="/lia/part5/AExp/#9852" class="InductiveConstructor">⇒-Mul</a> <a id="12113" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12124" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> 
<a id="12136" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12147" class="Symbol">{</a><a id="12148" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="12152" href="/lia/part5/AExp/#12152" class="Bound">x</a> <a id="12154" href="/lia/part5/AExp/#12154" class="Bound">e</a> <a id="12156" href="/lia/part5/AExp/#12156" class="Bound">f</a><a id="12157" class="Symbol">}</a> <a id="12159" class="Symbol">=</a> <a id="12161" href="/lia/part5/AExp/#9941" class="InductiveConstructor">⇒-Let</a> <a id="12167" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a> <a id="12178" href="/lia/part5/AExp/#11947" class="Function">⇒-agree-⟦⟧</a></pre>

<h2 id="contextual-equivalence">
<a class="anchor" href="#contextual-equivalence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contextual equivalence</h2>

<p>We say that two arithmetic expression are <em>contextually equivalent</em> if
they provide the same result whenever they are plugged in the same
context.</p>

<pre class="Agda"><a id="fv"></a><a id="12373" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12376" class="Symbol">:</a> <a id="12378" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="12383" class="Symbol">→</a> <a id="12385" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="12393" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="12395" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12398" class="Symbol">(</a><a id="12399" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="12401" href="/lia/part5/AExp/#12401" class="Bound">n</a><a id="12402" class="Symbol">)</a> <a id="12404" class="Symbol">=</a> <a id="12406" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="12408" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12411" class="Symbol">(</a><a id="12412" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="12414" href="/lia/part5/AExp/#12414" class="Bound">x</a><a id="12415" class="Symbol">)</a> <a id="12417" class="Symbol">=</a> <a id="12419" href="/lia/part0/List/#1792" class="Function">[</a> <a id="12421" href="/lia/part5/AExp/#12414" class="Bound">x</a> <a id="12423" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="12425" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12428" class="Symbol">(</a><a id="12429" href="/lia/part5/AExp/#12429" class="Bound">e</a> <a id="12431" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="12433" href="/lia/part5/AExp/#12433" class="Bound">f</a><a id="12434" class="Symbol">)</a> <a id="12436" class="Symbol">=</a> <a id="12438" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12441" href="/lia/part5/AExp/#12429" class="Bound">e</a> <a id="12443" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12446" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12449" href="/lia/part5/AExp/#12433" class="Bound">f</a>
<a id="12451" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12454" class="Symbol">(</a><a id="12455" href="/lia/part5/AExp/#12455" class="Bound">e</a> <a id="12457" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="12459" href="/lia/part5/AExp/#12459" class="Bound">f</a><a id="12460" class="Symbol">)</a> <a id="12462" class="Symbol">=</a> <a id="12464" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12467" href="/lia/part5/AExp/#12455" class="Bound">e</a> <a id="12469" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12472" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12475" href="/lia/part5/AExp/#12459" class="Bound">f</a>
<a id="12477" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12480" class="Symbol">(</a><a id="12481" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="12485" href="/lia/part5/AExp/#12485" class="Bound">x</a> <a id="12487" href="/lia/part5/AExp/#12487" class="Bound">e</a> <a id="12489" href="/lia/part5/AExp/#12489" class="Bound">f</a><a id="12490" class="Symbol">)</a> <a id="12492" class="Symbol">=</a> <a id="12494" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12497" href="/lia/part5/AExp/#12487" class="Bound">e</a> <a id="12499" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12502" href="/lia/part0/List/#4927" class="Function">remove</a> <a id="12509" href="/lia/part5/AExp/#12485" class="Bound">x</a> <a id="12511" class="Symbol">(</a><a id="12512" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12515" href="/lia/part5/AExp/#12489" class="Bound">f</a><a id="12516" class="Symbol">)</a>

<a id="closed"></a><a id="12519" href="/lia/part5/AExp/#12519" class="Function">closed</a> <a id="12526" class="Symbol">:</a> <a id="12528" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="12533" class="Symbol">→</a> <a id="12535" class="PrimitiveType">Set</a>
<a id="12539" href="/lia/part5/AExp/#12519" class="Function">closed</a> <a id="12546" href="/lia/part5/AExp/#12546" class="Bound">e</a> <a id="12548" class="Symbol">=</a> <a id="12550" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12553" href="/lia/part5/AExp/#12546" class="Bound">e</a> <a id="12555" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12557" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>

<a id="fv-lemma"></a><a id="12560" href="/lia/part5/AExp/#12560" class="Function">fv-lemma</a> <a id="12569" class="Symbol">:</a> <a id="12571" class="Symbol">∀</a> <a id="12573" href="/lia/part5/AExp/#12573" class="Bound">ϱ₀</a> <a id="12576" href="/lia/part5/AExp/#12576" class="Bound">ϱ₁</a> <a id="12579" href="/lia/part5/AExp/#12579" class="Bound">e</a> <a id="12581" class="Symbol">→</a> <a id="12583" href="/lia/part0/List/#19150" class="Function">Agree</a> <a id="12589" href="/lia/part5/AExp/#12573" class="Bound">ϱ₀</a> <a id="12592" href="/lia/part5/AExp/#12576" class="Bound">ϱ₁</a> <a id="12595" class="Symbol">(</a><a id="12596" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12599" href="/lia/part5/AExp/#12579" class="Bound">e</a><a id="12600" class="Symbol">)</a> <a id="12602" class="Symbol">→</a> <a id="12604" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="12606" href="/lia/part5/AExp/#12579" class="Bound">e</a> <a id="12608" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="12610" href="/lia/part5/AExp/#12573" class="Bound">ϱ₀</a> <a id="12613" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12615" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="12617" href="/lia/part5/AExp/#12579" class="Bound">e</a> <a id="12619" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="12621" href="/lia/part5/AExp/#12576" class="Bound">ϱ₁</a>
<a id="12624" href="/lia/part5/AExp/#12560" class="Function">fv-lemma</a> <a id="12633" class="Symbol">=</a> <a id="12635" class="Symbol">{!   !}</a>

<a id="12644" class="Comment">-- all named variables occurring in the expression</a>
<a id="vars"></a><a id="12695" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12700" class="Symbol">:</a> <a id="12702" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="12707" class="Symbol">→</a> <a id="12709" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="12717" href="/lia/part0/List/#468" class="Datatype Operator">*</a>
<a id="12719" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12724" class="Symbol">(</a><a id="12725" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="12727" href="/lia/part5/AExp/#12727" class="Bound">n</a><a id="12728" class="Symbol">)</a> <a id="12730" class="Symbol">=</a> <a id="12732" href="/lia/part0/List/#505" class="InductiveConstructor">ε</a>
<a id="12734" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12739" class="Symbol">(</a><a id="12740" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="12742" href="/lia/part5/AExp/#12742" class="Bound">x</a><a id="12743" class="Symbol">)</a> <a id="12745" class="Symbol">=</a> <a id="12747" href="/lia/part0/List/#1792" class="Function">[</a> <a id="12749" href="/lia/part5/AExp/#12742" class="Bound">x</a> <a id="12751" href="/lia/part0/List/#2043" class="Function Operator">]</a>
<a id="12753" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12758" class="Symbol">(</a><a id="12759" href="/lia/part5/AExp/#12759" class="Bound">e</a> <a id="12761" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="12763" href="/lia/part5/AExp/#12763" class="Bound">f</a><a id="12764" class="Symbol">)</a> <a id="12766" class="Symbol">=</a> <a id="12768" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12771" href="/lia/part5/AExp/#12759" class="Bound">e</a> <a id="12773" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12776" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12779" href="/lia/part5/AExp/#12763" class="Bound">f</a>
<a id="12781" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12786" class="Symbol">(</a><a id="12787" href="/lia/part5/AExp/#12787" class="Bound">e</a> <a id="12789" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="12791" href="/lia/part5/AExp/#12791" class="Bound">f</a><a id="12792" class="Symbol">)</a> <a id="12794" class="Symbol">=</a> <a id="12796" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12799" href="/lia/part5/AExp/#12787" class="Bound">e</a> <a id="12801" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12804" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12807" href="/lia/part5/AExp/#12791" class="Bound">f</a>
<a id="12809" href="/lia/part5/AExp/#12695" class="Function">vars</a> <a id="12814" class="Symbol">(</a><a id="12815" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="12819" href="/lia/part5/AExp/#12819" class="Bound">x</a> <a id="12821" href="/lia/part5/AExp/#12821" class="Bound">e</a> <a id="12823" href="/lia/part5/AExp/#12823" class="Bound">f</a><a id="12824" class="Symbol">)</a> <a id="12826" class="Symbol">=</a> <a id="12828" href="/lia/part0/List/#1792" class="Function">[</a> <a id="12830" href="/lia/part5/AExp/#12819" class="Bound">x</a> <a id="12832" href="/lia/part0/List/#2043" class="Function Operator">]</a> <a id="12834" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12837" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12840" href="/lia/part5/AExp/#12821" class="Bound">e</a> <a id="12842" href="/lia/part0/List/#3100" class="Function Operator">++</a> <a id="12845" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="12848" href="/lia/part5/AExp/#12823" class="Bound">f</a>

<a id="12851" class="Comment">-- fresh : AExp → VarName</a>
<a id="12877" class="Comment">-- fresh = {!   !}</a>

<a id="12897" class="Comment">-- fresh2 : AExp → AExp → VarName</a>
<a id="12931" class="Comment">-- fresh2 = {!   !}</a>

<a id="12952" class="Comment">-- fresh-lemma : ∀ e → fresh e ~∈ vars e</a>
<a id="12993" class="Comment">-- fresh-lemma = {!   !}</a>

<a id="13019" class="Comment">-- fresh2-lemma : ∀ e f → fresh2 e f ~∈ vars e × fresh2 e f ~∈ vars f</a>
<a id="13089" class="Comment">-- fresh2-lemma = {!   !}</a>

<a id="13116" class="Comment">-- rename : AExp → VarName → VarName → AExp</a>
<a id="13160" class="Comment">-- rename e x y = {!   !}</a>

<a id="13187" class="Comment">-- refresh : AExp → AExp → AExp</a>
<a id="13219" class="Comment">-- refresh e g = {!   !}</a>

<a id="13245" class="Comment">-- refresh-lemma : let e′ = refresh e g in sem e ≡ sem e′ × vars e′ ∩ vars g ≡ ε</a>
<a id="13326" class="Comment">-- refresh-lemma = {!   !}</a>

<a id="13354" class="Keyword">infix</a> <a id="13360" class="Number">101</a> <a id="13364" href="/lia/part5/AExp/#13372" class="Function Operator">_A[_↦_]</a>
<a id="_A[_↦_]"></a><a id="13372" href="/lia/part5/AExp/#13372" class="Function Operator">_A[_↦_]</a> <a id="13380" class="Symbol">:</a> <a id="13382" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="13387" class="Symbol">→</a> <a id="13389" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="13397" class="Symbol">→</a> <a id="13399" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="13404" class="Symbol">→</a> <a id="13406" href="/lia/part5/AExp/#741" class="Datatype">AExp</a>

<a id="13412" class="Symbol">(</a><a id="13413" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="13415" href="/lia/part5/AExp/#13415" class="Bound">n</a><a id="13416" class="Symbol">)</a> <a id="13418" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13421" href="/lia/part5/AExp/#13421" class="Bound">x</a> <a id="13423" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13425" href="/lia/part5/AExp/#13425" class="Bound">g</a> <a id="13427" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13429" class="Symbol">=</a> <a id="13431" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="13433" href="/lia/part5/AExp/#13415" class="Bound">n</a>

<a id="13436" class="Symbol">(</a><a id="13437" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="13439" href="/lia/part5/AExp/#13439" class="Bound">y</a><a id="13440" class="Symbol">)</a> <a id="13442" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13445" href="/lia/part5/AExp/#13445" class="Bound">x</a> <a id="13447" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13449" href="/lia/part5/AExp/#13449" class="Bound">g</a> <a id="13451" href="/lia/part5/AExp/#13372" class="Function Operator">]</a>
  <a id="13455" class="Keyword">with</a> <a id="13460" href="/lia/part5/AExp/#13445" class="Bound">x</a> <a id="13462" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="13465" href="/lia/part5/AExp/#13439" class="Bound">y</a>
<a id="13467" class="Symbol">...</a> <a id="13471" class="Symbol">|</a> <a id="13473" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="13477" class="Symbol">_</a> <a id="13479" class="Symbol">=</a> <a id="13481" class="Bound">g</a>
<a id="13483" class="Symbol">...</a> <a id="13487" class="Symbol">|</a> <a id="13489" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="13492" class="Symbol">_</a> <a id="13494" class="Symbol">=</a> <a id="13496" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="13498" class="Bound">y</a>

<a id="13501" class="Symbol">(</a><a id="13502" href="/lia/part5/AExp/#13502" class="Bound">e</a> <a id="13504" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="13506" href="/lia/part5/AExp/#13506" class="Bound">f</a><a id="13507" class="Symbol">)</a> <a id="13509" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13512" href="/lia/part5/AExp/#13512" class="Bound">x</a> <a id="13514" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13516" href="/lia/part5/AExp/#13516" class="Bound">g</a> <a id="13518" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13520" class="Symbol">=</a> <a id="13522" href="/lia/part5/AExp/#13502" class="Bound">e</a> <a id="13524" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13527" href="/lia/part5/AExp/#13512" class="Bound">x</a> <a id="13529" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13531" href="/lia/part5/AExp/#13516" class="Bound">g</a> <a id="13533" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13535" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="13537" href="/lia/part5/AExp/#13506" class="Bound">f</a> <a id="13539" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13542" href="/lia/part5/AExp/#13512" class="Bound">x</a> <a id="13544" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13546" href="/lia/part5/AExp/#13516" class="Bound">g</a> <a id="13548" href="/lia/part5/AExp/#13372" class="Function Operator">]</a>
<a id="13550" class="Symbol">(</a><a id="13551" href="/lia/part5/AExp/#13551" class="Bound">e</a> <a id="13553" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="13555" href="/lia/part5/AExp/#13555" class="Bound">f</a><a id="13556" class="Symbol">)</a> <a id="13558" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13561" href="/lia/part5/AExp/#13561" class="Bound">x</a> <a id="13563" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13565" href="/lia/part5/AExp/#13565" class="Bound">g</a> <a id="13567" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13569" class="Symbol">=</a> <a id="13571" href="/lia/part5/AExp/#13551" class="Bound">e</a> <a id="13573" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13576" href="/lia/part5/AExp/#13561" class="Bound">x</a> <a id="13578" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13580" href="/lia/part5/AExp/#13565" class="Bound">g</a> <a id="13582" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13584" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="13586" href="/lia/part5/AExp/#13555" class="Bound">f</a> <a id="13588" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13591" href="/lia/part5/AExp/#13561" class="Bound">x</a> <a id="13593" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13595" href="/lia/part5/AExp/#13565" class="Bound">g</a> <a id="13597" href="/lia/part5/AExp/#13372" class="Function Operator">]</a>

<a id="13600" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="13604" href="/lia/part5/AExp/#13604" class="Bound">y</a> <a id="13606" href="/lia/part5/AExp/#13606" class="Bound">e</a> <a id="13608" href="/lia/part5/AExp/#13608" class="Bound">f</a> <a id="13610" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13613" href="/lia/part5/AExp/#13613" class="Bound">x</a> <a id="13615" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13617" href="/lia/part5/AExp/#13617" class="Bound">g</a> <a id="13619" href="/lia/part5/AExp/#13372" class="Function Operator">]</a>
  <a id="13623" class="Keyword">with</a> <a id="13628" href="/lia/part5/AExp/#13606" class="Bound">e</a> <a id="13630" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13633" href="/lia/part5/AExp/#13613" class="Bound">x</a> <a id="13635" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13637" href="/lia/part5/AExp/#13617" class="Bound">g</a> <a id="13639" href="/lia/part5/AExp/#13372" class="Function Operator">]</a>
<a id="13641" class="Symbol">...</a> <a id="13645" class="Symbol">|</a> <a id="13647" href="/lia/part5/AExp/#13647" class="Bound">e′</a>
  <a id="13652" class="Keyword">with</a> <a id="13657" class="Bound">x</a> <a id="13659" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="13662" class="Bound">y</a>
<a id="13664" class="Symbol">...</a> <a id="13668" class="Symbol">|</a> <a id="13670" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="13674" class="Symbol">_</a> <a id="13676" class="Symbol">=</a> <a id="13678" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="13682" class="Bound">y</a> <a id="13684" class="Bound">e′</a> <a id="13687" class="Bound">f</a>
<a id="13689" class="Symbol">...</a> <a id="13693" class="Symbol">|</a> <a id="13695" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="13698" class="Symbol">_</a> <a id="13700" class="Symbol">=</a> <a id="13702" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="13706" class="Bound">y</a> <a id="13708" class="Bound">e′</a> <a id="13711" class="Symbol">(</a><a id="13712" class="Bound">f</a> <a id="13714" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13717" class="Bound">x</a> <a id="13719" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13721" class="Bound">g</a> <a id="13723" href="/lia/part5/AExp/#13372" class="Function Operator">]</a><a id="13724" class="Symbol">)</a> <a id="13726" class="Comment">-- in general this is incorrect since free variables in g may get captured</a></pre>

<h2 id="substitution-facts">
<a class="anchor" href="#substitution-facts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substitution facts</h2>

<pre class="Agda"><a id="subs-Let-1"></a><a id="13833" href="/lia/part5/AExp/#13833" class="Function">subs-Let-1</a> <a id="13844" class="Symbol">:</a> <a id="13846" class="Symbol">∀</a> <a id="13848" href="/lia/part5/AExp/#13848" class="Bound">x</a> <a id="13850" href="/lia/part5/AExp/#13850" class="Bound">e</a> <a id="13852" class="Symbol">→</a> <a id="13854" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="13858" href="/lia/part5/AExp/#13848" class="Bound">x</a> <a id="13860" href="/lia/part5/AExp/#13850" class="Bound">e</a> <a id="13862" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="13864" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13867" href="/lia/part5/AExp/#13848" class="Bound">x</a> <a id="13869" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13871" href="/lia/part5/AExp/#942" class="Generalizable">g</a> <a id="13873" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="13875" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="13877" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="13881" href="/lia/part5/AExp/#13848" class="Bound">x</a> <a id="13883" class="Symbol">(</a><a id="13884" href="/lia/part5/AExp/#13850" class="Bound">e</a> <a id="13886" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="13889" href="/lia/part5/AExp/#13848" class="Bound">x</a> <a id="13891" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="13893" href="/lia/part5/AExp/#942" class="Generalizable">g</a> <a id="13895" href="/lia/part5/AExp/#13372" class="Function Operator">]</a><a id="13896" class="Symbol">)</a> <a id="13898" href="/lia/part5/AExp/#937" class="Generalizable">f</a>
<a id="13900" href="/lia/part5/AExp/#13833" class="Function">subs-Let-1</a> <a id="13911" href="/lia/part5/AExp/#13911" class="Bound">x</a> <a id="13913" href="/lia/part5/AExp/#13913" class="Bound">e</a> <a id="13915" class="Symbol">=</a> <a id="13917" class="Symbol">{!   !}</a></pre>

<h2 id="substitution-lemma">
<a class="anchor" href="#substitution-lemma" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substitution lemma</h2>

<p>This is correct only if no free occurrence of <code class="language-plaintext highlighter-rouge">x</code> in <code class="language-plaintext highlighter-rouge">e</code> falls under a
let binding a variable <code class="language-plaintext highlighter-rouge">y</code> which is free in <code class="language-plaintext highlighter-rouge">g</code>. This is captured by
<code class="language-plaintext highlighter-rouge">g AdmissibleFor x In e</code>.</p>

<pre class="Agda"><a id="_NotFreeIn_"></a><a id="14124" href="/lia/part5/AExp/#14124" class="Function Operator">_NotFreeIn_</a> <a id="14136" class="Symbol">:</a> <a id="14138" href="/lia/part5/AExp/#520" class="Function">VarName</a> <a id="14146" class="Symbol">→</a> <a id="14148" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="14153" class="Symbol">→</a> <a id="14155" class="PrimitiveType">Set</a>
<a id="14159" href="/lia/part5/AExp/#14159" class="Bound">x</a> <a id="14161" href="/lia/part5/AExp/#14124" class="Function Operator">NotFreeIn</a> <a id="14171" href="/lia/part5/AExp/#14171" class="Bound">e</a> <a id="14173" class="Symbol">=</a> <a id="14175" href="/lia/part5/AExp/#14159" class="Bound">x</a> <a id="14177" href="/lia/part0/List/#8983" class="Function Operator">~∈</a> <a id="14180" href="/lia/part5/AExp/#12373" class="Function">fv</a> <a id="14183" href="/lia/part5/AExp/#14171" class="Bound">e</a>

<a id="14186" class="Keyword">infix</a> <a id="14192" class="Number">20</a> <a id="14195" href="/lia/part5/AExp/#14219" class="Datatype Operator">_AdmissibleFor_In_</a>
<a id="14214" class="Keyword">data</a> <a id="_AdmissibleFor_In_"></a><a id="14219" href="/lia/part5/AExp/#14219" class="Datatype Operator">_AdmissibleFor_In_</a> <a id="14238" class="Symbol">(</a><a id="14239" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14241" class="Symbol">:</a> <a id="14243" href="/lia/part5/AExp/#741" class="Datatype">AExp</a><a id="14247" class="Symbol">)</a> <a id="14249" class="Symbol">(</a><a id="14250" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14252" class="Symbol">:</a> <a id="14254" href="/lia/part5/AExp/#520" class="Function">VarName</a><a id="14261" class="Symbol">)</a> <a id="14263" class="Symbol">:</a> <a id="14265" href="/lia/part5/AExp/#741" class="Datatype">AExp</a> <a id="14270" class="Symbol">→</a> <a id="14272" class="PrimitiveType">Set</a> <a id="14276" class="Keyword">where</a>

  <a id="_AdmissibleFor_In_.Num"></a><a id="14285" href="/lia/part5/AExp/#14285" class="InductiveConstructor">Num</a> <a id="14289" class="Symbol">:</a> <a id="14291" class="Symbol">(</a><a id="14292" href="/lia/part5/AExp/#14292" class="Bound">n</a> <a id="14294" class="Symbol">:</a> <a id="14296" href="/lia/part0/Naturals/#301" class="Function">ℕ</a><a id="14297" class="Symbol">)</a> <a id="14299" class="Symbol">→</a> <a id="14301" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14303" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14317" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14319" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14322" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="14324" href="/lia/part5/AExp/#14292" class="Bound">n</a>

  <a id="_AdmissibleFor_In_.Var"></a><a id="14329" href="/lia/part5/AExp/#14329" class="InductiveConstructor">Var</a> <a id="14333" class="Symbol">:</a> <a id="14335" class="Symbol">(</a><a id="14336" href="/lia/part5/AExp/#14336" class="Bound">y</a> <a id="14338" class="Symbol">:</a> <a id="14340" href="/lia/part5/AExp/#520" class="Function">VarName</a><a id="14347" class="Symbol">)</a> <a id="14349" class="Symbol">→</a> <a id="14351" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14353" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14367" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14369" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14372" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="14374" href="/lia/part5/AExp/#14336" class="Bound">y</a>

  <a id="_AdmissibleFor_In_.Add"></a><a id="14379" href="/lia/part5/AExp/#14379" class="InductiveConstructor">Add</a> <a id="14383" class="Symbol">:</a> <a id="14385" class="Symbol">∀</a> <a id="14387" href="/lia/part5/AExp/#14387" class="Bound">e</a> <a id="14389" href="/lia/part5/AExp/#14389" class="Bound">f</a> <a id="14391" class="Symbol">→</a>
        <a id="14401" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14403" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14417" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14419" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14422" href="/lia/part5/AExp/#14387" class="Bound">e</a> <a id="14424" class="Symbol">→</a> 
        <a id="14435" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14437" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14451" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14453" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14456" href="/lia/part5/AExp/#14389" class="Bound">f</a> <a id="14458" class="Symbol">→</a> 
        <a id="14469" class="Comment">----------------------------</a>
        <a id="14506" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14508" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14522" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14524" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14527" class="Symbol">(</a><a id="14528" href="/lia/part5/AExp/#14387" class="Bound">e</a> <a id="14530" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="14532" href="/lia/part5/AExp/#14389" class="Bound">f</a><a id="14533" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Mul"></a><a id="14538" href="/lia/part5/AExp/#14538" class="InductiveConstructor">Mul</a> <a id="14542" class="Symbol">:</a> <a id="14544" class="Symbol">∀</a> <a id="14546" href="/lia/part5/AExp/#14546" class="Bound">e</a> <a id="14548" href="/lia/part5/AExp/#14548" class="Bound">f</a> <a id="14550" class="Symbol">→</a>
        <a id="14560" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14562" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14576" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14578" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14581" href="/lia/part5/AExp/#14546" class="Bound">e</a> <a id="14583" class="Symbol">→</a> 
        <a id="14594" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14596" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14610" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14612" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14615" href="/lia/part5/AExp/#14548" class="Bound">f</a> <a id="14617" class="Symbol">→</a> 
        <a id="14628" class="Comment">----------------------------</a>
        <a id="14665" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14667" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14681" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14683" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14686" class="Symbol">(</a><a id="14687" href="/lia/part5/AExp/#14546" class="Bound">e</a> <a id="14689" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="14691" href="/lia/part5/AExp/#14548" class="Bound">f</a><a id="14692" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-1"></a><a id="14697" href="/lia/part5/AExp/#14697" class="InductiveConstructor">Let-1</a> <a id="14703" class="Symbol">:</a> <a id="14705" class="Symbol">∀</a> <a id="14707" href="/lia/part5/AExp/#14707" class="Bound">e</a> <a id="14709" href="/lia/part5/AExp/#14709" class="Bound">f</a> <a id="14711" class="Symbol">→</a>
          <a id="14723" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14725" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14739" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14741" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14744" href="/lia/part5/AExp/#14707" class="Bound">e</a> <a id="14746" class="Symbol">→</a> 
          <a id="14759" class="Comment">--------------------------------</a>
          <a id="14802" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14804" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14818" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14820" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14823" class="Symbol">(</a><a id="14824" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="14828" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14830" href="/lia/part5/AExp/#14707" class="Bound">e</a> <a id="14832" href="/lia/part5/AExp/#14709" class="Bound">f</a><a id="14833" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-2"></a><a id="14838" href="/lia/part5/AExp/#14838" class="InductiveConstructor">Let-2</a> <a id="14844" class="Symbol">:</a> <a id="14846" class="Symbol">∀</a> <a id="14848" href="/lia/part5/AExp/#14848" class="Bound">e</a> <a id="14850" href="/lia/part5/AExp/#14850" class="Bound">f</a> <a id="14852" class="Symbol">→</a>
          <a id="14864" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14866" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="14868" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="14870" class="Symbol">→</a>
          <a id="14882" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14884" href="/lia/part5/AExp/#14124" class="Function Operator">NotFreeIn</a> <a id="14894" href="/lia/part5/AExp/#14850" class="Bound">f</a> <a id="14896" class="Symbol">→</a>
          <a id="14908" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14910" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="14924" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="14926" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="14929" href="/lia/part5/AExp/#14848" class="Bound">e</a> <a id="14931" class="Symbol">→</a>
          <a id="14943" class="Comment">--------------------------------</a>
          <a id="14986" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="14988" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="15002" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="15004" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="15007" class="Symbol">(</a><a id="15008" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="15012" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="15014" href="/lia/part5/AExp/#14848" class="Bound">e</a> <a id="15016" href="/lia/part5/AExp/#14850" class="Bound">f</a><a id="15017" class="Symbol">)</a>

  <a id="_AdmissibleFor_In_.Let-3"></a><a id="15022" href="/lia/part5/AExp/#15022" class="InductiveConstructor">Let-3</a> <a id="15028" class="Symbol">:</a> <a id="15030" class="Symbol">∀</a> <a id="15032" href="/lia/part5/AExp/#15032" class="Bound">e</a> <a id="15034" href="/lia/part5/AExp/#15034" class="Bound">f</a> <a id="15036" class="Symbol">→</a>
          <a id="15048" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="15050" href="/lia/part0/Equality/#2155" class="Function Operator">≢</a> <a id="15052" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="15054" class="Symbol">→</a>
          <a id="15066" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="15068" href="/lia/part5/AExp/#14124" class="Function Operator">NotFreeIn</a> <a id="15078" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="15080" class="Symbol">→</a>
          <a id="15092" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="15094" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="15108" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="15110" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="15113" href="/lia/part5/AExp/#15032" class="Bound">e</a> <a id="15115" class="Symbol">→</a>
          <a id="15127" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="15129" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="15143" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="15145" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="15148" href="/lia/part5/AExp/#15034" class="Bound">f</a> <a id="15150" class="Symbol">→</a>
          <a id="15162" class="Comment">--------------------------------</a>
          <a id="15205" href="/lia/part5/AExp/#14239" class="Bound">g</a> <a id="15207" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="15221" href="/lia/part5/AExp/#14250" class="Bound">x</a> <a id="15223" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="15226" class="Symbol">(</a><a id="15227" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="15231" href="/lia/part5/AExp/#573" class="Generalizable">y</a> <a id="15233" href="/lia/part5/AExp/#15032" class="Bound">e</a> <a id="15235" href="/lia/part5/AExp/#15034" class="Bound">f</a><a id="15236" class="Symbol">)</a>

<a id="subst-lemma"></a><a id="15239" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15251" class="Symbol">:</a> <a id="15253" class="Symbol">∀</a> <a id="15255" href="/lia/part5/AExp/#15255" class="Bound">g</a> <a id="15257" href="/lia/part5/AExp/#15257" class="Bound">x</a> <a id="15259" href="/lia/part5/AExp/#15259" class="Bound">ϱ</a> <a id="15261" class="Symbol">→</a>
  <a id="15265" href="/lia/part5/AExp/#15255" class="Bound">g</a> <a id="15267" href="/lia/part5/AExp/#14219" class="Datatype Operator">AdmissibleFor</a> <a id="15281" href="/lia/part5/AExp/#15257" class="Bound">x</a> <a id="15283" href="/lia/part5/AExp/#14219" class="Datatype Operator">In</a> <a id="15286" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="15288" class="Symbol">→</a>
  <a id="15292" class="Comment">--------------------------------------------</a>
  <a id="15339" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15341" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="15343" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="15346" href="/lia/part5/AExp/#15257" class="Bound">x</a> <a id="15348" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="15350" href="/lia/part5/AExp/#15255" class="Bound">g</a> <a id="15352" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="15354" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15356" href="/lia/part5/AExp/#15259" class="Bound">ϱ</a> <a id="15358" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="15360" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15362" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="15364" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15366" href="/lia/part5/AExp/#15259" class="Bound">ϱ</a> <a id="15368" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="15370" href="/lia/part5/AExp/#15257" class="Bound">x</a> <a id="15372" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="15374" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15376" href="/lia/part5/AExp/#15255" class="Bound">g</a> <a id="15378" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15380" href="/lia/part5/AExp/#15259" class="Bound">ϱ</a> <a id="15382" href="/lia/part0/Functions/#568" class="Function Operator">]</a>

<a id="15385" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15397" class="Symbol">_</a> <a id="15399" class="Symbol">_</a> <a id="15401" class="Symbol">_</a> <a id="15403" class="Symbol">(</a><a id="15404" href="/lia/part5/AExp/#14285" class="InductiveConstructor">Num</a> <a id="15408" href="/lia/part5/AExp/#15408" class="Bound">n</a><a id="15409" class="Symbol">)</a> <a id="15411" class="Symbol">=</a> <a id="15413" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="15419" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15431" class="Symbol">_</a> <a id="15433" href="/lia/part5/AExp/#15433" class="Bound">x</a> <a id="15435" class="Symbol">_</a> <a id="15437" class="Symbol">(</a><a id="15438" href="/lia/part5/AExp/#14329" class="InductiveConstructor">Var</a> <a id="15442" href="/lia/part5/AExp/#15442" class="Bound">y</a><a id="15443" class="Symbol">)</a>
  <a id="15447" class="Keyword">with</a> <a id="15452" href="/lia/part5/AExp/#15433" class="Bound">x</a> <a id="15454" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="15457" href="/lia/part5/AExp/#15442" class="Bound">y</a>
<a id="15459" class="Symbol">...</a> <a id="15463" class="Symbol">|</a> <a id="15465" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="15469" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="15474" class="Symbol">=</a> <a id="15476" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="15481" class="Symbol">...</a> <a id="15485" class="Symbol">|</a> <a id="15487" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="15490" class="Symbol">_</a> <a id="15492" class="Symbol">=</a> <a id="15494" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="15500" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15512" href="/lia/part5/AExp/#15512" class="Bound">g</a> <a id="15514" href="/lia/part5/AExp/#15514" class="Bound">x</a> <a id="15516" href="/lia/part5/AExp/#15516" class="Bound">ϱ</a> <a id="15518" class="Symbol">(</a><a id="15519" href="/lia/part5/AExp/#14379" class="InductiveConstructor">Add</a> <a id="15523" href="/lia/part5/AExp/#15523" class="Bound">e</a> <a id="15525" href="/lia/part5/AExp/#15525" class="Bound">f</a> <a id="15527" href="/lia/part5/AExp/#15527" class="Bound">adm-e</a> <a id="15533" href="/lia/part5/AExp/#15533" class="Bound">adm-f</a><a id="15538" class="Symbol">)</a>
  <a id="15542" class="Keyword">rewrite</a> <a id="15550" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15562" href="/lia/part5/AExp/#15512" class="Bound">g</a> <a id="15564" href="/lia/part5/AExp/#15514" class="Bound">x</a> <a id="15566" href="/lia/part5/AExp/#15516" class="Bound">ϱ</a> <a id="15568" href="/lia/part5/AExp/#15527" class="Bound">adm-e</a> <a id="15574" class="Symbol">|</a>
          <a id="15586" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15598" href="/lia/part5/AExp/#15512" class="Bound">g</a> <a id="15600" href="/lia/part5/AExp/#15514" class="Bound">x</a> <a id="15602" href="/lia/part5/AExp/#15516" class="Bound">ϱ</a> <a id="15604" href="/lia/part5/AExp/#15533" class="Bound">adm-f</a>
  <a id="15612" class="Symbol">=</a> <a id="15614" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="15620" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15632" href="/lia/part5/AExp/#15632" class="Bound">g</a> <a id="15634" href="/lia/part5/AExp/#15634" class="Bound">x</a> <a id="15636" href="/lia/part5/AExp/#15636" class="Bound">ϱ</a> <a id="15638" class="Symbol">(</a><a id="15639" href="/lia/part5/AExp/#14538" class="InductiveConstructor">Mul</a> <a id="15643" href="/lia/part5/AExp/#15643" class="Bound">e</a> <a id="15645" href="/lia/part5/AExp/#15645" class="Bound">f</a> <a id="15647" href="/lia/part5/AExp/#15647" class="Bound">adm-e</a> <a id="15653" href="/lia/part5/AExp/#15653" class="Bound">adm-f</a><a id="15658" class="Symbol">)</a>
  <a id="15662" class="Keyword">rewrite</a> <a id="15670" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15682" href="/lia/part5/AExp/#15632" class="Bound">g</a> <a id="15684" href="/lia/part5/AExp/#15634" class="Bound">x</a> <a id="15686" href="/lia/part5/AExp/#15636" class="Bound">ϱ</a> <a id="15688" href="/lia/part5/AExp/#15647" class="Bound">adm-e</a> <a id="15694" class="Symbol">|</a>
          <a id="15706" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15718" href="/lia/part5/AExp/#15632" class="Bound">g</a> <a id="15720" href="/lia/part5/AExp/#15634" class="Bound">x</a> <a id="15722" href="/lia/part5/AExp/#15636" class="Bound">ϱ</a> <a id="15724" href="/lia/part5/AExp/#15653" class="Bound">adm-f</a>
  <a id="15732" class="Symbol">=</a> <a id="15734" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="15740" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15752" href="/lia/part5/AExp/#15752" class="Bound">g</a> <a id="15754" href="/lia/part5/AExp/#15754" class="Bound">x</a> <a id="15756" href="/lia/part5/AExp/#15756" class="Bound">ϱ</a> <a id="15758" class="Symbol">(</a><a id="15759" href="/lia/part5/AExp/#14697" class="InductiveConstructor">Let-1</a> <a id="15765" href="/lia/part5/AExp/#15765" class="Bound">e</a> <a id="15767" href="/lia/part5/AExp/#15767" class="Bound">f</a> <a id="15769" href="/lia/part5/AExp/#15769" class="Bound">adm-e</a><a id="15774" class="Symbol">)</a>
  <a id="15778" class="Keyword">with</a> <a id="15783" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="15795" href="/lia/part5/AExp/#15752" class="Bound">g</a> <a id="15797" href="/lia/part5/AExp/#15754" class="Bound">x</a> <a id="15799" href="/lia/part5/AExp/#15756" class="Bound">ϱ</a> <a id="15801" href="/lia/part5/AExp/#15769" class="Bound">adm-e</a>
<a id="15807" class="Symbol">...</a> <a id="15811" class="Symbol">|</a> <a id="15813" href="/lia/part5/AExp/#15813" class="Bound">ind</a> <a id="15817" class="Symbol">=</a>
  <a id="15821" href="/lia/part0/Equality/#1858" class="Function Operator">begin</a>
    <a id="15831" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15833" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="15837" class="Bound">x</a> <a id="15839" class="Bound">e</a> <a id="15841" class="Bound">f</a> <a id="15843" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="15846" class="Bound">x</a> <a id="15848" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="15850" class="Bound">g</a> <a id="15852" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="15854" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15856" class="Bound">ϱ</a>
      <a id="15864" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="15867" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="15872" class="Symbol">(λ</a> <a id="15875" href="/lia/part5/AExp/#15875" class="Bound">C</a> <a id="15877" class="Symbol">→</a> <a id="15879" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15881" href="/lia/part5/AExp/#15875" class="Bound">C</a> <a id="15883" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15885" class="Bound">ϱ</a><a id="15886" class="Symbol">)</a> <a id="15888" class="Symbol">(</a><a id="15889" href="/lia/part5/AExp/#13833" class="Function">subs-Let-1</a> <a id="15900" class="Bound">x</a> <a id="15902" class="Bound">e</a><a id="15903" class="Symbol">)</a> <a id="15905" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="15911" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15913" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="15917" class="Bound">x</a> <a id="15919" class="Symbol">(</a><a id="15920" class="Bound">e</a> <a id="15922" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="15925" class="Bound">x</a> <a id="15927" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="15929" class="Bound">g</a> <a id="15931" href="/lia/part5/AExp/#13372" class="Function Operator">]</a><a id="15932" class="Symbol">)</a> <a id="15934" class="Bound">f</a> <a id="15936" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15938" class="Bound">ϱ</a>
      <a id="15946" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="15954" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15956" class="Bound">f</a> <a id="15958" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15960" class="Bound">ϱ</a> <a id="15962" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="15964" class="Bound">x</a> <a id="15966" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="15968" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="15970" class="Bound">e</a> <a id="15972" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="15975" class="Bound">x</a> <a id="15977" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="15979" class="Bound">g</a> <a id="15981" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="15983" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="15985" class="Bound">ϱ</a> <a id="15987" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="15995" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="15998" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="16003" class="Symbol">(λ</a> <a id="16006" href="/lia/part5/AExp/#16006" class="Bound">C</a> <a id="16008" class="Symbol">→</a> <a id="16010" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16012" class="Bound">f</a> <a id="16014" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16016" class="Bound">ϱ</a> <a id="16018" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16020" class="Bound">x</a> <a id="16022" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16024" href="/lia/part5/AExp/#16006" class="Bound">C</a> <a id="16026" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="16027" class="Symbol">)</a> <a id="16029" href="/lia/part5/AExp/#15813" class="Bound">ind</a> <a id="16033" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="16039" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16041" class="Bound">f</a> <a id="16043" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16045" class="Bound">ϱ</a> <a id="16047" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16049" class="Bound">x</a> <a id="16051" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16053" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16055" class="Bound">e</a> <a id="16057" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16059" class="Bound">ϱ</a> <a id="16061" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16063" class="Bound">x</a> <a id="16065" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16067" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16069" class="Bound">g</a> <a id="16071" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16073" class="Bound">ϱ</a> <a id="16075" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="16077" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="16085" href="/lia/part0/Equality/#2003" class="Function Operator">≡⟨</a> <a id="16088" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="16093" class="Symbol">(λ</a> <a id="16096" href="/lia/part5/AExp/#16096" class="Bound">C</a> <a id="16098" class="Symbol">→</a> <a id="16100" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16102" class="Bound">f</a> <a id="16104" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16106" href="/lia/part5/AExp/#16096" class="Bound">C</a><a id="16107" class="Symbol">)</a> <a id="16109" class="Symbol">(</a><a id="16110" href="/lia/part0/Equality/#458" class="Function">sym</a> <a id="16114" class="Symbol">(</a><a id="16115" href="/lia/part0/Functions/#3153" class="Function">doubleupdate</a> <a id="16128" class="Bound">x</a><a id="16129" class="Symbol">))</a> <a id="16132" href="/lia/part0/Equality/#2003" class="Function Operator">⟩</a>
    <a id="16138" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16140" class="Bound">f</a> <a id="16142" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16144" class="Bound">ϱ</a> <a id="16146" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16148" class="Bound">x</a> <a id="16150" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16152" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16154" class="Bound">g</a> <a id="16156" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16158" class="Bound">ϱ</a> <a id="16160" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="16162" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16164" class="Bound">x</a> <a id="16166" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16168" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16170" class="Bound">e</a> <a id="16172" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16174" class="Bound">ϱ</a> <a id="16176" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16178" class="Bound">x</a> <a id="16180" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16182" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16184" class="Bound">g</a> <a id="16186" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16188" class="Bound">ϱ</a> <a id="16190" href="/lia/part0/Functions/#568" class="Function Operator">]</a> <a id="16192" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
      <a id="16200" href="/lia/part0/Equality/#1928" class="Function Operator">≡⟨⟩</a>
    <a id="16208" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16210" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="16214" class="Bound">x</a> <a id="16216" class="Bound">e</a> <a id="16218" class="Bound">f</a> <a id="16220" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16222" class="Bound">ϱ</a> <a id="16224" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="16226" class="Bound">x</a> <a id="16228" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="16230" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="16232" class="Bound">g</a> <a id="16234" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="16236" class="Bound">ϱ</a> <a id="16238" href="/lia/part0/Functions/#568" class="Function Operator">]</a>
  <a id="16242" href="/lia/part0/Equality/#2104" class="Function Operator">∎</a>

<a id="16245" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="16257" href="/lia/part5/AExp/#16257" class="Bound">g</a> <a id="16259" href="/lia/part5/AExp/#16259" class="Bound">x</a> <a id="16261" href="/lia/part5/AExp/#16261" class="Bound">ϱ</a> <a id="16263" class="Symbol">(</a><a id="16264" href="/lia/part5/AExp/#14838" class="InductiveConstructor">Let-2</a> <a id="16270" href="/lia/part5/AExp/#16270" class="Bound">e</a> <a id="16272" href="/lia/part5/AExp/#16272" class="Bound">f</a> <a id="16274" href="/lia/part5/AExp/#16274" class="Bound">x≢y</a> <a id="16278" href="/lia/part5/AExp/#16278" class="Bound">xNFf</a> <a id="16283" href="/lia/part5/AExp/#16283" class="Bound">adm-e</a><a id="16288" class="Symbol">)</a> <a id="16290" class="Symbol">=</a> <a id="16292" class="Symbol">{!   !}</a>

<a id="16301" href="/lia/part5/AExp/#15239" class="Function">subst-lemma</a> <a id="16313" href="/lia/part5/AExp/#16313" class="Bound">g</a> <a id="16315" href="/lia/part5/AExp/#16315" class="Bound">x</a> <a id="16317" href="/lia/part5/AExp/#16317" class="Bound">ϱ</a> <a id="16319" class="Symbol">(</a><a id="16320" href="/lia/part5/AExp/#15022" class="InductiveConstructor">Let-3</a> <a id="16326" href="/lia/part5/AExp/#16326" class="Bound">e</a> <a id="16328" href="/lia/part5/AExp/#16328" class="Bound">f</a> <a id="16330" href="/lia/part5/AExp/#16330" class="Bound">x≢y</a> <a id="16334" href="/lia/part5/AExp/#16334" class="Bound">yNFg</a> <a id="16339" href="/lia/part5/AExp/#16339" class="Bound">adm-e</a> <a id="16345" href="/lia/part5/AExp/#16345" class="Bound">adm-f</a><a id="16350" class="Symbol">)</a> <a id="16352" class="Symbol">=</a> <a id="16354" class="Symbol">{!   !}</a>

<a id="16363" class="Comment">-- subst-lemma ($ n) = refl</a>

<a id="16392" class="Comment">-- subst-lemma {x} (` y)</a>
<a id="16417" class="Comment">--   with x ≡? y</a>
<a id="16434" class="Comment">-- ... | yes refl = refl</a>
<a id="16459" class="Comment">-- ... | no _ = refl</a>

<a id="16481" class="Comment">-- subst-lemma {x} {g} {ϱ} (e + f)</a>
<a id="16516" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="16557" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="16604" class="Comment">-- subst-lemma {x} {g} {ϱ} (e · f)</a>
<a id="16639" class="Comment">--   rewrite subst-lemma {x} {g} {ϱ} e |</a>
<a id="16680" class="Comment">--           subst-lemma {x} {g} {ϱ} f = refl</a>

<a id="16727" class="Comment">-- subst-lemma {x} {g} {ϱ} (Let y e f)</a>
<a id="16766" class="Comment">--   with x ≡? y</a>
<a id="16783" class="Comment">-- ... | yes refl = </a>
<a id="16804" class="Comment">--   begin</a>
<a id="16815" class="Comment">--   ⟦ Let x (e A[ x ↦ g ]) f ⟧ ϱ</a>
<a id="16849" class="Comment">--     ≡⟨⟩</a>
<a id="16860" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="16900" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ]) (subst-lemma {x} {g} {ϱ} e) ⟩</a>
<a id="16971" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="17001" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ C) (sym (doubleupdate x)) ⟩</a>
<a id="17057" class="Comment">--   ⟦ f ⟧ ϱ′ [ x ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="17088" class="Comment">--     ≡⟨⟩</a>
<a id="17099" class="Comment">--   ⟦ Let x e f ⟧ ϱ′</a>
<a id="17121" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>

<a id="17158" class="Comment">-- ... | no x≢y</a>
<a id="17174" class="Comment">--   with y ∈? fv g</a>
<a id="17194" class="Comment">-- ... | no ¬y∈g =</a>
<a id="17213" class="Comment">--   begin</a>
<a id="17224" class="Comment">--   ⟦ Let y (e A[ x ↦ g ]) (f A[ x ↦ g ]) ⟧ ϱ</a>
<a id="17271" class="Comment">--     ≡⟨⟩</a>
<a id="17282" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ ⟦ e A[ x ↦ g ] ⟧ ϱ ]</a>
<a id="17333" class="Comment">--     ≡⟨ cong (λ C → ⟦ f A[ x ↦ g ] ⟧ ϱ [ y ↦ C ]) (subst-lemma e) ⟩</a>
<a id="17403" class="Comment">--   ⟦ f A[ x ↦ g ] ⟧ ϱ′′</a>
<a id="17429" class="Comment">--     ≡⟨ subst-lemma f ⟩</a>
<a id="17455" class="Comment">--   ⟦ f ⟧ ϱ′′ [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="17488" class="Comment">--     ≡⟨⟩</a>
<a id="17499" class="Comment">--   ⟦ f ⟧ ϱ [ y ↦ ⟦ e ⟧ ϱ′ ] [ x ↦ ⟦ g ⟧ ϱ′′ ]</a>
<a id="17547" class="Comment">--     ≡⟨ sym (cong (λ C → ⟦ f ⟧ C) (update-comm _ _ _ _ _  x≢y))⟩</a>
<a id="17614" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ′′ ] [ y ↦ ⟦ e ⟧ ϱ′ ] </a>
<a id="17663" class="Comment">--     ≡⟨ cong (λ C → ⟦ f ⟧ ϱ [ x ↦ C ] [ y ↦ ⟦ e ⟧ ϱ′ ]) eq ⟩</a>
<a id="17726" class="Comment">--   ⟦ f ⟧ ϱ [ x ↦ ⟦ g ⟧ ϱ ] [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="17772" class="Comment">--     ≡⟨⟩</a>
<a id="17783" class="Comment">--   ⟦ f ⟧ ϱ′ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>
<a id="17814" class="Comment">--     ≡⟨⟩</a>
<a id="17825" class="Comment">--   ⟦ Let y e f ⟧ ϱ′</a>
<a id="17847" class="Comment">--   ∎ where ϱ′ = ϱ [ x ↦ ⟦ g ⟧ ϱ ]</a>
<a id="17883" class="Comment">--           ϱ′′ = ϱ [ y ↦ ⟦ e ⟧ ϱ′ ]</a>

<a id="17922" class="Comment">--           ag : Agree ϱ ϱ′′ (fv g)</a>
<a id="17959" class="Comment">--           ag = Agree-update-~∈ ¬y∈g</a>

<a id="17999" class="Comment">--           eq : ⟦ g ⟧ ϱ′′ ≡ ⟦ g ⟧ ϱ</a>
<a id="18037" class="Comment">--           eq = fv-lemma ϱ′′ ϱ g (sym-Agree ag)</a>

<a id="18088" class="Comment">-- ... | yes y∈g = {!   !}</a></pre>
<pre class="Agda"><a id="_≈_"></a><a id="18124" href="/lia/part5/AExp/#18124" class="Function Operator">_≈_</a> <a id="18128" class="Symbol">:</a> <a id="18130" class="Symbol">∀</a> <a id="18132" href="/lia/part5/AExp/#18132" class="Bound">e</a> <a id="18134" href="/lia/part5/AExp/#18134" class="Bound">f</a> <a id="18136" class="Symbol">→</a> <a id="18138" class="PrimitiveType">Set</a>
<a id="18142" href="/lia/part5/AExp/#18142" class="Bound">e</a> <a id="18144" href="/lia/part5/AExp/#18124" class="Function Operator">≈</a> <a id="18146" href="/lia/part5/AExp/#18146" class="Bound">f</a> <a id="18148" class="Symbol">=</a> <a id="18150" class="Symbol">∀</a> <a id="18152" href="/lia/part5/AExp/#18152" class="Bound">c</a> <a id="18154" href="/lia/part5/AExp/#18154" class="Bound">x</a> <a id="18156" href="/lia/part5/AExp/#18156" class="Bound">ϱ</a> <a id="18158" class="Symbol">→</a> <a id="18160" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18162" href="/lia/part5/AExp/#18152" class="Bound">c</a> <a id="18164" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="18167" href="/lia/part5/AExp/#18154" class="Bound">x</a> <a id="18169" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="18171" href="/lia/part5/AExp/#18142" class="Bound">e</a> <a id="18173" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="18175" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18177" href="/lia/part5/AExp/#18156" class="Bound">ϱ</a> <a id="18179" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="18181" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18183" href="/lia/part5/AExp/#18152" class="Bound">c</a> <a id="18185" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="18188" href="/lia/part5/AExp/#18154" class="Bound">x</a> <a id="18190" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="18192" href="/lia/part5/AExp/#18146" class="Bound">f</a> <a id="18194" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="18196" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18198" href="/lia/part5/AExp/#18156" class="Bound">ϱ</a></pre>

<h2 id="full-abstraction">
<a class="anchor" href="#full-abstraction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Full abstraction</h2>

<p>There is nothing else beside the numerical value an expression has.</p>

<pre class="Agda"><a id="full-abstraction-1"></a><a id="18299" href="/lia/part5/AExp/#18299" class="Function">full-abstraction-1</a> <a id="18318" class="Symbol">:</a> <a id="18320" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="18322" href="/lia/part5/AExp/#18124" class="Function Operator">≈</a> <a id="18324" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="18326" class="Symbol">→</a> <a id="18328" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="18331" href="/lia/part5/AExp/#18331" class="Bound">ϱ</a> <a id="18333" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="18335" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18337" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="18339" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18341" href="/lia/part5/AExp/#18331" class="Bound">ϱ</a> <a id="18343" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="18345" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18347" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="18349" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18351" href="/lia/part5/AExp/#18331" class="Bound">ϱ</a>
<a id="18353" href="/lia/part5/AExp/#18299" class="Function">full-abstraction-1</a> <a id="18372" href="/lia/part5/AExp/#18372" class="Bound">e≈f</a> <a id="18376" href="/lia/part5/AExp/#18376" class="Bound">ϱ</a> <a id="18378" class="Symbol">=</a> <a id="18380" href="/lia/part5/AExp/#18372" class="Bound">e≈f</a> <a id="18384" class="Symbol">(</a><a id="18385" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="18387" href="/lia/part5/AExp/#533" class="Function">x₀</a><a id="18389" class="Symbol">)</a> <a id="18391" href="/lia/part5/AExp/#533" class="Function">x₀</a> <a id="18394" href="/lia/part5/AExp/#18376" class="Bound">ϱ</a>

<a id="full-abstraction-2"></a><a id="18397" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18416" class="Symbol">:</a> <a id="18418" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="18421" href="/lia/part5/AExp/#18421" class="Bound">ϱ</a> <a id="18423" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="18425" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18427" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="18429" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18431" href="/lia/part5/AExp/#18421" class="Bound">ϱ</a> <a id="18433" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="18435" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="18437" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="18439" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="18441" href="/lia/part5/AExp/#18421" class="Bound">ϱ</a> <a id="18443" class="Symbol">→</a> <a id="18445" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="18447" href="/lia/part5/AExp/#18124" class="Function Operator">≈</a> <a id="18449" href="/lia/part5/AExp/#937" class="Generalizable">f</a>

<a id="18452" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18471" href="/lia/part5/AExp/#18471" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18479" class="Symbol">(</a><a id="18480" href="/lia/part5/AExp/#1173" class="InductiveConstructor Operator">$</a> <a id="18482" href="/lia/part5/AExp/#18482" class="Bound">n</a><a id="18483" class="Symbol">)</a> <a id="18485" href="/lia/part5/AExp/#18485" class="Bound">x</a> <a id="18487" href="/lia/part5/AExp/#18487" class="Bound">ϱ</a> <a id="18489" class="Symbol">=</a> <a id="18491" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="18497" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18516" href="/lia/part5/AExp/#18516" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18524" class="Symbol">(</a><a id="18525" href="/lia/part5/AExp/#1194" class="InductiveConstructor Operator">`</a> <a id="18527" href="/lia/part5/AExp/#18527" class="Bound">y</a><a id="18528" class="Symbol">)</a> <a id="18530" href="/lia/part5/AExp/#18530" class="Bound">x</a> <a id="18532" href="/lia/part5/AExp/#18532" class="Bound">ϱ</a>
  <a id="18536" class="Keyword">with</a> <a id="18541" href="/lia/part5/AExp/#18530" class="Bound">x</a> <a id="18543" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="18546" href="/lia/part5/AExp/#18527" class="Bound">y</a>
<a id="18548" class="Symbol">...</a> <a id="18552" class="Symbol">|</a> <a id="18554" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="18558" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="18563" class="Symbol">=</a> <a id="18565" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18573" class="Bound">ϱ</a>
<a id="18575" class="Symbol">...</a> <a id="18579" class="Symbol">|</a> <a id="18581" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="18584" class="Symbol">_</a> <a id="18586" class="Symbol">=</a> <a id="18588" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="18594" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18613" class="Symbol">{</a><a id="18614" href="/lia/part5/AExp/#18614" class="Bound">e</a><a id="18615" class="Symbol">}</a> <a id="18617" class="Symbol">{</a><a id="18618" href="/lia/part5/AExp/#18618" class="Bound">f</a><a id="18619" class="Symbol">}</a> <a id="18621" href="/lia/part5/AExp/#18621" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18629" class="Symbol">(</a><a id="18630" href="/lia/part5/AExp/#18630" class="Bound">c</a> <a id="18632" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="18634" href="/lia/part5/AExp/#18634" class="Bound">d</a><a id="18635" class="Symbol">)</a> <a id="18637" href="/lia/part5/AExp/#18637" class="Bound">x</a> <a id="18639" href="/lia/part5/AExp/#18639" class="Bound">ϱ</a>
  <a id="18643" class="Keyword">rewrite</a> <a id="18651" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18670" class="Symbol">{</a><a id="18671" href="/lia/part5/AExp/#18614" class="Bound">e</a><a id="18672" class="Symbol">}</a> <a id="18674" class="Symbol">{</a><a id="18675" href="/lia/part5/AExp/#18618" class="Bound">f</a><a id="18676" class="Symbol">}</a> <a id="18678" href="/lia/part5/AExp/#18621" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18686" href="/lia/part5/AExp/#18630" class="Bound">c</a> <a id="18688" href="/lia/part5/AExp/#18637" class="Bound">x</a> <a id="18690" href="/lia/part5/AExp/#18639" class="Bound">ϱ</a> <a id="18692" class="Symbol">|</a>
          <a id="18704" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18723" class="Symbol">{</a><a id="18724" href="/lia/part5/AExp/#18614" class="Bound">e</a><a id="18725" class="Symbol">}</a> <a id="18727" class="Symbol">{</a><a id="18728" href="/lia/part5/AExp/#18618" class="Bound">f</a><a id="18729" class="Symbol">}</a> <a id="18731" href="/lia/part5/AExp/#18621" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18739" href="/lia/part5/AExp/#18634" class="Bound">d</a> <a id="18741" href="/lia/part5/AExp/#18637" class="Bound">x</a> <a id="18743" href="/lia/part5/AExp/#18639" class="Bound">ϱ</a> <a id="18745" class="Symbol">=</a> <a id="18747" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="18753" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18772" class="Symbol">{</a><a id="18773" href="/lia/part5/AExp/#18773" class="Bound">e</a><a id="18774" class="Symbol">}</a> <a id="18776" class="Symbol">{</a><a id="18777" href="/lia/part5/AExp/#18777" class="Bound">f</a><a id="18778" class="Symbol">}</a> <a id="18780" href="/lia/part5/AExp/#18780" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18788" class="Symbol">(</a><a id="18789" href="/lia/part5/AExp/#18789" class="Bound">c</a> <a id="18791" href="/lia/part5/AExp/#1241" class="InductiveConstructor Operator">·</a> <a id="18793" href="/lia/part5/AExp/#18793" class="Bound">d</a><a id="18794" class="Symbol">)</a> <a id="18796" href="/lia/part5/AExp/#18796" class="Bound">x</a> <a id="18798" href="/lia/part5/AExp/#18798" class="Bound">ϱ</a>
  <a id="18802" class="Keyword">rewrite</a> <a id="18810" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18829" class="Symbol">{</a><a id="18830" href="/lia/part5/AExp/#18773" class="Bound">e</a><a id="18831" class="Symbol">}</a> <a id="18833" class="Symbol">{</a><a id="18834" href="/lia/part5/AExp/#18777" class="Bound">f</a><a id="18835" class="Symbol">}</a> <a id="18837" href="/lia/part5/AExp/#18780" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18845" href="/lia/part5/AExp/#18789" class="Bound">c</a> <a id="18847" href="/lia/part5/AExp/#18796" class="Bound">x</a> <a id="18849" href="/lia/part5/AExp/#18798" class="Bound">ϱ</a> <a id="18851" class="Symbol">|</a>
          <a id="18863" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18882" class="Symbol">{</a><a id="18883" href="/lia/part5/AExp/#18773" class="Bound">e</a><a id="18884" class="Symbol">}</a> <a id="18886" class="Symbol">{</a><a id="18887" href="/lia/part5/AExp/#18777" class="Bound">f</a><a id="18888" class="Symbol">}</a> <a id="18890" href="/lia/part5/AExp/#18780" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18898" href="/lia/part5/AExp/#18793" class="Bound">d</a> <a id="18900" href="/lia/part5/AExp/#18796" class="Bound">x</a> <a id="18902" href="/lia/part5/AExp/#18798" class="Bound">ϱ</a> <a id="18904" class="Symbol">=</a> <a id="18906" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="18912" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="18931" class="Symbol">{</a><a id="18932" href="/lia/part5/AExp/#18932" class="Bound">e</a><a id="18933" class="Symbol">}</a> <a id="18935" class="Symbol">{</a><a id="18936" href="/lia/part5/AExp/#18936" class="Bound">f</a><a id="18937" class="Symbol">}</a> <a id="18939" href="/lia/part5/AExp/#18939" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="18947" class="Symbol">(</a><a id="18948" href="/lia/part5/AExp/#868" class="InductiveConstructor">Let</a> <a id="18952" href="/lia/part5/AExp/#18952" class="Bound">y</a> <a id="18954" href="/lia/part5/AExp/#18954" class="Bound">c</a> <a id="18956" href="/lia/part5/AExp/#18956" class="Bound">d</a><a id="18957" class="Symbol">)</a> <a id="18959" href="/lia/part5/AExp/#18959" class="Bound">x</a> <a id="18961" href="/lia/part5/AExp/#18961" class="Bound">ϱ</a>
  <a id="18965" class="Keyword">with</a> <a id="18970" href="/lia/part5/AExp/#18959" class="Bound">x</a> <a id="18972" href="/lia/part0/Equality/#2906" class="Field Operator">≡?</a> <a id="18975" href="/lia/part5/AExp/#18952" class="Bound">y</a>
<a id="18977" class="Symbol">...</a> <a id="18981" class="Symbol">|</a> <a id="18983" href="/lia/part0/Decidable/#186" class="InductiveConstructor">yes</a> <a id="18987" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="18994" class="Keyword">rewrite</a> <a id="19002" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="19021" class="Symbol">{</a><a id="19022" class="Bound">e</a><a id="19023" class="Symbol">}</a> <a id="19025" class="Symbol">{</a><a id="19026" class="Bound">f</a><a id="19027" class="Symbol">}</a> <a id="19029" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="19037" class="Bound">c</a> <a id="19039" class="Bound">y</a> <a id="19041" class="Bound">ϱ</a> <a id="19043" class="Symbol">=</a> <a id="19045" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="19050" class="Symbol">...</a> <a id="19054" class="Symbol">|</a> <a id="19056" href="/lia/part0/Decidable/#204" class="InductiveConstructor">no</a> <a id="19059" class="Symbol">_</a>
  <a id="19063" class="Keyword">rewrite</a> <a id="19071" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="19090" class="Symbol">{</a><a id="19091" class="Bound">e</a><a id="19092" class="Symbol">}</a> <a id="19094" class="Symbol">{</a><a id="19095" class="Bound">f</a><a id="19096" class="Symbol">}</a> <a id="19098" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="19106" class="Bound">c</a> <a id="19108" class="Bound">x</a> <a id="19110" class="Bound">ϱ</a> <a id="19112" class="Symbol">|</a>
          <a id="19124" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a> <a id="19143" class="Symbol">{</a><a id="19144" class="Bound">e</a><a id="19145" class="Symbol">}</a> <a id="19147" class="Symbol">{</a><a id="19148" class="Bound">f</a><a id="19149" class="Symbol">}</a> <a id="19151" class="Bound">⟦e⟧≡⟦f⟧</a> <a id="19159" class="Bound">d</a> <a id="19161" class="Bound">x</a> <a id="19163" class="Symbol">(</a><a id="19164" class="Bound">ϱ</a> <a id="19166" href="/lia/part0/Functions/#568" class="Function Operator">[</a> <a id="19168" class="Bound">y</a> <a id="19170" href="/lia/part0/Functions/#568" class="Function Operator">↦</a> <a id="19172" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="19174" class="Bound">c</a> <a id="19176" href="/lia/part5/AExp/#13372" class="Function Operator">A[</a> <a id="19179" class="Bound">x</a> <a id="19181" href="/lia/part5/AExp/#13372" class="Function Operator">↦</a> <a id="19183" class="Bound">f</a> <a id="19185" href="/lia/part5/AExp/#13372" class="Function Operator">]</a> <a id="19187" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="19189" class="Bound">ϱ</a> <a id="19191" href="/lia/part0/Functions/#568" class="Function Operator">]</a><a id="19192" class="Symbol">)</a> <a id="19194" class="Symbol">=</a> <a id="19196" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="full-abstraction"></a><a id="19202" href="/lia/part5/AExp/#19202" class="Function">full-abstraction</a> <a id="19219" class="Symbol">:</a> <a id="19221" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="19223" href="/lia/part5/AExp/#18124" class="Function Operator">≈</a> <a id="19225" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="19227" href="/lia/part0/Logic/#3145" class="Function Operator">↔</a> <a id="19229" href="/lia/part0/Logic/#216" class="Function">∀[</a> <a id="19232" href="/lia/part5/AExp/#19232" class="Bound">ϱ</a> <a id="19234" href="/lia/part0/Logic/#216" class="Function">]</a> <a id="19236" href="/lia/part5/AExp/#1711" class="Function Operator">⟦</a> <a id="19238" href="/lia/part5/AExp/#932" class="Generalizable">e</a> <a id="19240" href="/lia/part5/AExp/#1711" class="Function Operator">⟧</a> <a id="19242" href="/lia/part5/AExp/#19232" class="Bound">ϱ</a> <a id="19244" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="19246" href="/lia/part5/AExp/#1872" class="Function Operator">A⟦</a> <a id="19249" href="/lia/part5/AExp/#937" class="Generalizable">f</a> <a id="19251" href="/lia/part5/AExp/#1872" class="Function Operator">⟧</a> <a id="19253" href="/lia/part5/AExp/#19232" class="Bound">ϱ</a>
<a id="19255" href="/lia/part5/AExp/#19202" class="Function">full-abstraction</a> <a id="19272" class="Symbol">=</a> <a id="19274" href="/lia/part5/AExp/#18299" class="Function">full-abstraction-1</a> <a id="19293" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="19295" href="/lia/part5/AExp/#18397" class="Function">full-abstraction-2</a></pre>

<h1 id="binary-expressions">
<a class="anchor" href="#binary-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary expressions</h1>

<h2 id="syntax">
<a class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>

<pre class="Agda"><a id="19356" class="Keyword">infix</a> <a id="19362" class="Number">30</a> <a id="19365" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">_𝟬</a> <a id="19368" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">_𝟭</a>

<a id="19372" class="Keyword">data</a> <a id="Bin"></a><a id="19377" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19381" class="Symbol">:</a> <a id="19383" class="PrimitiveType">Set</a> <a id="19387" class="Keyword">where</a>
  <a id="Bin.$"></a><a id="19395" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="19397" class="Symbol">:</a> <a id="19399" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a>
  <a id="Bin._𝟬"></a><a id="19405" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">_𝟬</a> <a id="19408" class="Symbol">:</a> <a id="19410" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19414" class="Symbol">→</a> <a id="19416" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a>
  <a id="Bin._𝟭"></a><a id="19422" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">_𝟭</a> <a id="19425" class="Symbol">:</a> <a id="19427" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19431" class="Symbol">→</a> <a id="19433" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a>
  <a id="Bin.Add"></a><a id="19439" href="/lia/part5/AExp/#19439" class="InductiveConstructor">Add</a> <a id="19443" class="Symbol">:</a> <a id="19445" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19449" class="Symbol">→</a> <a id="19451" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19455" class="Symbol">→</a> <a id="19457" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a>

<a id="19462" class="Keyword">pattern</a> <a id="_+_"></a><a id="19470" href="/lia/part5/AExp/#19470" class="InductiveConstructor Operator">_+_</a> <a id="19474" href="/lia/part5/AExp/#19484" class="Bound">x</a> <a id="19476" href="/lia/part5/AExp/#19486" class="Bound">y</a> <a id="19478" class="Symbol">=</a> <a id="19480" class="InductiveConstructor">Add</a> <a id="19484" href="/lia/part5/AExp/#19484" class="Bound">x</a> <a id="19486" href="/lia/part5/AExp/#19486" class="Bound">y</a>

<a id="19489" class="Keyword">private</a>
  <a id="19499" class="Keyword">variable</a>
    <a id="19512" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19514" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19517" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="19519" href="/lia/part5/AExp/#19519" class="Generalizable">b′</a> <a id="19522" class="Symbol">:</a> <a id="19524" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a></pre>

<h2 id="denotational-semantics-1">
<a class="anchor" href="#denotational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Denotational semantics</h2>

<pre class="Agda"><a id="19564" class="Keyword">private</a> <a id="⟦_⟧"></a><a id="19572" href="/lia/part5/AExp/#19572" class="Function Operator">⟦_⟧</a> <a id="19576" class="Symbol">:</a> <a id="19578" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19582" class="Symbol">→</a> <a id="19584" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="19586" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19588" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="19590" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="19592" class="Symbol">=</a> <a id="19594" class="Number">0</a>
<a id="19596" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19598" href="/lia/part5/AExp/#19598" class="Bound">a</a> <a id="19600" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="19602" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="19604" class="Symbol">=</a> <a id="19606" class="Number">2</a> <a id="19608" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="19611" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19613" href="/lia/part5/AExp/#19598" class="Bound">a</a> <a id="19615" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a>
<a id="19617" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19619" href="/lia/part5/AExp/#19619" class="Bound">a</a> <a id="19621" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="19623" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="19625" class="Symbol">=</a> <a id="19627" class="Number">1</a> <a id="19629" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="19632" class="Number">2</a> <a id="19634" href="/lia/part5/AExp/#190" class="Primitive Operator">·ℕ</a> <a id="19637" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19639" href="/lia/part5/AExp/#19619" class="Bound">a</a> <a id="19641" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a>
<a id="19643" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19645" href="/lia/part5/AExp/#19645" class="Bound">a</a> <a id="19647" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="19649" href="/lia/part5/AExp/#19649" class="Bound">b</a> <a id="19651" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="19653" class="Symbol">=</a> <a id="19655" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19657" href="/lia/part5/AExp/#19645" class="Bound">a</a> <a id="19659" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="19661" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="19664" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="19666" href="/lia/part5/AExp/#19649" class="Bound">b</a> <a id="19668" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a></pre>

<h2 id="small-steps-operational-semantics-1">
<a class="anchor" href="#small-steps-operational-semantics-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-steps operational semantics</h2>

<pre class="Agda"><a id="19717" class="Keyword">infix</a> <a id="19723" class="Number">4</a> <a id="19725" href="/lia/part5/AExp/#19734" class="Datatype Operator">_↝_</a>
<a id="19729" class="Keyword">data</a> <a id="_↝_"></a><a id="19734" href="/lia/part5/AExp/#19734" class="Datatype Operator">_↝_</a> <a id="19738" class="Symbol">:</a> <a id="19740" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19744" class="Symbol">→</a> <a id="19746" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="19750" class="Symbol">→</a> <a id="19752" class="PrimitiveType">Set</a> <a id="19756" class="Keyword">where</a>

  <a id="_↝_.↝𝟬"></a><a id="19765" href="/lia/part5/AExp/#19765" class="InductiveConstructor">↝𝟬</a> <a id="19768" class="Symbol">:</a> <a id="19770" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19772" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19774" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19777" class="Symbol">→</a>
       <a id="19786" class="Comment">----------</a>
       <a id="19804" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19806" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="19808" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19810" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19813" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝𝟭"></a><a id="19818" href="/lia/part5/AExp/#19818" class="InductiveConstructor">↝𝟭</a> <a id="19821" class="Symbol">:</a> <a id="19823" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19825" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19827" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19830" class="Symbol">→</a>
       <a id="19839" class="Comment">----------</a>
       <a id="19857" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19859" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="19861" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19863" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19866" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝$L"></a><a id="19871" href="/lia/part5/AExp/#19871" class="InductiveConstructor">↝$L</a> <a id="19875" class="Symbol">:</a> <a id="19877" class="Comment">---------</a>
        <a id="19895" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="19897" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="19899" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19901" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19903" href="/lia/part5/AExp/#19512" class="Generalizable">a</a>

  <a id="_↝_.↝$R"></a><a id="19908" href="/lia/part5/AExp/#19908" class="InductiveConstructor">↝$R</a> <a id="19912" class="Symbol">:</a> <a id="19914" class="Comment">---------</a>
        <a id="19932" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19934" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="19936" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="19938" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19940" href="/lia/part5/AExp/#19512" class="Generalizable">a</a>

  <a id="_↝_.↝+L"></a><a id="19945" href="/lia/part5/AExp/#19945" class="InductiveConstructor">↝+L</a> <a id="19949" class="Symbol">:</a> <a id="19951" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19953" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19955" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="19958" class="Symbol">→</a>
        <a id="19968" class="Comment">--------------</a>
        <a id="19991" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="19993" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="19995" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="19997" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="19999" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="20002" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20004" href="/lia/part5/AExp/#19517" class="Generalizable">b</a>

  <a id="_↝_.↝+R"></a><a id="20009" href="/lia/part5/AExp/#20009" class="InductiveConstructor">↝+R</a> <a id="20013" class="Symbol">:</a> <a id="20015" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20017" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20019" href="/lia/part5/AExp/#19519" class="Generalizable">b′</a> <a id="20022" class="Symbol">→</a>
        <a id="20032" class="Comment">--------------</a>
        <a id="20055" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20057" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20059" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20061" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20063" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20065" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20067" href="/lia/part5/AExp/#19519" class="Generalizable">b′</a>
        
  <a id="_↝_.↝+𝟬𝟬"></a><a id="20081" href="/lia/part5/AExp/#20081" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="20086" class="Symbol">:</a> <a id="20088" class="Comment">---------------------</a>
         <a id="20119" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20121" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="20123" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20125" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20127" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="20129" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20131" class="Symbol">(</a><a id="20132" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20134" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20136" href="/lia/part5/AExp/#19517" class="Generalizable">b</a><a id="20137" class="Symbol">)</a> <a id="20139" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a>

  <a id="_↝_.↝+𝟬𝟭"></a><a id="20144" href="/lia/part5/AExp/#20144" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="20149" class="Symbol">:</a> <a id="20151" class="Comment">---------------------</a>
         <a id="20182" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20184" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="20186" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20188" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20190" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="20192" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20194" class="Symbol">(</a><a id="20195" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20197" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20199" href="/lia/part5/AExp/#19517" class="Generalizable">b</a><a id="20200" class="Symbol">)</a> <a id="20202" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟬"></a><a id="20207" href="/lia/part5/AExp/#20207" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="20212" class="Symbol">:</a> <a id="20214" class="Comment">---------------------</a>
         <a id="20245" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20247" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="20249" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20251" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20253" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="20255" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20257" class="Symbol">(</a><a id="20258" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20260" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20262" href="/lia/part5/AExp/#19517" class="Generalizable">b</a><a id="20263" class="Symbol">)</a> <a id="20265" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a>

  <a id="_↝_.↝+𝟭𝟭"></a><a id="20270" href="/lia/part5/AExp/#20270" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="20275" class="Symbol">:</a> <a id="20277" class="Comment">----------------------------</a>
         <a id="20315" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20317" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="20319" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20321" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20323" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="20325" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20327" class="Symbol">(</a><a id="20328" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20330" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20332" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="20334" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="20336" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="20338" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="20339" class="Symbol">)</a> <a id="20341" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a></pre>

<h2 id="agreement">
<a class="anchor" href="#agreement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agreement</h2>

<pre class="Agda"><a id="agree"></a><a id="20367" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20373" class="Symbol">:</a> <a id="20375" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20377" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="20379" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="20382" class="Symbol">→</a>
        <a id="20392" class="Comment">--------------</a>
        <a id="20415" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20417" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="20419" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20421" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="20423" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20425" href="/lia/part5/AExp/#19514" class="Generalizable">a′</a> <a id="20428" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a>

<a id="20431" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20437" class="Symbol">(</a><a id="20438" href="/lia/part5/AExp/#19765" class="InductiveConstructor">↝𝟬</a> <a id="20441" href="/lia/part5/AExp/#20441" class="Bound">e↝e'</a><a id="20445" class="Symbol">)</a> <a id="20447" class="Keyword">rewrite</a> <a id="20455" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20461" href="/lia/part5/AExp/#20441" class="Bound">e↝e'</a> <a id="20466" class="Symbol">=</a> <a id="20468" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20473" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20479" class="Symbol">(</a><a id="20480" href="/lia/part5/AExp/#19818" class="InductiveConstructor">↝𝟭</a> <a id="20483" href="/lia/part5/AExp/#20483" class="Bound">e↝e'</a><a id="20487" class="Symbol">)</a> <a id="20489" class="Keyword">rewrite</a> <a id="20497" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20503" href="/lia/part5/AExp/#20483" class="Bound">e↝e'</a> <a id="20508" class="Symbol">=</a> <a id="20510" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20515" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20521" href="/lia/part5/AExp/#19871" class="InductiveConstructor">↝$L</a> <a id="20525" class="Symbol">=</a> <a id="20527" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20532" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20538" href="/lia/part5/AExp/#19908" class="InductiveConstructor">↝$R</a> <a id="20542" class="Symbol">=</a> <a id="20544" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="20550" class="Symbol">_</a>
<a id="20552" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20558" class="Symbol">(</a><a id="20559" href="/lia/part5/AExp/#19945" class="InductiveConstructor">↝+L</a> <a id="20563" href="/lia/part5/AExp/#20563" class="Bound">e↝e'</a><a id="20567" class="Symbol">)</a> <a id="20569" class="Keyword">rewrite</a> <a id="20577" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20583" href="/lia/part5/AExp/#20563" class="Bound">e↝e'</a> <a id="20588" class="Symbol">=</a> <a id="20590" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20595" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20601" class="Symbol">(</a><a id="20602" href="/lia/part5/AExp/#20009" class="InductiveConstructor">↝+R</a> <a id="20606" href="/lia/part5/AExp/#20606" class="Bound">e↝e'</a><a id="20610" class="Symbol">)</a> <a id="20612" class="Keyword">rewrite</a> <a id="20620" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20626" href="/lia/part5/AExp/#20606" class="Bound">e↝e'</a> <a id="20631" class="Symbol">=</a> <a id="20633" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="20638" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20644" class="Symbol">(</a><a id="20645" href="/lia/part5/AExp/#20081" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="20650" class="Symbol">{</a><a id="20651" href="/lia/part5/AExp/#20651" class="Bound">a</a><a id="20652" class="Symbol">}</a> <a id="20654" class="Symbol">{</a><a id="20655" href="/lia/part5/AExp/#20655" class="Bound">b</a><a id="20656" class="Symbol">})</a> <a id="20659" class="Symbol">=</a> <a id="20661" href="/lia/part5/AExp/#20688" class="Function">magic</a> <a id="20667" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20669" href="/lia/part5/AExp/#20651" class="Bound">a</a> <a id="20671" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20673" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20675" href="/lia/part5/AExp/#20655" class="Bound">b</a> <a id="20677" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20679" class="Keyword">where</a>

  <a id="20688" href="/lia/part5/AExp/#20688" class="Function">magic</a> <a id="20694" class="Symbol">:</a> <a id="20696" class="Symbol">∀</a> <a id="20698" href="/lia/part5/AExp/#20698" class="Bound">a</a> <a id="20700" href="/lia/part5/AExp/#20700" class="Bound">b</a> <a id="20702" class="Symbol">→</a> <a id="20704" href="/lia/part5/AExp/#20698" class="Bound">a</a> <a id="20706" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20709" class="Symbol">(</a><a id="20710" href="/lia/part5/AExp/#20698" class="Bound">a</a> <a id="20712" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20715" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="20719" class="Symbol">)</a> <a id="20721" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20724" class="Symbol">(</a><a id="20725" href="/lia/part5/AExp/#20700" class="Bound">b</a> <a id="20727" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20730" class="Symbol">(</a><a id="20731" href="/lia/part5/AExp/#20700" class="Bound">b</a> <a id="20733" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20736" class="Number">0</a><a id="20737" class="Symbol">))</a> <a id="20740" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="20742" href="/lia/part5/AExp/#20698" class="Bound">a</a> <a id="20744" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20747" href="/lia/part5/AExp/#20700" class="Bound">b</a> <a id="20749" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20752" class="Symbol">(</a><a id="20753" href="/lia/part5/AExp/#20698" class="Bound">a</a> <a id="20755" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20758" href="/lia/part5/AExp/#20700" class="Bound">b</a> <a id="20760" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20763" class="Number">0</a><a id="20764" class="Symbol">)</a>
  <a id="20768" href="/lia/part5/AExp/#20688" class="Function">magic</a> <a id="20774" class="Symbol">=</a> <a id="20776" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="20785" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20791" class="Symbol">(</a><a id="20792" href="/lia/part5/AExp/#20144" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="20797" class="Symbol">{</a><a id="20798" href="/lia/part5/AExp/#20798" class="Bound">a</a><a id="20799" class="Symbol">}</a> <a id="20801" class="Symbol">{</a><a id="20802" href="/lia/part5/AExp/#20802" class="Bound">b</a><a id="20803" class="Symbol">})</a> <a id="20806" class="Symbol">=</a> <a id="20808" href="/lia/part5/AExp/#20841" class="Function">magic</a> <a id="20814" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20816" href="/lia/part5/AExp/#20798" class="Bound">a</a> <a id="20818" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20820" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20822" href="/lia/part5/AExp/#20802" class="Bound">b</a> <a id="20824" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20826" class="Keyword">where</a>
    
    <a id="20841" href="/lia/part5/AExp/#20841" class="Function">magic</a> <a id="20847" class="Symbol">:</a> <a id="20849" class="Symbol">∀</a> <a id="20851" href="/lia/part5/AExp/#20851" class="Bound">a</a> <a id="20853" href="/lia/part5/AExp/#20853" class="Bound">b</a> <a id="20855" class="Symbol">→</a> <a id="20857" href="/lia/part5/AExp/#20851" class="Bound">a</a> <a id="20859" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20862" class="Symbol">(</a><a id="20863" href="/lia/part5/AExp/#20851" class="Bound">a</a> <a id="20865" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20868" class="Number">0</a><a id="20869" class="Symbol">)</a> <a id="20871" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20874" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="20878" class="Symbol">(</a><a id="20879" href="/lia/part5/AExp/#20853" class="Bound">b</a> <a id="20881" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20884" class="Symbol">(</a><a id="20885" href="/lia/part5/AExp/#20853" class="Bound">b</a> <a id="20887" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20890" class="Number">0</a><a id="20891" class="Symbol">))</a> <a id="20894" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="20896" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="20900" class="Symbol">(</a><a id="20901" href="/lia/part5/AExp/#20851" class="Bound">a</a> <a id="20903" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20906" href="/lia/part5/AExp/#20853" class="Bound">b</a> <a id="20908" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20911" class="Symbol">(</a><a id="20912" href="/lia/part5/AExp/#20851" class="Bound">a</a> <a id="20914" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20917" href="/lia/part5/AExp/#20853" class="Bound">b</a> <a id="20919" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="20922" class="Number">0</a><a id="20923" class="Symbol">))</a>
    <a id="20930" href="/lia/part5/AExp/#20841" class="Function">magic</a> <a id="20936" class="Symbol">=</a> <a id="20938" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>

<a id="20947" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="20953" class="Symbol">(</a><a id="20954" href="/lia/part5/AExp/#20207" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="20959" class="Symbol">{</a><a id="20960" href="/lia/part5/AExp/#20960" class="Bound">a</a><a id="20961" class="Symbol">}</a> <a id="20963" class="Symbol">{</a><a id="20964" href="/lia/part5/AExp/#20964" class="Bound">b</a><a id="20965" class="Symbol">})</a> <a id="20968" class="Symbol">=</a> <a id="20970" href="/lia/part5/AExp/#21003" class="Function">magic</a> <a id="20976" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20978" href="/lia/part5/AExp/#20960" class="Bound">a</a> <a id="20980" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20982" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="20984" href="/lia/part5/AExp/#20964" class="Bound">b</a> <a id="20986" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="20988" class="Keyword">where</a>
    
    <a id="21003" href="/lia/part5/AExp/#21003" class="Function">magic</a> <a id="21009" class="Symbol">:</a> <a id="21011" class="Symbol">∀</a> <a id="21013" href="/lia/part5/AExp/#21013" class="Bound">a</a> <a id="21015" href="/lia/part5/AExp/#21015" class="Bound">b</a> <a id="21017" class="Symbol">→</a> <a id="21019" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21023" class="Symbol">(</a><a id="21024" href="/lia/part5/AExp/#21013" class="Bound">a</a> <a id="21026" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21029" class="Symbol">(</a><a id="21030" href="/lia/part5/AExp/#21013" class="Bound">a</a> <a id="21032" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21035" class="Number">0</a><a id="21036" class="Symbol">)</a> <a id="21038" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21041" class="Symbol">(</a><a id="21042" href="/lia/part5/AExp/#21015" class="Bound">b</a> <a id="21044" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21047" class="Symbol">(</a><a id="21048" href="/lia/part5/AExp/#21015" class="Bound">b</a> <a id="21050" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21053" class="Number">0</a><a id="21054" class="Symbol">)))</a> <a id="21058" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="21060" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21064" class="Symbol">(</a><a id="21065" href="/lia/part5/AExp/#21013" class="Bound">a</a> <a id="21067" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21070" href="/lia/part5/AExp/#21015" class="Bound">b</a> <a id="21072" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21075" class="Symbol">(</a><a id="21076" href="/lia/part5/AExp/#21013" class="Bound">a</a> <a id="21078" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21081" href="/lia/part5/AExp/#21015" class="Bound">b</a> <a id="21083" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21086" class="Number">0</a><a id="21087" class="Symbol">))</a>
    <a id="21094" href="/lia/part5/AExp/#21003" class="Function">magic</a> <a id="21100" class="Symbol">=</a> <a id="21102" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a>
    
<a id="21115" href="/lia/part5/AExp/#20367" class="Function">agree</a> <a id="21121" class="Symbol">(</a><a id="21122" href="/lia/part5/AExp/#20270" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="21127" class="Symbol">{</a><a id="21128" href="/lia/part5/AExp/#21128" class="Bound">a</a><a id="21129" class="Symbol">}</a> <a id="21131" class="Symbol">{</a><a id="21132" href="/lia/part5/AExp/#21132" class="Bound">b</a><a id="21133" class="Symbol">})</a> <a id="21136" class="Symbol">=</a> <a id="21138" href="/lia/part5/AExp/#21165" class="Function">magic</a> <a id="21144" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="21146" href="/lia/part5/AExp/#21128" class="Bound">a</a> <a id="21148" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="21150" href="/lia/part5/AExp/#19572" class="Function Operator">⟦</a> <a id="21152" href="/lia/part5/AExp/#21132" class="Bound">b</a> <a id="21154" href="/lia/part5/AExp/#19572" class="Function Operator">⟧</a> <a id="21156" class="Keyword">where</a>

  <a id="21165" href="/lia/part5/AExp/#21165" class="Function">magic</a> <a id="21171" class="Symbol">:</a> <a id="21173" class="Symbol">∀</a> <a id="21175" href="/lia/part5/AExp/#21175" class="Bound">a</a> <a id="21177" href="/lia/part5/AExp/#21177" class="Bound">b</a> <a id="21179" class="Symbol">→</a> <a id="21181" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21185" class="Symbol">(</a><a id="21186" href="/lia/part5/AExp/#21175" class="Bound">a</a> <a id="21188" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21191" class="Symbol">(</a><a id="21192" href="/lia/part5/AExp/#21175" class="Bound">a</a> <a id="21194" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21197" class="Number">0</a><a id="21198" class="Symbol">)</a> <a id="21200" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21203" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="21207" class="Symbol">(</a><a id="21208" href="/lia/part5/AExp/#21177" class="Bound">b</a> <a id="21210" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21213" class="Symbol">(</a><a id="21214" href="/lia/part5/AExp/#21177" class="Bound">b</a> <a id="21216" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21219" class="Number">0</a><a id="21220" class="Symbol">)))</a> <a id="21224" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="21226" href="/lia/part5/AExp/#21175" class="Bound">a</a> <a id="21228" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21231" href="/lia/part5/AExp/#21177" class="Bound">b</a> <a id="21233" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21236" class="Number">1</a> <a id="21238" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21241" class="Symbol">(</a><a id="21242" href="/lia/part5/AExp/#21175" class="Bound">a</a> <a id="21244" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21247" href="/lia/part5/AExp/#21177" class="Bound">b</a> <a id="21249" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21252" class="Number">1</a> <a id="21254" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21257" class="Number">0</a><a id="21258" class="Symbol">)</a>
  <a id="21262" href="/lia/part5/AExp/#21165" class="Function">magic</a> <a id="21268" class="Symbol">=</a> <a id="21270" href="Data.Nat.Tactic.RingSolver.html#1044" class="Macro">solve-∀</a></pre>

<h2 id="strong-normalisation-first-proof">
<a class="anchor" href="#strong-normalisation-first-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (first proof)</h2>

<pre class="Agda"><a id="binSize"></a><a id="21326" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21334" class="Symbol">:</a> <a id="21336" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="21340" class="Symbol">→</a> <a id="21342" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="21344" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21352" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="21354" class="Symbol">=</a> <a id="21356" class="Number">0</a>
<a id="21358" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21366" class="Symbol">(</a><a id="21367" href="/lia/part5/AExp/#21367" class="Bound">a</a> <a id="21369" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="21370" class="Symbol">)</a> <a id="21372" class="Symbol">=</a> <a id="21374" class="Number">1</a> <a id="21376" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21379" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21387" href="/lia/part5/AExp/#21367" class="Bound">a</a>
<a id="21389" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21397" class="Symbol">(</a><a id="21398" href="/lia/part5/AExp/#21398" class="Bound">a</a> <a id="21400" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="21401" class="Symbol">)</a> <a id="21403" class="Symbol">=</a> <a id="21405" class="Number">1</a> <a id="21407" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21410" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21418" href="/lia/part5/AExp/#21398" class="Bound">a</a>
<a id="21420" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21428" class="Symbol">(</a><a id="21429" href="/lia/part5/AExp/#21429" class="Bound">a</a> <a id="21431" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="21433" href="/lia/part5/AExp/#21433" class="Bound">b</a><a id="21434" class="Symbol">)</a> <a id="21436" class="Symbol">=</a> <a id="21438" class="Number">1</a> <a id="21440" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21443" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21451" href="/lia/part5/AExp/#21429" class="Bound">a</a> <a id="21453" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21456" href="/lia/part5/AExp/#21326" class="Function">binSize</a> <a id="21464" href="/lia/part5/AExp/#21433" class="Bound">b</a>

<a id="21467" class="Comment">-- transitive closure</a>
<a id="21489" class="Comment">-- infix 4 _↝*_</a>
<a id="21505" class="Comment">-- data _↝*_ : Bin → Bin → Set where</a>
<a id="21542" class="Comment">--     stop : ∀ {a} → a ↝* a</a>
<a id="21571" class="Comment">--     one : ∀ {a b g} → a ↝ b → b ↝* g → a ↝* g</a>

<a id="21621" class="Comment">-- strong normalisation</a>
<a id="21645" class="Comment">-- we define a measure that is strictly decreasing on each computation step</a>

<a id="μ"></a><a id="21722" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21724" class="Symbol">:</a> <a id="21726" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="21730" class="Symbol">→</a> <a id="21732" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>
<a id="21734" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21736" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="21738" class="Symbol">=</a> <a id="21740" class="Number">0</a>
<a id="21742" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21744" class="Symbol">(</a><a id="21745" href="/lia/part5/AExp/#21745" class="Bound">a</a> <a id="21747" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="21748" class="Symbol">)</a> <a id="21750" class="Symbol">=</a> <a id="21752" class="Number">2</a> <a id="21754" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21757" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21759" href="/lia/part5/AExp/#21745" class="Bound">a</a>
<a id="21761" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21763" class="Symbol">(</a><a id="21764" href="/lia/part5/AExp/#21764" class="Bound">a</a> <a id="21766" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="21767" class="Symbol">)</a> <a id="21769" class="Symbol">=</a> <a id="21771" class="Number">4</a> <a id="21773" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21776" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21778" href="/lia/part5/AExp/#21764" class="Bound">a</a>
<a id="21780" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21782" class="Symbol">(</a><a id="21783" href="/lia/part5/AExp/#21783" class="Bound">a</a> <a id="21785" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="21787" href="/lia/part5/AExp/#21787" class="Bound">b</a><a id="21788" class="Symbol">)</a> <a id="21790" class="Symbol">=</a> <a id="21792" class="Number">1</a> <a id="21794" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21797" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21799" href="/lia/part5/AExp/#21783" class="Bound">a</a> <a id="21801" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="21804" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21806" href="/lia/part5/AExp/#21787" class="Bound">b</a>

<a id="μ-wf"></a><a id="21809" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21814" class="Symbol">:</a> <a id="21816" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="21818" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="21820" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="21822" class="Symbol">→</a>
       <a id="21831" class="Comment">---------</a>
       <a id="21848" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21850" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="21852" href="/lia/part0/Naturals/#1314" class="Function Operator">&lt;</a> <a id="21854" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="21856" href="/lia/part5/AExp/#19512" class="Generalizable">a</a>

<a id="21859" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21864" class="Symbol">(</a><a id="21865" href="/lia/part5/AExp/#19765" class="InductiveConstructor">↝𝟬</a> <a id="21868" href="/lia/part5/AExp/#21868" class="Bound">e↝f</a><a id="21871" class="Symbol">)</a> <a id="21873" class="Keyword">with</a> <a id="21878" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21883" href="/lia/part5/AExp/#21868" class="Bound">e↝f</a>
<a id="21887" class="Symbol">...</a> <a id="21891" class="Symbol">|</a> <a id="21893" href="/lia/part5/AExp/#21893" class="Bound">μf&lt;μe</a> <a id="21899" class="Symbol">=</a> <a id="21901" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21905" class="Symbol">(</a><a id="21906" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21910" href="/lia/part5/AExp/#21893" class="Bound">μf&lt;μe</a><a id="21915" class="Symbol">)</a>

<a id="21918" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21923" class="Symbol">(</a><a id="21924" href="/lia/part5/AExp/#19818" class="InductiveConstructor">↝𝟭</a> <a id="21927" href="/lia/part5/AExp/#21927" class="Bound">e↝f</a><a id="21930" class="Symbol">)</a> <a id="21932" class="Keyword">with</a> <a id="21937" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21942" href="/lia/part5/AExp/#21927" class="Bound">e↝f</a>
<a id="21946" class="Symbol">...</a> <a id="21950" class="Symbol">|</a> <a id="21952" href="/lia/part5/AExp/#21952" class="Bound">μf&lt;μe</a> <a id="21958" class="Symbol">=</a> <a id="21960" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21964" class="Symbol">(</a><a id="21965" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21969" class="Symbol">(</a><a id="21970" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21974" class="Symbol">(</a><a id="21975" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="21979" href="/lia/part5/AExp/#21952" class="Bound">μf&lt;μe</a><a id="21984" class="Symbol">)))</a>

<a id="21989" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="21994" href="/lia/part5/AExp/#19871" class="InductiveConstructor">↝$L</a> <a id="21998" class="Symbol">=</a> <a id="22000" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="22008" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22013" class="DottedPattern Symbol">.{</a><a id="22015" href="/lia/part5/AExp/#22023" class="DottedPattern Bound">a</a> <a id="22017" href="/lia/part5/AExp/#1215" class="DottedPattern InductiveConstructor Operator">+</a> <a id="22019" href="/lia/part5/AExp/#19395" class="DottedPattern InductiveConstructor">$</a><a id="22020" class="DottedPattern Symbol">}</a> <a id="22022" class="Symbol">{</a><a id="22023" href="/lia/part5/AExp/#22023" class="Bound">a</a><a id="22024" class="Symbol">}</a> <a id="22026" href="/lia/part5/AExp/#19908" class="InductiveConstructor">↝$R</a> <a id="22030" class="Keyword">rewrite</a> <a id="22038" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="22044" class="Symbol">(</a><a id="22045" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22047" href="/lia/part5/AExp/#22023" class="Bound">a</a><a id="22048" class="Symbol">)</a> <a id="22050" class="Symbol">=</a> <a id="22052" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a>

<a id="22060" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22065" class="Symbol">(</a><a id="22066" href="/lia/part5/AExp/#19945" class="InductiveConstructor">↝+L</a> <a id="22070" href="/lia/part5/AExp/#22070" class="Bound">e↝e'</a><a id="22074" class="Symbol">)</a> <a id="22076" class="Keyword">with</a> <a id="22081" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22086" href="/lia/part5/AExp/#22070" class="Bound">e↝e'</a>
<a id="22091" class="Symbol">...</a> <a id="22095" class="Symbol">|</a> <a id="22097" href="/lia/part5/AExp/#22097" class="Bound">μe'&lt;μe</a> <a id="22104" class="Symbol">=</a> <a id="22106" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22110" class="Symbol">(</a><a id="22111" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="22120" href="/lia/part5/AExp/#22097" class="Bound">μe'&lt;μe</a><a id="22126" class="Symbol">)</a>

<a id="22129" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22134" class="Symbol">(</a><a id="22135" href="/lia/part5/AExp/#20009" class="InductiveConstructor">↝+R</a> <a id="22139" href="/lia/part5/AExp/#22139" class="Bound">f↝f'</a><a id="22143" class="Symbol">)</a> <a id="22145" class="Keyword">with</a> <a id="22150" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22155" href="/lia/part5/AExp/#22139" class="Bound">f↝f'</a>
<a id="22160" class="Symbol">...</a> <a id="22164" class="Symbol">|</a> <a id="22166" href="/lia/part5/AExp/#22166" class="Bound">μf'&lt;μf</a> <a id="22173" class="Symbol">=</a> <a id="22175" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22179" class="Symbol">(</a><a id="22180" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="22190" href="/lia/part5/AExp/#22166" class="Bound">μf'&lt;μf</a><a id="22196" class="Symbol">)</a>

<a id="22199" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22204" class="Symbol">{</a><a id="22205" href="/lia/part5/AExp/#22205" class="Bound">a</a><a id="22206" class="Symbol">}</a> <a id="22208" class="Symbol">{</a><a id="22209" href="/lia/part5/AExp/#22209" class="Bound">b</a><a id="22210" class="Symbol">}</a> <a id="22212" href="/lia/part5/AExp/#20081" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="22217" class="Symbol">=</a> <a id="22219" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22223" class="Symbol">(</a><a id="22224" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22228" class="Symbol">(</a><a id="22229" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22233" class="Symbol">(</a><a id="22234" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="22244" href="/lia/part0/Naturals/#3370" class="Function">n&lt;suc2n</a><a id="22251" class="Symbol">)))</a>

<a id="22256" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22261" href="/lia/part5/AExp/#22261" class="Bound">a</a><a id="22262" class="Symbol">@{</a><a id="22264" href="/lia/part5/AExp/#19439" class="InductiveConstructor">Add</a> <a id="22268" class="Symbol">(</a><a id="22269" href="/lia/part5/AExp/#22269" class="Bound">a₁</a> <a id="22272" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="22273" class="Symbol">)</a> <a id="22275" class="Symbol">(</a><a id="22276" href="/lia/part5/AExp/#22276" class="Bound">b₁</a> <a id="22279" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="22280" class="Symbol">)}</a> <a id="22283" class="Symbol">{</a><a id="22284" href="/lia/part5/AExp/#22284" class="Bound">b</a><a id="22285" class="Symbol">}</a> <a id="22287" href="/lia/part5/AExp/#20144" class="InductiveConstructor">↝+𝟬𝟭</a>
  <a id="22294" class="Keyword">rewrite</a>
    <a id="22306" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="22312" class="Symbol">(</a><a id="22313" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22315" href="/lia/part5/AExp/#22261" class="Bound">a</a><a id="22316" class="Symbol">)</a> <a id="22318" class="Symbol">|</a>
    <a id="22324" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="22330" class="Symbol">(</a><a id="22331" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22333" href="/lia/part5/AExp/#22284" class="Bound">b</a><a id="22334" class="Symbol">)</a> <a id="22336" class="Symbol">|</a>
    <a id="22342" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22352" class="Symbol">{</a><a id="22353" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22355" href="/lia/part5/AExp/#22269" class="Bound">a₁</a><a id="22357" class="Symbol">}</a> <a id="22359" class="Symbol">{</a><a id="22360" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22364" class="Symbol">(</a><a id="22365" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22369" class="Symbol">(</a><a id="22370" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22374" class="Symbol">(</a><a id="22375" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22377" href="/lia/part5/AExp/#22276" class="Bound">b₁</a><a id="22379" class="Symbol">)))}</a> <a id="22384" class="Symbol">|</a>
    <a id="22390" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22400" class="Symbol">{</a><a id="22401" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22403" href="/lia/part5/AExp/#22269" class="Bound">a₁</a><a id="22405" class="Symbol">}</a> <a id="22407" class="Symbol">{</a><a id="22408" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22412" class="Symbol">(</a><a id="22413" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22417" class="Symbol">(</a><a id="22418" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22420" href="/lia/part5/AExp/#22276" class="Bound">b₁</a><a id="22422" class="Symbol">))}</a> <a id="22426" class="Symbol">|</a>
    <a id="22432" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22442" class="Symbol">{</a><a id="22443" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22445" href="/lia/part5/AExp/#22269" class="Bound">a₁</a><a id="22447" class="Symbol">}</a> <a id="22449" class="Symbol">{</a><a id="22450" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22454" class="Symbol">(</a><a id="22455" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22457" href="/lia/part5/AExp/#22276" class="Bound">b₁</a><a id="22459" class="Symbol">)}</a> <a id="22462" class="Symbol">|</a>
    <a id="22468" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22478" class="Symbol">{</a><a id="22479" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22481" href="/lia/part5/AExp/#22269" class="Bound">a₁</a><a id="22483" class="Symbol">}</a> <a id="22485" class="Symbol">{</a><a id="22486" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22488" href="/lia/part5/AExp/#22276" class="Bound">b₁</a><a id="22490" class="Symbol">}</a>
  <a id="22494" class="Symbol">=</a> <a id="22496" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22500" class="Symbol">(</a><a id="22501" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22505" class="Symbol">(</a><a id="22506" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22510" class="Symbol">(</a><a id="22511" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22515" class="Symbol">(</a><a id="22516" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22520" class="Symbol">(</a><a id="22521" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22525" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="22531" class="Symbol">)))))</a>

<a id="22538" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22543" href="/lia/part5/AExp/#22543" class="Bound">a</a><a id="22544" class="Symbol">@{</a><a id="22546" href="/lia/part5/AExp/#19439" class="InductiveConstructor">Add</a> <a id="22550" class="Symbol">(</a><a id="22551" href="/lia/part5/AExp/#22551" class="Bound">a₁</a> <a id="22554" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="22555" class="Symbol">)</a> <a id="22557" class="Symbol">(</a><a id="22558" href="/lia/part5/AExp/#22558" class="Bound">b₁</a> <a id="22561" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="22562" class="Symbol">)}</a> <a id="22565" class="Symbol">{</a><a id="22566" href="/lia/part5/AExp/#22566" class="Bound">b</a><a id="22567" class="Symbol">}</a> <a id="22569" href="/lia/part5/AExp/#20207" class="InductiveConstructor">↝+𝟭𝟬</a>
  <a id="22576" class="Keyword">rewrite</a>
    <a id="22588" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="22594" class="Symbol">(</a><a id="22595" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22597" href="/lia/part5/AExp/#22543" class="Bound">a</a><a id="22598" class="Symbol">)</a> <a id="22600" class="Symbol">|</a>
    <a id="22606" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="22612" class="Symbol">(</a><a id="22613" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22615" href="/lia/part5/AExp/#22566" class="Bound">b</a><a id="22616" class="Symbol">)</a> <a id="22618" class="Symbol">|</a>
    <a id="22624" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22634" class="Symbol">{</a><a id="22635" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22637" href="/lia/part5/AExp/#22551" class="Bound">a₁</a><a id="22639" class="Symbol">}</a> <a id="22641" class="Symbol">{</a><a id="22642" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22646" class="Symbol">(</a><a id="22647" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22649" href="/lia/part5/AExp/#22558" class="Bound">b₁</a><a id="22651" class="Symbol">)}</a> <a id="22654" class="Symbol">|</a>
    <a id="22660" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="22670" class="Symbol">{</a><a id="22671" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22673" href="/lia/part5/AExp/#22551" class="Bound">a₁</a><a id="22675" class="Symbol">}</a> <a id="22677" class="Symbol">{</a><a id="22678" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22680" href="/lia/part5/AExp/#22558" class="Bound">b₁</a><a id="22682" class="Symbol">}</a>
  <a id="22686" class="Symbol">=</a> <a id="22688" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22692" class="Symbol">(</a><a id="22693" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22697" class="Symbol">(</a><a id="22698" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22702" class="Symbol">(</a><a id="22703" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22707" class="Symbol">(</a><a id="22708" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22712" class="Symbol">(</a><a id="22713" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="22717" href="/lia/part0/Naturals/#1570" class="Function">n≤sucn</a><a id="22723" class="Symbol">)))))</a>

<a id="22730" href="/lia/part5/AExp/#21809" class="Function">μ-wf</a> <a id="22735" href="/lia/part5/AExp/#22735" class="Bound">a</a><a id="22736" class="Symbol">@{</a><a id="22738" href="/lia/part5/AExp/#19439" class="InductiveConstructor">Add</a> <a id="22742" class="Symbol">(</a><a id="22743" href="/lia/part5/AExp/#22743" class="Bound">a₁</a> <a id="22746" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="22747" class="Symbol">)</a> <a id="22749" class="Symbol">(</a><a id="22750" href="/lia/part5/AExp/#22750" class="Bound">b₁</a> <a id="22753" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="22754" class="Symbol">)}</a> <a id="22757" class="Symbol">{</a><a id="22758" href="/lia/part5/AExp/#22758" class="Bound">b</a><a id="22759" class="Symbol">}</a> <a id="22761" href="/lia/part5/AExp/#20270" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="22766" class="Symbol">=</a> <a id="22768" href="/lia/part5/AExp/#22940" class="Function">goal</a> <a id="22773" class="Keyword">where</a>

  <a id="22782" href="/lia/part5/AExp/#22782" class="Function">magic</a> <a id="22788" class="Symbol">:</a> <a id="22790" class="Symbol">∀</a> <a id="22792" href="/lia/part5/AExp/#22792" class="Bound">a</a> <a id="22794" href="/lia/part5/AExp/#22794" class="Bound">b</a> <a id="22796" class="Symbol">→</a>
      <a id="22804" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22808" class="Symbol">(</a><a id="22809" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22813" class="Symbol">(</a><a id="22814" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22818" class="Symbol">(</a><a id="22819" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22823" class="Symbol">(</a><a id="22824" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22828" class="Symbol">(</a><a id="22829" href="/lia/part5/AExp/#22792" class="Bound">a</a> <a id="22831" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="22834" href="/lia/part5/AExp/#22794" class="Bound">b</a> <a id="22836" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="22839" class="Number">4</a><a id="22840" class="Symbol">)))))</a> <a id="22846" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a>
      <a id="22854" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22858" class="Symbol">(</a><a id="22859" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22863" class="Symbol">(</a><a id="22864" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22868" class="Symbol">(</a><a id="22869" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22873" class="Symbol">(</a><a id="22874" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22878" class="Symbol">(</a><a id="22879" href="/lia/part5/AExp/#22792" class="Bound">a</a> <a id="22881" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="22884" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22888" class="Symbol">(</a><a id="22889" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22893" class="Symbol">(</a><a id="22894" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22898" class="Symbol">(</a><a id="22899" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22903" href="/lia/part5/AExp/#22794" class="Bound">b</a><a id="22904" class="Symbol">))))))))</a>
  <a id="22915" href="/lia/part5/AExp/#22782" class="Function">magic</a> <a id="22921" class="Symbol">=</a> <a id="22923" class="Symbol">{! solve-∀ !}</a>

  <a id="22940" href="/lia/part5/AExp/#22940" class="Function">goal</a> <a id="22945" class="Symbol">:</a> <a id="22947" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22951" class="Symbol">(</a><a id="22952" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22956" class="Symbol">(</a><a id="22957" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22961" class="Symbol">(</a><a id="22962" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22966" class="Symbol">(</a><a id="22967" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="22971" class="Symbol">(</a><a id="22972" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22974" href="/lia/part5/AExp/#22743" class="Bound">a₁</a> <a id="22977" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="22980" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="22982" href="/lia/part5/AExp/#22750" class="Bound">b₁</a> <a id="22985" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="22988" class="Number">4</a><a id="22989" class="Symbol">)))))</a> <a id="22995" href="/lia/part0/Naturals/#798" class="Datatype Operator">≤</a>
         <a id="23006" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23010" class="Symbol">(</a><a id="23011" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23015" class="Symbol">(</a><a id="23016" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23020" class="Symbol">(</a><a id="23021" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23025" class="Symbol">(</a><a id="23026" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23030" class="Symbol">(</a><a id="23031" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="23033" href="/lia/part5/AExp/#22743" class="Bound">a₁</a> <a id="23036" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23039" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23043" class="Symbol">(</a><a id="23044" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23048" class="Symbol">(</a><a id="23049" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23053" class="Symbol">(</a><a id="23054" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="23058" class="Symbol">(</a><a id="23059" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="23061" href="/lia/part5/AExp/#22750" class="Bound">b₁</a><a id="23063" class="Symbol">)))))))))</a>
  <a id="23075" href="/lia/part5/AExp/#22940" class="Function">goal</a> <a id="23080" class="Keyword">rewrite</a> <a id="23088" href="/lia/part5/AExp/#22782" class="Function">magic</a> <a id="23094" class="Symbol">(</a><a id="23095" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="23097" href="/lia/part5/AExp/#22743" class="Bound">a₁</a><a id="23099" class="Symbol">)</a> <a id="23101" class="Symbol">(</a><a id="23102" href="/lia/part5/AExp/#21722" class="Function">μ</a> <a id="23104" href="/lia/part5/AExp/#22750" class="Bound">b₁</a><a id="23106" class="Symbol">)</a> <a id="23108" class="Symbol">=</a> <a id="23110" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<h2 id="strong-normalisation-second-proof">
<a class="anchor" href="#strong-normalisation-second-proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong normalisation (second proof)</h2>

<p>We prove strong normalisation by well-founded induction on a
lexicograpic order.</p>

<pre class="Agda"><a id="zeroes"></a><a id="23248" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="ones"></a><a id="23255" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="dollars"></a><a id="23260" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23268" class="Symbol">:</a> <a id="23270" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="23274" class="Symbol">→</a> <a id="23276" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="23279" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23286" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="23288" class="Symbol">=</a> <a id="23290" class="Number">0</a>
<a id="23292" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23299" class="Symbol">(</a><a id="23300" href="/lia/part5/AExp/#23300" class="Bound">a</a> <a id="23302" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="23303" class="Symbol">)</a> <a id="23305" class="Symbol">=</a> <a id="23307" class="Number">1</a> <a id="23309" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23312" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23319" href="/lia/part5/AExp/#23300" class="Bound">a</a>
<a id="23321" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23328" class="Symbol">(</a><a id="23329" href="/lia/part5/AExp/#23329" class="Bound">a</a> <a id="23331" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="23332" class="Symbol">)</a> <a id="23334" class="Symbol">=</a> <a id="23336" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23343" href="/lia/part5/AExp/#23329" class="Bound">a</a>
<a id="23345" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23352" class="Symbol">(</a><a id="23353" href="/lia/part5/AExp/#23353" class="Bound">a</a> <a id="23355" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="23357" href="/lia/part5/AExp/#23357" class="Bound">b</a><a id="23358" class="Symbol">)</a> <a id="23360" class="Symbol">=</a> <a id="23362" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23369" href="/lia/part5/AExp/#23353" class="Bound">a</a> <a id="23371" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23374" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23381" href="/lia/part5/AExp/#23357" class="Bound">b</a>

<a id="23384" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23389" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="23391" class="Symbol">=</a> <a id="23393" class="Number">0</a>
<a id="23395" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23400" class="Symbol">(</a><a id="23401" href="/lia/part5/AExp/#23401" class="Bound">a</a> <a id="23403" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="23404" class="Symbol">)</a> <a id="23406" class="Symbol">=</a> <a id="23408" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23413" href="/lia/part5/AExp/#23401" class="Bound">a</a>
<a id="23415" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23420" class="Symbol">(</a><a id="23421" href="/lia/part5/AExp/#23421" class="Bound">a</a> <a id="23423" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="23424" class="Symbol">)</a> <a id="23426" class="Symbol">=</a> <a id="23428" class="Number">1</a> <a id="23430" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23433" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23438" href="/lia/part5/AExp/#23421" class="Bound">a</a>
<a id="23440" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23445" class="Symbol">(</a><a id="23446" href="/lia/part5/AExp/#23446" class="Bound">a</a> <a id="23448" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="23450" href="/lia/part5/AExp/#23450" class="Bound">b</a><a id="23451" class="Symbol">)</a> <a id="23453" class="Symbol">=</a> <a id="23455" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23460" href="/lia/part5/AExp/#23446" class="Bound">a</a> <a id="23462" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23465" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23470" href="/lia/part5/AExp/#23450" class="Bound">b</a>

<a id="23473" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23481" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="23483" class="Symbol">=</a> <a id="23485" class="Number">1</a>
<a id="23487" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23495" class="Symbol">(</a><a id="23496" href="/lia/part5/AExp/#23496" class="Bound">a</a> <a id="23498" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="23499" class="Symbol">)</a> <a id="23501" class="Symbol">=</a> <a id="23503" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23511" href="/lia/part5/AExp/#23496" class="Bound">a</a>
<a id="23513" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23521" class="Symbol">(</a><a id="23522" href="/lia/part5/AExp/#23522" class="Bound">a</a> <a id="23524" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="23525" class="Symbol">)</a> <a id="23527" class="Symbol">=</a> <a id="23529" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23537" href="/lia/part5/AExp/#23522" class="Bound">a</a>
<a id="23539" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23547" class="Symbol">(</a><a id="23548" href="/lia/part5/AExp/#23548" class="Bound">a</a> <a id="23550" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="23552" href="/lia/part5/AExp/#23552" class="Bound">b</a><a id="23553" class="Symbol">)</a> <a id="23555" class="Symbol">=</a> <a id="23557" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23565" href="/lia/part5/AExp/#23548" class="Bound">a</a> <a id="23567" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="23570" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23578" href="/lia/part5/AExp/#23552" class="Bound">b</a>

<a id="Triple"></a><a id="23581" href="/lia/part5/AExp/#23581" class="Function">Triple</a> <a id="23588" class="Symbol">=</a> <a id="23590" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="23592" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="23594" href="/lia/part0/Naturals/#301" class="Function">ℕ</a> <a id="23596" href="/lia/part0/Logic/#1770" class="Record Operator">×</a> <a id="23598" href="/lia/part0/Naturals/#301" class="Function">ℕ</a>

<a id="triple"></a><a id="23601" href="/lia/part5/AExp/#23601" class="Function">triple</a> <a id="23608" class="Symbol">:</a> <a id="23610" href="/lia/part5/AExp/#19377" class="Datatype">Bin</a> <a id="23614" class="Symbol">→</a> <a id="23616" href="/lia/part5/AExp/#23581" class="Function">Triple</a>
<a id="23623" href="/lia/part5/AExp/#23601" class="Function">triple</a> <a id="23630" href="/lia/part5/AExp/#23630" class="Bound">a</a> <a id="23632" class="Symbol">=</a> <a id="23634" class="Symbol">(</a><a id="23635" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="23640" href="/lia/part5/AExp/#23630" class="Bound">a</a> <a id="23642" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="23644" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="23651" href="/lia/part5/AExp/#23630" class="Bound">a</a> <a id="23653" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="23655" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="23663" href="/lia/part5/AExp/#23630" class="Bound">a</a><a id="23664" class="Symbol">)</a>

<a id="_≺_"></a><a id="23667" href="/lia/part5/AExp/#23667" class="Function Operator">_≺_</a> <a id="23671" class="Symbol">:</a> <a id="23673" href="/lia/part5/AExp/#23581" class="Function">Triple</a> <a id="23680" class="Symbol">→</a> <a id="23682" href="/lia/part5/AExp/#23581" class="Function">Triple</a> <a id="23689" class="Symbol">→</a> <a id="23691" class="PrimitiveType">Set</a>
<a id="23695" href="/lia/part5/AExp/#23667" class="Function Operator">_≺_</a> <a id="23699" class="Symbol">=</a> <a id="23701" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="23705" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="23710" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a> <a id="23714" href="/lia/part0/WellFounded/#1187" class="Function Operator">×ₗₑₓ</a> <a id="23719" href="/lia/part0/Naturals/#1314" class="Function Operator">_&lt;_</a>

<a id="wf-≺"></a><a id="23724" href="/lia/part5/AExp/#23724" class="Function">wf-≺</a> <a id="23729" class="Symbol">:</a> <a id="23731" href="/lia/part0/WellFounded/#548" class="Function">WellFounded</a> <a id="23743" href="/lia/part5/AExp/#23667" class="Function Operator">_≺_</a>
<a id="23747" href="/lia/part5/AExp/#23724" class="Function">wf-≺</a> <a id="23752" class="Symbol">=</a> <a id="23754" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="23761" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="23766" class="Symbol">(</a><a id="23767" href="/lia/part0/WellFounded/#1350" class="Function">lex-wf</a> <a id="23774" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a> <a id="23779" href="/lia/part0/WellFounded/#654" class="Function">&lt;-wf</a><a id="23783" class="Symbol">)</a>

<a id="triple-mon"></a><a id="23786" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="23797" class="Symbol">:</a> <a id="23799" href="/lia/part5/AExp/#19512" class="Generalizable">a</a> <a id="23801" href="/lia/part5/AExp/#19734" class="Datatype Operator">↝</a> <a id="23803" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="23805" class="Symbol">→</a>
             <a id="23820" class="Comment">-------------------</a>
             <a id="23853" href="/lia/part5/AExp/#23601" class="Function">triple</a> <a id="23860" href="/lia/part5/AExp/#19517" class="Generalizable">b</a> <a id="23862" href="/lia/part5/AExp/#23667" class="Function Operator">≺</a> <a id="23864" href="/lia/part5/AExp/#23601" class="Function">triple</a> <a id="23871" href="/lia/part5/AExp/#19512" class="Generalizable">a</a>
             
<a id="23887" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="23898" class="Symbol">(</a><a id="23899" href="/lia/part5/AExp/#19765" class="InductiveConstructor">↝𝟬</a> <a id="23902" href="/lia/part5/AExp/#23902" class="Bound">δ</a><a id="23903" class="Symbol">)</a> <a id="23905" class="Keyword">with</a> <a id="23910" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="23921" href="/lia/part5/AExp/#23902" class="Bound">δ</a>
<a id="23923" class="Symbol">...</a> <a id="23927" class="Symbol">|</a> <a id="23929" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="23934" href="/lia/part5/AExp/#23934" class="Bound">1s</a> <a id="23937" class="Symbol">=</a> <a id="23939" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="23944" href="/lia/part5/AExp/#23934" class="Bound">1s</a>
<a id="23947" class="Symbol">...</a> <a id="23951" class="Symbol">|</a> <a id="23953" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="23959" class="Symbol">(</a><a id="23960" href="/lia/part5/AExp/#23960" class="Bound">1s</a> <a id="23963" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="23965" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="23970" href="/lia/part5/AExp/#23970" class="Bound">0s</a><a id="23972" class="Symbol">)</a> <a id="23974" class="Symbol">=</a> <a id="23976" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="23982" class="Symbol">(</a><a id="23983" href="/lia/part5/AExp/#23960" class="Bound">1s</a> <a id="23986" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="23988" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="23993" class="Symbol">(</a><a id="23994" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="23998" href="/lia/part5/AExp/#23970" class="Bound">0s</a><a id="24000" class="Symbol">))</a>
<a id="24003" class="Symbol">...</a> <a id="24007" class="Symbol">|</a> <a id="24009" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24015" class="Symbol">(</a><a id="24016" href="/lia/part5/AExp/#24016" class="Bound">1s</a> <a id="24019" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24021" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24027" class="Symbol">(</a><a id="24028" href="/lia/part5/AExp/#24028" class="Bound">0s</a> <a id="24031" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24033" href="/lia/part5/AExp/#24033" class="Bound">$s</a><a id="24035" class="Symbol">))</a> <a id="24038" class="Symbol">=</a> <a id="24040" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24046" class="Symbol">(</a><a id="24047" href="/lia/part5/AExp/#24016" class="Bound">1s</a> <a id="24050" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24052" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24058" class="Symbol">(</a><a id="24059" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="24064" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24068" href="/lia/part5/AExp/#24028" class="Bound">0s</a> <a id="24071" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24073" href="/lia/part5/AExp/#24033" class="Bound">$s</a><a id="24075" class="Symbol">))</a>

<a id="24079" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24090" class="Symbol">(</a><a id="24091" href="/lia/part5/AExp/#19818" class="InductiveConstructor">↝𝟭</a> <a id="24094" href="/lia/part5/AExp/#24094" class="Bound">δ</a><a id="24095" class="Symbol">)</a> <a id="24097" class="Keyword">with</a> <a id="24102" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24113" href="/lia/part5/AExp/#24094" class="Bound">δ</a>
<a id="24115" class="Symbol">...</a> <a id="24119" class="Symbol">|</a> <a id="24121" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24126" href="/lia/part5/AExp/#24126" class="Bound">1s</a> <a id="24129" class="Symbol">=</a> <a id="24131" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24136" class="Symbol">(</a><a id="24137" href="/lia/part0/Naturals/#862" class="InductiveConstructor">s≤s</a> <a id="24141" href="/lia/part5/AExp/#24126" class="Bound">1s</a><a id="24143" class="Symbol">)</a>
<a id="24145" class="Symbol">...</a> <a id="24149" class="Symbol">|</a> <a id="24151" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24157" class="Symbol">(</a><a id="24158" href="/lia/part5/AExp/#24158" class="Bound">1s</a> <a id="24161" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24163" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24168" href="/lia/part5/AExp/#24168" class="Bound">0s</a><a id="24170" class="Symbol">)</a> <a id="24172" class="Symbol">=</a> <a id="24174" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24180" class="Symbol">(</a><a id="24181" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="24186" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24190" href="/lia/part5/AExp/#24158" class="Bound">1s</a> <a id="24193" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24195" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24200" href="/lia/part5/AExp/#24168" class="Bound">0s</a><a id="24202" class="Symbol">)</a>
<a id="24204" class="Symbol">...</a> <a id="24208" class="Symbol">|</a> <a id="24210" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24216" class="Symbol">(</a><a id="24217" href="/lia/part5/AExp/#24217" class="Bound">1s</a> <a id="24220" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24222" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24228" class="Symbol">(</a><a id="24229" href="/lia/part5/AExp/#24229" class="Bound">0s</a> <a id="24232" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24234" href="/lia/part5/AExp/#24234" class="Bound">$s</a><a id="24236" class="Symbol">))</a> <a id="24239" class="Symbol">=</a> <a id="24241" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24247" class="Symbol">(</a><a id="24248" href="/lia/part0/Equality/#883" class="Function">cong</a> <a id="24253" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="24257" href="/lia/part5/AExp/#24217" class="Bound">1s</a> <a id="24260" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24262" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24268" class="Symbol">(</a><a id="24269" href="/lia/part5/AExp/#24229" class="Bound">0s</a> <a id="24272" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24274" href="/lia/part5/AExp/#24234" class="Bound">$s</a><a id="24276" class="Symbol">))</a>

<a id="24280" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24291" class="Symbol">{</a><a id="24292" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a> <a id="24294" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="24296" href="/lia/part5/AExp/#24296" class="Bound">b</a><a id="24297" class="Symbol">}</a> <a id="24299" href="/lia/part5/AExp/#19871" class="InductiveConstructor">↝$L</a> <a id="24303" class="Symbol">=</a> <a id="24305" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24311" class="Symbol">(</a><a id="24312" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24317" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24319" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24325" class="Symbol">(</a><a id="24326" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24331" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24333" href="/lia/part0/Naturals/#1490" class="Function">n&lt;sucn</a><a id="24339" class="Symbol">))</a>

<a id="24343" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24354" class="Symbol">{</a><a id="24355" href="/lia/part5/AExp/#24355" class="Bound">b</a> <a id="24357" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="24359" href="/lia/part5/AExp/#19395" class="InductiveConstructor">$</a><a id="24360" class="Symbol">}</a> <a id="24362" href="/lia/part5/AExp/#19908" class="InductiveConstructor">↝$R</a>
  <a id="24368" class="Keyword">rewrite</a>
    <a id="24380" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="24386" class="Symbol">(</a><a id="24387" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="24392" href="/lia/part5/AExp/#24355" class="Bound">b</a><a id="24393" class="Symbol">)</a> <a id="24395" class="Symbol">|</a>
    <a id="24401" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="24407" class="Symbol">(</a><a id="24408" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="24415" href="/lia/part5/AExp/#24355" class="Bound">b</a><a id="24416" class="Symbol">)</a> <a id="24418" class="Symbol">|</a>
    <a id="24424" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="24434" class="Symbol">{</a><a id="24435" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="24443" href="/lia/part5/AExp/#24355" class="Bound">b</a><a id="24444" class="Symbol">}</a> <a id="24446" class="Symbol">{</a><a id="24447" class="Number">0</a><a id="24448" class="Symbol">}</a> <a id="24450" class="Symbol">|</a>
    <a id="24456" href="/lia/part0/Naturals/#5270" class="Function">n+0≡n</a> <a id="24462" class="Symbol">(</a><a id="24463" href="/lia/part5/AExp/#23260" class="Function">dollars</a> <a id="24471" href="/lia/part5/AExp/#24355" class="Bound">b</a><a id="24472" class="Symbol">)</a> <a id="24474" class="Symbol">=</a> <a id="24476" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24482" class="Symbol">(</a><a id="24483" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24488" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24490" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24496" class="Symbol">(</a><a id="24497" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24502" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24504" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="24510" class="Symbol">))</a>

<a id="24514" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24525" class="Symbol">(</a><a id="24526" href="/lia/part5/AExp/#19945" class="InductiveConstructor">↝+L</a> <a id="24530" href="/lia/part5/AExp/#24530" class="Bound">δ</a><a id="24531" class="Symbol">)</a> <a id="24533" class="Keyword">with</a> <a id="24538" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24549" href="/lia/part5/AExp/#24530" class="Bound">δ</a>
<a id="24551" class="Symbol">...</a> <a id="24555" class="Symbol">|</a> <a id="24557" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24562" href="/lia/part5/AExp/#24562" class="Bound">1s</a> <a id="24565" class="Symbol">=</a> <a id="24567" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24572" class="Symbol">(</a><a id="24573" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="24582" href="/lia/part5/AExp/#24562" class="Bound">1s</a><a id="24584" class="Symbol">)</a>
<a id="24586" class="Symbol">...</a> <a id="24590" class="Symbol">|</a> <a id="24592" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24598" class="Symbol">(</a><a id="24599" href="/lia/part5/AExp/#24599" class="Bound">1s</a> <a id="24602" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24604" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24609" href="/lia/part5/AExp/#24609" class="Bound">0s</a><a id="24611" class="Symbol">)</a> <a id="24613" class="Keyword">rewrite</a> <a id="24621" href="/lia/part5/AExp/#24599" class="Bound">1s</a> <a id="24624" class="Symbol">=</a> <a id="24626" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24632" class="Symbol">(</a><a id="24633" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24638" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24640" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24645" class="Symbol">(</a><a id="24646" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="24655" href="/lia/part5/AExp/#24609" class="Bound">0s</a><a id="24657" class="Symbol">))</a>
<a id="24660" class="Symbol">...</a> <a id="24664" class="Symbol">|</a> <a id="24666" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24672" class="Symbol">(</a><a id="24673" href="/lia/part5/AExp/#24673" class="Bound">1s</a> <a id="24676" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24678" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24684" class="Symbol">(</a><a id="24685" href="/lia/part5/AExp/#24685" class="Bound">0s</a> <a id="24688" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24690" href="/lia/part5/AExp/#24690" class="Bound">$s</a><a id="24692" class="Symbol">))</a> <a id="24695" class="Keyword">rewrite</a> <a id="24703" href="/lia/part5/AExp/#24673" class="Bound">1s</a> <a id="24706" class="Symbol">|</a> <a id="24708" href="/lia/part5/AExp/#24685" class="Bound">0s</a> <a id="24711" class="Symbol">=</a> <a id="24713" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24719" class="Symbol">(</a><a id="24720" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24725" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24727" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24733" class="Symbol">(</a><a id="24734" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24739" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24741" href="/lia/part0/Naturals/#7215" class="Function">&lt;-+-left</a> <a id="24750" href="/lia/part5/AExp/#24690" class="Bound">$s</a><a id="24752" class="Symbol">))</a>

<a id="24756" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24767" class="Symbol">(</a><a id="24768" href="/lia/part5/AExp/#20009" class="InductiveConstructor">↝+R</a> <a id="24772" href="/lia/part5/AExp/#24772" class="Bound">δ</a><a id="24773" class="Symbol">)</a> <a id="24775" class="Keyword">with</a> <a id="24780" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="24791" href="/lia/part5/AExp/#24772" class="Bound">δ</a>
<a id="24793" class="Symbol">...</a> <a id="24797" class="Symbol">|</a> <a id="24799" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24804" href="/lia/part5/AExp/#24804" class="Bound">1s</a> <a id="24807" class="Symbol">=</a> <a id="24809" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24814" class="Symbol">(</a><a id="24815" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="24825" href="/lia/part5/AExp/#24804" class="Bound">1s</a><a id="24827" class="Symbol">)</a>
<a id="24829" class="Symbol">...</a> <a id="24833" class="Symbol">|</a> <a id="24835" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24841" class="Symbol">(</a><a id="24842" href="/lia/part5/AExp/#24842" class="Bound">1s</a> <a id="24845" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24847" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24852" href="/lia/part5/AExp/#24852" class="Bound">0s</a><a id="24854" class="Symbol">)</a> <a id="24856" class="Keyword">rewrite</a> <a id="24864" href="/lia/part5/AExp/#24842" class="Bound">1s</a> <a id="24867" class="Symbol">|</a> <a id="24869" href="/lia/part5/AExp/#24842" class="Bound">1s</a> <a id="24872" class="Symbol">=</a> <a id="24874" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24880" class="Symbol">(</a><a id="24881" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24886" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24888" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="24893" class="Symbol">(</a><a id="24894" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="24904" href="/lia/part5/AExp/#24852" class="Bound">0s</a><a id="24906" class="Symbol">))</a>
<a id="24909" class="Symbol">...</a> <a id="24913" class="Symbol">|</a> <a id="24915" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24921" class="Symbol">(</a><a id="24922" href="/lia/part5/AExp/#24922" class="Bound">1s</a> <a id="24925" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24927" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24933" class="Symbol">(</a><a id="24934" href="/lia/part5/AExp/#24934" class="Bound">0s</a> <a id="24937" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24939" href="/lia/part5/AExp/#24939" class="Bound">$s</a><a id="24941" class="Symbol">))</a> <a id="24944" class="Keyword">rewrite</a> <a id="24952" href="/lia/part5/AExp/#24922" class="Bound">1s</a> <a id="24955" class="Symbol">|</a> <a id="24957" href="/lia/part5/AExp/#24922" class="Bound">1s</a> <a id="24960" class="Symbol">|</a> <a id="24962" href="/lia/part5/AExp/#24934" class="Bound">0s</a> <a id="24965" class="Symbol">=</a> <a id="24967" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24973" class="Symbol">(</a><a id="24974" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24979" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24981" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="24987" class="Symbol">(</a><a id="24988" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="24993" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="24995" href="/lia/part0/Naturals/#7268" class="Function">&lt;-+-right</a> <a id="25005" href="/lia/part5/AExp/#24939" class="Bound">$s</a><a id="25007" class="Symbol">))</a>

<a id="25011" class="Comment">-- number of zeroes goes down</a>
<a id="25041" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="25052" class="Symbol">{</a><a id="25053" href="/lia/part5/AExp/#25053" class="Bound">a</a> <a id="25055" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="25057" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="25059" href="/lia/part5/AExp/#25059" class="Bound">b</a> <a id="25061" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="25062" class="Symbol">}</a> <a id="25064" href="/lia/part5/AExp/#20081" class="InductiveConstructor">↝+𝟬𝟬</a> <a id="25069" class="Keyword">rewrite</a> <a id="25077" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="25087" class="Symbol">{</a><a id="25088" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="25095" href="/lia/part5/AExp/#25053" class="Bound">a</a><a id="25096" class="Symbol">}</a> <a id="25098" class="Symbol">{</a><a id="25099" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="25106" href="/lia/part5/AExp/#25059" class="Bound">b</a><a id="25107" class="Symbol">}</a> <a id="25109" class="Symbol">=</a> <a id="25111" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="25117" class="Symbol">(</a> <a id="25119" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="25124" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25126" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="25131" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="25137" class="Symbol">)</a>

<a id="25140" class="Comment">-- number of zeroes goes down</a>
<a id="25170" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="25181" class="Symbol">{</a><a id="25182" href="/lia/part5/AExp/#25182" class="Bound">a</a> <a id="25184" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a> <a id="25186" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="25188" href="/lia/part5/AExp/#25188" class="Bound">b</a> <a id="25190" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="25191" class="Symbol">}</a> <a id="25193" href="/lia/part5/AExp/#20144" class="InductiveConstructor">↝+𝟬𝟭</a> <a id="25198" class="Keyword">rewrite</a> <a id="25206" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="25216" class="Symbol">{</a><a id="25217" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25222" href="/lia/part5/AExp/#25182" class="Bound">a</a><a id="25223" class="Symbol">}</a> <a id="25225" class="Symbol">{</a><a id="25226" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25231" href="/lia/part5/AExp/#25188" class="Bound">b</a><a id="25232" class="Symbol">}</a> <a id="25234" class="Symbol">=</a> <a id="25236" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="25242" class="Symbol">(</a> <a id="25244" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="25249" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25251" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="25256" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="25262" class="Symbol">)</a>

<a id="25265" class="Comment">-- number of zeroes goes down</a>
<a id="25295" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="25306" class="Symbol">{</a><a id="25307" href="/lia/part5/AExp/#25307" class="Bound">a</a> <a id="25309" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="25311" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="25313" href="/lia/part5/AExp/#25313" class="Bound">b</a> <a id="25315" href="/lia/part5/AExp/#19405" class="InductiveConstructor Operator">𝟬</a><a id="25316" class="Symbol">}</a> <a id="25318" href="/lia/part5/AExp/#20207" class="InductiveConstructor">↝+𝟭𝟬</a> <a id="25323" class="Keyword">rewrite</a> <a id="25331" href="/lia/part0/Naturals/#5437" class="Function">suc-lemma</a> <a id="25341" class="Symbol">{</a><a id="25342" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="25349" href="/lia/part5/AExp/#25307" class="Bound">a</a><a id="25350" class="Symbol">}</a> <a id="25352" class="Symbol">{</a><a id="25353" href="/lia/part5/AExp/#23248" class="Function">zeroes</a> <a id="25360" href="/lia/part5/AExp/#25313" class="Bound">b</a><a id="25361" class="Symbol">}</a> <a id="25363" class="Symbol">=</a> <a id="25365" href="/lia/part0/Logic/#2535" class="InductiveConstructor">right</a> <a id="25371" class="Symbol">(</a> <a id="25373" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="25378" href="/lia/part0/Logic/#1838" class="InductiveConstructor Operator">,</a> <a id="25380" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="25385" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a><a id="25391" class="Symbol">)</a>

<a id="25394" class="Comment">-- number of ones goes down</a>
<a id="25422" href="/lia/part5/AExp/#23786" class="Function">triple-mon</a> <a id="25433" class="Symbol">{</a><a id="25434" href="/lia/part5/AExp/#25434" class="Bound">a</a> <a id="25436" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a> <a id="25438" href="/lia/part5/AExp/#1215" class="InductiveConstructor Operator">+</a> <a id="25440" href="/lia/part5/AExp/#25440" class="Bound">b</a> <a id="25442" href="/lia/part5/AExp/#19422" class="InductiveConstructor Operator">𝟭</a><a id="25443" class="Symbol">}</a> <a id="25445" href="/lia/part5/AExp/#20270" class="InductiveConstructor">↝+𝟭𝟭</a> <a id="25450" class="Symbol">=</a> <a id="25452" href="/lia/part0/Logic/#2514" class="InductiveConstructor">left</a> <a id="25457" href="/lia/part5/AExp/#25549" class="Function">goal</a> <a id="25462" class="Keyword">where</a>

  <a id="25471" href="/lia/part5/AExp/#25471" class="Function">have</a> <a id="25476" class="Symbol">:</a> <a id="25478" class="Symbol">∀</a> <a id="25480" href="/lia/part5/AExp/#25480" class="Bound">a</a> <a id="25482" href="/lia/part5/AExp/#25482" class="Bound">b</a> <a id="25484" class="Symbol">→</a> <a id="25486" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25490" class="Symbol">(</a><a id="25491" href="/lia/part5/AExp/#25480" class="Bound">a</a> <a id="25493" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25496" href="/lia/part5/AExp/#25482" class="Bound">b</a> <a id="25498" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25501" class="Number">1</a><a id="25502" class="Symbol">)</a> <a id="25504" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="25506" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25510" class="Symbol">(</a><a id="25511" href="/lia/part5/AExp/#25480" class="Bound">a</a> <a id="25513" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25516" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25520" href="/lia/part5/AExp/#25482" class="Bound">b</a><a id="25521" class="Symbol">)</a>
  <a id="25525" href="/lia/part5/AExp/#25471" class="Function">have</a> <a id="25530" class="Symbol">=</a> <a id="25532" class="Symbol">{! solve-∀ !}</a>

  <a id="25549" href="/lia/part5/AExp/#25549" class="Function">goal</a> <a id="25554" class="Symbol">:</a> <a id="25556" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25560" class="Symbol">(</a><a id="25561" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25566" href="/lia/part5/AExp/#25434" class="Bound">a</a> <a id="25568" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25571" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25576" href="/lia/part5/AExp/#25440" class="Bound">b</a> <a id="25578" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25581" class="Number">1</a><a id="25582" class="Symbol">)</a> <a id="25584" href="/lia/part0/Naturals/#798" class="Datatype Operator">≤</a> <a id="25586" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25590" class="Symbol">(</a><a id="25591" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25596" href="/lia/part5/AExp/#25434" class="Bound">a</a> <a id="25598" href="/lia/part5/AExp/#177" class="Primitive Operator">+ℕ</a> <a id="25601" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="25605" class="Symbol">(</a><a id="25606" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25611" href="/lia/part5/AExp/#25440" class="Bound">b</a><a id="25612" class="Symbol">))</a>
  <a id="25617" href="/lia/part5/AExp/#25549" class="Function">goal</a> <a id="25622" class="Keyword">rewrite</a> <a id="25630" href="/lia/part5/AExp/#25471" class="Function">have</a> <a id="25635" class="Symbol">(</a><a id="25636" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25641" href="/lia/part5/AExp/#25434" class="Bound">a</a><a id="25642" class="Symbol">)</a> <a id="25644" class="Symbol">(</a><a id="25645" href="/lia/part5/AExp/#23255" class="Function">ones</a> <a id="25650" href="/lia/part5/AExp/#25440" class="Bound">b</a><a id="25651" class="Symbol">)</a> <a id="25653" class="Symbol">=</a> <a id="25655" href="/lia/part0/Naturals/#1008" class="Function">refl-≤</a></pre>

<div id="refs">

  <h1 id="references">
<a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

</div>

    </div>
  
    <header class="nav-header">
    <p style="text-align:center;">
        
        
        
        <a alt="Part" href="/lia/part5/index/">Part</a>
        &bullet;
        
        
        <a alt="Source code" href="https://github.com/lclem/lia/blob/main/src/part5/AExp.lagda.md">Source</a>
        
        
        
    </p>
</header>

    <p class="p-name"> Last-modified: Jan  6 22:23:35 2021 </p>
  </article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/lia/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Logic in Agda</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Lorenzo Clemente</li>
          <li><a class="u-email" href="mailto:clementelorenzo@gmail.com">clementelorenzo@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/lclem"><svg class="svg-icon"><use xlink:href="/lia/assets/minima-social-icons.svg#github"></use></svg> <span class="username">lclem</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>

<!-- Parse the Latex divs with Katex
<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex, {displayMode: false});
  });
  
  $("script[type='math/tex; mode=display']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
  });
</script>
-->

<script type="text/javascript" src="/lia/assets/hidebox.js"></script>
</body>

</html>
